"use strict";(self.webpackChunkvenus_jewellers=self.webpackChunkvenus_jewellers||[]).push([[179],{2011:(Pt,Re,B)=>{B.d(Re,{Dh:()=>Se,GT:()=>me,cc:()=>We,hO:()=>at,on:()=>te,pX:()=>ce,xv:()=>Ie});var S=B(4650),o=B(9260),q=B(4976);Pt=B.hmd(Pt);const he=["ngOnDestroy"],ce=(Je,Xe,ct,tt={})=>new Proxy(Je,{get:(Be,He)=>ct.runOutsideAngular(()=>{var ft;if(Je[He])return!(null===(ft=tt?.spy)||void 0===ft)&&ft.get&&tt.spy.get(He,Je[He]),Je[He];if(he.indexOf(He)>-1)return()=>{};const et=Xe.toPromise().then(At=>{const De=At&&At[He];return"function"==typeof De?De.bind(At):De&&De.then?De.then(Yt=>ct.run(()=>Yt)):ct.run(()=>De)});return new Proxy(()=>{},{get:(At,De)=>et[De],apply:(At,De,Yt)=>et.then(_t=>{var Dt;const Et=_t&&_t(...Yt);return!(null===(Dt=tt?.spy)||void 0===Dt)&&Dt.apply&&tt.spy.apply(He,Yt,Et),Et})})})}),me=(Je,Xe)=>{Xe.forEach(ct=>{Object.getOwnPropertyNames(ct.prototype||ct).forEach(tt=>{Object.defineProperty(Je.prototype,tt,Object.getOwnPropertyDescriptor(ct.prototype||ct,tt))})})};class be{constructor(Xe){return Xe}}const Se=new S.OlP("angularfire2.app.options"),Ie=new S.OlP("angularfire2.app.name");function te(Je,Xe,ct){const Be="object"==typeof ct&&ct||{};Be.name=Be.name||"string"==typeof ct&&ct||"[DEFAULT]";const ft=o.Z.apps.filter(et=>et&&et.name===Be.name)[0]||Xe.runOutsideAngular(()=>o.Z.initializeApp(Je,Be));try{JSON.stringify(Je)!==JSON.stringify(ft.options)&&ne("error",`${ft.name} Firebase App already initialized with different options${Pt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new be(ft)}const ne=(Je,...Xe)=>{(0,S.X6Q)()&&typeof console<"u"&&console[Je](...Xe)},de={provide:be,useFactory:te,deps:[Se,S.R0b,[new S.FiY,Ie]]};let at=(()=>{class Je{constructor(ct){o.Z.registerVersion("angularfire",q.q4.full,"core"),o.Z.registerVersion("angularfire",q.q4.full,"app-compat"),o.Z.registerVersion("angular",S.q4F.full,ct.toString())}static initializeApp(ct,tt){return{ngModule:Je,providers:[{provide:Se,useValue:ct},{provide:Ie,useValue:tt}]}}}return Je.\u0275fac=function(ct){return new(ct||Je)(S.LFG(S.Lbi))},Je.\u0275mod=S.oAB({type:Je}),Je.\u0275inj=S.cJS({providers:[de]}),Je})();function We(Je,Xe,ct,tt,Be){const[,He,ft]=globalThis.\u0275AngularfireInstanceCache.find(et=>et[0]===Je)||[];if(He)return function ht(Je,Xe){try{return Je.toString()===Xe.toString()}catch{return Je===Xe}}(Be,ft)||(Ue("error",`${Xe} was already initialized on the ${ct} Firebase App with different settings.${Nt?" You may need to reload as Firebase is not HMR aware.":""}`),Ue("warn",{is:Be,was:ft})),He;{const et=tt();return globalThis.\u0275AngularfireInstanceCache.push([Je,et,Be]),et}}const Nt=!!Pt.hot,Ue=(Je,...Xe)=>{(0,S.X6Q)()&&typeof console<"u"&&console[Je](...Xe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(Pt,Re,B)=>{B.d(Re,{q4:()=>Gl,iC:()=>pc,HU:()=>ta,vb:()=>od,JM:()=>nh});var S=B(4650),o=B(259),q=B(5861),he=B(6881),ce=B(2090),me=B(4859),be=B(1877);const Se=(I,M)=>M.some(L=>I instanceof L);let Ie,te;const at=new WeakMap,We=new WeakMap,ht=new WeakMap,Nt=new WeakMap,Ue=new WeakMap;let ct={get(I,M,L){if(I instanceof IDBTransaction){if("done"===M)return We.get(I);if("objectStoreNames"===M)return I.objectStoreNames||ht.get(I);if("store"===M)return L.objectStoreNames[1]?void 0:L.objectStore(L.objectStoreNames[0])}return ft(I[M])},set:(I,M,L)=>(I[M]=L,!0),has:(I,M)=>I instanceof IDBTransaction&&("done"===M||"store"===M)||M in I};function He(I){return"function"==typeof I?function Be(I){return I!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function de(){return te||(te=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(I)?function(...M){return I.apply(et(this),M),ft(at.get(this))}:function(...M){return ft(I.apply(et(this),M))}:function(M,...L){const Y=I.call(et(this),M,...L);return ht.set(Y,M.sort?M.sort():[M]),ft(Y)}}(I):(I instanceof IDBTransaction&&function Xe(I){if(We.has(I))return;const M=new Promise((L,Y)=>{const ae=()=>{I.removeEventListener("complete",_e),I.removeEventListener("error",Ae),I.removeEventListener("abort",Ae)},_e=()=>{L(),ae()},Ae=()=>{Y(I.error||new DOMException("AbortError","AbortError")),ae()};I.addEventListener("complete",_e),I.addEventListener("error",Ae),I.addEventListener("abort",Ae)});We.set(I,M)}(I),Se(I,function ne(){return Ie||(Ie=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(I,ct):I)}function ft(I){if(I instanceof IDBRequest)return function Je(I){const M=new Promise((L,Y)=>{const ae=()=>{I.removeEventListener("success",_e),I.removeEventListener("error",Ae)},_e=()=>{L(ft(I.result)),ae()},Ae=()=>{Y(I.error),ae()};I.addEventListener("success",_e),I.addEventListener("error",Ae)});return M.then(L=>{L instanceof IDBCursor&&at.set(L,I)}).catch(()=>{}),Ue.set(M,I),M}(I);if(Nt.has(I))return Nt.get(I);const M=He(I);return M!==I&&(Nt.set(I,M),Ue.set(M,I)),M}const et=I=>Ue.get(I),Yt=["get","getKey","getAll","getAllKeys","count"],_t=["put","add","delete","clear"],Dt=new Map;function Et(I,M){if(!(I instanceof IDBDatabase)||M in I||"string"!=typeof M)return;if(Dt.get(M))return Dt.get(M);const L=M.replace(/FromIndex$/,""),Y=M!==L,ae=_t.includes(L);if(!(L in(Y?IDBIndex:IDBObjectStore).prototype)||!ae&&!Yt.includes(L))return;const _e=function(){var Ae=(0,q.Z)(function*(yt,...mt){const Zt=this.transaction(yt,ae?"readwrite":"readonly");let fn=Zt.store;return Y&&(fn=fn.index(mt.shift())),(yield Promise.all([fn[L](...mt),ae&&Zt.done]))[0]});return function(mt){return Ae.apply(this,arguments)}}();return Dt.set(M,_e),_e}!function tt(I){ct=I(ct)}(I=>({...I,get:(M,L,Y)=>Et(M,L)||I.get(M,L,Y),has:(M,L)=>!!Et(M,L)||I.has(M,L)}));const Ne="@firebase/installations",Ve="0.6.4",ze=1e4,$e=`w:${Ve}`,dt="FIS_v2",ut="https://firebaseinstallations.googleapis.com/v1",Ct=36e5,Cn=new ce.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Jt(I){return I instanceof ce.ZR&&I.code.includes("request-failed")}function xn({projectId:I}){return`${ut}/projects/${I}/installations`}function Jn(I){return{token:I.token,requestStatus:2,expiresIn:Us(I.expiresIn),creationTime:Date.now()}}function hr(I,M){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,q.Z)(function*(I,M){const Y=(yield M.json()).error;return Cn.create("request-failed",{requestName:I,serverCode:Y.code,serverMessage:Y.message,serverStatus:Y.status})})).apply(this,arguments)}function Qr({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function en(I){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,q.Z)(function*(I){const M=yield I();return M.status>=500&&M.status<600?I():M})).apply(this,arguments)}function Us(I){return Number(I.replace("s","000"))}function Vt(){return(Vt=(0,q.Z)(function*({appConfig:I,heartbeatServiceProvider:M},{fid:L}){const Y=xn(I),ae=Qr(I),_e=M.getImmediate({optional:!0});if(_e){const Zt=yield _e.getHeartbeatsHeader();Zt&&ae.append("x-firebase-client",Zt)}const yt={method:"POST",headers:ae,body:JSON.stringify({fid:L,authVersion:dt,appId:I.appId,sdkVersion:$e})},mt=yield en(()=>fetch(Y,yt));if(mt.ok){const Zt=yield mt.json();return{fid:Zt.fid||L,registrationStatus:2,refreshToken:Zt.refreshToken,authToken:Jn(Zt.authToken)}}throw yield hr("Create Installation",mt)})).apply(this,arguments)}function lr(I){return new Promise(M=>{setTimeout(M,I)})}const oi=/^[cdef][\w-]{21}$/,ai="";function Vs(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const L=function nn(I){return function ua(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return oi.test(L)?L:ai}catch{return ai}}function mn(I){return`${I.appName}!${I.appId}`}const vt=new Map;function Wt(I,M){const L=mn(I);fr(L,M),function Bn(I,M){const L=function ti(){return!pr&&"BroadcastChannel"in self&&(pr=new BroadcastChannel("[Firebase] FID Change"),pr.onmessage=I=>{fr(I.data.key,I.data.fid)}),pr}();L&&L.postMessage({key:I,fid:M}),function Zn(){0===vt.size&&pr&&(pr.close(),pr=null)}()}(L,M)}function fr(I,M){const L=vt.get(I);if(L)for(const Y of L)Y(M)}let pr=null;const Di="firebase-installations-database",cn=1,an="firebase-installations-store";let Rn=null;function Br(){return Rn||(Rn=function At(I,M,{blocked:L,upgrade:Y,blocking:ae,terminated:_e}={}){const Ae=indexedDB.open(I,M),yt=ft(Ae);return Y&&Ae.addEventListener("upgradeneeded",mt=>{Y(ft(Ae.result),mt.oldVersion,mt.newVersion,ft(Ae.transaction))}),L&&Ae.addEventListener("blocked",()=>L()),yt.then(mt=>{_e&&mt.addEventListener("close",()=>_e()),ae&&mt.addEventListener("versionchange",()=>ae())}).catch(()=>{}),yt}(Di,cn,{upgrade:(I,M)=>{0===M&&I.createObjectStore(an)}})),Rn}function qn(I,M){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,q.Z)(function*(I,M){const L=mn(I),ae=(yield Br()).transaction(an,"readwrite"),_e=ae.objectStore(an),Ae=yield _e.get(L);return yield _e.put(M,L),yield ae.done,(!Ae||Ae.fid!==M.fid)&&Wt(I,M.fid),M})).apply(this,arguments)}function Ai(I){return ir.apply(this,arguments)}function ir(){return(ir=(0,q.Z)(function*(I){const M=mn(I),Y=(yield Br()).transaction(an,"readwrite");yield Y.objectStore(an).delete(M),yield Y.done})).apply(this,arguments)}function Ki(I,M){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,q.Z)(function*(I,M){const L=mn(I),ae=(yield Br()).transaction(an,"readwrite"),_e=ae.objectStore(an),Ae=yield _e.get(L),yt=M(Ae);return void 0===yt?yield _e.delete(L):yield _e.put(yt,L),yield ae.done,yt&&(!Ae||Ae.fid!==yt.fid)&&Wt(I,yt.fid),yt})).apply(this,arguments)}function re(I){return ee.apply(this,arguments)}function ee(){return ee=(0,q.Z)(function*(I){let M;const L=yield Ki(I.appConfig,Y=>{const ae=function ue(I){return pe(I||{fid:Vs(),registrationStatus:0})}(Y),_e=function Ze(I,M){if(0===M.registrationStatus){if(!navigator.onLine)return{installationEntry:M,registrationPromise:Promise.reject(Cn.create("app-offline"))};const L={fid:M.fid,registrationStatus:1,registrationTime:Date.now()},Y=function ve(I,M){return it.apply(this,arguments)}(I,L);return{installationEntry:L,registrationPromise:Y}}return 1===M.registrationStatus?{installationEntry:M,registrationPromise:le(I)}:{installationEntry:M}}(I,ae);return M=_e.registrationPromise,_e.installationEntry});return L.fid===ai?{installationEntry:yield M}:{installationEntry:L,registrationPromise:M}}),ee.apply(this,arguments)}function it(){return it=(0,q.Z)(function*(I,M){try{const L=yield function Vr(I,M){return Vt.apply(this,arguments)}(I,M);return qn(I.appConfig,L)}catch(L){throw Jt(L)&&409===L.customData.serverCode?yield Ai(I.appConfig):yield qn(I.appConfig,{fid:M.fid,registrationStatus:0}),L}}),it.apply(this,arguments)}function le(I){return se.apply(this,arguments)}function se(){return(se=(0,q.Z)(function*(I){let M=yield K(I.appConfig);for(;1===M.registrationStatus;)yield lr(100),M=yield K(I.appConfig);if(0===M.registrationStatus){const{installationEntry:L,registrationPromise:Y}=yield re(I);return Y||L}return M})).apply(this,arguments)}function K(I){return Ki(I,M=>{if(!M)throw Cn.create("installation-not-found");return pe(M)})}function pe(I){return function Le(I){return 1===I.registrationStatus&&I.registrationTime+ze<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function Bt(){return(Bt=(0,q.Z)(function*({appConfig:I,heartbeatServiceProvider:M},L){const Y=function Ln(I,{fid:M}){return`${xn(I)}/${M}/authTokens:generate`}(I,L),ae=function Jr(I,{refreshToken:M}){const L=Qr(I);return L.append("Authorization",function Ui(I){return`${dt} ${I}`}(M)),L}(I,L),_e=M.getImmediate({optional:!0});if(_e){const Zt=yield _e.getHeartbeatsHeader();Zt&&ae.append("x-firebase-client",Zt)}const yt={method:"POST",headers:ae,body:JSON.stringify({installation:{sdkVersion:$e,appId:I.appId}})},mt=yield en(()=>fetch(Y,yt));if(mt.ok)return Jn(yield mt.json());throw yield hr("Generate Auth Token",mt)})).apply(this,arguments)}function zn(I){return yo.apply(this,arguments)}function yo(){return yo=(0,q.Z)(function*(I,M=!1){let L;const Y=yield Ki(I.appConfig,_e=>{if(!_n(_e))throw Cn.create("not-registered");const Ae=_e.authToken;if(!M&&function zt(I){return 2===I.requestStatus&&!function vn(I){const M=Date.now();return M<I.creationTime||I.creationTime+I.expiresIn<M+Ct}(I)}(Ae))return _e;if(1===Ae.requestStatus)return L=function Me(I,M){return Ce.apply(this,arguments)}(I,M),_e;{if(!navigator.onLine)throw Cn.create("app-offline");const yt=function bn(I){const M={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:M})}(_e);return L=function Ht(I,M){return Ft.apply(this,arguments)}(I,yt),yt}});return L?yield L:Y.authToken}),yo.apply(this,arguments)}function Ce(){return(Ce=(0,q.Z)(function*(I,M){let L=yield nt(I.appConfig);for(;1===L.authToken.requestStatus;)yield lr(100),L=yield nt(I.appConfig);const Y=L.authToken;return 0===Y.requestStatus?zn(I,M):Y})).apply(this,arguments)}function nt(I){return Ki(I,M=>{if(!_n(M))throw Cn.create("not-registered");return function Ir(I){return 1===I.requestStatus&&I.requestTime+ze<Date.now()}(M.authToken)?Object.assign(Object.assign({},M),{authToken:{requestStatus:0}}):M})}function Ft(){return Ft=(0,q.Z)(function*(I,M){try{const L=yield function Ye(I,M){return Bt.apply(this,arguments)}(I,M),Y=Object.assign(Object.assign({},M),{authToken:L});return yield qn(I.appConfig,Y),L}catch(L){if(!Jt(L)||401!==L.customData.serverCode&&404!==L.customData.serverCode){const Y=Object.assign(Object.assign({},M),{authToken:{requestStatus:0}});yield qn(I.appConfig,Y)}else yield Ai(I.appConfig);throw L}}),Ft.apply(this,arguments)}function _n(I){return void 0!==I&&2===I.registrationStatus}function Bs(){return(Bs=(0,q.Z)(function*(I){const M=I,{installationEntry:L,registrationPromise:Y}=yield re(M);return Y?Y.catch(console.error):zn(M).catch(console.error),L.fid})).apply(this,arguments)}function As(){return As=(0,q.Z)(function*(I,M=!1){const L=I;return yield function gi(I){return wt.apply(this,arguments)}(L),(yield zn(L,M)).token}),As.apply(this,arguments)}function wt(){return(wt=(0,q.Z)(function*(I){const{registrationPromise:M}=yield re(I);M&&(yield M)})).apply(this,arguments)}function Zs(I){return Cn.create("missing-app-config-values",{valueName:I})}const En="installations",jo=I=>{const M=I.getProvider("app").getImmediate(),L=function vo(I){if(!I||!I.options)throw Zs("App Configuration");if(!I.name)throw Zs("App Name");const M=["projectId","apiKey","appId"];for(const L of M)if(!I.options[L])throw Zs(L);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(M);return{app:M,appConfig:L,heartbeatServiceProvider:(0,he._getProvider)(M,"heartbeat"),_delete:()=>Promise.resolve()}},gs=I=>{const M=I.getProvider("app").getImmediate(),L=(0,he._getProvider)(M,En).getImmediate();return{getId:()=>function _r(I){return Bs.apply(this,arguments)}(L),getToken:ae=>function Zo(I){return As.apply(this,arguments)}(L,ae)}};(function jr(){(0,he._registerComponent)(new me.wA(En,jo,"PUBLIC")),(0,he._registerComponent)(new me.wA("installations-internal",gs,"PRIVATE"))})(),(0,he.registerVersion)(Ne,Ve),(0,he.registerVersion)(Ne,Ve,"esm2017");const wr="@firebase/remote-config",ui=new ce.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Hr{constructor(M,L,Y,ae){this.client=M,this.storage=L,this.storageCache=Y,this.logger=ae}isCachedDataFresh(M,L){if(!L)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const Y=Date.now()-L,ae=Y<=M;return this.logger.debug(`Config fetch cache check. Cache age millis: ${Y}. Cache max age millis (minimumFetchIntervalMillis setting): ${M}. Is cache hit: ${ae}.`),ae}fetch(M){var L=this;return(0,q.Z)(function*(){const[Y,ae]=yield Promise.all([L.storage.getLastSuccessfulFetchTimestampMillis(),L.storage.getLastSuccessfulFetchResponse()]);if(ae&&L.isCachedDataFresh(M.cacheMaxAgeMillis,Y))return ae;M.eTag=ae&&ae.eTag;const _e=yield L.client.fetch(M),Ae=[L.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===_e.status&&Ae.push(L.storage.setLastSuccessfulFetchResponse(_e)),yield Promise.all(Ae),_e})()}}function Fa(I=navigator){return I.languages&&I.languages[0]||I.language}class qo{constructor(M,L,Y,ae,_e,Ae){this.firebaseInstallations=M,this.sdkVersion=L,this.namespace=Y,this.projectId=ae,this.apiKey=_e,this.appId=Ae}fetch(M){var L=this;return(0,q.Z)(function*(){const[Y,ae]=yield Promise.all([L.firebaseInstallations.getId(),L.firebaseInstallations.getToken()]),Ae=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${L.projectId}/namespaces/${L.namespace}:fetch?key=${L.apiKey}`,yt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":M.eTag||"*"},mt={sdk_version:L.sdkVersion,app_instance_id:Y,app_instance_id_token:ae,app_id:L.appId,language_code:Fa()},Zt={method:"POST",headers:yt,body:JSON.stringify(mt)},fn=fetch(Ae,Zt),pn=new Promise((qs,ao)=>{M.signal.addEventListener(()=>{const mc=new Error("The operation was aborted.");mc.name="AbortError",ao(mc)})});let Ns;try{yield Promise.race([fn,pn]),Ns=yield fn}catch(qs){let ao="fetch-client-network";throw"AbortError"===qs?.name&&(ao="fetch-timeout"),ui.create(ao,{originalErrorMessage:qs?.message})}let Lr=Ns.status;const Yl=Ns.headers.get("ETag")||void 0;let ld,Xa;if(200===Ns.status){let qs;try{qs=yield Ns.json()}catch(ao){throw ui.create("fetch-client-parse",{originalErrorMessage:ao?.message})}ld=qs.entries,Xa=qs.state}if("INSTANCE_STATE_UNSPECIFIED"===Xa?Lr=500:"NO_CHANGE"===Xa?Lr=304:("NO_TEMPLATE"===Xa||"EMPTY_CONFIG"===Xa)&&(ld={}),304!==Lr&&200!==Lr)throw ui.create("fetch-status",{httpStatus:Lr});return{status:Lr,eTag:Yl,config:ld}})()}}class fa{constructor(M,L){this.client=M,this.storage=L}fetch(M){var L=this;return(0,q.Z)(function*(){const Y=(yield L.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return L.attemptFetch(M,Y)})()}attemptFetch(M,{throttleEndTimeMillis:L,backoffCount:Y}){var ae=this;return(0,q.Z)(function*(){yield function cl(I,M){return new Promise((L,Y)=>{const ae=Math.max(M-Date.now(),0),_e=setTimeout(L,ae);I.addEventListener(()=>{clearTimeout(_e),Y(ui.create("fetch-throttle",{throttleEndTimeMillis:M}))})})}(M.signal,L);try{const _e=yield ae.client.fetch(M);return yield ae.storage.deleteThrottleMetadata(),_e}catch(_e){if(!function La(I){if(!(I instanceof ce.ZR&&I.customData))return!1;const M=Number(I.customData.httpStatus);return 429===M||500===M||503===M||504===M}(_e))throw _e;const Ae={throttleEndTimeMillis:Date.now()+(0,ce.$s)(Y),backoffCount:Y+1};return yield ae.storage.setThrottleMetadata(Ae),ae.attemptFetch(M,Ae)}})()}}class ec{constructor(M,L,Y,ae,_e){this.app=M,this._client=L,this._storageCache=Y,this._storage=ae,this._logger=_e,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function zo(I,M){const L=I.target.error||void 0;return ui.create(M,{originalErrorMessage:L&&L?.message})}const es="app_namespace_store";class tc{constructor(M,L,Y,ae=function Js(){return new Promise((I,M)=>{try{const L=indexedDB.open("firebase_remote_config",1);L.onerror=Y=>{M(zo(Y,"storage-open"))},L.onsuccess=Y=>{I(Y.target.result)},L.onupgradeneeded=Y=>{0===Y.oldVersion&&Y.target.result.createObjectStore(es,{keyPath:"compositeKey"})}}catch(L){M(ui.create("storage-open",{originalErrorMessage:L?.message}))}})}()){this.appId=M,this.appName=L,this.namespace=Y,this.openDbPromise=ae}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(M){return this.set("last_fetch_status",M)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(M){return this.set("last_successful_fetch_timestamp_millis",M)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(M){return this.set("last_successful_fetch_response",M)}getActiveConfig(){return this.get("active_config")}setActiveConfig(M){return this.set("active_config",M)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(M){return this.set("active_config_etag",M)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(M){return this.set("throttle_metadata",M)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(M){var L=this;return(0,q.Z)(function*(){const Y=yield L.openDbPromise;return new Promise((ae,_e)=>{const yt=Y.transaction([es],"readonly").objectStore(es),mt=L.createCompositeKey(M);try{const Zt=yt.get(mt);Zt.onerror=fn=>{_e(zo(fn,"storage-get"))},Zt.onsuccess=fn=>{const pn=fn.target.result;ae(pn?pn.value:void 0)}}catch(Zt){_e(ui.create("storage-get",{originalErrorMessage:Zt?.message}))}})})()}set(M,L){var Y=this;return(0,q.Z)(function*(){const ae=yield Y.openDbPromise;return new Promise((_e,Ae)=>{const mt=ae.transaction([es],"readwrite").objectStore(es),Zt=Y.createCompositeKey(M);try{const fn=mt.put({compositeKey:Zt,value:L});fn.onerror=pn=>{Ae(zo(pn,"storage-set"))},fn.onsuccess=()=>{_e()}}catch(fn){Ae(ui.create("storage-set",{originalErrorMessage:fn?.message}))}})})()}delete(M){var L=this;return(0,q.Z)(function*(){const Y=yield L.openDbPromise;return new Promise((ae,_e)=>{const yt=Y.transaction([es],"readwrite").objectStore(es),mt=L.createCompositeKey(M);try{const Zt=yt.delete(mt);Zt.onerror=fn=>{_e(zo(fn,"storage-delete"))},Zt.onsuccess=()=>{ae()}}catch(Zt){_e(ui.create("storage-delete",{originalErrorMessage:Zt?.message}))}})})()}createCompositeKey(M){return[this.appId,this.appName,this.namespace,M].join()}}class ga{constructor(M){this.storage=M}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var M=this;return(0,q.Z)(function*(){const L=M.storage.getLastFetchStatus(),Y=M.storage.getLastSuccessfulFetchTimestampMillis(),ae=M.storage.getActiveConfig(),_e=yield L;_e&&(M.lastFetchStatus=_e);const Ae=yield Y;Ae&&(M.lastSuccessfulFetchTimestampMillis=Ae);const yt=yield ae;yt&&(M.activeConfig=yt)})()}setLastFetchStatus(M){return this.lastFetchStatus=M,this.storage.setLastFetchStatus(M)}setLastSuccessfulFetchTimestampMillis(M){return this.lastSuccessfulFetchTimestampMillis=M,this.storage.setLastSuccessfulFetchTimestampMillis(M)}setActiveConfig(M){return this.activeConfig=M,this.storage.setActiveConfig(M)}}function hl(){return ma.apply(this,arguments)}function ma(){return(ma=(0,q.Z)(function*(){if(!(0,ce.hl)())return!1;try{return yield(0,ce.eu)()}catch{return!1}})).apply(this,arguments)}!function Go(){(0,he._registerComponent)(new me.wA("remote-config",function I(M,{instanceIdentifier:L}){const Y=M.getProvider("app").getImmediate(),ae=M.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw ui.create("registration-window");if(!(0,ce.hl)())throw ui.create("indexed-db-unavailable");const{projectId:_e,apiKey:Ae,appId:yt}=Y.options;if(!_e)throw ui.create("registration-project-id");if(!Ae)throw ui.create("registration-api-key");if(!yt)throw ui.create("registration-app-id");const mt=new tc(yt,Y.name,L=L||"firebase"),Zt=new ga(mt),fn=new be.Yd(wr);fn.logLevel=be.in.ERROR;const pn=new qo(ae,he.SDK_VERSION,L,_e,Ae,yt),Ns=new fa(pn,mt),Lr=new Hr(Ns,mt,Zt,fn),Yl=new ec(Y,Lr,Zt,mt,fn);return function Ji(I){const M=(0,ce.m9)(I);M._initializePromise||(M._initializePromise=M._storageCache.loadFromStorage().then(()=>{M._isInitializationComplete=!0}))}(Yl),Yl},"PUBLIC").setMultipleInstances(!0)),(0,he.registerVersion)(wr,"0.4.4"),(0,he.registerVersion)(wr,"0.4.4","esm2017")}();const Ll=(I,M)=>M.some(L=>I instanceof L);let fl,eo;const Ko=new WeakMap,Eo=new WeakMap,_i=new WeakMap,ci=new WeakMap,_a=new WeakMap;let to={get(I,M,L){if(I instanceof IDBTransaction){if("done"===M)return Eo.get(I);if("objectStoreNames"===M)return I.objectStoreNames||_i.get(I);if("store"===M)return L.objectStoreNames[1]?void 0:L.objectStore(L.objectStoreNames[0])}return $r(I[M])},set:(I,M,L)=>(I[M]=L,!0),has:(I,M)=>I instanceof IDBTransaction&&("done"===M||"store"===M)||M in I};function pl(I){return"function"==typeof I?function xi(I){return I!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Wo(){return eo||(eo=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(I)?function(...M){return I.apply(Pr(this),M),$r(Ko.get(this))}:function(...M){return $r(I.apply(Pr(this),M))}:function(M,...L){const Y=I.call(Pr(this),M,...L);return _i.set(Y,M.sort?M.sort():[M]),$r(Y)}}(I):(I instanceof IDBTransaction&&function Va(I){if(Eo.has(I))return;const M=new Promise((L,Y)=>{const ae=()=>{I.removeEventListener("complete",_e),I.removeEventListener("error",Ae),I.removeEventListener("abort",Ae)},_e=()=>{L(),ae()},Ae=()=>{Y(I.error||new DOMException("AbortError","AbortError")),ae()};I.addEventListener("complete",_e),I.addEventListener("error",Ae),I.addEventListener("abort",Ae)});Eo.set(I,M)}(I),Ll(I,function Ua(){return fl||(fl=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(I,to):I)}function $r(I){if(I instanceof IDBRequest)return function yi(I){const M=new Promise((L,Y)=>{const ae=()=>{I.removeEventListener("success",_e),I.removeEventListener("error",Ae)},_e=()=>{L($r(I.result)),ae()},Ae=()=>{Y(I.error),ae()};I.addEventListener("success",_e),I.addEventListener("error",Ae)});return M.then(L=>{L instanceof IDBCursor&&Ko.set(L,I)}).catch(()=>{}),_a.set(M,I),M}(I);if(ci.has(I))return ci.get(I);const M=pl(I);return M!==I&&(ci.set(I,M),_a.set(M,I)),M}const Pr=I=>_a.get(I);function ya(I,M,{blocked:L,upgrade:Y,blocking:ae,terminated:_e}={}){const Ae=indexedDB.open(I,M),yt=$r(Ae);return Y&&Ae.addEventListener("upgradeneeded",mt=>{Y($r(Ae.result),mt.oldVersion,mt.newVersion,$r(Ae.transaction))}),L&&Ae.addEventListener("blocked",()=>L()),yt.then(mt=>{_e&&mt.addEventListener("close",()=>_e()),ae&&mt.addEventListener("versionchange",()=>ae())}).catch(()=>{}),yt}function Rr(I,{blocked:M}={}){const L=indexedDB.deleteDatabase(I);return M&&L.addEventListener("blocked",()=>M()),$r(L).then(()=>{})}const va=["get","getKey","getAll","getAllKeys","count"],ys=["put","add","delete","clear"],wa=new Map;function To(I,M){if(!(I instanceof IDBDatabase)||M in I||"string"!=typeof M)return;if(wa.get(M))return wa.get(M);const L=M.replace(/FromIndex$/,""),Y=M!==L,ae=ys.includes(L);if(!(L in(Y?IDBIndex:IDBObjectStore).prototype)||!ae&&!va.includes(L))return;const _e=function(){var Ae=(0,q.Z)(function*(yt,...mt){const Zt=this.transaction(yt,ae?"readwrite":"readonly");let fn=Zt.store;return Y&&(fn=fn.index(mt.shift())),(yield Promise.all([fn[L](...mt),ae&&Zt.done]))[0]});return function(mt){return Ae.apply(this,arguments)}}();return wa.set(M,_e),_e}!function vi(I){to=I(to)}(I=>({...I,get:(M,L,Y)=>To(M,L)||I.get(M,L,Y),has:(M,L)=>!!To(M,L)||I.has(M,L)}));const ln="/firebase-messaging-sw.js",no="/firebase-cloud-messaging-push-scope",Ul="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Vl="https://fcmregistrations.googleapis.com/v1",Nr="google.c.a.c_id",Ms="google.c.a.c_l",gl="google.c.a.ts",Qc="google.c.a.e";var Oe=(()=>{return(I=Oe||(Oe={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",Oe;var I})();function hn(I){const M=new Uint8Array(I);return btoa(String.fromCharCode(...M)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Io(I){const L=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),Y=atob(L),ae=new Uint8Array(Y.length);for(let _e=0;_e<Y.length;++_e)ae[_e]=Y.charCodeAt(_e);return ae}const Ba="fcm_token_details_db",ri=5,ro="fcm_token_object_Store";function Vi(){return Vi=(0,q.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(_e=>_e.name).includes(Ba))return null;let M=null;return(yield ya(Ba,ri,{upgrade:(Y=(0,q.Z)(function*(ae,_e,Ae,yt){var mt;if(_e<2||!ae.objectStoreNames.contains(ro))return;const Zt=yt.objectStore(ro),fn=yield Zt.index("fcmSenderId").get(I);if(yield Zt.clear(),fn)if(2===_e){const pn=fn;if(!pn.auth||!pn.p256dh||!pn.endpoint)return;M={token:pn.fcmToken,createTime:null!==(mt=pn.createTime)&&void 0!==mt?mt:Date.now(),subscriptionOptions:{auth:pn.auth,p256dh:pn.p256dh,endpoint:pn.endpoint,swScope:pn.swScope,vapidKey:"string"==typeof pn.vapidKey?pn.vapidKey:hn(pn.vapidKey)}}}else if(3===_e){const pn=fn;M={token:pn.fcmToken,createTime:pn.createTime,subscriptionOptions:{auth:hn(pn.auth),p256dh:hn(pn.p256dh),endpoint:pn.endpoint,swScope:pn.swScope,vapidKey:hn(pn.vapidKey)}}}else if(4===_e){const pn=fn;M={token:pn.fcmToken,createTime:pn.createTime,subscriptionOptions:{auth:hn(pn.auth),p256dh:hn(pn.p256dh),endpoint:pn.endpoint,swScope:pn.swScope,vapidKey:hn(pn.vapidKey)}}}}),function(_e,Ae,yt,mt){return Y.apply(this,arguments)})})).close(),yield Rr(Ba),yield Rr("fcm_vapid_details_db"),yield Rr("undefined"),function hu(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:M}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof M.auth&&M.auth.length>0&&"string"==typeof M.p256dh&&M.p256dh.length>0&&"string"==typeof M.endpoint&&M.endpoint.length>0&&"string"==typeof M.swScope&&M.swScope.length>0&&"string"==typeof M.vapidKey&&M.vapidKey.length>0}(M)?M:null;var Y}),Vi.apply(this,arguments)}const on="firebase-messaging-database",Bl=1,Bi="firebase-messaging-store";let Za=null;function Or(){return Za||(Za=ya(on,Bl,{upgrade:(I,M)=>{0===M&&I.createObjectStore(Bi)}})),Za}function Mi(I){return Ps.apply(this,arguments)}function Ps(){return Ps=(0,q.Z)(function*(I){const M=_l(I),Y=yield(yield Or()).transaction(Bi).objectStore(Bi).get(M);if(Y)return Y;{const ae=yield function ml(I){return Vi.apply(this,arguments)}(I.appConfig.senderId);if(ae)return yield Qo(I,ae),ae}}),Ps.apply(this,arguments)}function Qo(I,M){return ts.apply(this,arguments)}function ts(){return(ts=(0,q.Z)(function*(I,M){const L=_l(I),ae=(yield Or()).transaction(Bi,"readwrite");return yield ae.objectStore(Bi).put(M,L),yield ae.done,M})).apply(this,arguments)}function ja(){return(ja=(0,q.Z)(function*(I){const M=_l(I),Y=(yield Or()).transaction(Bi,"readwrite");yield Y.objectStore(Bi).delete(M),yield Y.done})).apply(this,arguments)}function _l({appConfig:I}){return I.appId}const qr=new ce.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function So(I,M){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,q.Z)(function*(I,M){const L=yield pu(I),Y=ba(M),ae={method:"POST",headers:L,body:JSON.stringify(Y)};let _e;try{_e=yield(yield fetch(vl(I.appConfig),ae)).json()}catch(Ae){throw qr.create("token-subscribe-failed",{errorInfo:Ae?.toString()})}if(_e.error)throw qr.create("token-subscribe-failed",{errorInfo:_e.error.message});if(!_e.token)throw qr.create("token-subscribe-no-token");return _e.token})).apply(this,arguments)}function Ca(){return(Ca=(0,q.Z)(function*(I,M){const L=yield pu(I),Y=ba(M.subscriptionOptions),ae={method:"PATCH",headers:L,body:JSON.stringify(Y)};let _e;try{_e=yield(yield fetch(`${vl(I.appConfig)}/${M.token}`,ae)).json()}catch(Ae){throw qr.create("token-update-failed",{errorInfo:Ae?.toString()})}if(_e.error)throw qr.create("token-update-failed",{errorInfo:_e.error.message});if(!_e.token)throw qr.create("token-update-no-token");return _e.token})).apply(this,arguments)}function yl(I,M){return Zl.apply(this,arguments)}function Zl(){return(Zl=(0,q.Z)(function*(I,M){const Y={method:"DELETE",headers:yield pu(I)};try{const _e=yield(yield fetch(`${vl(I.appConfig)}/${M}`,Y)).json();if(_e.error)throw qr.create("token-unsubscribe-failed",{errorInfo:_e.error.message})}catch(ae){throw qr.create("token-unsubscribe-failed",{errorInfo:ae?.toString()})}})).apply(this,arguments)}function vl({projectId:I}){return`${Vl}/projects/${I}/registrations`}function pu(I){return wn.apply(this,arguments)}function wn(){return(wn=(0,q.Z)(function*({appConfig:I,installations:M}){const L=yield M.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${L}`})})).apply(this,arguments)}function ba({p256dh:I,auth:M,endpoint:L,vapidKey:Y}){const ae={web:{endpoint:L,auth:M,p256dh:I}};return Y!==Ul&&(ae.web.applicationPubKey=Y),ae}const $a=6048e5;function Ao(){return Ao=(0,q.Z)(function*(I){const M=yield function rc(I,M){return gu.apply(this,arguments)}(I.swRegistration,I.vapidKey),L={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:M.endpoint,auth:hn(M.getKey("auth")),p256dh:hn(M.getKey("p256dh"))},Y=yield Mi(I.firebaseDependencies);if(Y){if(function ic(I,M){return M.vapidKey===I.vapidKey&&M.endpoint===I.endpoint&&M.auth===I.auth&&M.p256dh===I.p256dh}(Y.subscriptionOptions,L))return Date.now()>=Y.createTime+$a?function Hn(I,M){return wl.apply(this,arguments)}(I,{token:Y.token,createTime:Date.now(),subscriptionOptions:L}):Y.token;try{yield yl(I.firebaseDependencies,Y.token)}catch(ae){console.warn(ae)}return qa(I.firebaseDependencies,L)}return qa(I.firebaseDependencies,L)}),Ao.apply(this,arguments)}function Pi(){return Pi=(0,q.Z)(function*(I){const M=yield Mi(I.firebaseDependencies);M&&(yield yl(I.firebaseDependencies,M.token),yield function fu(I){return ja.apply(this,arguments)}(I.firebaseDependencies));const L=yield I.swRegistration.pushManager.getSubscription();return!L||L.unsubscribe()}),Pi.apply(this,arguments)}function wl(){return wl=(0,q.Z)(function*(I,M){try{const L=yield function Do(I,M){return Ca.apply(this,arguments)}(I.firebaseDependencies,M),Y=Object.assign(Object.assign({},M),{token:L,createTime:Date.now()});return yield Qo(I.firebaseDependencies,Y),L}catch(L){throw yield function di(I){return Pi.apply(this,arguments)}(I),L}}),wl.apply(this,arguments)}function qa(I,M){return io.apply(this,arguments)}function io(){return(io=(0,q.Z)(function*(I,M){const Y={token:yield So(I,M),createTime:Date.now(),subscriptionOptions:M};return yield Qo(I,Y),Y.token})).apply(this,arguments)}function gu(){return(gu=(0,q.Z)(function*(I,M){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Io(M)})})).apply(this,arguments)}function Cl(I){const M={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function jl(I,M){if(!M.notification)return;I.notification={};const L=M.notification.title;L&&(I.notification.title=L);const Y=M.notification.body;Y&&(I.notification.body=Y);const ae=M.notification.image;ae&&(I.notification.image=ae);const _e=M.notification.icon;_e&&(I.notification.icon=_e)}(M,I),function za(I,M){M.data&&(I.data=M.data)}(M,I),function x(I,M){var L,Y,ae,_e,Ae;if(!(M.fcmOptions||null!==(L=M.notification)&&void 0!==L&&L.click_action))return;I.fcmOptions={};const yt=null!==(ae=null===(Y=M.fcmOptions)||void 0===Y?void 0:Y.link)&&void 0!==ae?ae:null===(_e=M.notification)||void 0===_e?void 0:_e.click_action;yt&&(I.fcmOptions.link=yt);const mt=null===(Ae=M.fcmOptions)||void 0===Ae?void 0:Ae.analytics_label;mt&&(I.fcmOptions.analyticsLabel=mt)}(M,I),M}function N(I,M){const L=[];for(let Y=0;Y<I.length;Y++)L.push(I.charAt(Y)),Y<M.length&&L.push(M.charAt(Y));return L.join("")}function X(I){return qr.create("missing-app-config-values",{valueName:I})}N("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),N("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class xe{constructor(M,L,Y){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ae=function $(I){if(!I||!I.options)throw X("App Configuration Object");if(!I.name)throw X("App Name");const M=["projectId","apiKey","appId","messagingSenderId"],{options:L}=I;for(const Y of M)if(!L[Y])throw X(Y);return{appName:I.name,projectId:L.projectId,apiKey:L.apiKey,appId:L.appId,senderId:L.messagingSenderId}}(M);this.firebaseDependencies={app:M,appConfig:ae,installations:L,analyticsProvider:Y}}_delete(){return Promise.resolve()}}function qe(I){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,q.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(ln,{scope:no}),I.swRegistration.update().catch(()=>{})}catch(M){throw qr.create("failed-service-worker-registration",{browserErrorMessage:M?.message})}})).apply(this,arguments)}function Un(){return(Un=(0,q.Z)(function*(I,M){if(!M&&!I.swRegistration&&(yield qe(I)),M||!I.swRegistration){if(!(M instanceof ServiceWorkerRegistration))throw qr.create("invalid-sw-registration");I.swRegistration=M}})).apply(this,arguments)}function Tn(){return(Tn=(0,q.Z)(function*(I,M){M?I.vapidKey=M:I.vapidKey||(I.vapidKey=Ul)})).apply(this,arguments)}function Vn(){return Vn=(0,q.Z)(function*(I,M){if(!navigator)throw qr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw qr.create("permission-blocked");return yield function Mn(I,M){return Tn.apply(this,arguments)}(I,M?.vapidKey),yield function mr(I,M){return Un.apply(this,arguments)}(I,M?.serviceWorkerRegistration),function vs(I){return Ao.apply(this,arguments)}(I)}),Vn.apply(this,arguments)}function Ri(){return(Ri=(0,q.Z)(function*(I,M,L){const Y=function ns(I){switch(I){case Oe.NOTIFICATION_CLICKED:return"notification_open";case Oe.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(M);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(Y,{message_id:L[Nr],message_name:L[Ms],message_time:L[gl],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function kr(){return kr=(0,q.Z)(function*(I,M){const L=M.data;if(!L.isFirebaseMessaging)return;I.onMessageHandler&&L.messageType===Oe.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(Cl(L)):I.onMessageHandler.next(Cl(L)));const Y=L.data;(function V(I){return"object"==typeof I&&!!I&&Nr in I})(Y)&&"1"===Y[Qc]&&(yield function Cr(I,M,L){return Ri.apply(this,arguments)}(I,L.messageType,Y))}),kr.apply(this,arguments)}const zr="@firebase/messaging",wi=I=>{const M=new xe(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",L=>function xo(I,M){return kr.apply(this,arguments)}(M,L)),M},Hl=I=>{const M=I.getProvider("messaging").getImmediate();return{getToken:Y=>function Dr(I,M){return Vn.apply(this,arguments)}(M,Y)}};function mu(){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,q.Z)(function*(){try{yield(0,ce.eu)()}catch{return!1}return typeof window<"u"&&(0,ce.hl)()&&(0,ce.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function so(){(0,he._registerComponent)(new me.wA("messaging",wi,"PUBLIC")),(0,he._registerComponent)(new me.wA("messaging-internal",Hl,"PRIVATE")),(0,he.registerVersion)(zr,"0.12.4"),(0,he.registerVersion)(zr,"0.12.4","esm2017")}();const ur="analytics",$l="firebase_id",Ka="origin",oc=6e4,_u="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",bl="https://www.googletagmanager.com/gtag/js",$n=new be.Yd("@firebase/analytics"),Fr=new ce.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function ke(I){if(!I.startsWith(bl)){const M=Fr.create("invalid-gtag-resource",{gtagURL:I});return $n.warn(M.message),""}return I}function Cs(I){return Promise.all(I.map(M=>M.catch(L=>L)))}function Zi(){return(Zi=(0,q.Z)(function*(I,M,L,Y,ae,_e){const Ae=Y[ae];try{if(Ae)yield M[Ae];else{const mt=(yield Cs(L)).find(Zt=>Zt.measurementId===ae);mt&&(yield M[mt.appId])}}catch(yt){$n.error(yt)}I("config",ae,_e)})).apply(this,arguments)}function Ya(){return(Ya=(0,q.Z)(function*(I,M,L,Y,ae){try{let _e=[];if(ae&&ae.send_to){let Ae=ae.send_to;Array.isArray(Ae)||(Ae=[Ae]);const yt=yield Cs(L);for(const mt of Ae){const Zt=yt.find(pn=>pn.measurementId===mt),fn=Zt&&M[Zt.appId];if(!fn){_e=[];break}_e.push(fn)}}0===_e.length&&(_e=Object.values(M)),yield Promise.all(_e),I("event",Y,ae||{})}catch(_e){$n.error(_e)}})).apply(this,arguments)}const ql=30,Xo=new class ss{constructor(M={},L=1e3){this.throttleMetadata=M,this.intervalMillis=L}getThrottleMetadata(M){return this.throttleMetadata[M]}setThrottleMetadata(M,L){this.throttleMetadata[M]=L}deleteThrottleMetadata(M){delete this.throttleMetadata[M]}};function pf(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function er(){return(er=(0,q.Z)(function*(I){var M;const{appId:L,apiKey:Y}=I,ae={method:"GET",headers:pf(Y)},_e=_u.replace("{app-id}",L),Ae=yield fetch(_e,ae);if(200!==Ae.status&&304!==Ae.status){let yt="";try{const mt=yield Ae.json();null!==(M=mt.error)&&void 0!==M&&M.message&&(yt=mt.error.message)}catch{}throw Fr.create("config-fetch-failed",{httpStatus:Ae.status,responseMessage:yt})}return Ae.json()})).apply(this,arguments)}function Rs(){return(Rs=(0,q.Z)(function*(I,M=Xo,L){const{appId:Y,apiKey:ae,measurementId:_e}=I.options;if(!Y)throw Fr.create("no-app-id");if(!ae){if(_e)return{measurementId:_e,appId:Y};throw Fr.create("no-api-key")}const Ae=M.getThrottleMetadata(Y)||{backoffCount:0,throttleEndTimeMillis:Date.now()},yt=new ji;return setTimeout((0,q.Z)(function*(){yt.abort()}),void 0!==L?L:oc),lc({appId:Y,apiKey:ae,measurementId:_e},Ae,yt,M)})).apply(this,arguments)}function lc(I,M,L){return uc.apply(this,arguments)}function uc(){return uc=(0,q.Z)(function*(I,{throttleEndTimeMillis:M,backoffCount:L},Y,ae=Xo){var _e;const{appId:Ae,measurementId:yt}=I;try{yield function Jc(I,M){return new Promise((L,Y)=>{const ae=Math.max(M-Date.now(),0),_e=setTimeout(L,ae);I.addEventListener(()=>{clearTimeout(_e),Y(Fr.create("fetch-throttle",{throttleEndTimeMillis:M}))})})}(Y,M)}catch(mt){if(yt)return $n.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${yt} provided in the "measurementId" field in the local Firebase config. [${mt?.message}]`),{appId:Ae,measurementId:yt};throw mt}try{const mt=yield function os(I){return er.apply(this,arguments)}(I);return ae.deleteThrottleMetadata(Ae),mt}catch(mt){const Zt=mt;if(!function cc(I){if(!(I instanceof ce.ZR&&I.customData))return!1;const M=Number(I.customData.httpStatus);return 429===M||500===M||503===M||504===M}(Zt)){if(ae.deleteThrottleMetadata(Ae),yt)return $n.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${yt} provided in the "measurementId" field in the local Firebase config. [${Zt?.message}]`),{appId:Ae,measurementId:yt};throw mt}const fn=503===Number(null===(_e=Zt?.customData)||void 0===_e?void 0:_e.httpStatus)?(0,ce.$s)(L,ae.intervalMillis,ql):(0,ce.$s)(L,ae.intervalMillis),pn={throttleEndTimeMillis:Date.now()+fn,backoffCount:L+1};return ae.setThrottleMetadata(Ae,pn),$n.debug(`Calling attemptFetch again in ${fn} millis`),lc(I,pn,Y,ae)}}),uc.apply(this,arguments)}class ji{constructor(){this.listeners=[]}addEventListener(M){this.listeners.push(M)}abort(){this.listeners.forEach(M=>M())}}let Qa,Eu;function vu(){return(vu=(0,q.Z)(function*(I,M,L,Y,ae){if(ae&&ae.global)I("event",L,Y);else{const _e=yield M;I("event",L,Object.assign(Object.assign({},Y),{send_to:_e}))}})).apply(this,arguments)}function Il(){return(Il=(0,q.Z)(function*(){if(!(0,ce.hl)())return $n.warn(Fr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ce.eu)()}catch(I){return $n.warn(Fr.create("indexeddb-unavailable",{errorInfo:I?.toString()}).message),!1}return!0})).apply(this,arguments)}function T(){return T=(0,q.Z)(function*(I,M,L,Y,ae,_e,Ae){var yt;const mt=function Ci(I){return Rs.apply(this,arguments)}(I);mt.then(Lr=>{L[Lr.measurementId]=Lr.appId,I.options.measurementId&&Lr.measurementId!==I.options.measurementId&&$n.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${Lr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Lr=>$n.error(Lr)),M.push(mt);const Zt=function ki(){return Il.apply(this,arguments)}().then(Lr=>{if(Lr)return Y.getId()}),[fn,pn]=yield Promise.all([mt,Zt]);(function is(I){const M=window.document.getElementsByTagName("script");for(const L of Object.values(M))if(L.src&&L.src.includes(bl)&&L.src.includes(I))return L;return null})(_e)||function ii(I,M){const L=function bs(I,M){let L;return window.trustedTypes&&(L=window.trustedTypes.createPolicy(I,M)),L}("firebase-js-sdk-policy",{createScriptURL:ke}),Y=document.createElement("script"),ae=`${bl}?l=${I}&id=${M}`;Y.src=L?L?.createScriptURL(ae):ae,Y.async=!0,document.head.appendChild(Y)}(_e,fn.measurementId),Eu&&(ae("consent","default",Eu),function Tl(I){Eu=I}(void 0)),ae("js",new Date);const Ns=null!==(yt=Ae?.config)&&void 0!==yt?yt:{};return Ns[Ka]="firebase",Ns.update=!0,null!=pn&&(Ns[$l]=pn),ae("config",fn.measurementId,Ns),Qa&&(ae("set",Qa),function Ja(I){Qa=I}(void 0)),fn.measurementId}),T.apply(this,arguments)}class y{constructor(M){this.app=M}_delete(){return delete A[this.app.options.appId],Promise.resolve()}}let A={},O=[];const Z={};let je,gt,G="dataLayer",ge="gtag",It=!1;function Es(I,M,L){!function Ar(){const I=[];if((0,ce.ru)()&&I.push("This is a browser extension environment."),(0,ce.zI)()||I.push("Cookies are not available."),I.length>0){const M=I.map((Y,ae)=>`(${ae+1}) ${Y}`).join(" "),L=Fr.create("invalid-analytics-context",{errorInfo:M});$n.warn(L.message)}}();const Y=I.options.appId;if(!Y)throw Fr.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw Fr.create("no-api-key");$n.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=A[Y])throw Fr.create("already-exists",{id:Y});if(!It){!function W(I){let M=[];Array.isArray(window[I])?M=window[I]:window[I]=M}(G);const{wrappedGtag:_e,gtagCore:Ae}=function Ro(I,M,L,Y,ae){let _e=function(...Ae){window[Y].push(arguments)};return window[ae]&&"function"==typeof window[ae]&&(_e=window[ae]),window[ae]=function qt(I,M,L,Y){function _e(){return _e=(0,q.Z)(function*(Ae,...yt){try{if("event"===Ae){const[mt,Zt]=yt;yield function bt(I,M,L,Y,ae){return Ya.apply(this,arguments)}(I,M,L,mt,Zt)}else if("config"===Ae){const[mt,Zt]=yt;yield function ac(I,M,L,Y,ae,_e){return Zi.apply(this,arguments)}(I,M,L,Y,mt,Zt)}else if("consent"===Ae){const[mt]=yt;I("consent","update",mt)}else if("get"===Ae){const[mt,Zt,fn]=yt;I("get",mt,Zt,fn)}else if("set"===Ae){const[mt]=yt;I("set",mt)}else I(Ae,...yt)}catch(mt){$n.error(mt)}}),_e.apply(this,arguments)}return function ae(Ae){return _e.apply(this,arguments)}}(_e,I,M,L),{gtagCore:_e,wrappedGtag:window[ae]}}(A,O,Z,G,ge);gt=_e,je=Ae,It=!0}return A[Y]=function b(I,M,L,Y,ae,_e,Ae){return T.apply(this,arguments)}(I,O,Z,M,je,G,L),new y(I)}function Hi(){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,q.Z)(function*(){if((0,ce.ru)()||!(0,ce.zI)()||!(0,ce.hl)())return!1;try{return yield(0,ce.eu)()}catch{return!1}})).apply(this,arguments)}const hc="@firebase/analytics";!function $i(){(0,he._registerComponent)(new me.wA(ur,(M,{options:L})=>Es(M.getProvider("app").getImmediate(),M.getProvider("installations-internal").getImmediate(),L),"PUBLIC")),(0,he._registerComponent)(new me.wA("analytics-internal",function I(M){try{const L=M.getProvider(ur).getImmediate();return{logEvent:(Y,ae,_e)=>function gf(I,M,L,Y){I=(0,ce.m9)(I),function dc(I,M,L,Y,ae){return vu.apply(this,arguments)}(gt,A[I.app.options.appId],M,L,Y).catch(ae=>$n.error(ae))}(L,Y,ae,_e)}}catch(L){throw Fr.create("interop-component-reg-failed",{reason:L})}},"PRIVATE")),(0,he.registerVersion)(hc,"0.10.0"),(0,he.registerVersion)(hc,"0.10.0","esm2017")}();var Fi=B(4408),Tu=B(7565);const Kp=new class nd extends Tu.v{}(class td extends Fi.o{constructor(M,L){super(M,L),this.scheduler=M,this.work=L}schedule(M,L=0){return L>0?super.schedule(M,L):(this.delay=L,this.state=M,this.scheduler.flush(this),this)}execute(M,L){return L>0||this.closed?super.execute(M,L):this._execute(M,L)}requestAsyncId(M,L,Y=0){return null!=Y&&Y>0||null==Y&&this.delay>0?super.requestAsyncId(M,L,Y):(M.flush(this),0)}});var eh=B(4986),mf=B(8505),_f=B(9468),rd=B(5363);const Gl=new S.GfV("7.6.1"),Ta="__angularfire_symbol__analyticsIsSupportedValue",Iu="__angularfire_symbol__analyticsIsSupported",th="__angularfire_symbol__remoteConfigIsSupportedValue",Su="__angularfire_symbol__remoteConfigIsSupported",Du="__angularfire_symbol__messagingIsSupportedValue",fc="__angularfire_symbol__messagingIsSupported";function nh(I,M,L){if(M){if(1===M.length)return M[0];const _e=M.filter(Ae=>Ae.app===L);if(1===_e.length)return _e[0]}return L.container.getProvider(I).getImmediate({optional:!0})}globalThis[Iu]||(globalThis[Iu]=Hi().then(I=>globalThis[Ta]=I).catch(()=>globalThis[Ta]=!1)),globalThis[fc]||(globalThis[fc]=mu().then(I=>globalThis[Du]=I).catch(()=>globalThis[Du]=!1)),globalThis[Su]||(globalThis[Su]=hl().then(I=>globalThis[th]=I).catch(()=>globalThis[th]=!1));const od=(I,M)=>{const L=M?[M]:(0,o.C6)(),Y=[];return L.forEach(ae=>{ae.container.getProvider(I).instances.forEach(Ae=>{Y.includes(Ae)||Y.push(Ae)})}),Y};function Ia(){}class Au{constructor(M,L=Kp){this.zone=M,this.delegate=L}now(){return this.delegate.now()}schedule(M,L,Y){const ae=this.zone;return this.delegate.schedule(function(Ae){ae.runGuarded(()=>{M.apply(this,[Ae])})},L,Y)}}class yf{constructor(M){this.zone=M,this.task=null}call(M,L){const Y=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ia,{},Ia,Ia)),L.pipe((0,mf.b)({next:Y,complete:Y,error:Y})).subscribe(M).add(Y)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ta=(()=>{class I{constructor(L){this.ngZone=L,this.outsideAngular=L.runOutsideAngular(()=>new Au(Zone.current)),this.insideAngular=L.run(()=>new Au(Zone.current,eh.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(L){return new(L||I)(S.LFG(S.R0b))},I.\u0275prov=S.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function Oo(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function pc(I){return Oo(),function vf(I){return function(L){return(L=L.lift(new yf(I.ngZone))).pipe((0,_f.R)(I.outsideAngular),(0,rd.Q)(I.insideAngular))}}(Oo())(I)}},2090:(Pt,Re,B)=>{B.d(Re,{$s:()=>Ai,BH:()=>He,DV:()=>Us,Dv:()=>fr,G6:()=>$e,GJ:()=>en,L:()=>Ie,LL:()=>Tt,Pz:()=>Be,Sg:()=>ft,UG:()=>De,UI:()=>Vr,US:()=>me,Wj:()=>ti,Wl:()=>Jn,Yr:()=>ze,ZB:()=>de,ZR:()=>sn,aH:()=>tt,b$:()=>Dt,cI:()=>xn,dS:()=>Di,eu:()=>ut,g5:()=>q,gK:()=>Bn,gQ:()=>nn,h$:()=>Se,hl:()=>dt,hu:()=>o,jU:()=>Yt,lb:()=>Zn,m9:()=>Zr,ne:()=>mn,p$:()=>ne,pd:()=>Vs,r3:()=>Xr,ru:()=>_t,tV:()=>te,uI:()=>At,ug:()=>cn,vZ:()=>Vt,w1:()=>Ne,w9:()=>Jr,xO:()=>oi,xb:()=>Ui,z$:()=>et,zI:()=>Ct,zd:()=>ai});const S={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(re,ee){if(!re)throw q(ee)},q=function(re){return new Error("Firebase Database ("+S.SDK_VERSION+") INTERNAL ASSERT FAILED: "+re)},he=function(re){const ee=[];let ue=0;for(let Ze=0;Ze<re.length;Ze++){let ve=re.charCodeAt(Ze);ve<128?ee[ue++]=ve:ve<2048?(ee[ue++]=ve>>6|192,ee[ue++]=63&ve|128):55296==(64512&ve)&&Ze+1<re.length&&56320==(64512&re.charCodeAt(Ze+1))?(ve=65536+((1023&ve)<<10)+(1023&re.charCodeAt(++Ze)),ee[ue++]=ve>>18|240,ee[ue++]=ve>>12&63|128,ee[ue++]=ve>>6&63|128,ee[ue++]=63&ve|128):(ee[ue++]=ve>>12|224,ee[ue++]=ve>>6&63|128,ee[ue++]=63&ve|128)}return ee},me={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(re,ee){if(!Array.isArray(re))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ue=ee?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ze=[];for(let ve=0;ve<re.length;ve+=3){const it=re[ve],le=ve+1<re.length,se=le?re[ve+1]:0,K=ve+2<re.length,pe=K?re[ve+2]:0;let Bt=(15&se)<<2|pe>>6,Ln=63&pe;K||(Ln=64,le||(Bt=64)),Ze.push(ue[it>>2],ue[(3&it)<<4|se>>4],ue[Bt],ue[Ln])}return Ze.join("")},encodeString(re,ee){return this.HAS_NATIVE_SUPPORT&&!ee?btoa(re):this.encodeByteArray(he(re),ee)},decodeString(re,ee){return this.HAS_NATIVE_SUPPORT&&!ee?atob(re):function(re){const ee=[];let ue=0,Ze=0;for(;ue<re.length;){const ve=re[ue++];if(ve<128)ee[Ze++]=String.fromCharCode(ve);else if(ve>191&&ve<224){const it=re[ue++];ee[Ze++]=String.fromCharCode((31&ve)<<6|63&it)}else if(ve>239&&ve<365){const K=((7&ve)<<18|(63&re[ue++])<<12|(63&re[ue++])<<6|63&re[ue++])-65536;ee[Ze++]=String.fromCharCode(55296+(K>>10)),ee[Ze++]=String.fromCharCode(56320+(1023&K))}else{const it=re[ue++],le=re[ue++];ee[Ze++]=String.fromCharCode((15&ve)<<12|(63&it)<<6|63&le)}}return ee.join("")}(this.decodeStringToByteArray(re,ee))},decodeStringToByteArray(re,ee){this.init_();const ue=ee?this.charToByteMapWebSafe_:this.charToByteMap_,Ze=[];for(let ve=0;ve<re.length;){const it=ue[re.charAt(ve++)],se=ve<re.length?ue[re.charAt(ve)]:0;++ve;const pe=ve<re.length?ue[re.charAt(ve)]:64;++ve;const Ye=ve<re.length?ue[re.charAt(ve)]:64;if(++ve,null==it||null==se||null==pe||null==Ye)throw new be;Ze.push(it<<2|se>>4),64!==pe&&(Ze.push(se<<4&240|pe>>2),64!==Ye&&Ze.push(pe<<6&192|Ye))}return Ze},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let re=0;re<this.ENCODED_VALS.length;re++)this.byteToCharMap_[re]=this.ENCODED_VALS.charAt(re),this.charToByteMap_[this.byteToCharMap_[re]]=re,this.byteToCharMapWebSafe_[re]=this.ENCODED_VALS_WEBSAFE.charAt(re),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[re]]=re,re>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(re)]=re,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(re)]=re)}}};class be extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Se=function(re){const ee=he(re);return me.encodeByteArray(ee,!0)},Ie=function(re){return Se(re).replace(/\./g,"")},te=function(re){try{return me.decodeString(re,!0)}catch(ee){console.error("base64Decode failed: ",ee)}return null};function ne(re){return de(void 0,re)}function de(re,ee){if(!(ee instanceof Object))return ee;switch(ee.constructor){case Date:return new Date(ee.getTime());case Object:void 0===re&&(re={});break;case Array:re=[];break;default:return ee}for(const ue in ee)!ee.hasOwnProperty(ue)||!at(ue)||(re[ue]=de(re[ue],ee[ue]));return re}function at(re){return"__proto__"!==re}const Je=()=>{try{return function We(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const re=process.env.__FIREBASE_DEFAULTS__;return re?JSON.parse(re):void 0})()||(()=>{if(typeof document>"u")return;let re;try{re=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const ee=re&&te(re[1]);return ee&&JSON.parse(ee)})()}catch(re){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${re}`)}},tt=()=>{var re;return null===(re=Je())||void 0===re?void 0:re.config},Be=re=>{var ee;return null===(ee=Je())||void 0===ee?void 0:ee[`_${re}`]};class He{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ee,ue)=>{this.resolve=ee,this.reject=ue})}wrapCallback(ee){return(ue,Ze)=>{ue?this.reject(ue):this.resolve(Ze),"function"==typeof ee&&(this.promise.catch(()=>{}),1===ee.length?ee(ue):ee(ue,Ze))}}}function ft(re,ee){if(re.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ze=ee||"demo-project",ve=re.iat||0,it=re.sub||re.user_id;if(!it)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const le=Object.assign({iss:`https://securetoken.google.com/${Ze}`,aud:Ze,iat:ve,exp:ve+3600,auth_time:ve,sub:it,user_id:it,firebase:{sign_in_provider:"custom",identities:{}}},re);return[Ie(JSON.stringify({alg:"none",type:"JWT"})),Ie(JSON.stringify(le)),""].join(".")}function et(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function At(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(et())}function De(){var re;const ee=null===(re=Je())||void 0===re?void 0:re.forceEnvironment;if("node"===ee)return!0;if("browser"===ee)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Yt(){return"object"==typeof self&&self.self===self}function _t(){const re="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof re&&void 0!==re.id}function Dt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ne(){const re=et();return re.indexOf("MSIE ")>=0||re.indexOf("Trident/")>=0}function ze(){return!0===S.NODE_CLIENT||!0===S.NODE_ADMIN}function $e(){return!De()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dt(){try{return"object"==typeof indexedDB}catch{return!1}}function ut(){return new Promise((re,ee)=>{try{let ue=!0;const Ze="validate-browser-context-for-indexeddb-analytics-module",ve=self.indexedDB.open(Ze);ve.onsuccess=()=>{ve.result.close(),ue||self.indexedDB.deleteDatabase(Ze),re(!0)},ve.onupgradeneeded=()=>{ue=!1},ve.onerror=()=>{var it;ee((null===(it=ve.error)||void 0===it?void 0:it.message)||"")}}catch(ue){ee(ue)}})}function Ct(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class sn extends Error{constructor(ee,ue,Ze){super(ue),this.code=ee,this.customData=Ze,this.name="FirebaseError",Object.setPrototypeOf(this,sn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Tt.prototype.create)}}class Tt{constructor(ee,ue,Ze){this.service=ee,this.serviceName=ue,this.errors=Ze}create(ee,...ue){const Ze=ue[0]||{},ve=`${this.service}/${ee}`,it=this.errors[ee],le=it?function Cn(re,ee){return re.replace(Jt,(ue,Ze)=>{const ve=ee[Ze];return null!=ve?String(ve):`<${Ze}?>`})}(it,Ze):"Error";return new sn(ve,`${this.serviceName}: ${le} (${ve}).`,Ze)}}const Jt=/\{\$([^}]+)}/g;function xn(re){return JSON.parse(re)}function Jn(re){return JSON.stringify(re)}const hr=function(re){let ee={},ue={},Ze={},ve="";try{const it=re.split(".");ee=xn(te(it[0])||""),ue=xn(te(it[1])||""),ve=it[2],Ze=ue.d||{},delete ue.d}catch{}return{header:ee,claims:ue,data:Ze,signature:ve}},Jr=function(re){const ue=hr(re).claims;return!!ue&&"object"==typeof ue&&ue.hasOwnProperty("iat")},en=function(re){const ee=hr(re).claims;return"object"==typeof ee&&!0===ee.admin};function Xr(re,ee){return Object.prototype.hasOwnProperty.call(re,ee)}function Us(re,ee){if(Object.prototype.hasOwnProperty.call(re,ee))return re[ee]}function Ui(re){for(const ee in re)if(Object.prototype.hasOwnProperty.call(re,ee))return!1;return!0}function Vr(re,ee,ue){const Ze={};for(const ve in re)Object.prototype.hasOwnProperty.call(re,ve)&&(Ze[ve]=ee.call(ue,re[ve],ve,re));return Ze}function Vt(re,ee){if(re===ee)return!0;const ue=Object.keys(re),Ze=Object.keys(ee);for(const ve of ue){if(!Ze.includes(ve))return!1;const it=re[ve],le=ee[ve];if(lr(it)&&lr(le)){if(!Vt(it,le))return!1}else if(it!==le)return!1}for(const ve of Ze)if(!ue.includes(ve))return!1;return!0}function lr(re){return null!==re&&"object"==typeof re}function oi(re){const ee=[];for(const[ue,Ze]of Object.entries(re))Array.isArray(Ze)?Ze.forEach(ve=>{ee.push(encodeURIComponent(ue)+"="+encodeURIComponent(ve))}):ee.push(encodeURIComponent(ue)+"="+encodeURIComponent(Ze));return ee.length?"&"+ee.join("&"):""}function ai(re){const ee={};return re.replace(/^\?/,"").split("&").forEach(Ze=>{if(Ze){const[ve,it]=Ze.split("=");ee[decodeURIComponent(ve)]=decodeURIComponent(it)}}),ee}function Vs(re){const ee=re.indexOf("?");if(!ee)return"";const ue=re.indexOf("#",ee);return re.substring(ee,ue>0?ue:void 0)}class nn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let ee=1;ee<this.blockSize;++ee)this.pad_[ee]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(ee,ue){ue||(ue=0);const Ze=this.W_;if("string"==typeof ee)for(let Ye=0;Ye<16;Ye++)Ze[Ye]=ee.charCodeAt(ue)<<24|ee.charCodeAt(ue+1)<<16|ee.charCodeAt(ue+2)<<8|ee.charCodeAt(ue+3),ue+=4;else for(let Ye=0;Ye<16;Ye++)Ze[Ye]=ee[ue]<<24|ee[ue+1]<<16|ee[ue+2]<<8|ee[ue+3],ue+=4;for(let Ye=16;Ye<80;Ye++){const Bt=Ze[Ye-3]^Ze[Ye-8]^Ze[Ye-14]^Ze[Ye-16];Ze[Ye]=4294967295&(Bt<<1|Bt>>>31)}let pe,Le,ve=this.chain_[0],it=this.chain_[1],le=this.chain_[2],se=this.chain_[3],K=this.chain_[4];for(let Ye=0;Ye<80;Ye++){Ye<40?Ye<20?(pe=se^it&(le^se),Le=1518500249):(pe=it^le^se,Le=1859775393):Ye<60?(pe=it&le|se&(it|le),Le=2400959708):(pe=it^le^se,Le=3395469782);const Bt=(ve<<5|ve>>>27)+pe+K+Le+Ze[Ye]&4294967295;K=se,se=le,le=4294967295&(it<<30|it>>>2),it=ve,ve=Bt}this.chain_[0]=this.chain_[0]+ve&4294967295,this.chain_[1]=this.chain_[1]+it&4294967295,this.chain_[2]=this.chain_[2]+le&4294967295,this.chain_[3]=this.chain_[3]+se&4294967295,this.chain_[4]=this.chain_[4]+K&4294967295}update(ee,ue){if(null==ee)return;void 0===ue&&(ue=ee.length);const Ze=ue-this.blockSize;let ve=0;const it=this.buf_;let le=this.inbuf_;for(;ve<ue;){if(0===le)for(;ve<=Ze;)this.compress_(ee,ve),ve+=this.blockSize;if("string"==typeof ee){for(;ve<ue;)if(it[le]=ee.charCodeAt(ve),++le,++ve,le===this.blockSize){this.compress_(it),le=0;break}}else for(;ve<ue;)if(it[le]=ee[ve],++le,++ve,le===this.blockSize){this.compress_(it),le=0;break}}this.inbuf_=le,this.total_+=ue}digest(){const ee=[];let ue=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ve=this.blockSize-1;ve>=56;ve--)this.buf_[ve]=255&ue,ue/=256;this.compress_(this.buf_);let Ze=0;for(let ve=0;ve<5;ve++)for(let it=24;it>=0;it-=8)ee[Ze]=this.chain_[ve]>>it&255,++Ze;return ee}}function mn(re,ee){const ue=new vt(re,ee);return ue.subscribe.bind(ue)}class vt{constructor(ee,ue){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ue,this.task.then(()=>{ee(this)}).catch(Ze=>{this.error(Ze)})}next(ee){this.forEachObserver(ue=>{ue.next(ee)})}error(ee){this.forEachObserver(ue=>{ue.error(ee)}),this.close(ee)}complete(){this.forEachObserver(ee=>{ee.complete()}),this.close()}subscribe(ee,ue,Ze){let ve;if(void 0===ee&&void 0===ue&&void 0===Ze)throw new Error("Missing Observer.");ve=function li(re,ee){if("object"!=typeof re||null===re)return!1;for(const ue of ee)if(ue in re&&"function"==typeof re[ue])return!0;return!1}(ee,["next","error","complete"])?ee:{next:ee,error:ue,complete:Ze},void 0===ve.next&&(ve.next=ei),void 0===ve.error&&(ve.error=ei),void 0===ve.complete&&(ve.complete=ei);const it=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ve.error(this.finalError):ve.complete()}catch{}}),this.observers.push(ve),it}unsubscribeOne(ee){void 0===this.observers||void 0===this.observers[ee]||(delete this.observers[ee],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ee){if(!this.finalized)for(let ue=0;ue<this.observers.length;ue++)this.sendOne(ue,ee)}sendOne(ee,ue){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ee])try{ue(this.observers[ee])}catch(Ze){typeof console<"u"&&console.error&&console.error(Ze)}})}close(ee){this.finalized||(this.finalized=!0,void 0!==ee&&(this.finalError=ee),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ei(){}const fr=function(re,ee,ue,Ze){let ve;if(Ze<ee?ve="at least "+ee:Ze>ue&&(ve=0===ue?"none":"no more than "+ue),ve)throw new Error(re+" failed: Was called with "+Ze+(1===Ze?" argument.":" arguments.")+" Expects "+ve+".")};function Bn(re,ee){return`${re} failed: ${ee} argument `}function ti(re,ee,ue,Ze){if((!Ze||ue)&&"function"!=typeof ue)throw new Error(Bn(re,ee)+"must be a valid function.")}function Zn(re,ee,ue,Ze){if((!Ze||ue)&&("object"!=typeof ue||null===ue))throw new Error(Bn(re,ee)+"must be a valid context object.")}const Di=function(re){const ee=[];let ue=0;for(let Ze=0;Ze<re.length;Ze++){let ve=re.charCodeAt(Ze);if(ve>=55296&&ve<=56319){const it=ve-55296;Ze++,o(Ze<re.length,"Surrogate pair missing trail surrogate."),ve=65536+(it<<10)+(re.charCodeAt(Ze)-56320)}ve<128?ee[ue++]=ve:ve<2048?(ee[ue++]=ve>>6|192,ee[ue++]=63&ve|128):ve<65536?(ee[ue++]=ve>>12|224,ee[ue++]=ve>>6&63|128,ee[ue++]=63&ve|128):(ee[ue++]=ve>>18|240,ee[ue++]=ve>>12&63|128,ee[ue++]=ve>>6&63|128,ee[ue++]=63&ve|128)}return ee},cn=function(re){let ee=0;for(let ue=0;ue<re.length;ue++){const Ze=re.charCodeAt(ue);Ze<128?ee++:Ze<2048?ee+=2:Ze>=55296&&Ze<=56319?(ee+=4,ue++):ee+=3}return ee},Rn=1e3,Br=2,qn=144e5,Tr=.5;function Ai(re,ee=Rn,ue=Br){const Ze=ee*Math.pow(ue,re),ve=Math.round(Tr*Ze*(Math.random()-.5)*2);return Math.min(qn,Ze+ve)}function Zr(re){return re&&re._delegate?re._delegate:re}},5645:(Pt,Re,B)=>{var S=B(1481),o=B(4650);class q{}class he{}const ce="*";function me(n,e){return{type:7,name:n,definitions:e,options:{}}}function be(n,e=null){return{type:4,styles:e,timings:n}}function Ie(n,e=null){return{type:2,steps:n,options:e}}function te(n){return{type:6,styles:n,offset:null}}function ne(n,e,t){return{type:0,name:n,styles:e,options:t}}function at(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function Xe(n){Promise.resolve().then(n)}class ct{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Xe(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class tt{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const l=this.players.length;0==l?Xe(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++t==l&&this._onFinish()}),c.onDestroy(()=>{++r==l&&this._onDestroy()}),c.onStart(()=>{++i==l&&this._onStart()})}),this.totalTime=this.players.reduce((c,f)=>Math.max(c,f.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const Be="!";function ft(n){return new o.vHH(3e3,!1)}function nn(){return typeof window<"u"&&typeof window.document<"u"}function mn(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function vt(n){switch(n.length){case 0:return new ct;case 1:return n[0];default:return new tt(n)}}function Wt(n,e,t,r,i=new Map,l=new Map){const c=[],f=[];let _=-1,C=null;if(r.forEach(R=>{const F=R.get("offset"),H=F==_,J=H&&C||new Map;R.forEach((ie,we)=>{let Fe=we,lt=ie;if("offset"!==we)switch(Fe=e.normalizePropertyName(Fe,c),lt){case Be:lt=i.get(we);break;case ce:lt=l.get(we);break;default:lt=e.normalizeStyleValue(we,Fe,lt,c)}J.set(Fe,lt)}),H||f.push(J),C=J,_=F}),c.length)throw function Qr(n){return new o.vHH(3502,!1)}();return f}function li(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&ei(t,"start",n)));break;case"done":n.onDone(()=>r(t&&ei(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&ei(t,"destroy",n)))}}function ei(n,e,t){const l=fr(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),c=n._data;return null!=c&&(l._data=c),l}function fr(n,e,t,r,i="",l=0,c){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:l,disabled:!!c}}function Bn(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function pr(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let ti=(n,e)=>!1,Zn=(n,e,t)=>[],Di=null;function cn(n){const e=n.parentNode||n.host;return e===Di?null:e}(mn()||typeof Element<"u")&&(nn()?(Di=(()=>document.documentElement)(),ti=(n,e)=>{for(;e;){if(e===n)return!0;e=cn(e)}return!1}):ti=(n,e)=>n.contains(e),Zn=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Br=null,qn=!1;const Ki=ti,Zr=Zn;let ee=(()=>{class n{validateStyleProperty(t){return function Tr(n){Br||(Br=function ir(){return typeof document<"u"?document.body:null}()||{},qn=!!Br.style&&"WebkitAppearance"in Br.style);let e=!0;return Br.style&&!function Rn(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Br.style,!e&&qn&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Br.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return Ki(t,r)}getParentElement(t){return cn(t)}query(t,r,i){return Zr(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,l,c,f=[],_){return new ct(i,l)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),ue=(()=>{class n{}return n.NOOP=new ee,n})();const Ze=1e3,le="ng-enter",se="ng-leave",K="ng-trigger",pe=".ng-trigger",Le="ng-animating",Ye=".ng-animating";function Bt(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Ln(parseFloat(e[1]),e[2])}function Ln(n,e){return"s"===e?n*Ze:n}function zn(n,e,t){return n.hasOwnProperty("duration")?n:function yo(n,e,t){let i,l=0,c="";if("string"==typeof n){const f=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===f)return e.push(ft()),{duration:0,delay:0,easing:""};i=Ln(parseFloat(f[1]),f[2]);const _=f[3];null!=_&&(l=Ln(parseFloat(_),f[4]));const C=f[5];C&&(c=C)}else i=n;if(!t){let f=!1,_=e.length;i<0&&(e.push(function et(){return new o.vHH(3100,!1)}()),f=!0),l<0&&(e.push(function At(){return new o.vHH(3101,!1)}()),f=!0),f&&e.splice(_,0,ft())}return{duration:i,delay:l,easing:c}}(n,e,t)}function Me(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function Ce(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function Ft(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function _n(n,e,t){return t?e+":"+t+";":""}function zt(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=_n(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=_n(0,gr(t),n.style[t]));n.setAttribute("style",e)}function vn(n,e,t){n.style&&(e.forEach((r,i)=>{const l=rn(i);t&&!t.has(i)&&t.set(i,n.style[l]),n.style[l]=r}),mn()&&zt(n))}function bn(n,e){n.style&&(e.forEach((t,r)=>{const i=rn(r);n.style[i]=""}),mn()&&zt(n))}function Ir(n){return Array.isArray(n)?1==n.length?n[0]:Ie(n):n}const Bs=new RegExp("{{\\s*(.+?)\\s*}}","g");function Zo(n){let e=[];if("string"==typeof n){let t;for(;t=Bs.exec(n);)e.push(t[1]);Bs.lastIndex=0}return e}function As(n,e,t){const r=n.toString(),i=r.replace(Bs,(l,c)=>{let f=e[c];return null==f&&(t.push(function Yt(n){return new o.vHH(3003,!1)}()),f=""),f.toString()});return i==r?n:i}function gi(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const wt=/-+([a-z0-9])/g;function rn(n){return n.replace(wt,(...e)=>e[1].toUpperCase())}function gr(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function jn(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function _t(n){return new o.vHH(3004,!1)}()}}function Qs(n,e){return window.getComputedStyle(n)[e]}const jr="*";function wr(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function Yi(n,e,t){if(":"==n[0]){const _=function ms(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function xn(n){return new o.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof _)return void e.push(_);n=_}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function Jt(n){return new o.vHH(3015,!1)}()),e;const i=r[1],l=r[2],c=r[3];e.push(ui(i,c));"<"==l[0]&&!(i==jr&&c==jr)&&e.push(ui(c,i))}(r,t,e)):t.push(n),t}const mi=new Set(["true","1"]),xs=new Set(["false","0"]);function ui(n,e){const t=mi.has(n)||xs.has(n),r=mi.has(e)||xs.has(e);return(i,l)=>{let c=n==jr||n==i,f=e==jr||e==l;return!c&&t&&"boolean"==typeof i&&(c=i?mi.has(n):xs.has(n)),!f&&r&&"boolean"==typeof l&&(f=l?mi.has(e):xs.has(e)),c&&f}}const Qi=new RegExp("s*:selfs*,?","g");function Ho(n,e,t,r){return new da(n).build(e,t,r)}class da{constructor(e){this._driver=e}build(e,t,r){const i=new ni(t);return this._resetContextStyleTimingState(i),jn(this,Ir(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const l=[],c=[];return"@"==e.name.charAt(0)&&t.errors.push(function Et(){return new o.vHH(3006,!1)}()),e.definitions.forEach(f=>{if(this._resetContextStyleTimingState(t),0==f.type){const _=f,C=_.name;C.toString().split(/\s*,\s*/).forEach(R=>{_.name=R,l.push(this.visitState(_,t))}),_.name=C}else if(1==f.type){const _=this.visitTransition(f,t);r+=_.queryCount,i+=_.depCount,c.push(_)}else t.errors.push(function Ne(){return new o.vHH(3007,!1)}())}),{type:7,name:e.name,states:l,transitions:c,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const l=new Set,c=i||{};r.styles.forEach(f=>{f instanceof Map&&f.forEach(_=>{Zo(_).forEach(C=>{c.hasOwnProperty(C)||l.add(C)})})}),l.size&&(gi(l.values()),t.errors.push(function Ve(n,e){return new o.vHH(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=jn(this,Ir(e.animation),t);return{type:1,matchers:wr(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Sr(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>jn(this,r,t)),options:Sr(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const l=e.steps.map(c=>{t.currentTime=r;const f=jn(this,c,t);return i=Math.max(i,t.currentTime),f});return t.currentTime=i,{type:3,steps:l,options:Sr(e.options)}}visitAnimate(e,t){const r=function Ji(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return $o(zn(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(l=>"{"==l.charAt(0)&&"{"==l.charAt(1))){const l=$o(0,0,"");return l.dynamic=!0,l.strValue=t,l}const i=zn(t,e);return $o(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,l=e.styles?e.styles:te({});if(5==l.type)i=this.visitKeyframes(l,t);else{let c=e.styles,f=!1;if(!c){f=!0;const C={};r.easing&&(C.easing=r.easing),c=te(C)}t.currentTime+=r.duration+r.delay;const _=this.visitStyle(c,t);_.isEmptyStep=f,i=_}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let f of i)"string"==typeof f?f===ce?r.push(f):t.errors.push(new o.vHH(3002,!1)):r.push(Ce(f));let l=!1,c=null;return r.forEach(f=>{if(f instanceof Map&&(f.has("easing")&&(c=f.get("easing"),f.delete("easing")),!l))for(let _ of f.values())if(_.toString().indexOf("{{")>=0){l=!0;break}}),{type:6,styles:r,easing:c,offset:e.offset,containsDynamicStyles:l,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,l=t.currentTime;r&&l>0&&(l-=r.duration+r.delay),e.styles.forEach(c=>{"string"!=typeof c&&c.forEach((f,_)=>{const C=t.collectedStyles.get(t.currentQuerySelector),R=C.get(_);let F=!0;R&&(l!=i&&l>=R.startTime&&i<=R.endTime&&(t.errors.push(function dt(n,e,t,r,i){return new o.vHH(3010,!1)}()),F=!1),l=R.startTime),F&&C.set(_,{startTime:l,endTime:i}),t.options&&function _r(n,e,t){const r=e.params||{},i=Zo(n);i.length&&i.forEach(l=>{r.hasOwnProperty(l)||t.push(function De(n){return new o.vHH(3001,!1)}())})}(f,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function ut(){return new o.vHH(3011,!1)}()),r;let l=0;const c=[];let f=!1,_=!1,C=0;const R=e.steps.map(lt=>{const $t=this._makeStyleAst(lt,t);let Ut=null!=$t.offset?$t.offset:function al(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}($t.styles),Qt=0;return null!=Ut&&(l++,Qt=$t.offset=Ut),_=_||Qt<0||Qt>1,f=f||Qt<C,C=Qt,c.push(Qt),$t});_&&t.errors.push(function Ct(){return new o.vHH(3012,!1)}()),f&&t.errors.push(function xt(){return new o.vHH(3200,!1)}());const F=e.steps.length;let H=0;l>0&&l<F?t.errors.push(function sn(){return new o.vHH(3202,!1)}()):0==l&&(H=1/(F-1));const J=F-1,ie=t.currentTime,we=t.currentAnimateTimings,Fe=we.duration;return R.forEach((lt,$t)=>{const Ut=H>0?$t==J?1:H*$t:c[$t],Qt=Ut*Fe;t.currentTime=ie+we.delay+Qt,we.duration=Qt,this._validateStyleAst(lt,t),lt.offset=Ut,r.styles.push(lt)}),r}visitReference(e,t){return{type:8,animation:jn(this,Ir(e.animation),t),options:Sr(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Sr(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Sr(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[l,c]=function wo(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(Qi,"")),n=n.replace(/@\*/g,pe).replace(/@\w+/g,t=>pe+"-"+t.slice(1)).replace(/:animating/g,Ye),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+l:l,Bn(t.collectedStyles,t.currentQuerySelector,new Map);const f=jn(this,Ir(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:l,limit:i.limit||0,optional:!!i.optional,includeSelf:c,animation:f,originalSelector:e.selector,options:Sr(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function Tt(){return new o.vHH(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:zn(e.timings,t.errors,!0);return{type:12,animation:jn(this,Ir(e.animation),t),timings:r,options:null}}}class ni{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Sr(n){return n?(n=Me(n)).params&&(n.params=function Co(n){return n?Me(n):null}(n.params)):n={},n}function $o(n,e,t){return{duration:n,delay:e,easing:t}}function bo(n,e,t,r,i,l,c=null,f=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:l,totalTime:i+l,easing:c,subTimeline:f}}class ha{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const _s=new RegExp(":enter","g"),Fl=new RegExp(":leave","g");function Hr(n,e,t,r,i,l=new Map,c=new Map,f,_,C=[]){return(new Fa).buildKeyframes(n,e,t,r,i,l,c,f,_,C)}class Fa{buildKeyframes(e,t,r,i,l,c,f,_,C,R=[]){C=C||new ha;const F=new cl(e,t,C,i,l,R,[]);F.options=_;const H=_.delay?Bt(_.delay):0;F.currentTimeline.delayNextStep(H),F.currentTimeline.setStyles([c],null,F.errors,_),jn(this,r,F);const J=F.timelines.filter(ie=>ie.containsAnimation());if(J.length&&f.size){let ie;for(let we=J.length-1;we>=0;we--){const Fe=J[we];if(Fe.element===t){ie=Fe;break}}ie&&!ie.allowOnlyTimelineStyles()&&ie.setStyles([f],null,F.errors,_)}return J.length?J.map(ie=>ie.buildKeyframes()):[bo(t,[],[],[],0,H,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),l=t.currentTimeline.currentTime,c=this._visitSubInstructions(r,i,i.options);l!=c&&t.transformIntoNewTimeline(c)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const l=i?.delay;if(l){const c="number"==typeof l?l:Bt(As(l,i?.params??{},t.errors));r.delayNextStep(c)}}}_visitSubInstructions(e,t,r){let l=t.currentTimeline.currentTime;const c=null!=r.duration?Bt(r.duration):null,f=null!=r.delay?Bt(r.delay):null;return 0!==c&&e.forEach(_=>{const C=t.appendInstructionToTimeline(_,c,f);l=Math.max(l,C.duration+C.delay)}),l}visitReference(e,t){t.updateOptions(e.options,!0),jn(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const l=e.options;if(l&&(l.params||l.delay)&&(i=t.createSubContext(l),i.transformIntoNewTimeline(),null!=l.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=qo);const c=Bt(l.delay);i.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>jn(this,c,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const l=e.options&&e.options.delay?Bt(e.options.delay):0;e.steps.forEach(c=>{const f=t.createSubContext(e.options);l&&f.delayNextStep(l),jn(this,c,f),i=Math.max(i,f.currentTimeline.currentTime),r.push(f.currentTimeline)}),r.forEach(c=>t.currentTimeline.mergeTimelineCollectedStyles(c)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return zn(t.params?As(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const l=e.style;5==l.type?this.visitKeyframes(l,t):(t.incrementTime(r.duration),this.visitStyle(l,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const l=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(l):r.setStyles(e.styles,l,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,l=r.duration,f=t.createSubContext().currentTimeline;f.easing=r.easing,e.styles.forEach(_=>{f.forwardTime((_.offset||0)*l),f.setStyles(_.styles,_.easing,t.errors,t.options),f.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(f),t.transformIntoNewTimeline(i+l),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},l=i.delay?Bt(i.delay):0;l&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=qo);let c=r;const f=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=f.length;let _=null;f.forEach((C,R)=>{t.currentQueryIndex=R;const F=t.createSubContext(e.options,C);l&&F.delayNextStep(l),C===t.element&&(_=F.currentTimeline),jn(this,e.animation,F),F.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,F.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(c),_&&(t.currentTimeline.mergeTimelineCollectedStyles(_),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,l=e.timings,c=Math.abs(l.duration),f=c*(t.currentQueryTotal-1);let _=c*t.currentQueryIndex;switch(l.duration<0?"reverse":l.easing){case"reverse":_=f-_;break;case"full":_=r.currentStaggerTime}const R=t.currentTimeline;_&&R.delayNextStep(_);const F=R.currentTime;jn(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-F+(i.startTime-r.currentTimeline.startTime)}}const qo={};class cl{constructor(e,t,r,i,l,c,f,_){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=l,this.errors=c,this.timelines=f,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=qo,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=_||new La(this._driver,t,0),f.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Bt(r.duration)),null!=r.delay&&(i.delay=Bt(r.delay));const l=r.params;if(l){let c=i.params;c||(c=this.options.params={}),Object.keys(l).forEach(f=>{(!t||!c.hasOwnProperty(f))&&(c[f]=As(l[f],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,l=new cl(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return l.previousNode=this.previousNode,l.currentAnimateTimings=this.currentAnimateTimings,l.options=this._copyOptions(),l.updateOptions(e),l.currentQueryIndex=this.currentQueryIndex,l.currentQueryTotal=this.currentQueryTotal,l.parentContext=this,this.subContextCount++,l}transformIntoNewTimeline(e){return this.previousNode=qo,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},l=new fa(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(l),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,l,c){let f=[];if(i&&f.push(this.element),e.length>0){e=(e=e.replace(_s,"."+this._enterClassName)).replace(Fl,"."+this._leaveClassName);let C=this._driver.query(this.element,e,1!=r);0!==r&&(C=r<0?C.slice(C.length+r,C.length):C.slice(0,r)),f.push(...C)}return!l&&0==f.length&&c.push(function Cn(n){return new o.vHH(3014,!1)}()),f}}class La{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new La(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||ce),this._currentKeyframe.set(t,ce);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const l=i&&i.params||{},c=function cu(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let l of r)t.set(l,ce)}else Ft(i,t)}),t}(e,this._globalTimelineStyles);for(let[f,_]of c){const C=As(_,l,r);this._pendingStyles.set(f,C),this._localTimelineStyles.has(f)||this._backFill.set(f,this._globalTimelineStyles.get(f)??ce),this._updateStyle(f,C)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((f,_)=>{const C=Ft(f,new Map,this._backFill);C.forEach((R,F)=>{R===Be?e.add(F):R===ce&&t.add(F)}),r||C.set("offset",_/this.duration),i.push(C)});const l=e.size?gi(e.values()):[],c=t.size?gi(t.values()):[];if(r){const f=i[0],_=new Map(f);f.set("offset",0),_.set("offset",1),i=[f,_]}return bo(this.element,i,l,c,this.duration,this.startTime,this.easing,!1)}}class fa extends La{constructor(e,t,r,i,l,c,f=!1){super(e,t,c.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=l,this._stretchStartingKeyframe=f,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const l=[],c=r+t,f=t/c,_=Ft(e[0]);_.set("offset",0),l.push(_);const C=Ft(e[0]);C.set("offset",pa(f)),l.push(C);const R=e.length-1;for(let F=1;F<=R;F++){let H=Ft(e[F]);const J=H.get("offset");H.set("offset",pa((t+J*r)/c)),l.push(H)}r=c,t=0,i="",e=l}return bo(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function pa(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class zo{}const du=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class dl extends zo{normalizePropertyName(e,t){return rn(e)}normalizeStyleValue(e,t,r,i){let l="";const c=r.toString().trim();if(du.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)l="px";else{const f=r.match(/^[+-]?[\d\.]+([a-z]*)$/);f&&0==f[1].length&&i.push(function Dt(n,e){return new o.vHH(3005,!1)}())}return c+l}}function Js(n,e,t,r,i,l,c,f,_,C,R,F,H){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:l,toState:r,toStyles:c,timelines:f,queriedElements:_,preStyleProps:C,postStyleProps:R,totalTime:F,errors:H}}const tc={};class ga{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function js(n,e,t,r,i){return n.some(l=>l(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,l,c,f,_,C,R){const F=[],H=this.ast.options&&this.ast.options.params||tc,ie=this.buildStyles(r,f&&f.params||tc,F),we=_&&_.params||tc,Fe=this.buildStyles(i,we,F),lt=new Set,$t=new Map,Ut=new Map,Qt="void"===i,An={params:Xs(we,H),delay:this.ast.options?.delay},In=R?[]:Hr(e,t,this.ast.animation,l,c,ie,Fe,An,C,F);let dr=0;if(In.forEach(Ju=>{dr=Math.max(Ju.duration+Ju.delay,dr)}),F.length)return Js(t,this._triggerName,r,i,Qt,ie,Fe,[],[],$t,Ut,dr,F);In.forEach(Ju=>{const ff=Ju.element,oN=Bn($t,ff,new Set);Ju.preStyleProps.forEach(wm=>oN.add(wm));const rC=Bn(Ut,ff,new Set);Ju.postStyleProps.forEach(wm=>rC.add(wm)),ff!==t&&lt.add(ff)});const Ys=gi(lt.values());return Js(t,this._triggerName,r,i,Qt,ie,Fe,In,Ys,$t,Ut,dr)}}function Xs(n,e){const t=Me(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class hl{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=Me(this.defaultParams);return Object.keys(e).forEach(l=>{const c=e[l];null!==c&&(i[l]=c)}),this.styles.styles.forEach(l=>{"string"!=typeof l&&l.forEach((c,f)=>{c&&(c=As(c,i,t));const _=this.normalizer.normalizePropertyName(f,t);c=this.normalizer.normalizeStyleValue(f,_,c,t),r.set(f,c)})}),r}}class Ll{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new hl(i.style,i.options&&i.options.params||{},r))}),eo(this.states,"true","1"),eo(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new ga(e,i,this.states))}),this.fallbackTransition=function fl(n,e,t){return new ga(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,f)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(c=>c.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function eo(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const Ua=new ha;class Wo{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],i=[],l=Ho(this._driver,t,r,i);if(r.length)throw function Jr(n){return new o.vHH(3503,!1)}();this._animations.set(e,l)}_buildPlayer(e,t,r){const i=e.element,l=Wt(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,l,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],l=this._animations.get(e);let c;const f=new Map;if(l?(c=Hr(this._driver,t,l,le,se,new Map,new Map,r,Ua,i),c.forEach(R=>{const F=Bn(f,R.element,new Map);R.postStyleProps.forEach(H=>F.set(H,null))})):(i.push(function en(){return new o.vHH(3300,!1)}()),c=[]),i.length)throw function Xr(n){return new o.vHH(3504,!1)}();f.forEach((R,F)=>{R.forEach((H,J)=>{R.set(J,this._driver.computeStyle(F,J,ce))})});const C=vt(c.map(R=>{const F=f.get(R.element);return this._buildPlayer(R,new Map,F)}));return this._playersById.set(e,C),C.onDestroy(()=>this.destroy(e)),this.players.push(C),C}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function Us(n){return new o.vHH(3301,!1)}();return t}listen(e,t,r,i){const l=fr(t,"","","");return li(this._getPlayer(e),r,l,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const l=this._getPlayer(e);switch(r){case"play":l.play();break;case"pause":l.pause();break;case"reset":l.reset();break;case"restart":l.restart();break;case"finish":l.finish();break;case"init":l.init();break;case"setPosition":l.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const Ko="ng-animate-queued",_i="ng-animate-disabled",Va=[],to={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},vi={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},xi="__ng_removed";class pl{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function wa(n){return n??null}(r?e.value:e),r){const l=Me(e);delete l.value,this.options=l}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const $r="void",Pr=new pl($r);class ya{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Nr(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function Ui(n,e){return new o.vHH(3302,!1)}();if(null==r||0==r.length)throw function Vr(n){return new o.vHH(3303,!1)}();if(!function ln(n){return"start"==n||"done"==n}(r))throw function Vt(n,e){return new o.vHH(3400,!1)}();const l=Bn(this._elementListeners,e,[]),c={name:t,phase:r,callback:i};l.push(c);const f=Bn(this._engine.statesByElement,e,new Map);return f.has(t)||(Nr(e,K),Nr(e,K+"-"+t),f.set(t,Pr)),()=>{this._engine.afterFlush(()=>{const _=l.indexOf(c);_>=0&&l.splice(_,1),this._triggers.has(t)||f.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function lr(n){return new o.vHH(3401,!1)}();return t}trigger(e,t,r,i=!0){const l=this._getTrigger(t),c=new va(this.id,t,e);let f=this._engine.statesByElement.get(e);f||(Nr(e,K),Nr(e,K+"-"+t),this._engine.statesByElement.set(e,f=new Map));let _=f.get(t);const C=new pl(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&_&&C.absorbOptions(_.options),f.set(t,C),_||(_=Pr),C.value!==$r&&_.value===C.value){if(!function Oe(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const l=t[i];if(!e.hasOwnProperty(l)||n[l]!==e[l])return!1}return!0}(_.params,C.params)){const we=[],Fe=l.matchStyles(_.value,_.params,we),lt=l.matchStyles(C.value,C.params,we);we.length?this._engine.reportError(we):this._engine.afterFlush(()=>{bn(e,Fe),vn(e,lt)})}return}const H=Bn(this._engine.playersByElement,e,[]);H.forEach(we=>{we.namespaceId==this.id&&we.triggerName==t&&we.queued&&we.destroy()});let J=l.matchTransition(_.value,C.value,e,C.params),ie=!1;if(!J){if(!i)return;J=l.fallbackTransition,ie=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:J,fromState:_,toState:C,player:c,isFallbackTransition:ie}),ie||(Nr(e,Ko),c.onStart(()=>{Ms(e,Ko)})),c.onDone(()=>{let we=this.players.indexOf(c);we>=0&&this.players.splice(we,1);const Fe=this._engine.playersByElement.get(e);if(Fe){let lt=Fe.indexOf(c);lt>=0&&Fe.splice(lt,1)}}),this.players.push(c),H.push(c),c}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,pe,!0);r.forEach(i=>{if(i[xi])return;const l=this._engine.fetchNamespacesByElement(i);l.size?l.forEach(c=>c.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const l=this._engine.statesByElement.get(e),c=new Map;if(l){const f=[];if(l.forEach((_,C)=>{if(c.set(C,_.value),this._triggers.has(C)){const R=this.trigger(e,C,$r,i);R&&f.push(R)}}),f.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,c),r&&vt(f).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(l=>{const c=l.name;if(i.has(c))return;i.add(c);const _=this._triggers.get(c).fallbackTransition,C=r.get(c)||Pr,R=new pl($r),F=new va(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:_,fromState:C,toState:R,player:F,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const l=r.players.length?r.playersByQueriedElement.get(e):[];if(l&&l.length)i=!0;else{let c=e;for(;c=c.parentNode;)if(r.statesByElement.get(c)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const l=e[xi];(!l||l===to)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Nr(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const l=r.element,c=this._elementListeners.get(l);c&&c.forEach(f=>{if(f.name==r.triggerName){const _=fr(l,r.triggerName,r.fromState.value,r.toState.value);_._data=e,li(r.player,f.phase,_,f.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const l=r.transition.ast.depCount,c=i.transition.ast.depCount;return 0==l||0==c?l-c:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class Rr{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,l)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new ya(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let c=!1,f=this.driver.getParentElement(t);for(;f;){const _=i.get(f);if(_){const C=r.indexOf(_);r.splice(C+1,0,e),c=!0;break}f=this.driver.getParentElement(f)}c||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const l=this._fetchNamespace(i.namespaceId);l&&t.add(l)}return t}trigger(e,t,r,i){if(To(t)){const l=this._fetchNamespace(e);if(l)return l.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!To(t))return;const l=t[xi];if(l&&l.setForRemoval){l.setForRemoval=!1,l.setForMove=!0;const c=this.collectedLeaveElements.indexOf(t);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Nr(e,_i)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Ms(e,_i))}removeNode(e,t,r,i){if(To(t)){const l=e?this._fetchNamespace(e):null;if(l?l.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,l){this.collectedLeaveElements.push(t),t[xi]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:l}}listen(e,t,r,i,l){return To(t)?this._fetchNamespace(e).listen(t,r,i,l):()=>{}}_buildInstruction(e,t,r,i,l){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,l)}destroyInnerAnimations(e){let t=this.driver.query(e,pe,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,Ye,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return vt(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[xi];if(t&&t.setForRemoval){if(e[xi]=to,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(_i)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Nr(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?vt(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function ua(n){return new o.vHH(3402,!1)}()}_flushAnimations(e,t){const r=new ha,i=[],l=new Map,c=[],f=new Map,_=new Map,C=new Map,R=new Set;this.disabledNodes.forEach(tn=>{R.add(tn);const yn=this.driver.query(tn,".ng-animate-queued",!0);for(let Sn=0;Sn<yn.length;Sn++)R.add(yn[Sn])});const F=this.bodyNode,H=Array.from(this.statesByElement.keys()),J=Vl(H,this.collectedEnterElements),ie=new Map;let we=0;J.forEach((tn,yn)=>{const Sn=le+we++;ie.set(yn,Sn),tn.forEach(vr=>Nr(vr,Sn))});const Fe=[],lt=new Set,$t=new Set;for(let tn=0;tn<this.collectedLeaveElements.length;tn++){const yn=this.collectedLeaveElements[tn],Sn=yn[xi];Sn&&Sn.setForRemoval&&(Fe.push(yn),lt.add(yn),Sn.hasAnimation?this.driver.query(yn,".ng-star-inserted",!0).forEach(vr=>lt.add(vr)):$t.add(yn))}const Ut=new Map,Qt=Vl(H,Array.from(lt));Qt.forEach((tn,yn)=>{const Sn=se+we++;Ut.set(yn,Sn),tn.forEach(vr=>Nr(vr,Sn))}),e.push(()=>{J.forEach((tn,yn)=>{const Sn=ie.get(yn);tn.forEach(vr=>Ms(vr,Sn))}),Qt.forEach((tn,yn)=>{const Sn=Ut.get(yn);tn.forEach(vr=>Ms(vr,Sn))}),Fe.forEach(tn=>{this.processLeaveNode(tn)})});const An=[],In=[];for(let tn=this._namespaceList.length-1;tn>=0;tn--)this._namespaceList[tn].drainQueuedTransitions(t).forEach(Sn=>{const vr=Sn.player,Bo=Sn.element;if(An.push(vr),this.collectedEnterElements.length){const ka=Bo[xi];if(ka&&ka.setForMove){if(ka.previousTriggersValues&&ka.previousTriggersValues.has(Sn.triggerName)){const Cm=ka.previousTriggersValues.get(Sn.triggerName),Xu=this.statesByElement.get(Sn.element);if(Xu&&Xu.has(Sn.triggerName)){const iI=Xu.get(Sn.triggerName);iI.value=Cm,Xu.set(Sn.triggerName,iI)}}return void vr.destroy()}}const Yd=!F||!this.driver.containsElement(F,Bo),uu=Ut.get(Bo),Gp=ie.get(Bo),fs=this._buildInstruction(Sn,r,Gp,uu,Yd);if(fs.errors&&fs.errors.length)return void In.push(fs);if(Yd)return vr.onStart(()=>bn(Bo,fs.fromStyles)),vr.onDestroy(()=>vn(Bo,fs.toStyles)),void i.push(vr);if(Sn.isFallbackTransition)return vr.onStart(()=>bn(Bo,fs.fromStyles)),vr.onDestroy(()=>vn(Bo,fs.toStyles)),void i.push(vr);const uN=[];fs.timelines.forEach(ka=>{ka.stretchStartingKeyframe=!0,this.disabledNodes.has(ka.element)||uN.push(ka)}),fs.timelines=uN,r.append(Bo,fs.timelines),c.push({instruction:fs,player:vr,element:Bo}),fs.queriedElements.forEach(ka=>Bn(f,ka,[]).push(vr)),fs.preStyleProps.forEach((ka,Cm)=>{if(ka.size){let Xu=_.get(Cm);Xu||_.set(Cm,Xu=new Set),ka.forEach((iI,I1)=>Xu.add(I1))}}),fs.postStyleProps.forEach((ka,Cm)=>{let Xu=C.get(Cm);Xu||C.set(Cm,Xu=new Set),ka.forEach((iI,I1)=>Xu.add(I1))})});if(In.length){const tn=[];In.forEach(yn=>{tn.push(function ai(n,e){return new o.vHH(3505,!1)}())}),An.forEach(yn=>yn.destroy()),this.reportError(tn)}const dr=new Map,Ys=new Map;c.forEach(tn=>{const yn=tn.element;r.has(yn)&&(Ys.set(yn,yn),this._beforeAnimationBuild(tn.player.namespaceId,tn.instruction,dr))}),i.forEach(tn=>{const yn=tn.element;this._getPreviousPlayers(yn,!1,tn.namespaceId,tn.triggerName,null).forEach(vr=>{Bn(dr,yn,[]).push(vr),vr.destroy()})});const Ju=Fe.filter(tn=>hn(tn,_,C)),ff=new Map;Ul(ff,this.driver,$t,C,ce).forEach(tn=>{hn(tn,_,C)&&Ju.push(tn)});const rC=new Map;J.forEach((tn,yn)=>{Ul(rC,this.driver,new Set(tn),_,Be)}),Ju.forEach(tn=>{const yn=ff.get(tn),Sn=rC.get(tn);ff.set(tn,new Map([...Array.from(yn?.entries()??[]),...Array.from(Sn?.entries()??[])]))});const wm=[],aN=[],lN={};c.forEach(tn=>{const{element:yn,player:Sn,instruction:vr}=tn;if(r.has(yn)){if(R.has(yn))return Sn.onDestroy(()=>vn(yn,vr.toStyles)),Sn.disabled=!0,Sn.overrideTotalTime(vr.totalTime),void i.push(Sn);let Bo=lN;if(Ys.size>1){let uu=yn;const Gp=[];for(;uu=uu.parentNode;){const fs=Ys.get(uu);if(fs){Bo=fs;break}Gp.push(uu)}Gp.forEach(fs=>Ys.set(fs,Bo))}const Yd=this._buildAnimation(Sn.namespaceId,vr,dr,l,rC,ff);if(Sn.setRealPlayer(Yd),Bo===lN)wm.push(Sn);else{const uu=this.playersByElement.get(Bo);uu&&uu.length&&(Sn.parentPlayer=vt(uu)),i.push(Sn)}}else bn(yn,vr.fromStyles),Sn.onDestroy(()=>vn(yn,vr.toStyles)),aN.push(Sn),R.has(yn)&&i.push(Sn)}),aN.forEach(tn=>{const yn=l.get(tn.element);if(yn&&yn.length){const Sn=vt(yn);tn.setRealPlayer(Sn)}}),i.forEach(tn=>{tn.parentPlayer?tn.syncPlayerEvents(tn.parentPlayer):tn.destroy()});for(let tn=0;tn<Fe.length;tn++){const yn=Fe[tn],Sn=yn[xi];if(Ms(yn,se),Sn&&Sn.hasAnimation)continue;let vr=[];if(f.size){let Yd=f.get(yn);Yd&&Yd.length&&vr.push(...Yd);let uu=this.driver.query(yn,Ye,!0);for(let Gp=0;Gp<uu.length;Gp++){let fs=f.get(uu[Gp]);fs&&fs.length&&vr.push(...fs)}}const Bo=vr.filter(Yd=>!Yd.destroyed);Bo.length?gl(this,yn,Bo):this.processLeaveNode(yn)}return Fe.length=0,wm.forEach(tn=>{this.players.push(tn),tn.onDone(()=>{tn.destroy();const yn=this.players.indexOf(tn);this.players.splice(yn,1)}),tn.play()}),wm}elementContainsData(e,t){let r=!1;const i=t[xi];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,l){let c=[];if(t){const f=this.playersByQueriedElement.get(e);f&&(c=f)}else{const f=this.playersByElement.get(e);if(f){const _=!l||l==$r;f.forEach(C=>{C.queued||!_&&C.triggerName!=i||c.push(C)})}}return(r||i)&&(c=c.filter(f=>!(r&&r!=f.namespaceId||i&&i!=f.triggerName))),c}_beforeAnimationBuild(e,t,r){const l=t.element,c=t.isRemovalTransition?void 0:e,f=t.isRemovalTransition?void 0:t.triggerName;for(const _ of t.timelines){const C=_.element,R=C!==l,F=Bn(r,C,[]);this._getPreviousPlayers(C,R,c,f,t.toState).forEach(J=>{const ie=J.getRealPlayer();ie.beforeDestroy&&ie.beforeDestroy(),J.destroy(),F.push(J)})}bn(l,t.fromStyles)}_buildAnimation(e,t,r,i,l,c){const f=t.triggerName,_=t.element,C=[],R=new Set,F=new Set,H=t.timelines.map(ie=>{const we=ie.element;R.add(we);const Fe=we[xi];if(Fe&&Fe.removedBeforeQueried)return new ct(ie.duration,ie.delay);const lt=we!==_,$t=function Qc(n){const e=[];return Yo(n,e),e}((r.get(we)||Va).map(dr=>dr.getRealPlayer())).filter(dr=>!!dr.element&&dr.element===we),Ut=l.get(we),Qt=c.get(we),An=Wt(0,this._normalizer,0,ie.keyframes,Ut,Qt),In=this._buildPlayer(ie,An,$t);if(ie.subTimeline&&i&&F.add(we),lt){const dr=new va(e,f,we);dr.setRealPlayer(In),C.push(dr)}return In});C.forEach(ie=>{Bn(this.playersByQueriedElement,ie.element,[]).push(ie),ie.onDone(()=>function ys(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,ie.element,ie))}),R.forEach(ie=>Nr(ie,Le));const J=vt(H);return J.onDestroy(()=>{R.forEach(ie=>Ms(ie,Le)),vn(_,t.toStyles)}),F.forEach(ie=>{Bn(i,ie,[]).push(J)}),J}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new ct(e.duration,e.delay)}}class va{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new ct,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>li(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Bn(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function To(n){return n&&1===n.nodeType}function no(n,e){const t=n.style.display;return n.style.display=e??"none",t}function Ul(n,e,t,r,i){const l=[];t.forEach(_=>l.push(no(_)));const c=[];r.forEach((_,C)=>{const R=new Map;_.forEach(F=>{const H=e.computeStyle(C,F,i);R.set(F,H),(!H||0==H.length)&&(C[xi]=vi,c.push(C))}),n.set(C,R)});let f=0;return t.forEach(_=>no(_,l[f++])),c}function Vl(n,e){const t=new Map;if(n.forEach(f=>t.set(f,[])),0==e.length)return t;const r=1,i=new Set(e),l=new Map;function c(f){if(!f)return r;let _=l.get(f);if(_)return _;const C=f.parentNode;return _=t.has(C)?C:i.has(C)?r:c(C),l.set(f,_),_}return e.forEach(f=>{const _=c(f);_!==r&&t.get(_).push(f)}),t}function Nr(n,e){n.classList?.add(e)}function Ms(n,e){n.classList?.remove(e)}function gl(n,e,t){vt(t).onDone(()=>n.processLeaveNode(e))}function Yo(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof tt?Yo(r.players,e):e.push(r)}}function hn(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(l=>i.add(l)):e.set(n,r),t.delete(n),!0}class Io{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,l)=>{},this._transitionEngine=new Rr(e,t,r),this._timelineEngine=new Wo(e,t,r),this._transitionEngine.onRemovalComplete=(i,l)=>this.onRemovalComplete(i,l)}registerTrigger(e,t,r,i,l){const c=e+"-"+i;let f=this._triggerCache[c];if(!f){const _=[],C=[],R=Ho(this._driver,l,_,C);if(_.length)throw function Mr(n,e){return new o.vHH(3404,!1)}();f=function ma(n,e,t){return new Ll(n,e,t)}(i,R,this._normalizer),this._triggerCache[c]=f}this._transitionEngine.registerTrigger(t,i,f)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[l,c]=pr(r);this._timelineEngine.command(l,t,c,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,l){if("@"==r.charAt(0)){const[c,f]=pr(r);return this._timelineEngine.listen(c,t,f,l)}return this._transitionEngine.listen(e,t,r,i,l)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let ri=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let l=n.initialStylesByElement.get(t);l||n.initialStylesByElement.set(t,l=new Map),this._initialStyles=l}start(){this._state<1&&(this._startStyles&&vn(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(vn(this._element,this._initialStyles),this._endStyles&&(vn(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(bn(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(bn(this._element,this._endStyles),this._endStyles=null),vn(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function ro(n){let e=null;return n.forEach((t,r)=>{(function ml(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class Vi{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:Qs(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class hu{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return Ki(e,t)}getParentElement(e){return cn(e)}query(e,t,r){return Zr(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,l,c=[]){const _={duration:r,delay:i,fill:0==i?"both":"forwards"};l&&(_.easing=l);const C=new Map,R=c.filter(J=>J instanceof Vi);(function ps(n,e){return 0===n||0===e})(r,i)&&R.forEach(J=>{J.currentSnapshot.forEach((ie,we)=>C.set(we,ie))});let F=function nt(n){return n.length?n[0]instanceof Map?n:n.map(e=>Ce(e)):[]}(t).map(J=>Ft(J));F=function Gn(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((l,c)=>{r.has(c)||i.push(c),r.set(c,l)}),i.length)for(let l=1;l<e.length;l++){let c=e[l];i.forEach(f=>c.set(f,Qs(n,f)))}}return e}(e,F,C);const H=function Ba(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=ro(e[0]),e.length>1&&(r=ro(e[e.length-1]))):e instanceof Map&&(t=ro(e)),t||r?new ri(n,t,r):null}(e,F);return new Vi(e,F,_,H)}}var on=B(6895);let Bl=(()=>{class n extends q{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:o.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?Ie(t):t;return Or(this._renderer,null,r,"register",[i]),new Bi(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(o.FYo),o.LFG(on.K0))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class Bi extends he{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Za(this._id,e,t||{},this._renderer)}}class Za{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return Or(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function Or(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const Ps="@.disabled";let Qo=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(l,c)=>{const f=c?.parentNode(l);f&&c.removeChild(f,l)}}createRenderer(t,r){const l=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let R=this._rendererCache.get(l);return R||(R=new ts("",l,this.engine,()=>this._rendererCache.delete(l)),this._rendererCache.set(l,R)),R}const c=r.id,f=r.id+"-"+this._currentId;this._currentId++,this.engine.register(f,t);const _=R=>{Array.isArray(R)?R.forEach(_):this.engine.registerTrigger(c,f,t,R.name,R)};return r.data.animation.forEach(_),new fu(this,f,l,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(l=>{const[c,f]=l;c(f)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(o.FYo),o.LFG(Io),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class ts{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.destroyNode=this.delegate.destroyNode?l=>t.destroyNode(l):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==Ps?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class fu extends ts{constructor(e,t,r,i,l){super(t,r,i,l),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==Ps?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function ja(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let l=t.slice(1),c="";return"@"!=l.charAt(0)&&([l,c]=function _l(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(l)),this.engine.listen(this.namespaceId,i,l,c,f=>{this.factory.scheduleListenerCallback(f._data||-1,r,f)})}return this.delegate.listen(e,t,r)}}let nc=(()=>{class n extends Io{constructor(t,r,i,l){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(on.K0),o.LFG(ue),o.LFG(zo),o.LFG(o.z2F))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const Ha=[{provide:q,useClass:Bl},{provide:zo,useFactory:function qr(){return new dl}},{provide:Io,useClass:nc},{provide:o.FYo,useFactory:function So(n,e,t){return new Qo(n,e,t)},deps:[S.se,Io,o.R0b]}],Do=[{provide:ue,useFactory:()=>new hu},{provide:o.QbO,useValue:"BrowserAnimations"},...Ha],Ca=[{provide:ue,useClass:ee},{provide:o.QbO,useValue:"NoopAnimations"},...Ha];let yl=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?Ca:Do}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:Do,imports:[S.b2]}),n})();var wn=B(2435),ba=function(){return ba=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var l in t=arguments[r])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e},ba.apply(this,arguments)},$a={scale:1,zoom:!0,actualSize:!0,showZoomInOutIcons:!1,actualSizeIcons:{zoomIn:"lg-zoom-in",zoomOut:"lg-zoom-out"},enableZoomAfter:300,zoomPluginStrings:{zoomIn:"Zoom in",zoomOut:"Zoom out",viewActualSize:"View actual size"}},di=function(){function n(e,t){return this.core=e,this.$LG=t,this.settings=ba(ba({},$a),this.core.settings),this}return n.prototype.buildTemplates=function(){var e=this.settings.showZoomInOutIcons?'<button id="'+this.core.getIdName("lg-zoom-in")+'" type="button" aria-label="'+this.settings.zoomPluginStrings.zoomIn+'" class="lg-zoom-in lg-icon"></button><button id="'+this.core.getIdName("lg-zoom-out")+'" type="button" aria-label="'+this.settings.zoomPluginStrings.zoomIn+'" class="lg-zoom-out lg-icon"></button>':"";this.settings.actualSize&&(e+='<button id="'+this.core.getIdName("lg-actual-size")+'" type="button" aria-label="'+this.settings.zoomPluginStrings.viewActualSize+'" class="'+this.settings.actualSizeIcons.zoomIn+' lg-icon"></button>'),this.core.outer.addClass("lg-use-transition-for-zoom"),this.core.$toolbar.first().append(e)},n.prototype.enableZoom=function(e){var t=this,r=this.settings.enableZoomAfter+e.detail.delay;this.$LG("body").first().hasClass("lg-from-hash")&&e.detail.delay?r=0:this.$LG("body").first().removeClass("lg-from-hash"),this.zoomableTimeout=setTimeout(function(){t.isImageSlide(t.core.index)&&(t.core.getSlideItem(e.detail.index).addClass("lg-zoomable"),e.detail.index===t.core.index&&t.setZoomEssentials())},r+30)},n.prototype.enableZoomOnSlideItemLoad=function(){this.core.LGel.on("lgSlideItemLoad.zoom",this.enableZoom.bind(this))},n.prototype.getDragCords=function(e){return{x:e.pageX,y:e.pageY}},n.prototype.getSwipeCords=function(e){return{x:e.touches[0].pageX,y:e.touches[0].pageY}},n.prototype.getDragAllowedAxises=function(e,t){var r=this.core.getSlideItem(this.core.index).find(".lg-image").first().get(),i=0,l=0,c=r.getBoundingClientRect();return e?(i=r.offsetHeight*e,l=r.offsetWidth*e):t?(i=c.height+t*c.height,l=c.width+t*c.width):(i=c.height,l=c.width),{allowX:l>this.containerRect.width,allowY:i>this.containerRect.height}},n.prototype.setZoomEssentials=function(){this.containerRect=this.core.$content.get().getBoundingClientRect()},n.prototype.zoomImage=function(e,t,r,i){if(!(Math.abs(t)<=0)){var _,l=this.containerRect.width/2+this.containerRect.left,c=this.containerRect.height/2+this.containerRect.top+this.scrollTop;1===e&&(this.positionChanged=!1);var C=this.getDragAllowedAxises(0,t),R=C.allowY,F=C.allowX;this.positionChanged&&(_=this.top/(this.scale-t),this.pageX=l-this.left/(this.scale-t),this.pageY=c-_,this.positionChanged=!1);var J,ie,H=this.getPossibleSwipeDragCords(t),we=l-this.pageX,Fe=c-this.pageY;if(e-t>1){var lt=(e-t)/Math.abs(t);J=(we=(t<0?-we:we)+this.left*(lt+(t<0?-1:1)))/lt,ie=(Fe=(t<0?-Fe:Fe)+this.top*(lt+(t<0?-1:1)))/lt}else J=we*(lt=(e-t)*t),ie=Fe*lt;r&&(F?this.isBeyondPossibleLeft(J,H.minX)?J=H.minX:this.isBeyondPossibleRight(J,H.maxX)&&(J=H.maxX):e>1&&(J<H.minX?J=H.minX:J>H.maxX&&(J=H.maxX)),R?this.isBeyondPossibleTop(ie,H.minY)?ie=H.minY:this.isBeyondPossibleBottom(ie,H.maxY)&&(ie=H.maxY):e>1&&(ie<H.minY?ie=H.minY:ie>H.maxY&&(ie=H.maxY))),this.setZoomStyles({x:J,y:ie,scale:e}),this.left=J,this.top=ie,i&&this.setZoomImageSize()}},n.prototype.resetImageTranslate=function(e){if(this.isImageSlide(e)){var t=this.core.getSlideItem(e).find(".lg-image").first();this.imageReset=!1,t.removeClass("reset-transition reset-transition-y reset-transition-x"),this.core.outer.removeClass("lg-actual-size"),t.css("width","auto").css("height","auto"),setTimeout(function(){t.removeClass("no-transition")},10)}},n.prototype.setZoomImageSize=function(){var e=this,t=this.core.getSlideItem(this.core.index).find(".lg-image").first();setTimeout(function(){var r=e.getCurrentImageActualSizeScale();e.scale>=r&&(t.addClass("no-transition"),e.imageReset=!0)},500),setTimeout(function(){var r=e.getCurrentImageActualSizeScale();if(e.scale>=r){var i=e.getDragAllowedAxises(e.scale);t.css("width",t.get().naturalWidth+"px").css("height",t.get().naturalHeight+"px"),e.core.outer.addClass("lg-actual-size"),i.allowX&&i.allowY?t.addClass("reset-transition"):i.allowX&&!i.allowY?t.addClass("reset-transition-x"):!i.allowX&&i.allowY&&t.addClass("reset-transition-y")}},550)},n.prototype.setZoomStyles=function(e){var t=this.core.getSlideItem(this.core.index).find(".lg-img-wrap").first(),r=this.core.getSlideItem(this.core.index).find(".lg-image").first(),i=this.core.outer.find(".lg-current .lg-dummy-img").first();this.scale=e.scale,r.css("transform","scale3d("+e.scale+", "+e.scale+", 1)"),i.css("transform","scale3d("+e.scale+", "+e.scale+", 1)"),t.css("transform","translate3d("+e.x+"px, "+e.y+"px, 0)")},n.prototype.setActualSize=function(e,t){var r=this,i=this.core.galleryItems[this.core.index];this.resetImageTranslate(e),setTimeout(function(){if(i.src&&!r.core.outer.hasClass("lg-first-slide-loading")){var l=r.getCurrentImageActualSizeScale(),c=r.scale;r.scale=r.core.outer.hasClass("lg-zoomed")?1:r.getScale(l),r.setPageCords(t),r.beginZoom(r.scale),r.zoomImage(r.scale,r.scale-c,!0,!0),setTimeout(function(){r.core.outer.removeClass("lg-grabbing").addClass("lg-grab")},10)}},50)},n.prototype.getNaturalWidth=function(e){var t=this.core.getSlideItem(e).find(".lg-image").first(),r=this.core.galleryItems[e].width;return r?parseFloat(r):t.get().naturalWidth},n.prototype.getActualSizeScale=function(e,t){return e>=t?e/t||2:1},n.prototype.getCurrentImageActualSizeScale=function(){var t=this.core.getSlideItem(this.core.index).find(".lg-image").first().get().offsetWidth,r=this.getNaturalWidth(this.core.index)||t;return this.getActualSizeScale(r,t)},n.prototype.getPageCords=function(e){var t={};if(e)t.x=e.pageX||e.touches[0].pageX,t.y=e.pageY||e.touches[0].pageY;else{var r=this.core.$content.get().getBoundingClientRect();t.x=r.width/2+r.left,t.y=r.height/2+this.scrollTop+r.top}return t},n.prototype.setPageCords=function(e){var t=this.getPageCords(e);this.pageX=t.x,this.pageY=t.y},n.prototype.manageActualPixelClassNames=function(){this.core.getElementById("lg-actual-size").removeClass(this.settings.actualSizeIcons.zoomIn).addClass(this.settings.actualSizeIcons.zoomOut)},n.prototype.beginZoom=function(e){return this.core.outer.removeClass("lg-zoom-drag-transition lg-zoom-dragging"),e>1?(this.core.outer.addClass("lg-zoomed"),this.manageActualPixelClassNames()):this.resetZoom(),e>1},n.prototype.getScale=function(e){var t=this.getCurrentImageActualSizeScale();return e<1?e=1:e>t&&(e=t),e},n.prototype.init=function(){var e=this;if(this.settings.zoom){this.buildTemplates(),this.enableZoomOnSlideItemLoad();var t=null;this.core.outer.on("dblclick.lg",function(r){e.$LG(r.target).hasClass("lg-image")&&e.setActualSize(e.core.index,r)}),this.core.outer.on("touchstart.lg",function(r){var i=e.$LG(r.target);1===r.touches.length&&i.hasClass("lg-image")&&(t?(clearTimeout(t),t=null,r.preventDefault(),e.setActualSize(e.core.index,r)):t=setTimeout(function(){t=null},300))}),this.core.LGel.on("lgContainerResize.zoom lgRotateRight.zoom lgRotateLeft.zoom lgFlipHorizontal.zoom lgFlipVertical.zoom",function(){if(e.core.lgOpened&&e.isImageSlide(e.core.index)&&!e.core.touchAction){var r=e.core.getSlideItem(e.core.index).find(".lg-img-wrap").first();e.top=0,e.left=0,e.setZoomEssentials(),e.setZoomSwipeStyles(r,{x:0,y:0}),e.positionChanged=!0}}),this.$LG(window).on("scroll.lg.zoom.global"+this.core.lgId,function(){e.core.lgOpened&&(e.scrollTop=e.$LG(window).scrollTop())}),this.core.getElementById("lg-zoom-out").on("click.lg",function(){if(e.isImageSlide(e.core.index)){var r=0;e.imageReset&&(e.resetImageTranslate(e.core.index),r=50),setTimeout(function(){var i=e.scale-e.settings.scale;i<1&&(i=1),e.beginZoom(i),e.zoomImage(i,-e.settings.scale,!0,!0)},r)}}),this.core.getElementById("lg-zoom-in").on("click.lg",function(){e.zoomIn()}),this.core.getElementById("lg-actual-size").on("click.lg",function(){e.setActualSize(e.core.index)}),this.core.LGel.on("lgBeforeOpen.zoom",function(){e.core.outer.find(".lg-item").removeClass("lg-zoomable")}),this.core.LGel.on("lgAfterOpen.zoom",function(){e.scrollTop=e.$LG(window).scrollTop(),e.pageX=e.core.outer.width()/2,e.pageY=e.core.outer.height()/2+e.scrollTop,e.scale=1}),this.core.LGel.on("lgAfterSlide.zoom",function(r){var i=r.detail.prevIndex;e.scale=1,e.positionChanged=!1,e.resetZoom(i),e.resetImageTranslate(i),e.isImageSlide(e.core.index)&&e.setZoomEssentials()}),this.zoomDrag(),this.pinchZoom(),this.zoomSwipe(),this.zoomableTimeout=!1,this.positionChanged=!1}},n.prototype.zoomIn=function(){if(this.isImageSlide(this.core.index)){var e=this.scale+this.settings.scale;e=this.getScale(e),this.beginZoom(e),this.zoomImage(e,Math.min(this.settings.scale,e-this.scale),!0,!0)}},n.prototype.resetZoom=function(e){this.core.outer.removeClass("lg-zoomed lg-zoom-drag-transition");var t=this.core.getElementById("lg-actual-size"),r=this.core.getSlideItem(void 0!==e?e:this.core.index);t.removeClass(this.settings.actualSizeIcons.zoomOut).addClass(this.settings.actualSizeIcons.zoomIn),r.find(".lg-img-wrap").first().removeAttr("style"),r.find(".lg-image").first().removeAttr("style"),this.scale=1,this.left=0,this.top=0,this.setPageCords()},n.prototype.getTouchDistance=function(e){return Math.sqrt((e.touches[0].pageX-e.touches[1].pageX)*(e.touches[0].pageX-e.touches[1].pageX)+(e.touches[0].pageY-e.touches[1].pageY)*(e.touches[0].pageY-e.touches[1].pageY))},n.prototype.pinchZoom=function(){var e=this,t=0,r=!1,i=1,l=0,c=this.core.getSlideItem(this.core.index);this.core.outer.on("touchstart.lg",function(f){if(c=e.core.getSlideItem(e.core.index),e.isImageSlide(e.core.index)&&2===f.touches.length){if(f.preventDefault(),e.core.outer.hasClass("lg-first-slide-loading"))return;i=e.scale||1,e.core.outer.removeClass("lg-zoom-drag-transition lg-zoom-dragging"),e.setPageCords(f),e.resetImageTranslate(e.core.index),e.core.touchAction="pinch",t=e.getTouchDistance(f)}}),this.core.$inner.on("touchmove.lg",function(f){if(2===f.touches.length&&"pinch"===e.core.touchAction&&(e.$LG(f.target).hasClass("lg-item")||c.get().contains(f.target))){f.preventDefault();var _=e.getTouchDistance(f),C=t-_;if(!r&&Math.abs(C)>5&&(r=!0),r){l=e.scale;var R=Math.max(1,i+.02*-C);e.scale=Math.round(100*(R+Number.EPSILON))/100,e.zoomImage(e.scale,Math.round(100*(e.scale-l+Number.EPSILON))/100,!1,!1)}}}),this.core.$inner.on("touchend.lg",function(f){if("pinch"===e.core.touchAction&&(e.$LG(f.target).hasClass("lg-item")||c.get().contains(f.target))){if(r=!1,t=0,e.scale<=1)e.resetZoom();else{var _=e.getCurrentImageActualSizeScale();if(e.scale>=_){var C=_-e.scale;0===C&&(C=.01),e.zoomImage(_,C,!1,!0)}e.manageActualPixelClassNames(),e.core.outer.addClass("lg-zoomed")}e.core.touchAction=void 0}})},n.prototype.touchendZoom=function(e,t,r,i,l){var c=t.x-e.x,f=t.y-e.y,_=Math.abs(c)/l+1,C=Math.abs(f)/l+1;_>2&&(_+=1),C>2&&(C+=1),c*=_,f*=C;var R=this.core.getSlideItem(this.core.index).find(".lg-img-wrap").first(),F={};F.x=this.left+c,F.y=this.top+f;var H=this.getPossibleSwipeDragCords();(Math.abs(c)>15||Math.abs(f)>15)&&(i&&(this.isBeyondPossibleTop(F.y,H.minY)?F.y=H.minY:this.isBeyondPossibleBottom(F.y,H.maxY)&&(F.y=H.maxY)),r&&(this.isBeyondPossibleLeft(F.x,H.minX)?F.x=H.minX:this.isBeyondPossibleRight(F.x,H.maxX)&&(F.x=H.maxX)),i?this.top=F.y:F.y=this.top,r?this.left=F.x:F.x=this.left,this.setZoomSwipeStyles(R,F),this.positionChanged=!0)},n.prototype.getZoomSwipeCords=function(e,t,r,i,l){var c={};return i?(c.y=this.top+(t.y-e.y),this.isBeyondPossibleTop(c.y,l.minY)?c.y=l.minY-(l.minY-c.y)/6:this.isBeyondPossibleBottom(c.y,l.maxY)&&(c.y=l.maxY+(c.y-l.maxY)/6)):c.y=this.top,r?(c.x=this.left+(t.x-e.x),this.isBeyondPossibleLeft(c.x,l.minX)?c.x=l.minX-(l.minX-c.x)/6:this.isBeyondPossibleRight(c.x,l.maxX)&&(c.x=l.maxX+(c.x-l.maxX)/6)):c.x=this.left,c},n.prototype.isBeyondPossibleLeft=function(e,t){return e>=t},n.prototype.isBeyondPossibleRight=function(e,t){return e<=t},n.prototype.isBeyondPossibleTop=function(e,t){return e>=t},n.prototype.isBeyondPossibleBottom=function(e,t){return e<=t},n.prototype.isImageSlide=function(e){return"image"===this.core.getSlideType(this.core.galleryItems[e])},n.prototype.getPossibleSwipeDragCords=function(e){var t=this.core.getSlideItem(this.core.index).find(".lg-image").first(),r=this.core.mediaContainerPosition.bottom,i=t.get().getBoundingClientRect(),l=i.height,c=i.width;return e&&(l+=e*l,c+=e*c),{minY:(l-this.containerRect.height)/2,maxY:(this.containerRect.height-l)/2+r,minX:(c-this.containerRect.width)/2,maxX:(this.containerRect.width-c)/2}},n.prototype.setZoomSwipeStyles=function(e,t){e.css("transform","translate3d("+t.x+"px, "+t.y+"px, 0)")},n.prototype.zoomSwipe=function(){var C,R,e=this,t={},r={},i=!1,l=!1,c=!1,f=new Date,F=this.core.getSlideItem(this.core.index);this.core.$inner.on("touchstart.lg",function(H){if(e.isImageSlide(e.core.index)&&(F=e.core.getSlideItem(e.core.index),(e.$LG(H.target).hasClass("lg-item")||F.get().contains(H.target))&&1===H.touches.length&&e.core.outer.hasClass("lg-zoomed"))){H.preventDefault(),f=new Date,e.core.touchAction="zoomSwipe",R=e.core.getSlideItem(e.core.index).find(".lg-img-wrap").first();var J=e.getDragAllowedAxises(0);c=J.allowY,((l=J.allowX)||c)&&(t=e.getSwipeCords(H)),C=e.getPossibleSwipeDragCords(),e.core.outer.addClass("lg-zoom-dragging lg-zoom-drag-transition")}}),this.core.$inner.on("touchmove.lg",function(H){if(1===H.touches.length&&"zoomSwipe"===e.core.touchAction&&(e.$LG(H.target).hasClass("lg-item")||F.get().contains(H.target))){H.preventDefault(),e.core.touchAction="zoomSwipe",r=e.getSwipeCords(H);var J=e.getZoomSwipeCords(t,r,l,c,C);(Math.abs(r.x-t.x)>15||Math.abs(r.y-t.y)>15)&&(i=!0,e.setZoomSwipeStyles(R,J))}}),this.core.$inner.on("touchend.lg",function(H){if("zoomSwipe"===e.core.touchAction&&(e.$LG(H.target).hasClass("lg-item")||F.get().contains(H.target))){if(H.preventDefault(),e.core.touchAction=void 0,e.core.outer.removeClass("lg-zoom-dragging"),!i)return;i=!1;var J=(new Date).valueOf()-f.valueOf();e.touchendZoom(t,r,l,c,J)}})},n.prototype.zoomDrag=function(){var _,C,R,F,e=this,t={},r={},i=!1,l=!1,c=!1,f=!1;this.core.outer.on("mousedown.lg.zoom",function(H){if(e.isImageSlide(e.core.index)){var J=e.core.getSlideItem(e.core.index);if(e.$LG(H.target).hasClass("lg-item")||J.get().contains(H.target)){_=new Date,F=e.core.getSlideItem(e.core.index).find(".lg-img-wrap").first();var ie=e.getDragAllowedAxises(0);f=ie.allowY,c=ie.allowX,e.core.outer.hasClass("lg-zoomed")&&e.$LG(H.target).hasClass("lg-object")&&(c||f)&&(H.preventDefault(),t=e.getDragCords(H),R=e.getPossibleSwipeDragCords(),i=!0,e.core.outer.removeClass("lg-grab").addClass("lg-grabbing lg-zoom-drag-transition lg-zoom-dragging"))}}}),this.$LG(window).on("mousemove.lg.zoom.global"+this.core.lgId,function(H){if(i){l=!0,r=e.getDragCords(H);var J=e.getZoomSwipeCords(t,r,c,f,R);e.setZoomSwipeStyles(F,J)}}),this.$LG(window).on("mouseup.lg.zoom.global"+this.core.lgId,function(H){if(i){if(C=new Date,i=!1,e.core.outer.removeClass("lg-zoom-dragging"),l&&(t.x!==r.x||t.y!==r.y)){r=e.getDragCords(H);var J=C.valueOf()-_.valueOf();e.touchendZoom(t,r,c,f,J)}l=!1}e.core.outer.removeClass("lg-grabbing").addClass("lg-grab")})},n.prototype.closeGallery=function(){this.resetZoom()},n.prototype.destroy=function(){this.$LG(window).off(".lg.zoom.global"+this.core.lgId),this.core.LGel.off(".lg.zoom"),this.core.LGel.off(".zoom"),clearTimeout(this.zoomableTimeout),this.zoomableTimeout=!1},n}();const Pi=di;var Hn=function(){return Hn=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var l in t=arguments[r])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e},Hn.apply(this,arguments)},wl={autoplayFirstVideo:!0,youTubePlayerParams:!1,vimeoPlayerParams:!1,wistiaPlayerParams:!1,gotoNextSlideOnVideoEnd:!0,autoplayVideoOnSlide:!1,videojs:!1,videojsTheme:"",videojsOptions:{}},io=function(n){return Object.keys(n).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(n[e])}).join("&")},jl=function(){function n(e){return this.core=e,this.settings=Hn(Hn({},wl),this.core.settings),this}return n.prototype.init=function(){var e=this;this.core.LGel.on("lgHasVideo.video",this.onHasVideo.bind(this)),this.core.LGel.on("lgPosterClick.video",function(){var t=e.core.getSlideItem(e.core.index);e.loadVideoOnPosterClick(t)}),this.core.LGel.on("lgSlideItemLoad.video",this.onSlideItemLoad.bind(this)),this.core.LGel.on("lgBeforeSlide.video",this.onBeforeSlide.bind(this)),this.core.LGel.on("lgAfterSlide.video",this.onAfterSlide.bind(this))},n.prototype.onSlideItemLoad=function(e){var t=this,r=e.detail,i=r.isFirstSlide,l=r.index;this.settings.autoplayFirstVideo&&i&&l===this.core.index&&setTimeout(function(){t.loadAndPlayVideo(l)},200),!i&&this.settings.autoplayVideoOnSlide&&l===this.core.index&&this.loadAndPlayVideo(l)},n.prototype.onHasVideo=function(e){var t=e.detail,r=t.index,i=t.src,l=t.html5Video;t.hasPoster||(this.appendVideos(this.core.getSlideItem(r),{src:i,addClass:"lg-object",index:r,html5Video:l}),this.gotoNextSlideOnVideoEnd(i,r))},n.prototype.onBeforeSlide=function(e){this.core.lGalleryOn&&this.pauseVideo(e.detail.prevIndex)},n.prototype.onAfterSlide=function(e){var t=this,r=e.detail,i=r.index,l=r.prevIndex,c=this.core.getSlideItem(i);this.settings.autoplayVideoOnSlide&&i!==l&&c.hasClass("lg-complete")&&setTimeout(function(){t.loadAndPlayVideo(i)},100)},n.prototype.loadAndPlayVideo=function(e){var t=this.core.getSlideItem(e);this.core.galleryItems[e].poster?this.loadVideoOnPosterClick(t,!0):this.playVideo(e)},n.prototype.playVideo=function(e){this.controlVideo(e,"play")},n.prototype.pauseVideo=function(e){this.controlVideo(e,"pause")},n.prototype.getVideoHtml=function(e,t,r,i){var l="",c=this.core.galleryItems[r].__slideVideoInfo||{},f=this.core.galleryItems[r],_=f.title||f.alt;_=_?'title="'+_+'"':"";var C='allowtransparency="true"\n            frameborder="0"\n            scrolling="no"\n            allowfullscreen\n            mozallowfullscreen\n            webkitallowfullscreen\n            oallowfullscreen\n            msallowfullscreen';if(c.youtube){var R="lg-youtube"+r,F=function(n,e){if(!n.youtube)return"";var t=n.youtube[2]?function(n){return n.slice(1).split("&").map(function(t){return t.split("=")}).reduce(function(t,r){var i=r.map(decodeURIComponent);return t[i[0]]=i[1],t},{})}(n.youtube[2]):"",i=e||{},l=Hn(Hn(Hn({},{wmode:"opaque",autoplay:0,mute:1,enablejsapi:1}),i),t);return"?"+io(l)}(c,this.settings.youTubePlayerParams),H=function(n){return n.includes("youtube-nocookie.com")}(e);l='<iframe allow="autoplay" id='+R+' class="lg-video-object lg-youtube '+t+'" '+_+' src="'+(H?"//www.youtube-nocookie.com/":"//www.youtube.com/")+"embed/"+(c.youtube[1]+F)+'" '+C+"></iframe>"}else if(c.vimeo){R="lg-vimeo"+r;var ie=function(n,e){if(!e||!e.vimeo)return"";var t=e.vimeo[2]||"",r=n&&0!==Object.keys(n).length?"&"+io(n):"",c=((e.vimeo[0].split("/").pop()||"").split("?")[0]||"").split("#")[0],f=e.vimeo[1]!==c;return f&&(t=t.replace("/"+c,"")),"?autoplay=0&muted=1"+(f?"&h="+c:"")+r+("?"==t[0]?"&"+t.slice(1):t||"")}(this.settings.vimeoPlayerParams,c);l='<iframe allow="autoplay" id='+R+' class="lg-video-object lg-vimeo '+t+'" '+_+' src="//player.vimeo.com/video/'+(c.vimeo[1]+ie)+'" '+C+"></iframe>"}else if(c.wistia){var we="lg-wistia"+r;ie=io(this.settings.wistiaPlayerParams),l='<iframe allow="autoplay" id="'+we+'" src="//fast.wistia.net/embed/iframe/'+c.wistia[4]+(ie=ie?"?"+ie:"")+'" '+_+' class="wistia_embed lg-video-object lg-wistia '+t+'" name="wistia_embed" '+C+"></iframe>"}else if(c.html5){for(var Fe="",lt=0;lt<i.source.length;lt++)Fe+='<source src="'+i.source[lt].src+'" type="'+i.source[lt].type+'">';if(i.tracks){var $t=function(An){var In="",dr=i.tracks[An];Object.keys(dr||{}).forEach(function(Ys){In+=Ys+'="'+dr[Ys]+'" '}),Fe+="<track "+In+">"};for(lt=0;lt<i.tracks.length;lt++)$t(lt)}var Ut="",Qt=i.attributes||{};Object.keys(Qt||{}).forEach(function(An){Ut+=An+'="'+Qt[An]+'" '}),l='<video class="lg-video-object lg-html5 '+(this.settings.videojs&&this.settings.videojsTheme?this.settings.videojsTheme+" ":"")+" "+(this.settings.videojs?" video-js":"")+'" '+Ut+">\n                "+Fe+"\n                Your browser does not support HTML5 video.\n            </video>"}return l},n.prototype.appendVideos=function(e,t){var r,i=this.getVideoHtml(t.src,t.addClass,t.index,t.html5Video);e.find(".lg-video-cont").append(i);var l=e.find(".lg-video-object").first();if(t.html5Video&&l.on("mousedown.lg.video",function(c){c.stopPropagation()}),this.settings.videojs&&null!==(r=this.core.galleryItems[t.index].__slideVideoInfo)&&void 0!==r&&r.html5)try{return videojs(l.get(),this.settings.videojsOptions)}catch{console.error("lightGallery:- Make sure you have included videojs")}},n.prototype.gotoNextSlideOnVideoEnd=function(e,t){var r=this,i=this.core.getSlideItem(t).find(".lg-video-object").first(),l=this.core.galleryItems[t].__slideVideoInfo||{};if(this.settings.gotoNextSlideOnVideoEnd)if(l.html5)i.on("ended",function(){r.core.goToNextSlide()});else if(l.vimeo)try{new Vimeo.Player(i.get()).on("ended",function(){r.core.goToNextSlide()})}catch{console.error("lightGallery:- Make sure you have included //github.com/vimeo/player.js")}else if(l.wistia)try{window._wq=window._wq||[],window._wq.push({id:i.attr("id"),onReady:function(c){c.bind("end",function(){r.core.goToNextSlide()})}})}catch{console.error("lightGallery:- Make sure you have included //fast.wistia.com/assets/external/E-v1.js")}},n.prototype.controlVideo=function(e,t){var r=this.core.getSlideItem(e).find(".lg-video-object").first(),i=this.core.galleryItems[e].__slideVideoInfo||{};if(r.get())if(i.youtube)try{r.get().contentWindow.postMessage('{"event":"command","func":"'+t+'Video","args":""}',"*")}catch(l){console.error("lightGallery:- "+l)}else if(i.vimeo)try{new Vimeo.Player(r.get())[t]()}catch{console.error("lightGallery:- Make sure you have included //github.com/vimeo/player.js")}else if(i.html5)if(this.settings.videojs)try{videojs(r.get())[t]()}catch{console.error("lightGallery:- Make sure you have included videojs")}else r.get()[t]();else if(i.wistia)try{window._wq=window._wq||[],window._wq.push({id:r.attr("id"),onReady:function(l){l[t]()}})}catch{console.error("lightGallery:- Make sure you have included //fast.wistia.com/assets/external/E-v1.js")}},n.prototype.loadVideoOnPosterClick=function(e,t){var r=this;if(e.hasClass("lg-video-loaded"))t&&this.playVideo(this.core.index);else if(e.hasClass("lg-has-video"))this.playVideo(this.core.index);else{e.addClass("lg-has-video");var i=void 0,l=this.core.galleryItems[this.core.index].src,c=this.core.galleryItems[this.core.index].video;c&&(i="string"==typeof c?JSON.parse(c):c);var f=this.appendVideos(e,{src:l,addClass:"",index:this.core.index,html5Video:i});this.gotoNextSlideOnVideoEnd(l,this.core.index);var _=e.find(".lg-object").first().get();e.find(".lg-video-cont").first().append(_),e.addClass("lg-video-loading"),f&&f.ready(function(){f.on("loadedmetadata",function(){r.onVideoLoadAfterPosterClick(e,r.core.index)})}),e.find(".lg-video-object").first().on("load.lg error.lg loadedmetadata.lg",function(){setTimeout(function(){r.onVideoLoadAfterPosterClick(e,r.core.index)},50)})}},n.prototype.onVideoLoadAfterPosterClick=function(e,t){e.addClass("lg-video-loaded"),this.playVideo(t)},n.prototype.destroy=function(){this.core.LGel.off(".lg.video"),this.core.LGel.off(".video")},n}();const za=jl;var x=function(){return x=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var l in t=arguments[r])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e},x.apply(this,arguments)},V={thumbnail:!0,animateThumb:!0,currentPagerPosition:"middle",alignThumbnails:"middle",thumbWidth:100,thumbHeight:"80px",thumbMargin:5,appendThumbnailsTo:".lg-components",toggleThumb:!1,enableThumbDrag:!0,enableThumbSwipe:!0,thumbnailSwipeThreshold:10,loadYouTubeThumbnail:!0,youTubeThumbSize:1,thumbnailPluginStrings:{toggleThumbnails:"Toggle thumbnails"}},$=function(){function n(e,t){return this.thumbOuterWidth=0,this.thumbTotalWidth=0,this.translateX=0,this.thumbClickable=!1,this.core=e,this.$LG=t,this}return n.prototype.init=function(){this.settings=x(x({},V),this.core.settings),this.thumbOuterWidth=0,this.thumbTotalWidth=this.core.galleryItems.length*(this.settings.thumbWidth+this.settings.thumbMargin),this.translateX=0,this.setAnimateThumbStyles(),this.core.settings.allowMediaOverlap||(this.settings.toggleThumb=!1),this.settings.thumbnail&&(this.build(),this.settings.animateThumb?(this.settings.enableThumbDrag&&this.enableThumbDrag(),this.settings.enableThumbSwipe&&this.enableThumbSwipe(),this.thumbClickable=!1):this.thumbClickable=!0,this.toggleThumbBar(),this.thumbKeyPress())},n.prototype.build=function(){var e=this;this.setThumbMarkup(),this.manageActiveClassOnSlideChange(),this.$lgThumb.first().on("click.lg touchend.lg",function(t){var r=e.$LG(t.target);r.hasAttribute("data-lg-item-id")&&setTimeout(function(){if(e.thumbClickable&&!e.core.lgBusy){var i=parseInt(r.attr("data-lg-item-id"));e.core.slide(i,!1,!0,!1)}},50)}),this.core.LGel.on("lgBeforeSlide.thumb",function(t){e.animateThumb(t.detail.index)}),this.core.LGel.on("lgBeforeOpen.thumb",function(){e.thumbOuterWidth=e.core.outer.get().offsetWidth}),this.core.LGel.on("lgUpdateSlides.thumb",function(){e.rebuildThumbnails()}),this.core.LGel.on("lgContainerResize.thumb",function(){e.core.lgOpened&&setTimeout(function(){e.thumbOuterWidth=e.core.outer.get().offsetWidth,e.animateThumb(e.core.index),e.thumbOuterWidth=e.core.outer.get().offsetWidth},50)})},n.prototype.setThumbMarkup=function(){var e="lg-thumb-outer ";this.settings.alignThumbnails&&(e+="lg-thumb-align-"+this.settings.alignThumbnails);var t='<div class="'+e+'">\n        <div class="lg-thumb lg-group">\n        </div>\n        </div>';this.core.outer.addClass("lg-has-thumb"),".lg-components"===this.settings.appendThumbnailsTo?this.core.$lgComponents.append(t):this.core.outer.append(t),this.$thumbOuter=this.core.outer.find(".lg-thumb-outer").first(),this.$lgThumb=this.core.outer.find(".lg-thumb").first(),this.settings.animateThumb&&this.core.outer.find(".lg-thumb").css("transition-duration",this.core.settings.speed+"ms").css("width",this.thumbTotalWidth+"px").css("position","relative"),this.setThumbItemHtml(this.core.galleryItems)},n.prototype.enableThumbDrag=function(){var e=this,t={cords:{startX:0,endX:0},isMoved:!1,newTranslateX:0,startTime:new Date,endTime:new Date,touchMoveTime:0},r=!1;this.$thumbOuter.addClass("lg-grab"),this.core.outer.find(".lg-thumb").first().on("mousedown.lg.thumb",function(i){e.thumbTotalWidth>e.thumbOuterWidth&&(i.preventDefault(),t.cords.startX=i.pageX,t.startTime=new Date,e.thumbClickable=!1,r=!0,e.core.outer.get().scrollLeft+=1,e.core.outer.get().scrollLeft-=1,e.$thumbOuter.removeClass("lg-grab").addClass("lg-grabbing"))}),this.$LG(window).on("mousemove.lg.thumb.global"+this.core.lgId,function(i){e.core.lgOpened&&r&&(t.cords.endX=i.pageX,t=e.onThumbTouchMove(t))}),this.$LG(window).on("mouseup.lg.thumb.global"+this.core.lgId,function(){e.core.lgOpened&&(t.isMoved?t=e.onThumbTouchEnd(t):e.thumbClickable=!0,r&&(r=!1,e.$thumbOuter.removeClass("lg-grabbing").addClass("lg-grab")))})},n.prototype.enableThumbSwipe=function(){var e=this,t={cords:{startX:0,endX:0},isMoved:!1,newTranslateX:0,startTime:new Date,endTime:new Date,touchMoveTime:0};this.$lgThumb.on("touchstart.lg",function(r){e.thumbTotalWidth>e.thumbOuterWidth&&(r.preventDefault(),t.cords.startX=r.targetTouches[0].pageX,e.thumbClickable=!1,t.startTime=new Date)}),this.$lgThumb.on("touchmove.lg",function(r){e.thumbTotalWidth>e.thumbOuterWidth&&(r.preventDefault(),t.cords.endX=r.targetTouches[0].pageX,t=e.onThumbTouchMove(t))}),this.$lgThumb.on("touchend.lg",function(){t.isMoved?t=e.onThumbTouchEnd(t):e.thumbClickable=!0})},n.prototype.rebuildThumbnails=function(){var e=this;this.$thumbOuter.addClass("lg-rebuilding-thumbnails"),setTimeout(function(){e.thumbTotalWidth=e.core.galleryItems.length*(e.settings.thumbWidth+e.settings.thumbMargin),e.$lgThumb.css("width",e.thumbTotalWidth+"px"),e.$lgThumb.empty(),e.setThumbItemHtml(e.core.galleryItems),e.animateThumb(e.core.index)},50),setTimeout(function(){e.$thumbOuter.removeClass("lg-rebuilding-thumbnails")},200)},n.prototype.setTranslate=function(e){this.$lgThumb.css("transform","translate3d(-"+e+"px, 0px, 0px)")},n.prototype.getPossibleTransformX=function(e){return e>this.thumbTotalWidth-this.thumbOuterWidth&&(e=this.thumbTotalWidth-this.thumbOuterWidth),e<0&&(e=0),e},n.prototype.animateThumb=function(e){if(this.$lgThumb.css("transition-duration",this.core.settings.speed+"ms"),this.settings.animateThumb){var t=0;switch(this.settings.currentPagerPosition){case"left":t=0;break;case"middle":t=this.thumbOuterWidth/2-this.settings.thumbWidth/2;break;case"right":t=this.thumbOuterWidth-this.settings.thumbWidth}this.translateX=(this.settings.thumbWidth+this.settings.thumbMargin)*e-1-t,this.translateX>this.thumbTotalWidth-this.thumbOuterWidth&&(this.translateX=this.thumbTotalWidth-this.thumbOuterWidth),this.translateX<0&&(this.translateX=0),this.setTranslate(this.translateX)}},n.prototype.onThumbTouchMove=function(e){return e.newTranslateX=this.translateX,e.isMoved=!0,e.touchMoveTime=(new Date).valueOf(),e.newTranslateX-=e.cords.endX-e.cords.startX,e.newTranslateX=this.getPossibleTransformX(e.newTranslateX),this.setTranslate(e.newTranslateX),this.$thumbOuter.addClass("lg-dragging"),e},n.prototype.onThumbTouchEnd=function(e){e.isMoved=!1,e.endTime=new Date,this.$thumbOuter.removeClass("lg-dragging");var t=e.endTime.valueOf()-e.startTime.valueOf(),r=e.cords.endX-e.cords.startX,i=Math.abs(r)/t;return i>.15&&e.endTime.valueOf()-e.touchMoveTime<30?((i+=1)>2&&(i+=1),i+=i*(Math.abs(r)/this.thumbOuterWidth),this.$lgThumb.css("transition-duration",Math.min(i-1,2)+"settings"),this.translateX=this.getPossibleTransformX(this.translateX-(r*=i)),this.setTranslate(this.translateX)):this.translateX=e.newTranslateX,Math.abs(e.cords.endX-e.cords.startX)<this.settings.thumbnailSwipeThreshold&&(this.thumbClickable=!0),e},n.prototype.getThumbHtml=function(e,t){var r=this.core.galleryItems[t].__slideVideoInfo||{};return'<div data-lg-item-id="'+t+'" class="lg-thumb-item '+(t===this.core.index?" active":"")+'" \n        style="width:'+this.settings.thumbWidth+"px; height: "+this.settings.thumbHeight+";\n            margin-right: "+this.settings.thumbMargin+'px;">\n            <img data-lg-item-id="'+t+'" src="'+(r.youtube&&this.settings.loadYouTubeThumbnail?"//img.youtube.com/vi/"+r.youtube[1]+"/"+this.settings.youTubeThumbSize+".jpg":e)+'" />\n        </div>'},n.prototype.getThumbItemHtml=function(e){for(var t="",r=0;r<e.length;r++)t+=this.getThumbHtml(e[r].thumb,r);return t},n.prototype.setThumbItemHtml=function(e){var t=this.getThumbItemHtml(e);this.$lgThumb.html(t)},n.prototype.setAnimateThumbStyles=function(){this.settings.animateThumb&&this.core.outer.addClass("lg-animate-thumb")},n.prototype.manageActiveClassOnSlideChange=function(){var e=this;this.core.LGel.on("lgBeforeSlide.thumb",function(t){var r=e.core.outer.find(".lg-thumb-item"),i=t.detail.index;r.removeClass("active"),r.eq(i).addClass("active")})},n.prototype.toggleThumbBar=function(){var e=this;this.settings.toggleThumb&&(this.core.outer.addClass("lg-can-toggle"),this.core.$toolbar.append('<button type="button" aria-label="'+this.settings.thumbnailPluginStrings.toggleThumbnails+'" class="lg-toggle-thumb lg-icon"></button>'),this.core.outer.find(".lg-toggle-thumb").first().on("click.lg",function(){e.core.outer.toggleClass("lg-components-open")}))},n.prototype.thumbKeyPress=function(){var e=this;this.$LG(window).on("keydown.lg.thumb.global"+this.core.lgId,function(t){!e.core.lgOpened||!e.settings.toggleThumb||(38===t.keyCode?(t.preventDefault(),e.core.outer.addClass("lg-components-open")):40===t.keyCode&&(t.preventDefault(),e.core.outer.removeClass("lg-components-open")))})},n.prototype.destroy=function(){this.settings.thumbnail&&(this.$LG(window).off(".lg.thumb.global"+this.core.lgId),this.core.LGel.off(".lg.thumb"),this.core.LGel.off(".thumb"),this.$thumbOuter.remove(),this.core.outer.removeClass("lg-has-thumb"))},n}();const X=$;var xe=function(){return xe=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var l in t=arguments[r])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e},xe.apply(this,arguments)};function qe(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;var r=Array(n),i=0;for(e=0;e<t;e++)for(var l=arguments[e],c=0,f=l.length;c<f;c++,i++)r[i]=l[c];return r}var Ot={share:!0,facebook:!0,facebookDropdownText:"Facebook",twitter:!0,twitterDropdownText:"Twitter",pinterest:!0,pinterestDropdownText:"Pinterest",additionalShareOptions:[],sharePluginStrings:{share:"Share"}};function mr(n){return"//www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(n.facebookShareUrl||window.location.href)}function Un(n){var t=encodeURIComponent(n.twitterShareUrl||window.location.href);return"//twitter.com/intent/tweet?text="+n.tweetText+"&url="+t}function Mn(n){var t=n.pinterestText,r=encodeURIComponent(n.src);return"http://www.pinterest.com/pin/create/button/?url="+encodeURIComponent(n.pinterestShareUrl||window.location.href)+"&media="+r+"&description="+t}var Dr=function(){function n(e){return this.shareOptions=[],this.core=e,this.settings=xe(xe({},Ot),this.core.settings),this}return n.prototype.init=function(){this.settings.share&&(this.shareOptions=qe(this.getDefaultShareOptions(),this.settings.additionalShareOptions),this.setLgShareMarkup(),this.core.outer.find(".lg-share .lg-dropdown").append(this.getShareListHtml()),this.core.LGel.on("lgAfterSlide.share",this.onAfterSlide.bind(this)))},n.prototype.getShareListHtml=function(){var e="";return this.shareOptions.forEach(function(t){e+=t.dropdownHTML}),e},n.prototype.setLgShareMarkup=function(){var e=this;this.core.$toolbar.append('<button type="button" aria-label="'+this.settings.sharePluginStrings.share+'" aria-haspopup="true" aria-expanded="false" class="lg-share lg-icon">\n                <ul class="lg-dropdown" style="position: absolute;"></ul></button>'),this.core.outer.append('<div class="lg-dropdown-overlay"></div>'),this.core.outer.find(".lg-share").first().on("click.lg",function(){e.core.outer.toggleClass("lg-dropdown-active"),e.core.outer.hasClass("lg-dropdown-active")?e.core.outer.attr("aria-expanded",!0):e.core.outer.attr("aria-expanded",!1)}),this.core.outer.find(".lg-dropdown-overlay").first().on("click.lg",function(){e.core.outer.removeClass("lg-dropdown-active"),e.core.outer.attr("aria-expanded",!1)})},n.prototype.onAfterSlide=function(e){var t=this,i=this.core.galleryItems[e.detail.index];setTimeout(function(){t.shareOptions.forEach(function(l){t.core.outer.find(l.selector).attr("href",l.generateLink(i))})},100)},n.prototype.getShareListItemHTML=function(e,t){return'<li><a class="lg-share-'+e+'" rel="noopener" target="_blank"><span class="lg-icon"></span><span class="lg-dropdown-text">'+t+"</span></a></li>"},n.prototype.getDefaultShareOptions=function(){return qe(this.settings.facebook?[{type:"facebook",generateLink:mr,dropdownHTML:this.getShareListItemHTML("facebook",this.settings.facebookDropdownText),selector:".lg-share-facebook"}]:[],this.settings.twitter?[{type:"twitter",generateLink:Un,dropdownHTML:this.getShareListItemHTML("twitter",this.settings.twitterDropdownText),selector:".lg-share-twitter"}]:[],this.settings.pinterest?[{type:"pinterest",generateLink:Mn,dropdownHTML:this.getShareListItemHTML("pinterest",this.settings.pinterestDropdownText),selector:".lg-share-pinterest"}]:[])},n.prototype.destroy=function(){this.core.outer.find(".lg-dropdown-overlay").remove(),this.core.outer.find(".lg-share").remove(),this.core.LGel.off(".lg.share"),this.core.LGel.off(".share")},n}();const Vn=Dr;var Cr=function(){return Cr=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var l in t=arguments[r])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e},Cr.apply(this,arguments)},ns={rotate:!0,rotateSpeed:400,rotateLeft:!0,rotateRight:!0,flipHorizontal:!0,flipVertical:!0,rotatePluginStrings:{flipVertical:"Flip vertical",flipHorizontal:"Flip horizontal",rotateLeft:"Rotate left",rotateRight:"Rotate right"}},xo=function(){function n(e,t){return this.core=e,this.$LG=t,this.settings=Cr(Cr({},ns),this.core.settings),this}return n.prototype.buildTemplates=function(){var e="";this.settings.flipVertical&&(e+='<button type="button" id="lg-flip-ver" aria-label="'+this.settings.rotatePluginStrings.flipVertical+'" class="lg-flip-ver lg-icon"></button>'),this.settings.flipHorizontal&&(e+='<button type="button" id="lg-flip-hor" aria-label="'+this.settings.rotatePluginStrings.flipHorizontal+'" class="lg-flip-hor lg-icon"></button>'),this.settings.rotateLeft&&(e+='<button type="button" id="lg-rotate-left" aria-label="'+this.settings.rotatePluginStrings.rotateLeft+'" class="lg-rotate-left lg-icon"></button>'),this.settings.rotateRight&&(e+='<button type="button" id="lg-rotate-right" aria-label="'+this.settings.rotatePluginStrings.rotateRight+'" class="lg-rotate-right lg-icon"></button>'),this.core.$toolbar.append(e)},n.prototype.init=function(){var e=this;this.settings.rotate&&(this.buildTemplates(),this.rotateValuesList={},this.core.LGel.on("lgSlideItemLoad.rotate",function(t){var r=t.detail.index;e.core.getSlideItem(r).find(".lg-img-rotate").get()||(e.core.getSlideItem(r).find(".lg-object").first().wrap("lg-img-rotate"),e.core.getSlideItem(e.core.index).find(".lg-img-rotate").css("transition-duration",e.settings.rotateSpeed+"ms"))}),this.core.outer.find("#lg-rotate-left").first().on("click.lg",this.rotateLeft.bind(this)),this.core.outer.find("#lg-rotate-right").first().on("click.lg",this.rotateRight.bind(this)),this.core.outer.find("#lg-flip-hor").first().on("click.lg",this.flipHorizontal.bind(this)),this.core.outer.find("#lg-flip-ver").first().on("click.lg",this.flipVertical.bind(this)),this.core.LGel.on("lgBeforeSlide.rotate",function(t){e.rotateValuesList[t.detail.index]||(e.rotateValuesList[t.detail.index]={rotate:0,flipHorizontal:1,flipVertical:1})}))},n.prototype.applyStyles=function(){this.core.getSlideItem(this.core.index).find(".lg-img-rotate").first().css("transform","rotate("+this.rotateValuesList[this.core.index].rotate+"deg) scale3d("+this.rotateValuesList[this.core.index].flipHorizontal+", "+this.rotateValuesList[this.core.index].flipVertical+", 1)")},n.prototype.rotateLeft=function(){this.rotateValuesList[this.core.index].rotate-=90,this.applyStyles(),this.triggerEvents("lgRotateLeft",{rotate:this.rotateValuesList[this.core.index].rotate})},n.prototype.rotateRight=function(){this.rotateValuesList[this.core.index].rotate+=90,this.applyStyles(),this.triggerEvents("lgRotateRight",{rotate:this.rotateValuesList[this.core.index].rotate})},n.prototype.getCurrentRotation=function(e){if(!e)return 0;var t=this.$LG(e).style(),r=t.getPropertyValue("-webkit-transform")||t.getPropertyValue("-moz-transform")||t.getPropertyValue("-ms-transform")||t.getPropertyValue("-o-transform")||t.getPropertyValue("transform")||"none";if("none"!==r){var i=r.split("(")[1].split(")")[0].split(",");if(i){var l=Math.round(Math.atan2(i[1],i[0])*(180/Math.PI));return l<0?l+360:l}}return 0},n.prototype.flipHorizontal=function(){var e=this.core.getSlideItem(this.core.index).find(".lg-img-rotate").first().get(),t=this.getCurrentRotation(e),r="flipHorizontal";(90===t||270===t)&&(r="flipVertical"),this.rotateValuesList[this.core.index][r]*=-1,this.applyStyles(),this.triggerEvents("lgFlipHorizontal",{flipHorizontal:this.rotateValuesList[this.core.index][r]})},n.prototype.flipVertical=function(){var e=this.core.getSlideItem(this.core.index).find(".lg-img-rotate").first().get(),t=this.getCurrentRotation(e),r="flipVertical";(90===t||270===t)&&(r="flipHorizontal"),this.rotateValuesList[this.core.index][r]*=-1,this.applyStyles(),this.triggerEvents("lgFlipVertical",{flipVertical:this.rotateValuesList[this.core.index][r]})},n.prototype.triggerEvents=function(e,t){var r=this;setTimeout(function(){r.core.LGel.trigger(e,t)},this.settings.rotateSpeed+10)},n.prototype.isImageOrientationChanged=function(){var e=this.rotateValuesList[this.core.index];return Math.abs(e.rotate)%360!=0||e.flipHorizontal<0||e.flipVertical<0},n.prototype.closeGallery=function(){this.isImageOrientationChanged()&&this.core.getSlideItem(this.core.index).css("opacity",0),this.rotateValuesList={}},n.prototype.destroy=function(){this.core.LGel.off(".lg.rotate"),this.core.LGel.off(".rotate")},n}();const kr=xo;var zr=B(9751),rs=B(4742),wi=B(8421),Hl=B(7669),so=B(5403),mu=B(3268),Ga=B(1810);function sc(...n){const e=(0,Hl.jO)(n),{args:t,keys:r}=(0,rs.D)(n),i=new zr.y(l=>{const{length:c}=t;if(!c)return void l.complete();const f=new Array(c);let _=c,C=c;for(let R=0;R<c;R++){let F=!1;(0,wi.Xf)(t[R]).subscribe((0,so.x)(l,H=>{F||(F=!0,C--),f[R]=H},()=>_--,void 0,()=>{(!_||!F)&&(C||l.next(r?(0,Ga.n)(r,f):f),l.complete())}))}});return e?i.pipe((0,mu.Z)(e)):i}var un=B(4004),Mo=B(4986),ws=B(8996),Po=B(9646),Xn=B(4976),Wa=B(8675),Jo=B(4482);function ur(){return(0,Jo.e)((n,e)=>{let t,r=!1;n.subscribe((0,so.x)(e,i=>{const l=t;t=i,r&&e.next([l,i]),r=!0}))})}var $l=B(5026),Ka=B(4671);function oc(n,e=Ka.y){return n=n??_u,(0,Jo.e)((t,r)=>{let i,l=!0;t.subscribe((0,so.x)(r,c=>{const f=e(c);(l||!n(i,f))&&(l=!1,i=f,r.next(c))}))})}function _u(n,e){return n===e}var bt,bl=B(9300),$n=B(2011),Fr=(B(2644),B(3942)),ke=B(5861),Cs=B(6881),bs=B(4859),ii=B(1877),W=B(2090),ac=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Zi={},Ya=Ya||{},qt=ac||self;function Ro(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function is(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var yu="closure_uid_"+(1e9*Math.random()>>>0),ss=0;function Xo(n,e,t){return n.call.apply(n.bind,arguments)}function pf(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function os(n,e,t){return(os=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Xo:pf).apply(null,arguments)}function er(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Ci(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,l){for(var c=Array(arguments.length-2),f=2;f<arguments.length;f++)c[f-2]=arguments[f];return e.prototype[i].apply(r,c)}}function Rs(){this.s=this.s,this.o=this.o}Rs.prototype.s=!1,Rs.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function ql(n){Object.prototype.hasOwnProperty.call(n,yu)&&n[yu]||(n[yu]=++ss)}(this)},Rs.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const uc=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Jc(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function cc(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Ro(r)){const i=n.length||0,l=r.length||0;n.length=i+l;for(let c=0;c<l;c++)n[i+c]=r[c]}else n.push(r)}}function ji(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}ji.prototype.h=function(){this.defaultPrevented=!0};var Qa=function(){if(!qt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{qt.addEventListener("test",()=>{},e),qt.removeEventListener("test",()=>{},e)}catch{}return n}();function dc(n){return/^[\s\xa0]*$/.test(n)}function vu(){var n=qt.navigator;return n&&(n=n.userAgent)?n:""}function cr(n){return-1!=vu().indexOf(n)}function Hs(n){return Hs[" "](n),n}Hs[" "]=function(){};var Eu,n,Cu=cr("Opera"),Oi=cr("Trident")||cr("MSIE"),$s=cr("Edge"),bu=$s||Oi,ea=cr("Gecko")&&!(-1!=vu().toLowerCase().indexOf("webkit")&&!cr("Edge"))&&!(cr("Trident")||cr("MSIE"))&&!cr("Edge"),zl=-1!=vu().toLowerCase().indexOf("webkit")&&!cr("Edge");function El(){var n=qt.document;return n?n.documentMode:void 0}e:{var Tl="",Ja=(n=vu(),ea?/rv:([^\);]+)(\)|;)/.exec(n):$s?/Edge\/([\d\.]+)/.exec(n):Oi?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):zl?/WebKit\/(\S+)/.exec(n):Cu?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Ja&&(Tl=Ja?Ja[1]:""),Oi){var ki=El();if(null!=ki&&ki>parseFloat(Tl)){Eu=String(ki);break e}}Eu=Tl}var T=qt.document&&Oi&&(El()||parseInt(Eu,10))||void 0;function y(n,e){if(ji.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(ea){e:{try{Hs(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:A[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&y.$.h.call(this)}}Ci(y,ji);var A={2:"touch",3:"pen",4:"mouse"};y.prototype.h=function(){y.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var O="closure_listenable_"+(1e6*Math.random()|0),Z=0;function G(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++Z,this.fa=this.ia=!1}function ge(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function je(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function It(n){const e={};for(const t in n)e[t]=n[t];return e}const Nn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ar(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let l=0;l<Nn.length;l++)t=Nn[l],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Es(n){this.src=n,this.g={},this.h=0}function Ts(n,e){var t=e.type;if(t in n.g){var l,r=n.g[t],i=uc(r,e);(l=0<=i)&&Array.prototype.splice.call(r,i,1),l&&(ge(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function oo(n,e,t,r){for(var i=0;i<n.length;++i){var l=n[i];if(!l.fa&&l.listener==e&&l.capture==!!t&&l.la==r)return i}return-1}Es.prototype.add=function(n,e,t,r,i){var l=n.toString();(n=this.g[l])||(n=this.g[l]=[],this.h++);var c=oo(n,e,r,i);return-1<c?(e=n[c],t||(e.ia=!1)):((e=new G(e,this.src,l,!!r,i)).ia=t,n.push(e)),e};var Hi="closure_lm_"+(1e6*Math.random()|0),Ea={};function No(n,e,t,r,i){if(r&&r.once)return Jd(n,e,t,r,i);if(Array.isArray(e)){for(var l=0;l<e.length;l++)No(n,e[l],t,r,i);return null}return t=Xd(t),n&&n[O]?n.O(e,t,is(r)?!!r.capture:!!r,i):Xc(n,e,t,!1,r,i)}function Xc(n,e,t,r,i,l){if(!e)throw Error("Invalid event type");var c=is(i)?!!i.capture:!!i,f=ed(n);if(f||(n[Hi]=f=new Es(n)),(t=f.add(e,t,r,c,l)).proxy)return t;if(r=function Qd(){const e=gf;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Qa||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Wp(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Jd(n,e,t,r,i){if(Array.isArray(e)){for(var l=0;l<e.length;l++)Jd(n,e[l],t,r,i);return null}return t=Xd(t),n&&n[O]?n.P(e,t,is(r)?!!r.capture:!!r,i):Xc(n,e,t,!0,r,i)}function Sl(n,e,t,r,i){if(Array.isArray(e))for(var l=0;l<e.length;l++)Sl(n,e[l],t,r,i);else r=is(r)?!!r.capture:!!r,t=Xd(t),n&&n[O]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=oo(l=n.g[e],t,r,i))&&(ge(l[t]),Array.prototype.splice.call(l,t,1),0==l.length&&(delete n.g[e],n.h--))):n&&(n=ed(n))&&(e=n.g[e.toString()],n=-1,e&&(n=oo(e,t,r,i)),(t=-1<n?e[n]:null)&&Dl(t))}function Dl(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[O])Ts(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Wp(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=ed(e))?(Ts(t,n),0==t.h&&(t.src=null,e[Hi]=null)):ge(n)}}}function Wp(n){return n in Ea?Ea[n]:Ea[n]="on"+n}function gf(n,e){if(n.fa)n=!0;else{e=new y(e,this);var t=n.listener,r=n.la||n.src;n.ia&&Dl(n),n=t.call(r,e)}return n}function ed(n){return(n=n[Hi])instanceof Es?n:null}var hc="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xd(n){return"function"==typeof n?n:(n[hc]||(n[hc]=function(e){return n.handleEvent(e)}),n[hc])}function $i(){Rs.call(this),this.i=new Es(this),this.S=this,this.J=null}function Fi(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new ji(e,n);else if(e instanceof ji)e.target=e.target||n;else{var i=e;Ar(e=new ji(r,n),i)}if(i=!0,t)for(var l=t.length-1;0<=l;l--){var c=e.g=t[l];i=td(c,r,!0,e)&&i}if(i=td(c=e.g=n,r,!0,e)&&i,i=td(c,r,!1,e)&&i,t)for(l=0;l<t.length;l++)i=td(c=e.g=t[l],r,!1,e)&&i}function td(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,l=0;l<e.length;++l){var c=e[l];if(c&&!c.fa&&c.capture==t){var f=c.listener,_=c.la||c.src;c.ia&&Ts(n.i,c),i=!1!==f.call(_,r)&&i}}return i&&!r.defaultPrevented}Ci($i,Rs),$i.prototype[O]=!0,$i.prototype.removeEventListener=function(n,e,t,r){Sl(this,n,e,t,r)},$i.prototype.N=function(){if($i.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)ge(t[r]);delete n.g[e],n.h--}}this.J=null},$i.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},$i.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Tu=qt.JSON.stringify;function Kp(){var n=Iu;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var eh=new class nd{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new mf,n=>n.reset());class mf{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function _f(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function rd(n){qt.setTimeout(()=>{throw n},0)}let Gl,Ta=!1,Iu=new class Yp{constructor(){this.h=this.g=null}add(e,t){const r=eh.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},th=()=>{const n=qt.Promise.resolve(void 0);Gl=()=>{n.then(Su)}};var Su=()=>{for(var n;n=Kp();){try{n.h.call(n.g)}catch(t){rd(t)}var e=eh;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Ta=!1};function Du(n,e){$i.call(this),this.h=n||1,this.g=e||qt,this.j=os(this.qb,this),this.l=Date.now()}function fc(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function id(n,e,t){if("function"==typeof n)t&&(n=os(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=os(n.handleEvent,n)}return 2147483647<Number(e)?-1:qt.setTimeout(n,e||0)}function Qp(n){n.g=id(()=>{n.g=null,n.i&&(n.i=!1,Qp(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Ci(Du,$i),(bt=Du.prototype).ga=!1,bt.T=null,bt.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Fi(this,"tick"),this.ga&&(fc(this),this.start()))}},bt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},bt.N=function(){Du.$.N.call(this),fc(this),delete this.g};class Jp extends Rs{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Qp(this)}N(){super.N(),this.g&&(qt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function sd(n){Rs.call(this),this.h=n,this.g={}}Ci(sd,Rs);var nh=[];function od(n,e,t,r){Array.isArray(t)||(t&&(nh[0]=t.toString()),t=nh);for(var i=0;i<t.length;i++){var l=No(e,t[i],r||n.handleEvent,!1,n.h||n);if(!l)break;n.g[l.key]=l}}function Ia(n){je(n.g,function(e,t){this.g.hasOwnProperty(t)&&Dl(e)},n),n.g={}}function Au(){this.g=!0}function Oo(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Wl(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var l=i[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var c=1;c<i.length;c++)i[c]=""}}}return Tu(t)}catch{return e}}(n,t)+(r?" "+r:"")})}sd.prototype.N=function(){sd.$.N.call(this),Ia(this)},sd.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Au.prototype.Ea=function(){this.g=!1},Au.prototype.info=function(){};var Kl={},rh=null;function pc(){return rh=rh||new $i}function vf(n){ji.call(this,Kl.Ta,n)}function gc(n){const e=pc();Fi(e,new vf(e))}function wf(n,e){ji.call(this,Kl.STAT_EVENT,n),this.stat=e}function I(n){const e=pc();Fi(e,new wf(e,n))}function M(n,e){ji.call(this,Kl.Ua,n),this.size=e}function L(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return qt.setTimeout(function(){n()},e)}Kl.Ta="serverreachability",Ci(vf,ji),Kl.STAT_EVENT="statevent",Ci(wf,ji),Kl.Ua="timingevent",Ci(M,ji);var Y={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},ae={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function _e(){}function yt(){}_e.prototype.h=null;var pn,mt={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Zt(){ji.call(this,"d")}function fn(){ji.call(this,"c")}function Ns(){}function Lr(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new sd(this),this.P=ld,this.V=new Du(n=bu?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Yl}function Yl(){this.i=null,this.g="",this.h=!1}Ci(Zt,ji),Ci(fn,ji),Ci(Ns,_e),Ns.prototype.g=function(){return new XMLHttpRequest},Ns.prototype.i=function(){return{}},pn=new Ns;var ld=45e3,Xa={},qs={};function ao(n,e,t){n.L=1,n.v=oh(xu(e)),n.s=t,n.S=!0,mc(n,null)}function mc(n,e){n.G=Date.now(),_c(n),n.A=xu(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),If(t.i,"t",r),n.C=0,t=n.l.J,n.h=new Yl,n.g=Xy(n.l,t?e:null,!n.s),0<n.O&&(n.M=new Jp(os(n.Pa,n,n.g),n.O)),od(n.U,n.g,"readystatechange",n.nb),e=n.I?It(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),gc(),function yf(n,e,t,r,i,l){n.info(function(){if(n.g)if(l)for(var c="",f=l.split("&"),_=0;_<f.length;_++){var C=f[_].split("=");if(1<C.length){var R=C[0];C=C[1];var F=R.split("_");c=2<=F.length&&"type"==F[1]?c+(R+"=")+C+"&":c+(R+"=redacted&")}}else c=null;else c=l;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.W,n.s)}function Cf(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function ud(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=iC(n,t),i==qs){4==e&&(n.o=4,I(14),r=!1),Oo(n.j,n.m,null,"[Incomplete Response]");break}if(i==Xa){n.o=4,I(15),Oo(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Oo(n.j,n.m,i,null),sh(n,i)}Cf(n)&&i!=qs&&i!=Xa&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,I(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),Ic(e),e.M=!0,I(11))):(Oo(n.j,n.m,t,"[Invalid Chunked Response]"),na(n),yc(n))}function iC(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?qs:(t=Number(e.substring(t,r)),isNaN(t)?Xa:(r+=1)+t>e.length?qs:(e=e.slice(r,r+t),n.C=r+t,e))}function _c(n){n.Y=Date.now()+n.P,ih(n,n.P)}function ih(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=L(os(n.lb,n),e)}function Ql(n){n.B&&(qt.clearTimeout(n.B),n.B=null)}function yc(n){0==n.l.H||n.J||Pl(n.l,n)}function na(n){Ql(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,fc(n.V),Ia(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function sh(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||Mu(t.i,n)))if(!n.K&&Mu(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;Pu(t),Of(t)}el(t),I(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=L(os(t.ib,t),6e3));if(1>=tg(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Nu(t,11)}else if((n.K||t.g==n)&&Pu(t),!dc(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let C=i[e];if(t.V=C[0],C=C[1],2==t.H)if("c"==C[0]){t.K=C[1],t.pa=C[2];const R=C[3];null!=R&&(t.ra=R,t.l.info("VER="+t.ra));const F=C[4];null!=F&&(t.Ga=F,t.l.info("SVER="+t.Ga));const H=C[5];null!=H&&"number"==typeof H&&0<H&&(t.L=r=1.5*H,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const J=n.g;if(J){const ie=J.g?J.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ie){var l=r.i;l.g||-1==ie.indexOf("spdy")&&-1==ie.indexOf("quic")&&-1==ie.indexOf("h2")||(l.j=l.l,l.g=new Set,l.h&&(fh(l,l.h),l.h=null))}if(r.F){const we=J.g?J.g.getResponseHeader("X-HTTP-Session-Id"):null;we&&(r.Da=we,yr(r.I,r.F,we))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var c=n;if((r=t).wa=sg(r,r.J?r.pa:null,r.Y),c.K){Sf(r.i,c);var f=c,_=r.L;_&&f.setTimeout(_),f.B&&(Ql(f),_c(f)),r.g=c}else Fm(r);0<t.j.length&&kf(t)}else"stop"!=C[0]&&"close"!=C[0]||Nu(t,7);else 3==t.H&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?Nu(t,7):tu(t):"noop"!=C[0]&&t.h&&t.h.Aa(C),t.A=0)}gc()}catch{}}function bf(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Ro(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Wy(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Ro(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function bm(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Ro(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,l=0;l<i;l++)e.call(void 0,r[l],t&&t[l],n)}(bt=Lr.prototype).setTimeout=function(n){this.P=n},bt.nb=function(n){n=n.target;const e=this.M;e&&3==zs(n)?e.l():this.Pa(n)},bt.Pa=function(n){try{if(n==this.g)e:{const R=zs(this.g);var e=this.g.Ia();if(this.g.da(),!(3>R)&&(3!=R||bu||this.g&&(this.h.h||this.g.ja()||Rf(this.g)))){this.J||4!=R||7==e||gc(),Ql(this);var t=this.g.da();this.ca=t;t:if(Cf(this)){var r=Rf(this.g);n="";var i=r.length,l=4==zs(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){na(this),yc(this);var c="";break t}this.h.i=new qt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:l&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ja();if(this.i=200==t,function ta(n,e,t,r,i,l,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+l+" "+c})}(this.j,this.u,this.A,this.m,this.W,R,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var f,_=this.g;if((f=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!dc(f)){var C=f;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,I(12),na(this),yc(this);break e}Oo(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,sh(this,t)}this.S?(ud(this,R,c),bu&&this.i&&3==R&&(od(this.U,this.V,"tick",this.mb),this.V.start())):(Oo(this.j,this.m,c,null),sh(this,c)),4==R&&na(this),this.i&&!this.J&&(4==R?Pl(this.l,this):(this.i=!1,_c(this)))}else(function ng(n){const e={};n=(n.g&&2<=zs(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(dc(n[r]))continue;var t=_f(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const l=e[i]||[];e[i]=l,l.push(t)}!function gt(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<c.indexOf("Unknown SID")?(this.o=3,I(12)):(this.o=0,I(13)),na(this),yc(this)}}}catch{}},bt.mb=function(){if(this.g){var n=zs(this.g),e=this.g.ja();this.C<e.length&&(Ql(this),ud(this,n,e),this.i&&4!=n&&_c(this))}},bt.cancel=function(){this.J=!0,na(this)},bt.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function ad(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(gc(),I(17)),na(this),this.o=2,yc(this)):ih(this,this.Y-n)};var Em=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vc(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof vc){this.h=n.h,Al(this,n.j),this.s=n.s,this.g=n.g,Ef(this,n.m),this.l=n.l;var e=n.i,t=new uh;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Xp(this,t),this.o=n.o}else n&&(e=String(n).match(Em))?(this.h=!1,Al(this,e[1]||"",!0),this.s=Jl(e[2]||""),this.g=Jl(e[3]||"",!0),Ef(this,e[4]),this.l=Jl(e[5]||"",!0),Xp(this,e[6]||"",!0),this.o=Jl(e[7]||"")):(this.h=!1,this.i=new uh(null,this.h))}function xu(n){return new vc(n)}function Al(n,e,t){n.j=t?Jl(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Ef(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Xp(n,e,t){e instanceof uh?(n.i=e,function Am(n,e){e&&!n.j&&(Cc(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(ch(this,r),If(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=ah(e,Tf)),n.i=new uh(e,n.h))}function yr(n,e,t){n.i.set(e,t)}function oh(n){return yr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Jl(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function ah(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Ky),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Ky(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}vc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(ah(e,lh,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(ah(e,lh,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(ah(t,"/"==t.charAt(0)?wc:Im,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",ah(t,Sm)),n.join("")};var lh=/[#\/\?@]/g,Im=/[#\?:]/g,wc=/[#\?]/g,Tf=/[#\?@]/g,Sm=/#/g;function uh(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Cc(n){n.g||(n.g=new Map,n.h=0,n.i&&function Tm(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var l=n[t].substring(0,r);i=n[t].substring(r+1)}else l=n[t];e(l,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function ch(n,e){Cc(n),e=Xl(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function Dm(n,e){return Cc(n),e=Xl(n,e),n.g.has(e)}function If(n,e,t){ch(n,e),0<t.length&&(n.i=null,n.g.set(Xl(n,e),Jc(t)),n.h+=t.length)}function Xl(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function dh(n){this.l=n||cd,n=qt.PerformanceNavigationTiming?0<(n=qt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(qt.g&&qt.g.Ka&&qt.g.Ka()&&qt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(bt=uh.prototype).add=function(n,e){Cc(this),this.i=null,n=Xl(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},bt.forEach=function(n,e){Cc(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},bt.ta=function(){Cc(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let l=0;l<i.length;l++)t.push(e[r])}return t},bt.Z=function(n){Cc(this);let e=[];if("string"==typeof n)Dm(this,n)&&(e=e.concat(this.g.get(Xl(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},bt.set=function(n,e){return Cc(this),this.i=null,Dm(this,n=Xl(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},bt.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},bt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const l=encodeURIComponent(String(r)),c=this.Z(r);for(r=0;r<c.length;r++){var i=l;""!==c[r]&&(i+="="+encodeURIComponent(String(c[r]))),n.push(i)}}return this.i=n.join("&")};var cd=10;function hh(n){return!!n.h||!!n.g&&n.g.size>=n.j}function tg(n){return n.h?1:n.g?n.g.size:0}function Mu(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function fh(n,e){n.g?n.g.add(e):n.h=e}function Sf(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function dd(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return Jc(n.i)}dh.prototype.cancel=function(){if(this.i=dd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var xm=class{stringify(n){return qt.JSON.stringify(n,void 0)}parse(n){return qt.JSON.parse(n,void 0)}};function Mm(){this.g=new xm}function Yy(n,e,t){const r=t||"";try{bf(n,function(i,l){let c=i;is(i)&&(c=Tu(i)),e.push(r+l+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Df(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function xl(n){this.l=n.fc||null,this.j=n.ob||!1}function ph(n,e){$i.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=bc,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ci(xl,_e),xl.prototype.g=function(){return new ph(this.l,this.j)},xl.prototype.i=function(n){return function(){return n}}({}),Ci(ph,$i);var bc=0;function Af(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Ml(n){n.readyState=4,n.l=null,n.j=null,n.A=null,gh(n)}function gh(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(bt=ph.prototype).open=function(n,e){if(this.readyState!=bc)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,gh(this)},bt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||qt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},bt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ml(this)),this.readyState=bc},bt.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,gh(this)),this.g&&(this.readyState=3,gh(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof qt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Af(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},bt.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Ml(this):gh(this),3==this.readyState&&Af(this)}},bt.Za=function(n){this.g&&(this.response=this.responseText=n,Ml(this))},bt.Ya=function(n){this.g&&(this.response=n,Ml(this))},bt.ka=function(){this.g&&Ml(this)},bt.setRequestHeader=function(n,e){this.v.append(n,e)},bt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},bt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(ph.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Jy=qt.JSON.parse;function bi(n){$i.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=xf,this.L=this.M=!1}Ci(bi,$i);var xf="",mh=/^https?$/i,Pm=["POST","PUT"];function Ec(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Mf(n),eu(n)}function Mf(n){n.F||(n.F=!0,Fi(n,"complete"),Fi(n,"error"))}function lo(n){if(n.h&&typeof Ya<"u"&&(!n.C[1]||4!=zs(n)||2!=n.da()))if(n.v&&4==zs(n))id(n.La,0,n);else if(Fi(n,"readystatechange"),4==zs(n)){n.h=!1;try{const c=n.da();e:switch(c){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===c){var i=String(n.I).match(Em)[1]||null;!i&&qt.self&&qt.self.location&&(i=qt.self.location.protocol.slice(0,-1)),r=!mh.test(i?i.toLowerCase():"")}t=r}if(t)Fi(n,"complete"),Fi(n,"success");else{n.m=6;try{var l=2<zs(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.da()+"]",Mf(n)}}finally{eu(n)}}}function eu(n,e){if(n.g){Pf(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Fi(n,"ready");try{t.onreadystatechange=r}catch{}}}function Pf(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(qt.clearTimeout(n.A),n.A=null)}function zs(n){return n.g?n.g.readyState:0}function Rf(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case xf:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Nm(n){let e="";return je(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Nf(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=Nm(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):yr(n,e,t))}function _h(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Os(n){this.Ga=0,this.j=[],this.l=new Au,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=_h("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=_h("baseRetryDelayMs",5e3,n),this.hb=_h("retryDelaySeedMs",1e4,n),this.eb=_h("forwardChannelMaxRetries",2,n),this.xa=_h("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new dh(n&&n.concurrentRequestLimit),this.Ja=new Mm,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function tu(n){if(Om(n),3==n.H){var e=n.W++,t=xu(n.I);if(yr(t,"SID",n.K),yr(t,"RID",e),yr(t,"TYPE","terminate"),Tc(n,t),(e=new Lr(n,n.l,e)).L=2,e.v=oh(xu(t)),t=!1,qt.navigator&&qt.navigator.sendBeacon)try{t=qt.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&qt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Xy(e.l,null),e.g.ha(e.v)),e.G=Date.now(),_c(e)}ig(n)}function Of(n){n.g&&(Ic(n),n.g.cancel(),n.g=null)}function Om(n){Of(n),n.u&&(qt.clearTimeout(n.u),n.u=null),Pu(n),n.i.cancel(),n.m&&("number"==typeof n.m&&qt.clearTimeout(n.m),n.m=null)}function kf(n){if(!hh(n.i)&&!n.m){n.m=!0;var e=n.Na;Gl||th(),Ta||(Gl(),Ta=!0),Iu.add(e,n),n.C=0}}function uo(n,e){var t;t=e?e.m:n.W++;const r=xu(n.I);yr(r,"SID",n.K),yr(r,"RID",t),yr(r,"AID",n.V),Tc(n,r),n.o&&n.s&&Nf(r,n.o,n.s),t=new Lr(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=yh(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),fh(n.i,t),ao(t,r,e)}function Tc(n,e){n.na&&je(n.na,function(t,r){yr(e,r,t)}),n.h&&bf({},function(t,r){yr(e,r,t)})}function yh(n,e,t){t=Math.min(n.j.length,t);var r=n.h?os(n.h.Va,n.h,n):null;e:{var i=n.j;let l=-1;for(;;){const c=["count="+t];-1==l?0<t?(l=i[0].g,c.push("ofs="+l)):l=0:c.push("ofs="+l);let f=!0;for(let _=0;_<t;_++){let C=i[_].g;const R=i[_].map;if(C-=l,0>C)l=Math.max(0,i[_].g-100),f=!1;else try{Yy(R,c,"req"+C+"_")}catch{r&&r(R)}}if(f){r=c.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function Fm(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Gl||th(),Ta||(Gl(),Ta=!0),Iu.add(e,n),n.A=0}}function el(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=L(os(n.Ma,n),Ru(n,n.A)),n.A++,0))}function Ic(n){null!=n.B&&(qt.clearTimeout(n.B),n.B=null)}function rg(n){n.g=new Lr(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=xu(n.wa);yr(e,"RID","rpc"),yr(e,"SID",n.K),yr(e,"AID",n.V),yr(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&yr(e,"TO",n.qa),yr(e,"TYPE","xmlhttp"),Tc(n,e),n.o&&n.s&&Nf(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=oh(xu(e)),t.s=null,t.S=!0,mc(t,n)}function Pu(n){null!=n.v&&(qt.clearTimeout(n.v),n.v=null)}function Pl(n,e){var t=null;if(n.g==e){Pu(n),Ic(n),n.g=null;var r=2}else{if(!Mu(n.i,e))return;t=e.F,Sf(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;Fi(r=pc(),new M(r,t)),kf(n)}else Fm(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function km(n,e){return!(tg(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=L(os(n.Na,n,e),Ru(n,n.C)),n.C++,0)))}(n,e)||2==r&&el(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Nu(n,5);break;case 4:Nu(n,10);break;case 3:Nu(n,6);break;default:Nu(n,2)}}function Ru(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Nu(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=os(n.pb,n);t||(t=new vc("//www.google.com/images/cleardot.gif"),qt.location&&"http"==qt.location.protocol||Al(t,"https"),oh(t)),function Qy(n,e){const t=new Au;if(qt.Image){const r=new Image;r.onload=er(Df,t,r,"TestLoadImage: loaded",!0,e),r.onerror=er(Df,t,r,"TestLoadImage: error",!1,e),r.onabort=er(Df,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=er(Df,t,r,"TestLoadImage: timeout",!1,e),qt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else I(2);n.H=0,n.h&&n.h.za(e),ig(n),Om(n)}function ig(n){if(n.H=0,n.ma=[],n.h){const e=dd(n.i);(0!=e.length||0!=n.j.length)&&(cc(n.ma,e),cc(n.ma,n.j),n.i.i.length=0,Jc(n.j),n.j.length=0),n.h.ya()}}function sg(n,e,t){var r=t instanceof vc?xu(t):new vc(t);if(""!=r.g)e&&(r.g=e+"."+r.g),Ef(r,r.m);else{var i=qt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var l=new vc(null);r&&Al(l,r),e&&(l.g=e),i&&Ef(l,i),t&&(l.l=t),r=l}return e=n.Da,(t=n.F)&&e&&yr(r,t,e),yr(r,"VER",n.ra),Tc(n,r),r}function Xy(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new bi(t&&n.Ha&&!n.va?new xl({ob:!0}):n.va)).Oa(n.J),e}function v(){}function p(){if(Oi&&!(10<=Number(T)))throw Error("Environmental error: no available transport.")}function g(n,e){$i.call(this),this.g=new Os(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!dc(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!dc(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new j(this)}function E(n){Zt.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function k(){fn.call(this),this.status=1}function j(n){this.g=n}function ye(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function rt(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var l=n.g[3],c=(e=n.g[0])+(l^(t=n.g[1])&((i=n.g[2])^l))+r[0]+3614090360&4294967295;c=(t=(i=(l=(e=(t=(i=(l=(e=(t=(i=(l=(e=(t=(i=(l=(e=(t=(i=(l=(e=(t=(i=(l=(e=(t=(i=(l=(e=(t=(i=(l=(e=(t=(i=(l=(e=(t=(i=(l=(e=(t=(i=(l=(e=(t=(i=(l=(e=(t=(i=(l=(e=(t=(i=(l=(e=(t=(i=(l=(e=t+(c<<7&4294967295|c>>>25))+((c=l+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^l&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(l^e))+r[3]+3250441966&4294967295)<<22&4294967295|c>>>10))+((c=e+(l^t&(i^l))+r[4]+4118548399&4294967295)<<7&4294967295|c>>>25))+((c=l+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^l&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(l^e))+r[7]+4249261313&4294967295)<<22&4294967295|c>>>10))+((c=e+(l^t&(i^l))+r[8]+1770035416&4294967295)<<7&4294967295|c>>>25))+((c=l+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^l&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(l^e))+r[11]+2304563134&4294967295)<<22&4294967295|c>>>10))+((c=e+(l^t&(i^l))+r[12]+1804603682&4294967295)<<7&4294967295|c>>>25))+((c=l+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^l&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(l^e))+r[15]+1236535329&4294967295)<<22&4294967295|c>>>10))+((c=e+(i^l&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|c>>>27))+((c=l+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(l^e))+r[11]+643717713&4294967295)<<14&4294967295|c>>>18))+((c=t+(l^e&(i^l))+r[0]+3921069994&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^l&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|c>>>27))+((c=l+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(l^e))+r[15]+3634488961&4294967295)<<14&4294967295|c>>>18))+((c=t+(l^e&(i^l))+r[4]+3889429448&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^l&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|c>>>27))+((c=l+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(l^e))+r[3]+4107603335&4294967295)<<14&4294967295|c>>>18))+((c=t+(l^e&(i^l))+r[8]+1163531501&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^l&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|c>>>27))+((c=l+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(l^e))+r[7]+1735328473&4294967295)<<14&4294967295|c>>>18))+((c=t+(l^e&(i^l))+r[12]+2368359562&4294967295)<<20&4294967295|c>>>12))+((c=e+(t^i^l)+r[5]+4294588738&4294967295)<<4&4294967295|c>>>28))+((c=l+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|c>>>21))+((c=i+(l^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^l^e)+r[14]+4259657740&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^l)+r[1]+2763975236&4294967295)<<4&4294967295|c>>>28))+((c=l+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|c>>>21))+((c=i+(l^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^l^e)+r[10]+3200236656&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^l)+r[13]+681279174&4294967295)<<4&4294967295|c>>>28))+((c=l+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|c>>>21))+((c=i+(l^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^l^e)+r[6]+76029189&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^l)+r[9]+3654602809&4294967295)<<4&4294967295|c>>>28))+((c=l+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|c>>>21))+((c=i+(l^e^t)+r[15]+530742520&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^l^e)+r[2]+3299628645&4294967295)<<23&4294967295|c>>>9))+((c=e+(i^(t|~l))+r[0]+4096336452&4294967295)<<6&4294967295|c>>>26))+((c=l+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(l|~t))+r[14]+2878612391&4294967295)<<15&4294967295|c>>>17))+((c=t+(l^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|c>>>11))+((c=e+(i^(t|~l))+r[12]+1700485571&4294967295)<<6&4294967295|c>>>26))+((c=l+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(l|~t))+r[10]+4293915773&4294967295)<<15&4294967295|c>>>17))+((c=t+(l^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|c>>>11))+((c=e+(i^(t|~l))+r[8]+1873313359&4294967295)<<6&4294967295|c>>>26))+((c=l+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(l|~t))+r[6]+2734768916&4294967295)<<15&4294967295|c>>>17))+((c=t+(l^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|c>>>11))+((l=(e=t+((c=e+(i^(t|~l))+r[4]+4149444226&4294967295)<<6&4294967295|c>>>26))+((c=l+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|c>>>22))^((i=l+((c=i+(e^(l|~t))+r[2]+718787259&4294967295)<<15&4294967295|c>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(c<<21&4294967295|c>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+l&4294967295}function Ke(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var l=0|n[i];r&&l==e||(t[i]=l,r=!1)}this.g=t}(bt=bi.prototype).Oa=function(n){this.M=n},bt.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():pn.g(),this.C=function Ae(n){return n.h||(n.h=n.i())}(this.u?this.u:pn),this.g.onreadystatechange=os(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(l){return void Ec(this,l)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const l of r.keys())t.set(l,r.get(l))}r=Array.from(t.keys()).find(l=>"content-type"==l.toLowerCase()),i=qt.FormData&&n instanceof qt.FormData,!(0<=uc(Pm,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[l,c]of t)this.g.setRequestHeader(l,c);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Pf(this),0<this.B&&((this.L=function Rm(n){return Oi&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=os(this.ua,this)):this.A=id(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(l){Ec(this,l)}},bt.ua=function(){typeof Ya<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Fi(this,"timeout"),this.abort(8))},bt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Fi(this,"complete"),Fi(this,"abort"),eu(this))},bt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),eu(this,!0)),bi.$.N.call(this)},bt.La=function(){this.s||(this.G||this.v||this.l?lo(this):this.kb())},bt.kb=function(){lo(this)},bt.isActive=function(){return!!this.g},bt.da=function(){try{return 2<zs(this)?this.g.status:-1}catch{return-1}},bt.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},bt.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Jy(e)}},bt.Ia=function(){return this.m},bt.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(bt=Os.prototype).ra=8,bt.H=1,bt.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new Lr(this,this.l,n);let l=this.s;if(this.U&&(l?(l=It(l),Ar(l,this.U)):l=this.U),null!==this.o||this.O||(i.I=l,l=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=yh(this,i,e),yr(t=xu(this.I),"RID",n),yr(t,"CVER",22),this.F&&yr(t,"X-HTTP-Session-Id",this.F),Tc(this,t),l&&(this.O?e="headers="+encodeURIComponent(String(Nm(l)))+"&"+e:this.o&&Nf(t,this.o,l)),fh(this.i,i),this.bb&&yr(t,"TYPE","init"),this.P?(yr(t,"$req",e),yr(t,"SID","null"),i.aa=!0,ao(i,t,null)):ao(i,t,e),this.H=2}}else 3==this.H&&(n?uo(this,n):0==this.j.length||hh(this.i)||uo(this))},bt.Ma=function(){if(this.u=null,rg(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=L(os(this.jb,this),n)}},bt.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,I(10),Of(this),rg(this))},bt.ib=function(){null!=this.v&&(this.v=null,Of(this),el(this),I(19))},bt.pb=function(n){n?(this.l.info("Successfully pinged google.com"),I(2)):(this.l.info("Failed to ping google.com"),I(1))},bt.isActive=function(){return!!this.h&&this.h.isActive(this)},(bt=v.prototype).Ba=function(){},bt.Aa=function(){},bt.za=function(){},bt.ya=function(){},bt.isActive=function(){return!0},bt.Va=function(){},p.prototype.g=function(n,e){return new g(n,e)},Ci(g,$i),g.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;I(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=sg(n,null,n.Y),kf(n)},g.prototype.close=function(){tu(this.g)},g.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Tu(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&kf(e)},g.prototype.N=function(){this.g.h=null,delete this.j,tu(this.g),delete this.g,g.$.N.call(this)},Ci(E,Zt),Ci(k,fn),Ci(j,v),j.prototype.Ba=function(){Fi(this.g,"a")},j.prototype.Aa=function(n){Fi(this.g,new E(n))},j.prototype.za=function(n){Fi(this.g,new k)},j.prototype.ya=function(){Fi(this.g,"b")},Ci(ye,function oe(){this.blockSize=-1}),ye.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ye.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,l=0;l<e;){if(0==i)for(;l<=t;)rt(this,n,l),l+=this.blockSize;if("string"==typeof n){for(;l<e;)if(r[i++]=n.charCodeAt(l++),i==this.blockSize){rt(this,r),i=0;break}}else for(;l<e;)if(r[i++]=n[l++],i==this.blockSize){rt(this,r),i=0;break}}this.h=i,this.i+=e},ye.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var Lt={};function kt(n){return-128<=n&&128>n?function wu(n,e){var t=Lt;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new Ke([0|e],0>e?-1:0)}):new Ke([0|n],0>n?-1:0)}function Kn(n){if(isNaN(n)||!isFinite(n))return Sc;if(0>n)return as(Kn(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=Ou;return new Ke(e,0)}var Ou=4294967296,Sc=kt(0),Gr=kt(1),Ff=kt(16777216);function Rl(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Gs(n){return-1==n.h}function as(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new Ke(t,~n.h).add(Gr)}function vh(n,e){return n.add(as(e))}function hd(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function fd(n,e){this.g=n,this.h=e}function Lf(n,e){if(Rl(e))throw Error("division by zero");if(Rl(n))return new fd(Sc,Sc);if(Gs(n))return e=Lf(as(n),e),new fd(as(e.g),as(e.h));if(Gs(e))return e=Lf(n,as(e)),new fd(as(e.g),e.h);if(30<n.g.length){if(Gs(n)||Gs(e))throw Error("slowDivide_ only works with positive integers.");for(var t=Gr,r=e;0>=r.X(n);)t=wh(t),r=wh(r);var i=Ch(t,1),l=Ch(r,1);for(r=Ch(r,2),t=Ch(t,2);!Rl(r);){var c=l.add(r);0>=c.X(n)&&(i=i.add(t),l=c),r=Ch(r,1),t=Ch(t,1)}return e=vh(n,i.R(e)),new fd(i,e)}for(i=Sc;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),c=(l=Kn(t)).R(e);Gs(c)||0<c.X(n);)c=(l=Kn(t-=r)).R(e);Rl(l)&&(l=Gr),i=i.add(l),n=vh(n,c)}return new fd(i,n)}function wh(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new Ke(t,n.h)}function Ch(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],l=0;l<r;l++)i[l]=0<e?n.D(l+t)>>>e|n.D(l+t+1)<<32-e:n.D(l+t);return new Ke(i,n.h)}(bt=Ke.prototype).ea=function(){if(Gs(this))return-as(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:Ou+r)*e,e*=Ou}return n},bt.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Rl(this))return"0";if(Gs(this))return"-"+as(this).toString(n);for(var e=Kn(Math.pow(n,6)),t=this,r="";;){var i=Lf(t,e).g,l=((0<(t=vh(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Rl(t=i))return l+r;for(;6>l.length;)l="0"+l;r=l+r}},bt.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},bt.X=function(n){return Gs(n=vh(this,n))?-1:Rl(n)?0:1},bt.abs=function(){return Gs(this)?as(this):this},bt.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var l=r+(65535&this.D(i))+(65535&n.D(i)),c=(l>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=c>>>16,t[i]=(c&=65535)<<16|(l&=65535)}return new Ke(t,-2147483648&t[t.length-1]?-1:0)},bt.R=function(n){if(Rl(this)||Rl(n))return Sc;if(Gs(this))return Gs(n)?as(this).R(as(n)):as(as(this).R(n));if(Gs(n))return as(this.R(as(n)));if(0>this.X(Ff)&&0>n.X(Ff))return Kn(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var l=this.D(r)>>>16,c=65535&this.D(r),f=n.D(i)>>>16,_=65535&n.D(i);t[2*r+2*i]+=c*_,hd(t,2*r+2*i),t[2*r+2*i+1]+=l*_,hd(t,2*r+2*i+1),t[2*r+2*i+1]+=c*f,hd(t,2*r+2*i+1),t[2*r+2*i+2]+=l*f,hd(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new Ke(t,0)},bt.gb=function(n){return Lf(this,n).h},bt.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new Ke(t,this.h&n.h)},bt.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new Ke(t,this.h|n.h)},bt.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new Ke(t,this.h^n.h)},p.prototype.createWebChannel=p.prototype.g,g.prototype.send=g.prototype.u,g.prototype.open=g.prototype.m,g.prototype.close=g.prototype.close,Y.NO_ERROR=0,Y.TIMEOUT=8,Y.HTTP_ERROR=6,ae.COMPLETE="complete",yt.EventType=mt,mt.OPEN="a",mt.CLOSE="b",mt.ERROR="c",mt.MESSAGE="d",$i.prototype.listen=$i.prototype.O,bi.prototype.listenOnce=bi.prototype.P,bi.prototype.getLastError=bi.prototype.Sa,bi.prototype.getLastErrorCode=bi.prototype.Ia,bi.prototype.getStatus=bi.prototype.da,bi.prototype.getResponseJson=bi.prototype.Wa,bi.prototype.getResponseText=bi.prototype.ja,bi.prototype.send=bi.prototype.ha,bi.prototype.setWithCredentials=bi.prototype.Oa,ye.prototype.digest=ye.prototype.l,ye.prototype.reset=ye.prototype.reset,ye.prototype.update=ye.prototype.j,Ke.prototype.add=Ke.prototype.add,Ke.prototype.multiply=Ke.prototype.R,Ke.prototype.modulo=Ke.prototype.gb,Ke.prototype.compare=Ke.prototype.X,Ke.prototype.toNumber=Ke.prototype.ea,Ke.prototype.toString=Ke.prototype.toString,Ke.prototype.getBits=Ke.prototype.D,Ke.fromNumber=Kn,Ke.fromString=function ra(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return as(ra(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Kn(Math.pow(e,8)),r=Sc,i=0;i<n.length;i+=8){var l=Math.min(8,n.length-i),c=parseInt(n.substring(i,i+l),e);8>l?(l=Kn(Math.pow(e,l)),r=r.R(l).add(Kn(c))):r=(r=r.R(t)).add(Kn(c))}return r};var S1=Zi.createWebChannelTransport=function(){return new p},og=Zi.getStatEventTarget=function(){return pc()},ag=Zi.ErrorCode=Y,sC=Zi.EventType=ae,oC=Zi.Event=Kl,ev=Zi.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},sI=Zi.FetchXmlHttpFactory=xl,Lm=Zi.WebChannel=yt,aC=Zi.XhrIo=bi,lC=Zi.Md5=ye,pd=Zi.Integer=Ke;const oI="@firebase/firestore";class Is{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Is.UNAUTHENTICATED=new Is(null),Is.GOOGLE_CREDENTIALS=new Is("google-credentials-uid"),Is.FIRST_PARTY=new Is("first-party-uid"),Is.MOCK_USER=new Is("mock-user");let Uf="9.23.0";const ku=new ii.Yd("@firebase/firestore");function Um(){return ku.logLevel}function st(n,...e){if(ku.logLevel<=ii.in.DEBUG){const t=e.map(Vf);ku.debug(`Firestore (${Uf}): ${n}`,...t)}}function ls(n,...e){if(ku.logLevel<=ii.in.ERROR){const t=e.map(Vf);ku.error(`Firestore (${Uf}): ${n}`,...t)}}function Sa(n,...e){if(ku.logLevel<=ii.in.WARN){const t=e.map(Vf);ku.warn(`Firestore (${Uf}): ${n}`,...t)}}function Vf(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function jt(n="Unexpected state"){const e=`FIRESTORE (${Uf}) INTERNAL ASSERTION FAILED: `+n;throw ls(e),new Error(e)}function Xt(n,e){n||jt()}function St(n,e){return n}const Pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Qe extends W.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ks{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class cC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class dC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Is.UNAUTHENTICATED))}shutdown(){}}class Bf{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class aI{constructor(e){this.t=e,this.currentUser=Is.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const l=C=>this.i!==i?(i=this.i,t(C)):Promise.resolve();let c=new ks;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new ks,e.enqueueRetryable(()=>l(this.currentUser))};const f=()=>{const C=c;e.enqueueRetryable((0,ke.Z)(function*(){yield C.promise,yield l(r.currentUser)}))},_=C=>{st("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(C=>_(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?_(C):(st("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new ks)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(st("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Xt("string"==typeof r.accessToken),new cC(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Xt(null===e||"string"==typeof e),new Is(e)}}class lI{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=Is.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class uI{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new lI(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Is.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Bm{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class cI{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=l=>{null!=l.error&&st("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.T;return this.T=l.token,st("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>r(l))};const i=l=>{st("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.I.onInit(l=>i(l)),setTimeout(()=>{if(!this.appCheck){const l=this.I.getImmediate({optional:!0});l?i(l):st("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Xt("string"==typeof t.token),this.T=t.token,new Bm(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function hI(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class tv{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=hI(40);for(let l=0;l<i.length;++l)r.length<20&&i[l]<t&&(r+=e.charAt(i[l]%e.length))}return r}}function Pn(n,e){return n<e?-1:n>e?1:0}function Zf(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function jf(n){return n+"\0"}class Ei{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Qe(Pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Qe(Pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Qe(Pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Qe(Pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ei.fromMillis(Date.now())}static fromDate(e){return Ei.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Ei(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Pn(this.nanoseconds,e.nanoseconds):Pn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Kt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Kt(e)}static min(){return new Kt(new Ei(0,0))}static max(){return new Kt(new Ei(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Dc{constructor(e,t,r){void 0===t?t=0:t>e.length&&jt(),void 0===r?r=e.length-t:r>e.length-t&&jt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Dc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Dc?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const l=e.get(i),c=t.get(i);if(l<c)return-1;if(l>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ar extends Dc{construct(e,t,r){return new ar(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Qe(Pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new ar(t)}static emptyPath(){return new ar([])}}const hC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qi extends Dc{construct(e,t,r){return new qi(e,t,r)}static isValidIdentifier(e){return hC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new qi(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const l=()=>{if(0===r.length)throw new Qe(Pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new Qe(Pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Qe(Pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===f?(c=!c,i++):"."!==f||c?(r+=f,i++):(l(),i++)}if(l(),c)throw new Qe(Pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qi(t)}static emptyPath(){return new qi([])}}class Mt{constructor(e){this.path=e}static fromPath(e){return new Mt(ar.fromString(e))}static fromName(e){return new Mt(ar.fromString(e).popFirst(5))}static empty(){return new Mt(ar.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ar.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ar.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Mt(new ar(e.slice()))}}class Zm{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function jm(n){return n.fields.find(e=>2===e.kind)}function gd(n){return n.fields.filter(e=>2!==e.kind)}Zm.UNKNOWN_ID=-1;class Hf{constructor(e,t){this.fieldPath=e,this.kind=t}}class bh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new bh(0,tl.min())}}function $f(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Kt.fromTimestamp(1e9===r?new Ei(t+1,0):new Ei(t,r));return new tl(i,Mt.empty(),e)}function fC(n){return new tl(n.readTime,n.key,-1)}class tl{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new tl(Kt.min(),Mt.empty(),-1)}static max(){return new tl(Kt.max(),Mt.empty(),-1)}}function rv(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Mt.comparator(n.documentKey,e.documentKey),0!==t?t:Pn(n.largestBatchId,e.largestBatchId))}const pC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function md(n){return iv.apply(this,arguments)}function iv(){return iv=(0,ke.Z)(function*(n){if(n.code!==Pe.FAILED_PRECONDITION||n.message!==pC)throw n;st("LocalStore","Unexpectedly lost primary lease")}),iv.apply(this,arguments)}class Te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&jt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Te((r,i)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,i)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Te?t:Te.resolve(t)}catch(t){return Te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Te.reject(t)}static resolve(e){return new Te((t,r)=>{t(e)})}static reject(e){return new Te((t,r)=>{r(e)})}static waitFor(e){return new Te((t,r)=>{let i=0,l=0,c=!1;e.forEach(f=>{++i,f.next(()=>{++l,c&&l===i&&t()},_=>r(_))}),c=!0,l===i&&t()})}static or(e){let t=Te.resolve(!1);for(const r of e)t=t.next(i=>i?Te.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,l)=>{r.push(t.call(this,i,l))}),this.waitFor(r)}static mapArray(e,t){return new Te((r,i)=>{const l=e.length,c=new Array(l);let f=0;for(let _=0;_<l;_++){const C=_;t(e[C]).next(R=>{c[C]=R,++f,f===l&&r(c)},R=>i(R))}})}static doWhile(e,t){return new Te((r,i)=>{const l=()=>{!0===e()?t().next(()=>{l()},i):r()};l()})}}class Nl{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new ks,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Hm(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=$m(r.target.error);this.v.reject(new Hm(e,i))}}static open(e,t,r,i){try{return new Nl(t,e.transaction(i,r))}catch(l){throw new Hm(t,l)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(st("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new mC(t)}}class nu{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===nu.S((0,W.z$)())&&ls("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return st("SimpleDb","Removing database:",e),qf(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,W.hl)())return!1;if(nu.C())return!0;const e=(0,W.z$)(),t=nu.S(e),r=0<t&&t<10,i=nu.N(e),l=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,ke.Z)(function*(){return t.db||(st("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const l=indexedDB.open(t.name,t.version);l.onsuccess=c=>{r(c.target.result)},l.onblocked=()=>{i(new Hm(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=c=>{const f=c.target.error;i("VersionError"===f.name?new Qe(Pe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new Qe(Pe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new Hm(e,f))},l.onupgradeneeded=c=>{st("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.V.O(c.target.result,l.transaction,c.oldVersion,t.version).next(()=>{st("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var l=this;return(0,ke.Z)(function*(){const c="readonly"===t;let f=0;for(;;){++f;try{l.db=yield l.$(e);const _=Nl.open(l.db,e,c?"readonly":"readwrite",r),C=i(_).next(R=>(_.P(),R)).catch(R=>(_.abort(R),Te.reject(R))).toPromise();return C.catch(()=>{}),yield _.R,C}catch(_){const C=_,R="FirebaseError"!==C.name&&f<3;if(st("SimpleDb","Transaction failed with error:",C.message,"Retrying:",R),l.close(),!R)return Promise.reject(C)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class pI{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return qf(this.L.delete())}}class Hm extends Qe{constructor(e,t){super(Pe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Eh(n){return"IndexedDbTransactionError"===n.name}class mC{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(st("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(st("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),qf(r)}add(e){return st("SimpleDb","ADD",this.store.name,e,e),qf(this.store.add(e))}get(e){return qf(this.store.get(e)).next(t=>(void 0===t&&(t=null),st("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return st("SimpleDb","DELETE",this.store.name,e),qf(this.store.delete(e))}count(){return st("SimpleDb","COUNT",this.store.name),qf(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),l=[];return this.W(i,(c,f)=>{l.push(f)}).next(()=>l)}{const i=this.store.getAll(r.range);return new Te((l,c)=>{i.onerror=f=>{c(f.target.error)},i.onsuccess=f=>{l(f.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new Te((i,l)=>{r.onerror=c=>{l(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}J(e,t){st("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(l,c,f)=>f.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new Te((r,i)=>{t.onerror=l=>{const c=$m(l.target.error);i(c)},t.onsuccess=l=>{const c=l.target.result;c?e(c.primaryKey,c.value).next(f=>{f?c.continue():r()}):r()}})}W(e,t){const r=[];return new Te((i,l)=>{e.onerror=c=>{l(c.target.error)},e.onsuccess=c=>{const f=c.target.result;if(!f)return void i();const _=new pI(f),C=t(f.primaryKey,f.value,_);if(C instanceof Te){const R=C.catch(F=>(_.done(),Te.reject(F)));r.push(R)}_.isDone?i():null===_.K?f.continue():f.continue(_.K)}}).next(()=>Te.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function qf(n){return new Te((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=$m(r.target.error);t(i)}})}let sv=!1;function $m(n){const e=nu.S((0,W.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Qe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return sv||(sv=!0,setTimeout(()=>{throw r},0)),r}}return n}class gI{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;st("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ke.Z)(function*(){t.task=null;try{st("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){Eh(r)?st("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield md(r)}yield t.et(6e4)}))}}class _C{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,ke.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,l=!0;return Te.doWhile(()=>!0===l&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return st("IndexBackiller",`Processing collection: ${c}`),this.it(e,c,i).next(f=>{i-=f,r.add(c)});l=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(l=>{const c=l.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.rt(i,l)).next(f=>(st("IndexBackiller",`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f))).next(()=>c.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,l)=>{const c=fC(l);rv(c,r)>0&&(r=c)}),new tl(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let nl=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function lg(n){return null==n}function ia(n){return 0===n&&1/n==-1/0}function yC(n){return"number"==typeof n&&Number.isInteger(n)&&!ia(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function co(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=vC(e)),e=mI(n.get(t),e);return vC(e)}function mI(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const l=n.charAt(i);switch(l){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=l}}return t}function vC(n){return n+"\x01\x01"}function Fu(n){const e=n.length;if(Xt(e>=2),2===e)return Xt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),ar.emptyPath();const t=e-2,r=[];let i="";for(let l=0;l<e;){const c=n.indexOf("\x01",l);switch((c<0||c>t)&&jt(),n.charAt(c+1)){case"\x01":const f=n.substring(l,c);let _;0===i.length?_=f:(i+=f,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(l,c),i+="\0";break;case"\x11":i+=n.substring(l,c+1);break;default:jt()}l=c+2}return new ar(r)}const wC=["userId","batchId"];function ug(n,e){return[n,co(e)]}function CC(n,e,t){return[n,co(e),t]}const _I={},yI=["prefixPath","collectionGroup","readTime","documentId"],On=["prefixPath","collectionGroup","documentId"],bC=["collectionGroup","readTime","prefixPath","documentId"],EC=["canonicalId","targetId"],TC=["targetId","path"],vI=["path","targetId"],wI=["collectionId","parent"],IC=["indexId","uid"],CI=["uid","sequenceNumber"],SC=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],bI=["indexId","uid","orderedDocumentKey"],EI=["userId","collectionPath","documentId"],D1=["userId","collectionPath","largestBatchId"],DC=["userId","collectionGroup","largestBatchId"],ov=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Th=[...ov,"documentOverlays"],AC=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],qm=AC,av=[...qm,"indexConfiguration","indexState","indexEntries"];class lv extends gC{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function ho(n,e){const t=St(n);return nu.M(t.ht,e)}function TI(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ih(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function xC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Wr{constructor(e,t){this.comparator=e,this.root=t||fo.EMPTY}insert(e,t){return new Wr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,fo.BLACK,null,null))}remove(e){return new Wr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,fo.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new uv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new uv(this.root,e,this.comparator,!1)}getReverseIterator(){return new uv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new uv(this.root,e,this.comparator,!0)}}class uv{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&i&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class fo{constructor(e,t,r,i,l){this.key=e,this.value=t,this.color=r??fo.RED,this.left=i??fo.EMPTY,this.right=l??fo.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,l){return new fo(e??this.key,t??this.value,r??this.color,i??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const l=r(e,i.key);return i=l<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===l?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return fo.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return fo.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,fo.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,fo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw jt();const e=this.left.check();if(e!==this.right.check())throw jt();return e+(this.isRed()?0:1)}}fo.EMPTY=null,fo.RED=!0,fo.BLACK=!1,fo.EMPTY=new class{constructor(){this.size=0}get key(){throw jt()}get value(){throw jt()}get color(){throw jt()}get left(){throw jt()}get right(){throw jt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new fo(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class br{constructor(e){this.comparator=e,this.data=new Wr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new MC(this.data.getIterator())}getIteratorFrom(e){return new MC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof br)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,l=r.getNext().key;if(0!==this.comparator(i,l))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new br(this.comparator);return t.data=e,t}}class MC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Sh(n){return n.hasNext()?n.getNext():void 0}class po{constructor(e){this.fields=e,e.sort(qi.comparator)}static empty(){return new po([])}unionWith(e){let t=new br(qi.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new po(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Zf(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class PC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Fs{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new PC("Invalid base64 string: "+i):i}}(e);return new Fs(t)}static fromUint8Array(e){const t=function(r){let i="";for(let l=0;l<r.length;++l)i+=String.fromCharCode(r[l]);return i}(e);return new Fs(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Fs.EMPTY_BYTE_STRING=new Fs("");const II=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _d(n){if(Xt(!!n),"string"==typeof n){let e=0;const t=II.exec(n);if(Xt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:zi(n.seconds),nanos:zi(n.nanos)}}function zi(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ac(n){return"string"==typeof n?Fs.fromBase64String(n):Fs.fromUint8Array(n)}function cg(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function zm(n){const e=n.mapValue.fields.__previous_value__;return cg(e)?zm(e):e}function zf(n){const e=_d(n.mapValue.fields.__local_write_time__.timestampValue);return new Ei(e.seconds,e.nanos)}class NC{constructor(e,t,r,i,l,c,f,_,C){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=_,this.useFetchStreams=C}}class Lu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Lu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Lu&&e.projectId===this.projectId&&e.database===this.database}}const Dh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Gf={nullValue:"NULL_VALUE"};function yd(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?cg(n)?4:Km(n)?9007199254740991:10:jt()}function xc(n,e){if(n===e)return!0;const t=yd(n);if(t!==yd(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return zf(n).isEqual(zf(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const l=_d(r.timestampValue),c=_d(i.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Ac(n.bytesValue).isEqual(Ac(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return zi(r.geoPointValue.latitude)===zi(i.geoPointValue.latitude)&&zi(r.geoPointValue.longitude)===zi(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return zi(r.integerValue)===zi(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const l=zi(r.doubleValue),c=zi(i.doubleValue);return l===c?ia(l)===ia(c):isNaN(l)&&isNaN(c)}return!1}(n,e);case 9:return Zf(n.arrayValue.values||[],e.arrayValue.values||[],xc);case 10:return function(r,i){const l=r.mapValue.fields||{},c=i.mapValue.fields||{};if(TI(l)!==TI(c))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(void 0===c[f]||!xc(l[f],c[f])))return!1;return!0}(n,e);default:return jt()}var i}function Uu(n,e){return void 0!==(n.values||[]).find(t=>xc(t,e))}function Mc(n,e){if(n===e)return 0;const t=yd(n),r=yd(e);if(t!==r)return Pn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Pn(n.booleanValue,e.booleanValue);case 2:return function(i,l){const c=zi(i.integerValue||i.doubleValue),f=zi(l.integerValue||l.doubleValue);return c<f?-1:c>f?1:c===f?0:isNaN(c)?isNaN(f)?0:-1:1}(n,e);case 3:return OC(n.timestampValue,e.timestampValue);case 4:return OC(zf(n),zf(e));case 5:return Pn(n.stringValue,e.stringValue);case 6:return function(i,l){const c=Ac(i),f=Ac(l);return c.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,l){const c=i.split("/"),f=l.split("/");for(let _=0;_<c.length&&_<f.length;_++){const C=Pn(c[_],f[_]);if(0!==C)return C}return Pn(c.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,l){const c=Pn(zi(i.latitude),zi(l.latitude));return 0!==c?c:Pn(zi(i.longitude),zi(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,l){const c=i.values||[],f=l.values||[];for(let _=0;_<c.length&&_<f.length;++_){const C=Mc(c[_],f[_]);if(C)return C}return Pn(c.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,l){if(i===Dh.mapValue&&l===Dh.mapValue)return 0;if(i===Dh.mapValue)return 1;if(l===Dh.mapValue)return-1;const c=i.fields||{},f=Object.keys(c),_=l.fields||{},C=Object.keys(_);f.sort(),C.sort();for(let R=0;R<f.length&&R<C.length;++R){const F=Pn(f[R],C[R]);if(0!==F)return F;const H=Mc(c[f[R]],_[C[R]]);if(0!==H)return H}return Pn(f.length,C.length)}(n.mapValue,e.mapValue);default:throw jt()}}function OC(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Pn(n,e);const t=_d(n),r=_d(e),i=Pn(t.seconds,r.seconds);return 0!==i?i:Pn(t.nanos,r.nanos)}function Ah(n){return cv(n)}function cv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=_d(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ac(n.bytesValue).toBase64():"referenceValue"in n?Mt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",l=!0;for(const c of r.values||[])l?l=!1:i+=",",i+=cv(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let l="{",c=!0;for(const f of i)c?c=!1:l+=",",l+=`${f}:${cv(r.fields[f])}`;return l+"}"}(n.mapValue):jt();var e}function Vu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function vd(n){return!!n&&"integerValue"in n}function xh(n){return!!n&&"arrayValue"in n}function Wf(n){return!!n&&"nullValue"in n}function Wm(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Mh(n){return!!n&&"mapValue"in n}function Kf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ih(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Kf(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Kf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Km(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function dv(n){return"nullValue"in n?Gf:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Vu(Lu.empty(),Mt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:jt()}function hv(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Vu(Lu.empty(),Mt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Dh:jt()}function fv(n,e){const t=Mc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Ym(n,e){const t=Mc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class go{constructor(e){this.value=e}static empty(){return new go({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Mh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Kf(t)}setAll(e){let t=qi.emptyPath(),r={},i=[];e.forEach((c,f)=>{if(!t.isImmediateParentOf(f)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=f.popLast()}c?r[f.lastSegment()]=Kf(c):i.push(f.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,r,i)}delete(e){const t=this.field(e.popLast());Mh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return xc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Mh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ih(t,(i,l)=>e[i]=l);for(const i of r)delete e[i]}clone(){return new go(Kf(this.value))}}function kC(n){const e=[];return Ih(n.fields,(t,r)=>{const i=new qi([t]);if(Mh(r)){const l=kC(r.mapValue).fields;if(0===l.length)e.push(i);else for(const c of l)e.push(i.child(c))}else e.push(i)}),new po(e)}class si{constructor(e,t,r,i,l,c,f){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=l,this.data=c,this.documentState=f}static newInvalidDocument(e){return new si(e,0,Kt.min(),Kt.min(),Kt.min(),go.empty(),0)}static newFoundDocument(e,t,r,i){return new si(e,1,t,Kt.min(),r,i,0)}static newNoDocument(e,t){return new si(e,2,t,Kt.min(),Kt.min(),go.empty(),0)}static newUnknownDocument(e,t){return new si(e,3,t,Kt.min(),Kt.min(),go.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Kt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=go.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=go.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Kt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof si&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new si(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class wd{constructor(e,t){this.position=e,this.inclusive=t}}function pv(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const l=e[i],c=n.position[i];if(r=l.field.isKeyField()?Mt.comparator(Mt.fromName(c.referenceValue),t.key):Mc(c,t.data.field(l.field)),"desc"===l.dir&&(r*=-1),0!==r)break}return r}function gv(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!xc(n.position[t],e.position[t]))return!1;return!0}class Yf{constructor(e,t="asc"){this.field=e,this.dir=t}}function SI(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Da{}class tr extends Da{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new DI(e,t,r):"array-contains"===t?new xI(e,r):"in"===t?new BC(e,r):"not-in"===t?new MI(e,r):"array-contains-any"===t?new Bu(e,r):new tr(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new yv(e,r):new AI(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Mc(t,this.value)):null!==t&&yd(this.value)===yd(t)&&this.matchesComparison(Mc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return jt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class xr extends Da{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new xr(e,t)}matches(e){return dg(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function dg(n){return"and"===n.op}function hg(n){return"or"===n.op}function Qm(n){return FC(n)&&dg(n)}function FC(n){for(const e of n.filters)if(e instanceof xr)return!1;return!0}function mv(n){if(n instanceof tr)return n.field.canonicalString()+n.op.toString()+Ah(n.value);if(Qm(n))return n.filters.map(e=>mv(e)).join(",");{const e=n.filters.map(t=>mv(t)).join(",");return`${n.op}(${e})`}}function LC(n,e){return n instanceof tr?(t=n,(r=e)instanceof tr&&t.op===r.op&&t.field.isEqual(r.field)&&xc(t.value,r.value)):n instanceof xr?function(t,r){return r instanceof xr&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,l,c)=>i&&LC(l,r.filters[c]),!0)}(n,e):void jt();var t,r}function _v(n,e){const t=n.filters.concat(e);return xr.create(t,n.op)}function UC(n){return n instanceof tr?`${(e=n).field.canonicalString()} ${e.op} ${Ah(e.value)}`:n instanceof xr?function(e){return e.op.toString()+" {"+e.getFilters().map(UC).join(" ,")+"}"}(n):"Filter";var e}class DI extends tr{constructor(e,t,r){super(e,t,r),this.key=Mt.fromName(r.referenceValue)}matches(e){const t=Mt.comparator(e.key,this.key);return this.matchesComparison(t)}}class yv extends tr{constructor(e,t){super(e,"in",t),this.keys=VC(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class AI extends tr{constructor(e,t){super(e,"not-in",t),this.keys=VC(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function VC(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Mt.fromName(r.referenceValue))}class xI extends tr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return xh(t)&&Uu(t.arrayValue,this.value)}}class BC extends tr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Uu(this.value.arrayValue,t)}}class MI extends tr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Uu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Uu(this.value.arrayValue,t)}}class Bu extends tr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!xh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Uu(this.value.arrayValue,r))}}class vv{constructor(e,t=null,r=[],i=[],l=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=l,this.startAt=c,this.endAt=f,this.dt=null}}function wv(n,e=null,t=[],r=[],i=null,l=null,c=null){return new vv(n,e,t,r,i,l,c)}function Ph(n){const e=St(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>mv(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),lg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ah(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ah(r)).join(",")),e.dt=t}return e.dt}function Qf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!SI(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!LC(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!gv(n.startAt,e.startAt)&&gv(n.endAt,e.endAt)}function Jm(n){return Mt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Xm(n,e){return n.filters.filter(t=>t instanceof tr&&t.field.isEqual(e))}function ZC(n,e,t){let r=Gf,i=!0;for(const l of Xm(n,e)){let c=Gf,f=!0;switch(l.op){case"<":case"<=":c=dv(l.value);break;case"==":case"in":case">=":c=l.value;break;case">":c=l.value,f=!1;break;case"!=":case"not-in":c=Gf}fv({value:r,inclusive:i},{value:c,inclusive:f})<0&&(r=c,i=f)}if(null!==t)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const c=t.position[l];fv({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function e_(n,e,t){let r=Dh,i=!0;for(const l of Xm(n,e)){let c=Dh,f=!0;switch(l.op){case">=":case">":c=hv(l.value),f=!1;break;case"==":case"in":case"<=":c=l.value;break;case"<":c=l.value,f=!1;break;case"!=":case"not-in":c=Dh}Ym({value:r,inclusive:i},{value:c,inclusive:f})>0&&(r=c,i=f)}if(null!==t)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const c=t.position[l];Ym({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class Pc{constructor(e,t=null,r=[],i=[],l=null,c="F",f=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=l,this.limitType=c,this.startAt=f,this.endAt=_,this.wt=null,this._t=null}}function jC(n,e,t,r,i,l,c,f){return new Pc(n,e,t,r,i,l,c,f)}function Rc(n){return new Pc(n)}function fg(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Jf(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Cv(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function pg(n){return null!==n.collectionGroup}function Xf(n){const e=St(n);if(null===e.wt){e.wt=[];const t=Cv(e),r=Jf(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new Yf(t)),e.wt.push(new Yf(qi.keyField(),"asc"));else{let i=!1;for(const l of e.explicitOrderBy)e.wt.push(l),l.field.isKeyField()&&(i=!0);if(!i){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Yf(qi.keyField(),l))}}}return e.wt}function ko(n){const e=St(n);if(!e._t)if("F"===e.limitType)e._t=wv(e.path,e.collectionGroup,Xf(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const l of Xf(e))t.push(new Yf(l.field,"desc"===l.dir?"asc":"desc"));const r=e.endAt?new wd(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new wd(e.startAt.position,e.startAt.inclusive):null;e._t=wv(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function t_(n,e){e.getFirstInequalityField(),Cv(n);const t=n.filters.concat([e]);return new Pc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function gg(n,e,t){return new Pc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ep(n,e){return Qf(ko(n),ko(e))&&n.limitType===e.limitType}function n_(n){return`${Ph(ko(n))}|lt:${n.limitType}`}function ru(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>UC(r)).join(", ")}]`),lg(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ah(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ah(r)).join(",")),`Target(${t})`}(ko(n))}; limitType=${n.limitType})`}function Cd(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Mt.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of Xf(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,l,c){const f=pv(i,l,c);return i.inclusive?f<=0:f<0}(t.startAt,Xf(t),r)||t.endAt&&!function(i,l,c){const f=pv(i,l,c);return i.inclusive?f>=0:f>0}(t.endAt,Xf(t),r)));var t,r}function mg(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function tp(n){return(e,t)=>{let r=!1;for(const i of Xf(n)){const l=PI(i,e,t);if(0!==l)return l;r=r||i.field.isKeyField()}return 0}}function PI(n,e,t){const r=n.field.isKeyField()?Mt.comparator(e.key,t.key):function(i,l,c){const f=l.data.field(i),_=c.data.field(i);return null!==f&&null!==_?Mc(f,_):jt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return jt()}}class Zu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,l]of r)if(this.equalsFn(i,e))return l}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<i.length;l++)if(this.equalsFn(i[l][0],e))return void(i[l]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ih(this.inner,(t,r)=>{for(const[i,l]of r)e(i,l)})}isEmpty(){return xC(this.inner)}size(){return this.innerSize}}const HC=new Wr(Mt.comparator);function Aa(){return HC}const $C=new Wr(Mt.comparator);function Nc(...n){let e=$C;for(const t of n)e=e.insert(t.key,t);return e}function qC(n){let e=$C;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Oc(){return _g()}function zC(){return _g()}function _g(){return new Zu(n=>n.toString(),(n,e)=>n.isEqual(e))}const RI=new Wr(Mt.comparator),NI=new br(Mt.comparator);function kn(...n){let e=NI;for(const t of n)e=e.add(t);return e}const OI=new br(Pn);function bv(){return OI}function Ev(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ia(e)?"-0":e}}function r_(n){return{integerValue:""+n}}function GC(n,e){return yC(e)?r_(e):Ev(n,e)}class np{constructor(){this._=void 0}}function kI(n,e,t){return n instanceof rp?function(r,i){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&cg(i)&&(i=zm(i)),i&&(l.fields.__previous_value__=i),{mapValue:l}}(t,e):n instanceof Rh?KC(n,e):n instanceof Nh?Tv(n,e):function(r,i){const l=WC(r,i),c=YC(l)+YC(r.gt);return vd(l)&&vd(r.gt)?r_(c):Ev(r.serializer,c)}(n,e)}function FI(n,e,t){return n instanceof Rh?KC(n,e):n instanceof Nh?Tv(n,e):t}function WC(n,e){return n instanceof Oh?vd(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class rp extends np{}class Rh extends np{constructor(e){super(),this.elements=e}}function KC(n,e){const t=LI(e);for(const r of n.elements)t.some(i=>xc(i,r))||t.push(r);return{arrayValue:{values:t}}}class Nh extends np{constructor(e){super(),this.elements=e}}function Tv(n,e){let t=LI(e);for(const r of n.elements)t=t.filter(i=>!xc(i,r));return{arrayValue:{values:t}}}class Oh extends np{constructor(e,t){super(),this.serializer=e,this.gt=t}}function YC(n){return zi(n.integerValue||n.doubleValue)}function LI(n){return xh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class ip{constructor(e,t){this.field=e,this.transform=t}}class i_{constructor(e,t){this.version=e,this.transformResults=t}}class Ti{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ti}static exists(e){return new Ti(void 0,e)}static updateTime(e){return new Ti(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function s_(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class sp{}function QC(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new iu(n.key,Ti.none()):new Fc(n.key,n.data,Ti.none());{const t=n.data,r=go.empty();let i=new br(qi.comparator);for(let l of e.fields)if(!i.has(l)){let c=t.field(l);null===c&&l.length>1&&(l=l.popLast(),c=t.field(l)),null===c?r.delete(l):r.set(l,c),i=i.add(l)}return new Ss(n.key,r,new po(i.toArray()),Ti.none())}}function ju(n,e,t){n instanceof Fc?function(r,i,l){const c=r.value.clone(),f=kh(r.fieldTransforms,i,l.transformResults);c.setAll(f),i.convertToFoundDocument(l.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Ss?function(r,i,l){if(!s_(r.precondition,i))return void i.convertToUnknownDocument(l.version);const c=kh(r.fieldTransforms,i,l.transformResults),f=i.data;f.setAll(o_(r)),f.setAll(c),i.convertToFoundDocument(l.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function kc(n,e,t,r){return n instanceof Fc?function(i,l,c,f){if(!s_(i.precondition,l))return c;const _=i.value.clone(),C=Fh(i.fieldTransforms,f,l);return _.setAll(C),l.convertToFoundDocument(l.version,_).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ss?function(i,l,c,f){if(!s_(i.precondition,l))return c;const _=Fh(i.fieldTransforms,f,l),C=l.data;return C.setAll(o_(i)),C.setAll(_),l.convertToFoundDocument(l.version,C).setHasLocalMutations(),null===c?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(R=>R.field))}(n,e,t,r):(c=t,s_(n.precondition,l=e)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c);var l,c}function Fo(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),l=WC(r.transform,i||null);null!=l&&(null===t&&(t=go.empty()),t.set(r.field,l))}return t||null}function bd(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Zf(t,r,(i,l)=>function A1(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Rh&&r instanceof Rh||t instanceof Nh&&r instanceof Nh?Zf(t.elements,r.elements,xc):t instanceof Oh&&r instanceof Oh?xc(t.gt,r.gt):t instanceof rp&&r instanceof rp);var t,r}(i,l))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Fc extends sp{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ss extends sp{constructor(e,t,r,i,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function o_(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function kh(n,e,t){const r=new Map;Xt(n.length===t.length);for(let i=0;i<t.length;i++){const l=n[i],c=l.transform,f=e.data.field(l.field);r.set(l.field,FI(c,f,t[i]))}return r}function Fh(n,e,t){const r=new Map;for(const i of n){const l=i.transform,c=t.data.field(i.field);r.set(i.field,kI(l,c,e))}return r}class iu extends sp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ed extends sp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Td{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const l=this.mutations[i];l.key.isEqual(e.key)&&ju(l,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=kc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=kc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=zC();return this.mutations.forEach(i=>{const l=e.get(i.key),c=l.overlayedDocument;let f=this.applyToLocalView(c,l.mutatedFields);f=t.has(i.key)?null:f;const _=QC(c,f);null!==_&&r.set(i.key,_),c.isValidDocument()||c.convertToNoDocument(Kt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),kn())}isEqual(e){return this.batchId===e.batchId&&Zf(this.mutations,e.mutations,(t,r)=>bd(t,r))&&Zf(this.baseMutations,e.baseMutations,(t,r)=>bd(t,r))}}class Id{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Xt(e.mutations.length===r.length);let i=RI;const l=e.mutations;for(let c=0;c<l.length;c++)i=i.insert(l[c].key,r[c].version);return new Id(e,t,r,i)}}class Sd{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ap{constructor(e,t){this.count=e,this.unchangedNames=t}}var us,or;function Iv(n){switch(n){default:return jt();case Pe.CANCELLED:case Pe.UNKNOWN:case Pe.DEADLINE_EXCEEDED:case Pe.RESOURCE_EXHAUSTED:case Pe.INTERNAL:case Pe.UNAVAILABLE:case Pe.UNAUTHENTICATED:return!1;case Pe.INVALID_ARGUMENT:case Pe.NOT_FOUND:case Pe.ALREADY_EXISTS:case Pe.PERMISSION_DENIED:case Pe.FAILED_PRECONDITION:case Pe.ABORTED:case Pe.OUT_OF_RANGE:case Pe.UNIMPLEMENTED:case Pe.DATA_LOSS:return!0}}function Sv(n){if(void 0===n)return ls("GRPC error has no .code"),Pe.UNKNOWN;switch(n){case us.OK:return Pe.OK;case us.CANCELLED:return Pe.CANCELLED;case us.UNKNOWN:return Pe.UNKNOWN;case us.DEADLINE_EXCEEDED:return Pe.DEADLINE_EXCEEDED;case us.RESOURCE_EXHAUSTED:return Pe.RESOURCE_EXHAUSTED;case us.INTERNAL:return Pe.INTERNAL;case us.UNAVAILABLE:return Pe.UNAVAILABLE;case us.UNAUTHENTICATED:return Pe.UNAUTHENTICATED;case us.INVALID_ARGUMENT:return Pe.INVALID_ARGUMENT;case us.NOT_FOUND:return Pe.NOT_FOUND;case us.ALREADY_EXISTS:return Pe.ALREADY_EXISTS;case us.PERMISSION_DENIED:return Pe.PERMISSION_DENIED;case us.FAILED_PRECONDITION:return Pe.FAILED_PRECONDITION;case us.ABORTED:return Pe.ABORTED;case us.OUT_OF_RANGE:return Pe.OUT_OF_RANGE;case us.UNIMPLEMENTED:return Pe.UNIMPLEMENTED;case us.DATA_LOSS:return Pe.DATA_LOSS;default:return jt()}}(or=us||(us={}))[or.OK=0]="OK",or[or.CANCELLED=1]="CANCELLED",or[or.UNKNOWN=2]="UNKNOWN",or[or.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",or[or.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",or[or.NOT_FOUND=5]="NOT_FOUND",or[or.ALREADY_EXISTS=6]="ALREADY_EXISTS",or[or.PERMISSION_DENIED=7]="PERMISSION_DENIED",or[or.UNAUTHENTICATED=16]="UNAUTHENTICATED",or[or.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",or[or.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",or[or.ABORTED=10]="ABORTED",or[or.OUT_OF_RANGE=11]="OUT_OF_RANGE",or[or.UNIMPLEMENTED=12]="UNIMPLEMENTED",or[or.INTERNAL=13]="INTERNAL",or[or.UNAVAILABLE=14]="UNAVAILABLE",or[or.DATA_LOSS=15]="DATA_LOSS";class a_{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return yg}static getOrCreateInstance(){return null===yg&&(yg=new a_),yg}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let yg=null;function Dv(){return new TextEncoder}const JC=new pd([4294967295,4294967295],0);function Av(n){const e=Dv().encode(n),t=new lC;return t.update(e),new Uint8Array(t.digest())}function XC(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new pd([t,r],0),new pd([i,l],0)]}class xv{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new lp(`Invalid padding: ${t}`);if(r<0)throw new lp(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new lp(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new lp(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=pd.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(pd.fromNumber(r)));return 1===i.compare(JC)&&(i=new pd([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=Av(e),[r,i]=XC(t);for(let l=0;l<this.hashCount;l++){const c=this.Et(r,i,l);if(!this.At(c))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new xv(l,i,t);return r.forEach(f=>c.insert(f)),c}insert(e){if(0===this.It)return;const t=Av(e),[r,i]=XC(t);for(let l=0;l<this.hashCount;l++){const c=this.Et(r,i,l);this.Rt(c)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class lp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class vg{constructor(e,t,r,i,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,up.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new vg(Kt.min(),i,new Wr(Pn),Aa(),kn())}}class up{constructor(e,t,r,i,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new up(r,t,kn(),kn(),kn())}}class cp{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class l_{constructor(e,t){this.targetId=e,this.Vt=t}}class eb{constructor(e,t,r=Fs.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class wg{constructor(){this.St=0,this.Dt=tb(),this.Ct=Fs.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=kn(),t=kn(),r=kn();return this.Dt.forEach((i,l)=>{switch(l){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:jt()}}),new up(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=tb()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class u_{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Aa(),this.zt=c_(),this.Wt=new Wr(Pn)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:jt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,l=this.se(r);if(l){const c=l.target;if(Jm(c))if(0===i){const f=new Mt(c.path);this.Yt(r,f,si.newNoDocument(f,Kt.min()))}else Xt(1===i);else{const f=this.ie(r);if(f!==i){const _=this.re(e,f);0!==_&&(this.ee(r),this.Wt=this.Wt.insert(r,2===_?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=a_.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(C,R,F){var H,J,ie,we,Fe,lt;const $t={localCacheCount:R,existenceFilterCount:F.count},Ut=F.unchangedNames;return Ut&&($t.bloomFilter={applied:0===C,hashCount:null!==(H=Ut?.hashCount)&&void 0!==H?H:0,bitmapLength:null!==(we=null===(ie=null===(J=Ut?.bits)||void 0===J?void 0:J.bitmap)||void 0===ie?void 0:ie.length)&&void 0!==we?we:0,padding:null!==(lt=null===(Fe=Ut?.bits)||void 0===Fe?void 0:Fe.padding)&&void 0!==lt?lt:0}),$t}(_,f,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:l="",padding:c=0},hashCount:f=0}=r;let _,C;try{_=Ac(l).toUint8Array()}catch(R){if(R instanceof PC)return Sa("Decoding the base64 bloom filter in existence filter failed ("+R.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw R}try{C=new xv(_,c,f)}catch(R){return Sa(R instanceof lp?"BloomFilter error: ":"Applying bloom filter failed: ",R),1}return 0===C.It?1:i!==t-this.oe(e.targetId,C)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(l=>{const c=this.Gt.ue(),f=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;t.vt(f)||(this.Yt(e,l,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((l,c)=>{const f=this.se(c);if(f){if(l.current&&Jm(f.target)){const _=new Mt(f.target.path);null!==this.jt.get(_)||this.ae(c,_)||this.Yt(c,_,si.newNoDocument(_,e))}l.Mt&&(t.set(c,l.Ot()),l.Ft())}});let r=kn();this.zt.forEach((l,c)=>{let f=!0;c.forEachWhile(_=>{const C=this.se(_);return!C||"TargetPurposeLimboResolution"===C.purpose||(f=!1,!1)}),f&&(r=r.add(l))}),this.jt.forEach((l,c)=>c.setReadTime(e));const i=new vg(e,t,this.Wt,this.jt,r);return this.jt=Aa(),this.zt=c_(),this.Wt=new Wr(Pn),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new wg,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new br(Pn),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||st("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new wg),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function c_(){return new Wr(Mt.comparator)}function tb(){return new Wr(Mt.comparator)}const d_={asc:"ASCENDING",desc:"DESCENDING"},h_={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Mv={and:"AND",or:"OR"};class nb{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Cg(n,e){return n.useProto3Json||lg(e)?e:{value:e}}function Lh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Pv(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Rv(n,e){return Lh(n,e.toTimestamp())}function Gi(n){return Xt(!!n),Kt.fromTimestamp(function(e){const t=_d(e);return new Ei(t.seconds,t.nanos)}(n))}function Nv(n,e){return(t=n,new ar(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Ov(n){const e=ar.fromString(n);return Xt(BI(e)),e}function dp(n,e){return Nv(n.databaseId,e.path)}function su(n,e){const t=Ov(e);if(t.get(1)!==n.databaseId.projectId)throw new Qe(Pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Qe(Pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Mt(ib(t))}function f_(n,e){return Nv(n.databaseId,e)}function rb(n){const e=Ov(n);return 4===e.length?ar.emptyPath():ib(e)}function bg(n){return new ar(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ib(n){return Xt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function p_(n,e,t){return{name:dp(n,e),fields:t.value.mapValue.fields}}function Eg(n,e,t){const r=su(n,e.name),i=Gi(e.updateTime),l=e.createTime?Gi(e.createTime):Kt.min(),c=new go({mapValue:{fields:e.fields}}),f=si.newFoundDocument(r,i,l,c);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function hp(n,e){let t;if(e instanceof Fc)t={update:p_(n,e.key,e.value)};else if(e instanceof iu)t={delete:dp(n,e.key)};else if(e instanceof Ss)t={update:p_(n,e.key,e.data),updateMask:Uv(e.fieldMask)};else{if(!(e instanceof Ed))return jt();t={verify:dp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,l){const c=l.transform;if(c instanceof rp)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Rh)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Nh)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Oh)return{fieldPath:l.field.canonicalString(),increment:c.gt};throw jt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:Rv(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:jt()),t;var i}function g_(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Ti.updateTime(Gi(i.updateTime)):void 0!==i.exists?Ti.exists(i.exists):Ti.none():Ti.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(l,c){let f=null;"setToServerValue"in c?(Xt("REQUEST_TIME"===c.setToServerValue),f=new rp):"appendMissingElements"in c?f=new Rh(c.appendMissingElements.values||[]):"removeAllFromArray"in c?f=new Nh(c.removeAllFromArray.values||[]):"increment"in c?f=new Oh(l,c.increment):jt();const _=qi.fromServerFormat(c.fieldPath);return new ip(_,f)}(n,i)):[];var i;if(e.update){const i=su(n,e.update.name),l=new go({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new po((e.updateMask.fieldPaths||[]).map(C=>qi.fromServerFormat(C)));return new Ss(i,l,c,t,r)}return new Fc(i,l,t,r)}if(e.delete){const i=su(n,e.delete);return new iu(i,t)}if(e.verify){const i=su(n,e.verify);return new Ed(i,t)}return jt()}function kv(n,e){return{documents:[f_(n,e.path)]}}function m_(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=f_(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=f_(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0!==_.length)return lb(xr.create(_,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const l=function(_){if(0!==_.length)return _.map(C=>{return{field:xa((R=C).field),direction:UI(R.dir)};var R})}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const c=Cg(n,e.limit);var f,_;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function Fv(n){let e=rb(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Xt(1===r);const R=t.from[0];R.allDescendants?i=R.collectionId:e=e.child(R.collectionId)}let l=[];t.where&&(l=function(R){const F=Lc(R);return F instanceof xr&&Qm(F)?F.getFilters():[F]}(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(R=>{return new Yf(Dd((F=R).field),function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(F.direction));var F}));let f=null;t.limit&&(f=function(R){let F;return F="object"==typeof R?R.value:R,lg(F)?null:F}(t.limit));let _=null;var R;t.startAt&&(_=new wd((R=t.startAt).values||[],!!R.before));let C=null;return t.endAt&&(C=function(R){return new wd(R.values||[],!R.before)}(t.endAt)),jC(e,i,c,l,f,"F",_,C)}function Lc(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Dd(e.unaryFilter.field);return tr.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Dd(e.unaryFilter.field);return tr.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Dd(e.unaryFilter.field);return tr.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Dd(e.unaryFilter.field);return tr.create(l,"!=",{nullValue:"NULL_VALUE"});default:return jt()}}(n):void 0!==n.fieldFilter?tr.create(Dd((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return jt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return xr.create(e.compositeFilter.filters.map(t=>Lc(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return jt()}}(e.compositeFilter.op))}(n):jt();var e}function UI(n){return d_[n]}function VI(n){return h_[n]}function Lv(n){return Mv[n]}function xa(n){return{fieldPath:n.canonicalString()}}function Dd(n){return qi.fromServerFormat(n.fieldPath)}function lb(n){return n instanceof tr?function(e){if("=="===e.op){if(Wm(e.value))return{unaryFilter:{field:xa(e.field),op:"IS_NAN"}};if(Wf(e.value))return{unaryFilter:{field:xa(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Wm(e.value))return{unaryFilter:{field:xa(e.field),op:"IS_NOT_NAN"}};if(Wf(e.value))return{unaryFilter:{field:xa(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xa(e.field),op:VI(e.op),value:e.value}}}(n):n instanceof xr?function(e){const t=e.getFilters().map(r=>lb(r));return 1===t.length?t[0]:{compositeFilter:{op:Lv(e.op),filters:t}}}(n):jt()}function Uv(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function BI(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Ad{constructor(e,t,r,i,l=Kt.min(),c=Kt.min(),f=Fs.EMPTY_BYTE_STRING,_=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=_}withSequenceNumber(e){return new Ad(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ad(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ad(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ad(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class ub{constructor(e){this.fe=e}}function Vv(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:y_(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:dp(i=n.fe,(l=e).key),fields:l.data.value.mapValue.fields,updateTime:Lh(i,l.version.toTimestamp()),createTime:Lh(i,l.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:hi(e.version)};else{if(!e.isUnknownDocument())return jt();r.unknownDocument={path:t.path.toArray(),version:hi(e.version)}}var i,l;return r}function y_(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function hi(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function xd(n){const e=new Ei(n.seconds,n.nanoseconds);return Kt.fromTimestamp(e)}function Uh(n,e){const t=(e.baseMutations||[]).map(l=>g_(n.fe,l));for(let l=0;l<e.mutations.length-1;++l)l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(e.mutations[l].updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l);const r=e.mutations.map(l=>g_(n.fe,l)),i=Ei.fromMillis(e.localWriteTimeMs);return new Td(e.batchId,i,t,r)}function Tg(n){const e=xd(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?xd(n.lastLimboFreeSnapshotVersion):Kt.min();let r;var i;return void 0!==n.query.documents?(Xt(1===(i=n.query).documents.length),r=ko(Rc(rb(i.documents[0])))):r=ko(Fv(n.query)),new Ad(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Fs.fromBase64String(n.resumeToken))}function Bv(n,e){const t=hi(e.snapshotVersion),r=hi(e.lastLimboFreeSnapshotVersion);let i;i=Jm(e.target)?kv(n.fe,e.target):m_(n.fe,e.target);const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ph(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Zv(n){const e=Fv({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?gg(e,e.limit,"L"):e}function v_(n,e){return new Sd(e.largestBatchId,g_(n.fe,e.overlayMutation))}function jv(n,e){const t=e.path.lastSegment();return[n,co(e.path.popLast()),t]}function Vh(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:hi(r.readTime),documentKey:co(r.documentKey.path),largestBatchId:r.largestBatchId}}class jI{getBundleMetadata(e,t){return cb(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:xd(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return cb(e).put({bundleId:(r=t).id,createTime:hi(Gi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Hv(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:Zv(i.bundledQuery),readTime:xd(i.readTime)};var i})}saveNamedQuery(e,t){return Hv(e).put({name:(r=t).name,readTime:hi(Gi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function cb(n){return ho(n,"bundles")}function Hv(n){return ho(n,"namedQueries")}class w_{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new w_(e,t.uid||"")}getOverlay(e,t){return fp(e).get(jv(this.userId,t)).next(r=>r?v_(this.serializer,r):null)}getOverlays(e,t){const r=Oc();return Te.forEach(t,i=>this.getOverlay(e,i).next(l=>{null!==l&&r.set(i,l)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((l,c)=>{const f=new Sd(t,c);i.push(this.we(e,f))}),Te.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(co(c.getCollectionPath())));const l=[];return i.forEach(c=>{const f=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);l.push(fp(e).J("collectionPathOverlayIndex",f))}),Te.waitFor(l)}getOverlaysForCollection(e,t,r){const i=Oc(),l=co(t),c=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return fp(e).j("collectionPathOverlayIndex",c).next(f=>{for(const _ of f){const C=v_(this.serializer,_);i.set(C.getKey(),C)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const l=Oc();let c;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return fp(e).X({index:"collectionGroupOverlayIndex",range:f},(_,C,R)=>{const F=v_(this.serializer,C);l.size()<i||F.largestBatchId===c?(l.set(F.getKey(),F),c=F.largestBatchId):R.done()}).next(()=>l)}we(e,t){return fp(e).put(function(r,i,l){const[c,f,_]=jv(i,l.mutation.key);return{userId:i,collectionPath:f,documentId:_,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:hp(r.fe,l.mutation)}}(this.serializer,this.userId,t))}}function fp(n){return ho(n,"documentOverlays")}class pp{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(zi(e.integerValue));else if("doubleValue"in e){const r=zi(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),ia(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Ac(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?Km(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):jt()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),Mt.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function $v(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function C_(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const l=$v(255&t[i]);if(r+=l,8!==l)break}return r}(n);return Math.ceil(e/8)}pp.Ve=new pp;class Hu{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=t.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=t.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const t=this.Fe(e),r=C_(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Le(e){const t=this.Fe(e),r=C_(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(i){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,i,!1),new Uint8Array(l.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class HI{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class db{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class Ma{constructor(){this.je=new Hu,this.ze=new HI(this.je),this.We=new db(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class mo{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new mo(this.indexId,this.documentKey,this.arrayValue,r)}}function Ws(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=qv(n.arrayValue,e.arrayValue),0!==t?t:(t=qv(n.directionalValue,e.directionalValue),0!==t?t:Mt.comparator(n.documentKey,e.documentKey)))}function qv(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class hb{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){Xt(e.collectionGroup===this.collectionId);const t=jm(e);if(void 0!==t&&!this.en(t))return!1;const r=gd(e);let i=new Set,l=0,c=0;for(;l<r.length&&this.en(r[l]);++l)i=i.add(r[l].fieldPath.canonicalString());if(l===r.length)return!0;if(void 0!==this.Ze){if(!i.has(this.Ze.field.canonicalString())){const f=r[l];if(!this.nn(this.Ze,f)||!this.sn(this.Ye[c++],f))return!1}++l}for(;l<r.length;++l)if(c>=this.Ye.length||!this.sn(this.Ye[c++],r[l]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function fb(n){var e,t;if(Xt(n instanceof tr||n instanceof xr),n instanceof tr){if(n instanceof BC){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(l=>tr.create(n.field,"==",l)))||[];return xr.create(i,"or")}return n}const r=n.filters.map(i=>fb(i));return xr.create(r,n.op)}function $I(n){if(0===n.getFilters().length)return[];const e=Bh(fb(n));return Xt(b_(e)),zv(e)||Gv(e)?[e]:e.getFilters()}function zv(n){return n instanceof tr}function Gv(n){return n instanceof xr&&Qm(n)}function b_(n){return zv(n)||Gv(n)||function(e){if(e instanceof xr&&hg(e)){for(const t of e.getFilters())if(!zv(t)&&!Gv(t))return!1;return!0}return!1}(n)}function Bh(n){if(Xt(n instanceof tr||n instanceof xr),n instanceof tr)return n;if(1===n.filters.length)return Bh(n.filters[0]);const e=n.filters.map(r=>Bh(r));let t=xr.create(e,n.op);return t=E_(t),b_(t)?t:(Xt(t instanceof xr),Xt(dg(t)),Xt(t.filters.length>1),t.filters.reduce((r,i)=>Wv(r,i)))}function Wv(n,e){let t;return Xt(n instanceof tr||n instanceof xr),Xt(e instanceof tr||e instanceof xr),t=n instanceof tr?e instanceof tr?xr.create([n,e],"and"):Kv(n,e):e instanceof tr?Kv(e,n):function(r,i){if(Xt(r.filters.length>0&&i.filters.length>0),dg(r)&&dg(i))return _v(r,i.getFilters());const l=hg(r)?r:i,c=hg(r)?i:r,f=l.filters.map(_=>Wv(_,c));return xr.create(f,"or")}(n,e),E_(t)}function Kv(n,e){if(dg(e))return _v(e,n.getFilters());{const t=e.filters.map(r=>Wv(n,r));return xr.create(t,"or")}}function E_(n){if(Xt(n instanceof tr||n instanceof xr),n instanceof tr)return n;const e=n.getFilters();if(1===e.length)return E_(e[0]);if(FC(n))return n;const t=e.map(i=>E_(i)),r=[];return t.forEach(i=>{i instanceof tr?r.push(i):i instanceof xr&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:xr.create(r,n.op)}class qI{constructor(){this.rn=new T_}addToCollectionParentIndex(e,t){return this.rn.add(t),Te.resolve()}getCollectionParents(e,t){return Te.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return Te.resolve()}deleteFieldIndex(e,t){return Te.resolve()}getDocumentsMatchingTarget(e,t){return Te.resolve(null)}getIndexType(e,t){return Te.resolve(0)}getFieldIndexes(e,t){return Te.resolve([])}getNextCollectionGroupToUpdate(e){return Te.resolve(null)}getMinOffset(e,t){return Te.resolve(tl.min())}getMinOffsetFromCollectionGroup(e,t){return Te.resolve(tl.min())}updateCollectionGroup(e,t,r){return Te.resolve()}updateIndexEntries(e,t){return Te.resolve()}}class T_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new br(ar.comparator),l=!i.has(r);return this.index[t]=i.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new br(ar.comparator)).toArray()}}const Ig=new Uint8Array(0);class I_{constructor(e,t){this.user=e,this.databaseId=t,this.on=new T_,this.un=new Zu(r=>Ph(r),(r,i)=>Qf(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const l={collectionId:r,parent:co(i)};return pb(e).put(l)}return Te.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[jf(t),""],!1,!0);return pb(e).j(i).next(l=>{for(const c of l){if(c.collectionId!==t)break;r.push(Fu(c.parent))}return r})}addFieldIndex(e,t){const r=Sg(e),i={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])};var c;delete i.indexId;const l=r.add(i);if(t.indexState){const c=Zh(e);return l.next(f=>{c.put(Vh(f,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return l.next()}deleteFieldIndex(e,t){const r=Sg(e),i=Zh(e),l=gp(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=gp(e);let i=!0;const l=new Map;return Te.forEach(this.cn(t),c=>this.an(e,c).next(f=>{i&&(i=!!f),l.set(c,f)})).next(()=>{if(i){let c=kn();const f=[];return Te.forEach(l,(_,C)=>{var R;st("IndexedDbIndexManager",`Using index ${R=_,`id=${R.indexId}|cg=${R.collectionGroup}|f=${R.fields.map(Ut=>`${Ut.fieldPath}:${Ut.kind}`).join(",")}`} to execute ${Ph(t)}`);const F=function(Ut,Qt){const An=jm(Qt);if(void 0===An)return null;for(const In of Xm(Ut,An.fieldPath))switch(In.op){case"array-contains-any":return In.value.arrayValue.values||[];case"array-contains":return[In.value]}return null}(C,_),H=function(Ut,Qt){const An=new Map;for(const In of gd(Qt))for(const dr of Xm(Ut,In.fieldPath))switch(dr.op){case"==":case"in":An.set(In.fieldPath.canonicalString(),dr.value);break;case"not-in":case"!=":return An.set(In.fieldPath.canonicalString(),dr.value),Array.from(An.values())}return null}(C,_),J=function(Ut,Qt){const An=[];let In=!0;for(const dr of gd(Qt)){const Ys=0===dr.kind?ZC(Ut,dr.fieldPath,Ut.startAt):e_(Ut,dr.fieldPath,Ut.startAt);An.push(Ys.value),In&&(In=Ys.inclusive)}return new wd(An,In)}(C,_),ie=function(Ut,Qt){const An=[];let In=!0;for(const dr of gd(Qt)){const Ys=0===dr.kind?e_(Ut,dr.fieldPath,Ut.endAt):ZC(Ut,dr.fieldPath,Ut.endAt);An.push(Ys.value),In&&(In=Ys.inclusive)}return new wd(An,In)}(C,_),we=this.hn(_,C,J),Fe=this.hn(_,C,ie),lt=this.ln(_,C,H),$t=this.fn(_.indexId,F,we,J.inclusive,Fe,ie.inclusive,lt);return Te.forEach($t,Ut=>r.H(Ut,t.limit).next(Qt=>{Qt.forEach(An=>{const In=Mt.fromSegments(An.documentKey);c.has(In)||(c=c.add(In),f.push(In))})}))}).next(()=>f)}return Te.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:$I(xr.create(e.filters,"and")).map(r=>wv(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,i,l,c,f){const _=(null!=t?t.length:1)*Math.max(r.length,l.length),C=_/(null!=t?t.length:1),R=[];for(let F=0;F<_;++F){const H=t?this.dn(t[F/C]):Ig,J=this.wn(e,H,r[F%C],i),ie=this._n(e,H,l[F%C],c),we=f.map(Fe=>this.wn(e,H,Fe,!0));R.push(...this.createRange(J,ie,we))}return R}wn(e,t,r,i){const l=new mo(e,Mt.empty(),t,r);return i?l:l.Je()}_n(e,t,r,i){const l=new mo(e,Mt.empty(),t,r);return i?l.Je():l}an(e,t){const r=new hb(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(l=>{let c=null;for(const f of l)r.tn(f)&&(!c||f.fields.length>c.fields.length)&&(c=f);return c})}getIndexType(e,t){let r=2;const i=this.cn(t);return Te.forEach(i,l=>this.an(e,l).next(c=>{c?0!==r&&c.fields.length<function(f){let _=new br(qi.comparator),C=!1;for(const R of f.filters)for(const F of R.getFlattenedFilters())F.field.isKeyField()||("array-contains"===F.op||"array-contains-any"===F.op?C=!0:_=_.add(F.field));for(const R of f.orderBy)R.field.isKeyField()||(_=_.add(R.field));return _.size+(C?1:0)}(l)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}mn(e,t){const r=new Ma;for(const i of gd(e)){const l=t.data.field(i.fieldPath);if(null==l)return null;const c=r.He(i.kind);pp.Ve._e(l,c)}return r.Qe()}dn(e){const t=new Ma;return pp.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new Ma;return pp.Ve._e(Vu(this.databaseId,t),r.He(function(i){const l=gd(i);return 0===l.length?0:l[l.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let i=[];i.push(new Ma);let l=0;for(const c of gd(e)){const f=r[l++];for(const _ of i)if(this.yn(t,c.fieldPath)&&xh(f))i=this.pn(i,c,f);else{const C=_.He(c.kind);pp.Ve._e(f,C)}}return this.In(i)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const i=[...e],l=[];for(const c of r.arrayValue.values||[])for(const f of i){const _=new Ma;_.seed(f.Qe()),pp.Ve._e(c,_.He(t.kind)),l.push(_)}return l}yn(e,t){return!!e.filters.find(r=>r instanceof tr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Sg(e),i=Zh(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(l=>{const c=[];return Te.forEach(l,f=>i.get([f.indexId,this.uid]).next(_=>{c.push(function(C,R){const F=R?new bh(R.sequenceNumber,new tl(xd(R.readTime),new Mt(Fu(R.documentKey)),R.largestBatchId)):bh.empty(),H=C.fields.map(([J,ie])=>new Hf(qi.fromServerFormat(J),ie));return new Zm(C.indexId,C.collectionGroup,H,F)}(f,_))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const l=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==l?l:Pn(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Sg(e),l=Zh(e);return this.Tn(e).next(c=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>Te.forEach(f,_=>l.put(Vh(_.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return Te.forEach(t,(i,l)=>{const c=r.get(i.collectionGroup);return(c?Te.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),Te.forEach(f,_=>this.En(e,i,_).next(C=>{const R=this.An(l,_);return C.isEqual(R)?Te.resolve():this.vn(e,l,_,C,R)}))))})}Rn(e,t,r,i){return gp(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,i){return gp(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const i=gp(e);let l=new br(Ws);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(c,f)=>{l=l.add(new mo(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>l)}An(e,t){let r=new br(Ws);const i=this.mn(t,e);if(null==i)return r;const l=jm(t);if(null!=l){const c=e.data.field(l.fieldPath);if(xh(c))for(const f of c.arrayValue.values||[])r=r.add(new mo(t.indexId,e.key,this.dn(f),i))}else r=r.add(new mo(t.indexId,e.key,Ig,i));return r}vn(e,t,r,i,l){st("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(f,_,C,R,F){const H=f.getIterator(),J=_.getIterator();let ie=Sh(H),we=Sh(J);for(;ie||we;){let Fe=!1,lt=!1;if(ie&&we){const $t=C(ie,we);$t<0?lt=!0:$t>0&&(Fe=!0)}else null!=ie?lt=!0:Fe=!0;Fe?(R(we),we=Sh(J)):lt?(F(ie),ie=Sh(H)):(ie=Sh(H),we=Sh(J))}}(i,l,Ws,f=>{c.push(this.Rn(e,t,r,f))},f=>{c.push(this.Pn(e,t,r,f))}),Te.waitFor(c)}Tn(e){let t=1;return Zh(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,l)=>{l.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,f)=>Ws(c,f)).filter((c,f,_)=>!f||0!==Ws(c,_[f-1]));const i=[];i.push(e);for(const c of r){const f=Ws(c,e),_=Ws(c,t);if(0===f)i[0]=e.Je();else if(f>0&&_<0)i.push(c),i.push(c.Je());else if(_>0)break}i.push(t);const l=[];for(let c=0;c<i.length;c+=2){if(this.bn(i[c],i[c+1]))return[];l.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,Ig,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,Ig,[]]))}return l}bn(e,t){return Ws(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Dg)}getMinOffset(e,t){return Te.mapArray(this.cn(t),r=>this.an(e,r).next(i=>i||jt())).next(Dg)}}function pb(n){return ho(n,"collectionParents")}function gp(n){return ho(n,"indexEntries")}function Sg(n){return ho(n,"indexConfiguration")}function Zh(n){return ho(n,"indexState")}function Dg(n){Xt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;rv(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new tl(e.readTime,e.documentKey,t)}const S_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class _o{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new _o(e,_o.DEFAULT_COLLECTION_PERCENTILE,_o.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Yv(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),l=[],c=IDBKeyRange.only(t.batchId);let f=0;const _=r.X({range:c},(R,F,H)=>(f++,H.delete()));l.push(_.next(()=>{Xt(1===f)}));const C=[];for(const R of t.mutations){const F=CC(e,R.key.path,t.batchId);l.push(i.delete(F)),C.push(R.key)}return Te.waitFor(l).next(()=>C)}function Ag(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw jt();e=n.noDocument}return JSON.stringify(e).length}_o.DEFAULT_COLLECTION_PERCENTILE=10,_o.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_o.DEFAULT=new _o(41943040,_o.DEFAULT_COLLECTION_PERCENTILE,_o.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_o.DISABLED=new _o(-1,0,0);class xg{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,t,r,i){Xt(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new xg(l,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Uc(e).X({index:"userMutationsIndex",range:r},(i,l,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const l=jh(e),c=Uc(e);return c.add({}).next(f=>{Xt("number"==typeof f);const _=new Td(f,t,r,i),C=function(H,J,ie){const we=ie.baseMutations.map(lt=>hp(H.fe,lt)),Fe=ie.mutations.map(lt=>hp(H.fe,lt));return{userId:J,batchId:ie.batchId,localWriteTimeMs:ie.localWriteTime.toMillis(),baseMutations:we,mutations:Fe}}(this.serializer,this.userId,_),R=[];let F=new br((H,J)=>Pn(H.canonicalString(),J.canonicalString()));for(const H of i){const J=CC(this.userId,H.key.path,f);F=F.add(H.key.path.popLast()),R.push(c.put(C)),R.push(l.put(J,_I))}return F.forEach(H=>{R.push(this.indexManager.addToCollectionParentIndex(e,H))}),e.addOnCommittedListener(()=>{this.Vn[f]=_.keys()}),Te.waitFor(R).next(()=>_)})}lookupMutationBatch(e,t){return Uc(e).get(t).next(r=>r?(Xt(r.userId===this.userId),Uh(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?Te.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return Uc(e).X({index:"userMutationsIndex",range:i},(c,f,_)=>{f.userId===this.userId&&(Xt(f.batchId>=r),l=Uh(this.serializer,f)),_.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Uc(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,l,c)=>{r=l.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Uc(e).j("userMutationsIndex",t).next(r=>r.map(i=>Uh(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=ug(this.userId,t.path),i=IDBKeyRange.lowerBound(r),l=[];return jh(e).X({range:i},(c,f,_)=>{const[C,R,F]=c,H=Fu(R);if(C===this.userId&&t.path.isEqual(H))return Uc(e).get(F).next(J=>{if(!J)throw jt();Xt(J.userId===this.userId),l.push(Uh(this.serializer,J))});_.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new br(Pn);const i=[];return t.forEach(l=>{const c=ug(this.userId,l.path),f=IDBKeyRange.lowerBound(c),_=jh(e).X({range:f},(C,R,F)=>{const[H,J,ie]=C,we=Fu(J);H===this.userId&&l.path.isEqual(we)?r=r.add(ie):F.done()});i.push(_)}),Te.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,l=ug(this.userId,r),c=IDBKeyRange.lowerBound(l);let f=new br(Pn);return jh(e).X({range:c},(_,C,R)=>{const[F,H,J]=_,ie=Fu(H);F===this.userId&&r.isPrefixOf(ie)?ie.length===i&&(f=f.add(J)):R.done()}).next(()=>this.Dn(e,f))}Dn(e,t){const r=[],i=[];return t.forEach(l=>{i.push(Uc(e).get(l).next(c=>{if(null===c)throw jt();Xt(c.userId===this.userId),r.push(Uh(this.serializer,c))}))}),Te.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Yv(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),Te.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Te.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return jh(e).X({range:r},(l,c,f)=>{if(l[0]===this.userId){const _=Fu(l[1]);i.push(_)}else f.done()}).next(()=>{Xt(0===i.length)})})}containsKey(e,t){return Qv(e,this.userId,t)}xn(e){return gb(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Qv(n,e,t){const r=ug(e,t.path),i=r[1],l=IDBKeyRange.lowerBound(r);let c=!1;return jh(n).X({range:l,Y:!0},(f,_,C)=>{const[R,F,H]=f;R===e&&F===i&&(c=!0),C.done()}).next(()=>c)}function Uc(n){return ho(n,"mutations")}function jh(n){return ho(n,"documentMutations")}function gb(n){return ho(n,"mutationQueues")}class Hh{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Hh(0)}static Mn(){return new Hh(-1)}}class zI{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new Hh(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>Kt.fromTimestamp(new Ei(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>mp(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(Xt(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const l=[];return mp(e).X((c,f)=>{const _=Tg(f);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,l.push(this.removeTargetData(e,_)))}).next(()=>Te.waitFor(l)).next(()=>i)}forEachTarget(e,t){return mp(e).X((r,i)=>{const l=Tg(i);t(l)})}$n(e){return mb(e).get("targetGlobalKey").next(t=>(Xt(null!==t),t))}On(e,t){return mb(e).put("targetGlobalKey",t)}Fn(e,t){return mp(e).put(Bv(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Ph(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return mp(e).X({range:i,index:"queryTargetsIndex"},(c,f,_)=>{const C=Tg(f);Qf(t,C.target)&&(l=C,_.done())}).next(()=>l)}addMatchingKeys(e,t,r){const i=[],l=Md(e);return t.forEach(c=>{const f=co(c.path);i.push(l.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,c))}),Te.waitFor(i)}removeMatchingKeys(e,t,r){const i=Md(e);return Te.forEach(t,l=>{const c=co(l.path);return Te.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,l)])})}removeMatchingKeysForTargetId(e,t){const r=Md(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Md(e);let l=kn();return i.X({range:r,Y:!0},(c,f,_)=>{const C=Fu(c[1]),R=new Mt(C);l=l.add(R)}).next(()=>l)}containsKey(e,t){const r=co(t.path),i=IDBKeyRange.bound([r],[jf(r)],!1,!0);let l=0;return Md(e).X({index:"documentTargetsIndex",Y:!0,range:i},([c,f],_,C)=>{0!==c&&(l++,C.done())}).next(()=>l>0)}le(e,t){return mp(e).get(t).next(r=>r?Tg(r):null)}}function mp(n){return ho(n,"targets")}function mb(n){return ho(n,"targetGlobal")}function Md(n){return ho(n,"targetDocuments")}function _b([n,e],[t,r]){const i=Pn(n,t);return 0===i?Pn(e,r):i}class GI{constructor(e){this.Ln=e,this.buffer=new br(_b),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();_b(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class yb{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;st("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ke.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Eh(r)?st("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield md(r)}yield t.Qn(3e5)}))}}class WI{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return Te.resolve(nl.ct);const r=new GI(t);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(st("LruGarbageCollector","Garbage collection skipped; disabled"),Te.resolve(S_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(st("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),S_):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,i,l,c,f,_,C;const R=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(F=>(F>this.params.maximumSequenceNumbersToCollect?(st("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${F}`),i=this.params.maximumSequenceNumbersToCollect):i=F,c=Date.now(),this.nthSequenceNumber(e,i))).next(F=>(r=F,f=Date.now(),this.removeTargets(e,r,t))).next(F=>(l=F,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(F=>(C=Date.now(),Um()<=ii.in.DEBUG&&st("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-R}ms\n\tDetermined least recently used ${i} in `+(f-c)+`ms\n\tRemoved ${l} targets in `+(_-f)+`ms\n\tRemoved ${F} documents in `+(C-_)+`ms\nTotal Duration: ${C-R}ms`),Te.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:l,documentsRemoved:F})))}}class KI{constructor(e,t){this.db=e,this.garbageCollector=function vb(n,e){return new WI(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,i)=>t(i))}addReference(e,t,r){return D_(e,r)}removeReference(e,t,r){return D_(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return D_(e,t)}Xn(e,t){return function(r,i){let l=!1;return gb(r).Z(c=>Qv(r,c,i).next(f=>(f&&(l=!0),Te.resolve(!f)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let l=0;return this.Yn(e,(c,f)=>{if(f<=t){const _=this.Xn(e,c).next(C=>{if(!C)return l++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Kt.min()),Md(e).delete([0,co(c.path)])))});i.push(_)}}).next(()=>Te.waitFor(i)).next(()=>r.apply(e)).next(()=>l)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return D_(e,t)}Yn(e,t){const r=Md(e);let i,l=nl.ct;return r.X({index:"documentTargetsIndex"},([c,f],{path:_,sequenceNumber:C})=>{0===c?(l!==nl.ct&&t(new Mt(Fu(i)),l),l=C,i=_):l=nl.ct}).next(()=>{l!==nl.ct&&t(new Mt(Fu(i)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function D_(n,e){return Md(n).put((r=n.currentSequenceNumber,{targetId:0,path:co(e.path),sequenceNumber:r}));var r}class wb{constructor(){this.changes=new Zu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,si.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?Te.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class YI{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Pd(e).put(r)}removeEntry(e,t,r){return Pd(e).delete(function(i,l){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],y_(l),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=si.newInvalidDocument(t);return Pd(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(_p(t))},(i,l)=>{r=this.ts(t,l)}).next(()=>r)}es(e,t){let r={size:0,document:si.newInvalidDocument(t)};return Pd(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(_p(t))},(i,l)=>{r={document:this.ts(t,l),size:Ag(l)}}).next(()=>r)}getEntries(e,t){let r=Aa();return this.ns(e,t,(i,l)=>{const c=this.ts(i,l);r=r.insert(i,c)}).next(()=>r)}ss(e,t){let r=Aa(),i=new Wr(Mt.comparator);return this.ns(e,t,(l,c)=>{const f=this.ts(l,c);r=r.insert(l,f),i=i.insert(l,Ag(c))}).next(()=>({documents:r,rs:i}))}ns(e,t,r){if(t.isEmpty())return Te.resolve();let i=new br(Xv);t.forEach(_=>i=i.add(_));const l=IDBKeyRange.bound(_p(i.first()),_p(i.last())),c=i.getIterator();let f=c.getNext();return Pd(e).X({index:"documentKeyIndex",range:l},(_,C,R)=>{const F=Mt.fromSegments([...C.prefixPath,C.collectionGroup,C.documentId]);for(;f&&Xv(f,F)<0;)r(f,null),f=c.getNext();f&&f.isEqual(F)&&(r(f,C),f=c.hasNext()?c.getNext():null),f?R.G(_p(f)):R.done()}).next(()=>{for(;f;)r(f,null),f=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const l=t.path,c=[l.popLast().toArray(),l.lastSegment(),y_(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],f=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Pd(e).j(IDBKeyRange.bound(c,f,!0)).next(_=>{let C=Aa();for(const R of _){const F=this.ts(Mt.fromSegments(R.prefixPath.concat(R.collectionGroup,R.documentId)),R);F.isFoundDocument()&&(Cd(t,F)||i.has(F.key))&&(C=C.insert(F.key,F))}return C})}getAllFromCollectionGroup(e,t,r,i){let l=Aa();const c=Jv(t,r),f=Jv(t,tl.max());return Pd(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,f,!0)},(_,C,R)=>{const F=this.ts(Mt.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);l=l.insert(F.key,F),l.size===i&&R.done()}).next(()=>l)}newChangeBuffer(e){return new QI(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return bb(e).get("remoteDocumentGlobalKey").next(t=>(Xt(!!t),t))}Zn(e,t){return bb(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function ZI(n,e){let t;if(e.document)t=Eg(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Mt.fromSegments(e.noDocument.path),i=xd(e.noDocument.readTime);t=si.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return jt();{const r=Mt.fromSegments(e.unknownDocument.path),i=xd(e.unknownDocument.version);t=si.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Ei(r[0],r[1]);return Kt.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Kt.min()))return r}return si.newInvalidDocument(e)}}function Cb(n){return new YI(n)}class QI extends wb{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Zu(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new br((l,c)=>Pn(l.canonicalString(),c.canonicalString()));return this.changes.forEach((l,c)=>{const f=this.us.get(l);if(t.push(this.os.removeEntry(e,l,f.readTime)),c.isValidDocument()){const _=Vv(this.os.serializer,c);i=i.add(l.path.popLast());const C=Ag(_);r+=C-f.size,t.push(this.os.addEntry(e,l,_))}else if(r-=f.size,this.trackRemovals){const _=Vv(this.os.serializer,c.convertToNoDocument(Kt.min()));t.push(this.os.addEntry(e,l,_))}}),i.forEach(l=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,l))}),t.push(this.os.updateMetadata(e,r)),Te.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:i})=>(i.forEach((l,c)=>{this.us.set(l,{size:c,readTime:r.get(l).readTime})}),r))}}function bb(n){return ho(n,"remoteDocumentGlobal")}function Pd(n){return ho(n,"remoteDocumentsV14")}function _p(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Jv(n,e){const t=e.documentKey.path.toArray();return[n,y_(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Xv(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let l=0;l<t.length-2&&l<r.length-2;++l)if(i=Pn(t[l],r[l]),i)return i;return i=Pn(t.length,r.length),i||(i=Pn(t[t.length-2],r[r.length-2]),i||Pn(t[t.length-1],r[r.length-1]))}class Eb{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class e0{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&kc(r.mutation,i,po.empty(),Ei.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,kn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=kn()){const i=Oc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(l=>{let c=Nc();return l.forEach((f,_)=>{c=c.insert(f,_.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=Oc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,kn()))}populateOverlays(e,t,r){const i=[];return r.forEach(l=>{t.has(l)||i.push(l)}),this.documentOverlayCache.getOverlays(e,i).next(l=>{l.forEach((c,f)=>{t.set(c,f)})})}computeViews(e,t,r,i){let l=Aa();const c=_g(),f=_g();return t.forEach((_,C)=>{const R=r.get(C.key);i.has(C.key)&&(void 0===R||R.mutation instanceof Ss)?l=l.insert(C.key,C):void 0!==R?(c.set(C.key,R.mutation.getFieldMask()),kc(R.mutation,C,R.mutation.getFieldMask(),Ei.now())):c.set(C.key,po.empty())}),this.recalculateAndSaveOverlays(e,l).next(_=>(_.forEach((C,R)=>c.set(C,R)),t.forEach((C,R)=>{var F;return f.set(C,new Eb(R,null!==(F=c.get(C))&&void 0!==F?F:null))}),f))}recalculateAndSaveOverlays(e,t){const r=_g();let i=new Wr((c,f)=>c-f),l=kn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const f of c)f.keys().forEach(_=>{const C=t.get(_);if(null===C)return;let R=r.get(_)||po.empty();R=f.applyToLocalView(C,R),r.set(_,R);const F=(i.get(f.batchId)||kn()).add(_);i=i.insert(f.batchId,F)})}).next(()=>{const c=[],f=i.getReverseIterator();for(;f.hasNext();){const _=f.getNext(),C=_.key,R=_.value,F=zC();R.forEach(H=>{if(!l.has(H)){const J=QC(t.get(H),r.get(H));null!==J&&F.set(H,J),l=l.add(H)}}),c.push(this.documentOverlayCache.saveOverlays(e,C,F))}return Te.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Mt.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):pg(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(l=>{const c=i-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-l.size):Te.resolve(Oc());let f=-1,_=l;return c.next(C=>Te.forEach(C,(R,F)=>(f<F.largestBatchId&&(f=F.largestBatchId),l.get(R)?Te.resolve():this.remoteDocumentCache.getEntry(e,R).next(H=>{_=_.insert(R,H)}))).next(()=>this.populateOverlays(e,C,l)).next(()=>this.computeViews(e,_,C,kn())).next(R=>({batchId:f,changes:qC(R)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Mt(t)).next(r=>{let i=Nc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let l=Nc();return this.indexManager.getCollectionParents(e,i).next(c=>Te.forEach(c,f=>{const _=(C=t,R=f.child(i),new Pc(R,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,R;return this.getDocumentsMatchingCollectionQuery(e,_,r).next(C=>{C.forEach((R,F)=>{l=l.insert(R,F)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(l=>(i=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(l=>{i.forEach((f,_)=>{const C=_.getKey();null===l.get(C)&&(l=l.insert(C,si.newInvalidDocument(C)))});let c=Nc();return l.forEach((f,_)=>{const C=i.get(f);void 0!==C&&kc(C.mutation,_,po.empty(),Ei.now()),Cd(t,_)&&(c=c.insert(f,_))}),c})}}class Tb{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return Te.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:Gi(r.createTime)}),Te.resolve()}getNamedQuery(e,t){return Te.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:Zv(r.bundledQuery),readTime:Gi(r.readTime)}),Te.resolve();var r}}class Ib{constructor(){this.overlays=new Wr(Mt.comparator),this.ls=new Map}getOverlay(e,t){return Te.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Oc();return Te.forEach(t,i=>this.getOverlay(e,i).next(l=>{null!==l&&r.set(i,l)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,l)=>{this.we(e,t,l)}),Te.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(l=>this.overlays=this.overlays.remove(l)),this.ls.delete(r)),Te.resolve()}getOverlaysForCollection(e,t,r){const i=Oc(),l=t.length+1,c=new Mt(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const _=f.getNext().value,C=_.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===l&&_.largestBatchId>r&&i.set(_.getKey(),_)}return Te.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let l=new Wr((C,R)=>C-R);const c=this.overlays.getIterator();for(;c.hasNext();){const C=c.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>r){let R=l.get(C.largestBatchId);null===R&&(R=Oc(),l=l.insert(C.largestBatchId,R)),R.set(C.getKey(),C)}}const f=Oc(),_=l.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((C,R)=>f.set(C,R)),!(f.size()>=i)););return Te.resolve(f)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const c=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Sd(t,r));let l=this.ls.get(t);void 0===l&&(l=kn(),this.ls.set(t,l)),this.ls.set(t,l.add(r.key))}}class A_{constructor(){this.fs=new br(Ls.ds),this.ws=new br(Ls._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new Ls(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new Ls(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new Mt(new ar([])),r=new Ls(t,e),i=new Ls(t,e+1),l=[];return this.ws.forEachInRange([r,i],c=>{this.ys(c),l.push(c.key)}),l}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Mt(new ar([])),r=new Ls(t,e),i=new Ls(t,e+1);let l=kn();return this.ws.forEachInRange([r,i],c=>{l=l.add(c.key)}),l}containsKey(e){const t=new Ls(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ls{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Mt.comparator(e.key,t.key)||Pn(e.As,t.As)}static _s(e,t){return Pn(e.As,t.As)||Mt.comparator(e.key,t.key)}}class t0{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new br(Ls.ds)}checkEmpty(e){return Te.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const l=this.vs;this.vs++;const c=new Td(l,t,r,i);this.mutationQueue.push(c);for(const f of i)this.Rs=this.Rs.add(new Ls(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return Te.resolve(c)}lookupMutationBatch(e,t){return Te.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),l=i<0?0:i;return Te.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return Te.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return Te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ls(t,0),i=new Ls(t,Number.POSITIVE_INFINITY),l=[];return this.Rs.forEachInRange([r,i],c=>{const f=this.Ps(c.As);l.push(f)}),Te.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new br(Pn);return t.forEach(i=>{const l=new Ls(i,0),c=new Ls(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([l,c],f=>{r=r.add(f.As)})}),Te.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let l=r;Mt.isDocumentKey(l)||(l=l.child(""));const c=new Ls(new Mt(l),0);let f=new br(Pn);return this.Rs.forEachWhile(_=>{const C=_.key.path;return!!r.isPrefixOf(C)&&(C.length===i&&(f=f.add(_.As)),!0)},c),Te.resolve(this.Vs(f))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Xt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return Te.forEach(t.mutations,i=>{const l=new Ls(i.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new Ls(t,0),i=this.Rs.firstAfterOrEqual(r);return Te.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return Te.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class $h{constructor(e){this.Ds=e,this.docs=new Wr(Mt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),l=i?i.size:0,c=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Te.resolve(r?r.document.mutableCopy():si.newInvalidDocument(t))}getEntries(e,t){let r=Aa();return t.forEach(i=>{const l=this.docs.get(i);r=r.insert(i,l?l.document.mutableCopy():si.newInvalidDocument(i))}),Te.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let l=Aa();const c=t.path,f=new Mt(c.child("")),_=this.docs.getIteratorFrom(f);for(;_.hasNext();){const{key:C,value:{document:R}}=_.getNext();if(!c.isPrefixOf(C.path))break;C.path.length>c.length+1||rv(fC(R),r)<=0||(i.has(R.key)||Cd(t,R))&&(l=l.insert(R.key,R.mutableCopy()))}return Te.resolve(l)}getAllFromCollectionGroup(e,t,r,i){jt()}Cs(e,t){return Te.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new JI(this)}getSize(e){return Te.resolve(this.size)}}class JI extends wb{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),Te.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class XI{constructor(e){this.persistence=e,this.xs=new Zu(t=>Ph(t),Qf),this.lastRemoteSnapshotVersion=Kt.min(),this.highestTargetId=0,this.Ns=0,this.ks=new A_,this.targetCount=0,this.Ms=Hh.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),Te.resolve()}getLastRemoteSnapshotVersion(e){return Te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Te.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),Te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),Te.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Hh(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,Te.resolve()}updateTargetData(e,t){return this.Fn(t),Te.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,Te.resolve()}removeTargets(e,t,r){let i=0;const l=[];return this.xs.forEach((c,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.xs.delete(c),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),Te.waitFor(l).next(()=>i)}getTargetCount(e){return Te.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return Te.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),Te.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,l=[];return i&&t.forEach(c=>{l.push(i.markPotentiallyOrphaned(e,c))}),Te.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),Te.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return Te.resolve(r)}containsKey(e,t){return Te.resolve(this.ks.containsKey(t))}}class Rd{constructor(e,t){this.$s={},this.overlays={},this.Os=new nl(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new XI(this),this.indexManager=new qI,this.remoteDocumentCache=new $h(r=>this.referenceDelegate.Ls(r)),this.serializer=new ub(t),this.qs=new Tb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Ib,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new t0(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){st("MemoryPersistence","Starting transaction:",e);const i=new x1(this.Os.next());return this.referenceDelegate.Us(),r(i).next(l=>this.referenceDelegate.Ks(i).next(()=>l)).toPromise().then(l=>(i.raiseOnCommittedEvent(),l))}Gs(e,t){return Te.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class x1 extends gC{constructor(e){super(),this.currentSequenceNumber=e}}class yp{constructor(e){this.persistence=e,this.Qs=new A_,this.js=null}static zs(e){return new yp(e)}get Ws(){if(this.js)return this.js;throw jt()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),Te.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),Te.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),Te.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(l=>this.Ws.add(l.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Te.forEach(this.Ws,r=>{const i=Mt.fromPath(r);return this.Hs(e,i).next(l=>{l||t.removeEntry(i,Kt.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return Te.or([()=>Te.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class Sb{constructor(e){this.serializer=e}O(e,t,r,i){const l=new Nl("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",wC,{unique:!0}),f.createObjectStore("documentMutations"),r0(e),function(f){f.createObjectStore("remoteDocuments")}(e));let c=Te.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),r0(e)),c=c.next(()=>function(f){const _=f.store("targetGlobal"),C={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Kt.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",C)}(l))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(f,_){return _.store("mutations").j().next(C=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",wC,{unique:!0});const R=_.store("mutations"),F=C.map(H=>R.put(H));return Te.waitFor(F)})}(e,l))),c=c.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Ys(l))),r<6&&i>=6&&(c=c.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(l)))),r<7&&i>=7&&(c=c.next(()=>this.Zs(l))),r<8&&i>=8&&(c=c.next(()=>this.ti(e,l))),r<9&&i>=9&&(c=c.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.ei(l))),r<11&&i>=11&&(c=c.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(f){const _=f.createObjectStore("documentOverlays",{keyPath:EI});_.createIndex("collectionPathOverlayIndex",D1,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",DC,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(f){const _=f.createObjectStore("remoteDocumentsV14",{keyPath:yI});_.createIndex("documentKeyIndex",On),_.createIndex("collectionGroupIndex",bC)}(e)).next(()=>this.ni(e,l)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>this.si(e,l))),r<15&&i>=15&&(c=c.next(()=>function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:IC}).createIndex("sequenceNumberIndex",CI,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:SC}).createIndex("documentKeyIndex",bI,{unique:!1})}(e))),c}Xs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=Ag(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>Te.forEach(i,l=>{const c=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",c).next(f=>Te.forEach(f,_=>{Xt(_.userId===l.userId);const C=Uh(this.serializer,_);return Yv(e,l.userId,C).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const l=[];return r.X((c,f)=>{const _=new ar(c),C=[0,co(_)];l.push(t.get(C).next(R=>R?Te.resolve():t.put({targetId:0,path:co(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>Te.waitFor(l))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:wI});const r=t.store("collectionParents"),i=new T_,l=c=>{if(i.add(c)){const f=c.lastSegment(),_=c.popLast();return r.put({collectionId:f,parent:co(_)})}};return t.store("remoteDocuments").X({Y:!0},(c,f)=>{const _=new ar(c);return l(_.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([c,f,_],C)=>{const R=Fu(f);return l(R.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,i)=>{const l=Tg(i),c=Bv(this.serializer,l);return t.put(c)})}ni(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((l,c)=>{const f=t.store("remoteDocumentsV14"),_=(C=c,C.document?new Mt(ar.fromString(C.document.name).popFirst(5)):C.noDocument?Mt.fromSegments(C.noDocument.path):C.unknownDocument?Mt.fromSegments(C.unknownDocument.path):jt()).path.toArray();var C;const R={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(f.put(R))}).next(()=>Te.waitFor(i))}si(e,t){const r=t.store("mutations"),i=Cb(this.serializer),l=new Rd(yp.zs,this.serializer.fe);return r.j().next(c=>{const f=new Map;return c.forEach(_=>{var C;let R=null!==(C=f.get(_.userId))&&void 0!==C?C:kn();Uh(this.serializer,_).keys().forEach(F=>R=R.add(F)),f.set(_.userId,R)}),Te.forEach(f,(_,C)=>{const R=new Is(C),F=w_.de(this.serializer,R),H=l.getIndexManager(R),J=xg.de(R,this.serializer,H,l.referenceDelegate);return new e0(i,J,F,H).recalculateAndSaveOverlaysForDocumentKeys(new lv(t,nl.ct),_).next()})})}}function r0(n){n.createObjectStore("targetDocuments",{keyPath:TC}).createIndex("documentTargetsIndex",vI,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",EC,{unique:!0}),n.createObjectStore("targetGlobal")}const Db="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class dn{constructor(e,t,r,i,l,c,f,_,C,R,F=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=l,this.window=c,this.document=f,this.ri=C,this.oi=R,this.ui=F,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=H=>Promise.resolve(),!dn.D())throw new Qe(Pe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new KI(this,i),this.di=t+"main",this.serializer=new ub(_),this.wi=new nu(this.di,this.ui,new Sb(this.serializer)),this.Bs=new zI(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Cb(this.serializer),this.qs=new jI,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===R&&ls("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Qe(Pe.FAILED_PRECONDITION,Db);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new nl(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,ke.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,ke.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,ke.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>x_(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Eh(e))return st("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return st("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return Mg(e).get("owner").next(t=>Te.resolve(this.Ri(t)))}Pi(e){return x_(e).delete(this.clientId)}bi(){var e=this;return(0,ke.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=ho(r,"clientMetadata");return i.j().next(l=>{const c=e.Si(l,18e5),f=l.filter(_=>-1===c.indexOf(_));return Te.forEach(f,_=>i.delete(_.clientId)).next(()=>f)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?Te.resolve(!0):Mg(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Qe(Pe.FAILED_PRECONDITION,Db);return!1}}return!(!this.networkEnabled||!this.inForeground)||x_(e).j().next(r=>void 0===this.Si(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&st("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ke.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new lv(t,nl.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>x_(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return xg.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new I_(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return w_.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){st("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",l=15===(c=this.ui)?av:14===c?qm:13===c?AC:12===c?Th:11===c?ov:void jt();var c;let f;return this.wi.runTransaction(e,i,l,_=>(f=new lv(_,this.Os?this.Os.next():nl.ct),"readwrite-primary"===t?this.Ti(f).next(C=>!!C||this.Ei(f)).next(C=>{if(!C)throw ls(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Qe(Pe.FAILED_PRECONDITION,pC);return r(f)}).next(C=>this.vi(f).next(()=>C)):this.Oi(f).next(()=>r(f)))).then(_=>(f.raiseOnCommittedEvent(),_))}Oi(e){return Mg(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Qe(Pe.FAILED_PRECONDITION,Db)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Mg(e).put("owner",t)}static D(){return nu.D()}Ai(e){const t=Mg(e);return t.get("owner").next(r=>this.Ri(r)?(st("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Te.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(ls(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,W.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return st("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ls("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){ls("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Mg(n){return ho(n,"owner")}function x_(n){return ho(n,"clientMetadata")}function s0(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Nd{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=kn(),i=kn();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:i=i.add(l.doc.key)}return new Nd(e,t.fromCache,r,i)}}class Ab{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(l=>l||this.Gi(e,t,i,r)).next(l=>l||this.Qi(e,t))}Ki(e,t){if(fg(t))return Te.resolve(null);let r=ko(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=gg(t,null,"F"),r=ko(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(l=>{const c=kn(...l);return this.Ui.getDocuments(e,c).next(f=>this.indexManager.getMinOffset(e,r).next(_=>{const C=this.ji(t,f);return this.zi(t,C,c,_.readTime)?this.Ki(e,gg(t,null,"F")):this.Wi(e,C,t,_)}))})))}Gi(e,t,r,i){return fg(t)||i.isEqual(Kt.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(l=>{const c=this.ji(t,l);return this.zi(t,c,r,i)?this.Qi(e,t):(Um()<=ii.in.DEBUG&&st("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ru(t)),this.Wi(e,c,t,$f(i,-1)))})}ji(e,t){let r=new br(tp(e));return t.forEach((i,l)=>{Cd(e,l)&&(r=r.add(l))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const l="F"===e.limitType?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(i)>0)}Qi(e,t){return Um()<=ii.in.DEBUG&&st("QueryEngine","Using full collection scan to execute query:",ru(t)),this.Ui.getDocumentsMatchingQuery(e,t,tl.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(l=>(t.forEach(c=>{l=l.insert(c.key,c)}),l))}}class M_{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new Wr(Pn),this.Yi=new Zu(l=>Ph(l),Qf),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new e0(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function Pg(n,e,t,r){return new M_(n,e,t,r)}function Li(n,e){return xb.apply(this,arguments)}function xb(){return xb=(0,ke.Z)(function*(n,e){const t=St(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(l=>(i=l,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(l=>{const c=[],f=[];let _=kn();for(const C of i){c.push(C.batchId);for(const R of C.mutations)_=_.add(R.key)}for(const C of l){f.push(C.batchId);for(const R of C.mutations)_=_.add(R.key)}return t.localDocuments.getDocuments(r,_).next(C=>({er:C,removedBatchIds:c,addedBatchIds:f}))})})}),xb.apply(this,arguments)}function o0(n){const e=St(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function a0(n,e,t){let r=kn(),i=kn();return t.forEach(l=>r=r.add(l)),e.getEntries(n,r).next(l=>{let c=Aa();return t.forEach((f,_)=>{const C=l.get(f);_.isFoundDocument()!==C.isFoundDocument()&&(i=i.add(f)),_.isNoDocument()&&_.version.isEqual(Kt.min())?(e.removeEntry(f,_.readTime),c=c.insert(f,_)):!C.isValidDocument()||_.version.compareTo(C.version)>0||0===_.version.compareTo(C.version)&&C.hasPendingWrites?(e.addEntry(_),c=c.insert(f,_)):st("LocalStore","Ignoring outdated watch update for ",f,". Current version:",C.version," Watch version:",_.version)}),{nr:c,sr:i}})}function Pb(n,e){const t=St(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function qh(n,e){const t=St(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(l=>l?(i=l,Te.resolve(i)):t.Bs.allocateTargetId(r).next(c=>(i=new Ad(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function zh(n,e,t){return l0.apply(this,arguments)}function l0(){return l0=(0,ke.Z)(function*(n,e,t){const r=St(n),i=r.Ji.get(e),l=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",l,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!Eh(c))throw c;st("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),l0.apply(this,arguments)}function P_(n,e,t){const r=St(n);let i=Kt.min(),l=kn();return r.persistence.runTransaction("Execute query","readonly",c=>function(f,_,C){const R=St(f),F=R.Yi.get(C);return void 0!==F?Te.resolve(R.Ji.get(F)):R.Bs.getTargetData(_,C)}(r,c,ko(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(c,f.targetId).next(_=>{l=_})}).next(()=>r.Hi.getDocumentsMatchingQuery(c,e,t?i:Kt.min(),t?l:kn())).next(f=>(Nb(r,mg(e),f),{documents:f,ir:l})))}function Rb(n,e){const t=St(n),r=St(t.Bs),i=t.Ji.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",l=>r.le(l,e).next(c=>c?c.target:null))}function vp(n,e){const t=St(n),r=t.Xi.get(e)||Kt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Zi.getAllFromCollectionGroup(i,e,$f(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Nb(t,e,i),i))}function Nb(n,e,t){let r=n.Xi.get(e)||Kt.min();t.forEach((i,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),n.Xi.set(e,r)}function u0(){return u0=(0,ke.Z)(function*(n,e,t,r){const i=St(n);let l=kn(),c=Aa();for(const C of t){const R=e.rr(C.metadata.name);C.document&&(l=l.add(R));const F=e.ur(C);F.setReadTime(e.cr(C.metadata.readTime)),c=c.insert(R,F)}const f=i.Zi.newChangeBuffer({trackRemovals:!0}),_=yield qh(i,(C=r,ko(Rc(ar.fromString(`__bundle__/docs/${C}`)))));var C;return i.persistence.runTransaction("Apply bundle documents","readwrite",C=>a0(C,f,c).next(R=>(f.apply(C),R)).next(R=>i.Bs.removeMatchingKeysForTargetId(C,_.targetId).next(()=>i.Bs.addMatchingKeys(C,l,_.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(C,R.nr,R.sr)).next(()=>R.nr)))}),u0.apply(this,arguments)}function R_(n,e){return N_.apply(this,arguments)}function N_(){return N_=(0,ke.Z)(function*(n,e,t=kn()){const r=yield qh(n,ko(Zv(e.bundledQuery))),i=St(n);return i.persistence.runTransaction("Save named query","readwrite",l=>{const c=Gi(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.qs.saveNamedQuery(l,e);const f=r.withResumeToken(Fs.EMPTY_BYTE_STRING,c);return i.Ji=i.Ji.insert(f.targetId,f),i.Bs.updateTargetData(l,f).next(()=>i.Bs.removeMatchingKeysForTargetId(l,r.targetId)).next(()=>i.Bs.addMatchingKeys(l,t,r.targetId)).next(()=>i.qs.saveNamedQuery(l,e))})}),N_.apply(this,arguments)}function c0(n,e){return`firestore_clients_${n}_${e}`}function d0(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function h0(n,e){return`firestore_targets_${n}_${e}`}class Od{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static ar(e,t,r){const i=JSON.parse(r);let l,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(l=new Qe(i.error.code,i.error.message))),c?new Od(e,t,i.state,l):(ls("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Vc{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let i,l="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return l&&r.error&&(l="string"==typeof r.error.message&&"string"==typeof r.error.code,l&&(i=new Qe(r.error.code,r.error.message))),l?new Vc(e,r.state,i):(ls("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class O_{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,l=bv();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=yC(r.activeTargetIds[c]),l=l.add(r.activeTargetIds[c]);return i?new O_(e,l):(ls("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class f0{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new f0(t.clientId,t.onlineState):(ls("SharedClientState",`Failed to parse online state: ${e}`),null)}}class p0{constructor(){this.activeTargetIds=bv()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class k_{constructor(e,t,r,i,l){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Wr(Pn),this.started=!1,this.yr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.pr=c0(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new p0),this.Tr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ke.Z)(function*(){const t=yield e.syncEngine.$i();for(const i of t){if(i===e.wr)continue;const l=e.getItem(c0(e.persistenceKey,i));if(l){const c=O_.ar(i,l);c&&(e.gr=e.gr.insert(c.clientId,c))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const i=e.br(r);i&&e.Vr(i)}for(const i of e.yr)e.mr(i);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(h0(this.persistenceKey,e));if(r){const i=Vc.ar(e,r);i&&(t=i.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(h0(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return st("SharedClientState","READ",e,t),t}setItem(e,t){st("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){st("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(st("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void ls("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,ke.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.Fr(i,null)}{const i=t.Br(r.key,r.newValue);if(i)return t.Fr(i.clientId,i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.Lr(r.key,r.newValue);if(i)return t.qr(i)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const i=t.Ur(r.key,r.newValue);if(i)return t.Kr(i)}}else if(r.key===t.vr){if(null!==r.newValue){const i=t.br(r.newValue);if(i)return t.Vr(i)}}else if(r.key===t.Ir){const i=function(l){let c=nl.ct;if(null!=l)try{const f=JSON.parse(l);Xt("number"==typeof f),c=f}catch(f){ls("SharedClientState","Failed to read sequence number from WebStorage",f)}return c}(r.newValue);i!==nl.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Gr(r.newValue);yield Promise.all(i.map(l=>t.syncEngine.Qr(l)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const i=new Od(this.currentUser,e,t,r),l=d0(this.persistenceKey,this.currentUser,e);this.setItem(l,i.hr())}Cr(e){const t=d0(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const i=h0(this.persistenceKey,e),l=new Vc(e,t,r);this.setItem(i,l.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return O_.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return Od.ar(new Is(void 0!==r[2]?r[2]:null),i,t)}Ur(e,t){const r=this.Ar.exec(e),i=Number(r[1]);return Vc.ar(i,t)}br(e){return f0.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,ke.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);st("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),l=this.Sr(r),c=[],f=[];return l.forEach(_=>{i.has(_)||c.push(_)}),i.forEach(_=>{l.has(_)||f.push(_)}),this.syncEngine.Wr(c,f).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=bv();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class g0{constructor(){this.Hr=new p0,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new p0,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ob{Yr(e){}shutdown(){}}class kb{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){st("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){st("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Rg=null;function m0(){return null===Rg?Rg=268435456+Math.round(2147483648*Math.random()):Rg++,"0x"+Rg.toString(16)}const nS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class M1{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const sa="WebChannelConnection";class P1 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,l){const c=m0(),f=this.To(e,t);st("RestConnection",`Sending RPC '${e}' ${c}:`,f,r);const _={};return this.Eo(_,i,l),this.Ao(e,f,_,r).then(C=>(st("RestConnection",`Received RPC '${e}' ${c}: `,C),C),C=>{throw Sa("RestConnection",`RPC '${e}' ${c} failed with error: `,C,"url: ",f,"request:",r),C})}vo(e,t,r,i,l,c){return this.Io(e,t,r,i,l)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Uf,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,l)=>e[l]=i),r&&r.headers.forEach((i,l)=>e[l]=i)}To(e,t){return`${this.mo}/v1/${t}:${nS[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const l=m0();return new Promise((c,f)=>{const _=new aC;_.setWithCredentials(!0),_.listenOnce(sC.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case ag.NO_ERROR:const R=_.getResponseJson();st(sa,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(R)),c(R);break;case ag.TIMEOUT:st(sa,`RPC '${e}' ${l} timed out`),f(new Qe(Pe.DEADLINE_EXCEEDED,"Request time out"));break;case ag.HTTP_ERROR:const F=_.getStatus();if(st(sa,`RPC '${e}' ${l} failed with status:`,F,"response text:",_.getResponseText()),F>0){let H=_.getResponseJson();Array.isArray(H)&&(H=H[0]);const J=H?.error;if(J&&J.status&&J.message){const ie=function(we){const Fe=we.toLowerCase().replace(/_/g,"-");return Object.values(Pe).indexOf(Fe)>=0?Fe:Pe.UNKNOWN}(J.status);f(new Qe(ie,J.message))}else f(new Qe(Pe.UNKNOWN,"Server responded with status "+_.getStatus()))}else f(new Qe(Pe.UNAVAILABLE,"Connection failed."));break;default:jt()}}finally{st(sa,`RPC '${e}' ${l} completed.`)}});const C=JSON.stringify(i);st(sa,`RPC '${e}' ${l} sending request:`,i),_.send(t,"POST",C,r,15)})}Ro(e,t,r){const i=m0(),l=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=S1(),f=og(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},C=this.longPollingOptions.timeoutSeconds;void 0!==C&&(_.longPollingTimeout=Math.round(1e3*C)),this.useFetchStreams&&(_.xmlHttpFactory=new sI({})),this.Eo(_.initMessageHeaders,t,r),_.encodeInitMessageHeaders=!0;const R=l.join("");st(sa,`Creating RPC '${e}' stream ${i}: ${R}`,_);const F=c.createWebChannel(R,_);let H=!1,J=!1;const ie=new M1({ro:Fe=>{J?st(sa,`Not sending because RPC '${e}' stream ${i} is closed:`,Fe):(H||(st(sa,`Opening RPC '${e}' stream ${i} transport.`),F.open(),H=!0),st(sa,`RPC '${e}' stream ${i} sending:`,Fe),F.send(Fe))},oo:()=>F.close()}),we=(Fe,lt,$t)=>{Fe.listen(lt,Ut=>{try{$t(Ut)}catch(Qt){setTimeout(()=>{throw Qt},0)}})};return we(F,Lm.EventType.OPEN,()=>{J||st(sa,`RPC '${e}' stream ${i} transport opened.`)}),we(F,Lm.EventType.CLOSE,()=>{J||(J=!0,st(sa,`RPC '${e}' stream ${i} transport closed`),ie.wo())}),we(F,Lm.EventType.ERROR,Fe=>{J||(J=!0,Sa(sa,`RPC '${e}' stream ${i} transport errored:`,Fe),ie.wo(new Qe(Pe.UNAVAILABLE,"The operation could not be completed")))}),we(F,Lm.EventType.MESSAGE,Fe=>{var lt;if(!J){const $t=Fe.data[0];Xt(!!$t);const Qt=$t.error||(null===(lt=$t[0])||void 0===lt?void 0:lt.error);if(Qt){st(sa,`RPC '${e}' stream ${i} received error:`,Qt);const An=Qt.status;let In=function(Ys){const Ju=us[Ys];if(void 0!==Ju)return Sv(Ju)}(An),dr=Qt.message;void 0===In&&(In=Pe.INTERNAL,dr="Unknown error status: "+An+" with message "+Qt.message),J=!0,ie.wo(new Qe(In,dr)),F.close()}else st(sa,`RPC '${e}' stream ${i} received:`,$t),ie._o($t)}}),we(f,oC.STAT_EVENT,Fe=>{Fe.stat===ev.PROXY?st(sa,`RPC '${e}' stream ${i} detected buffering proxy`):Fe.stat===ev.NOPROXY&&st(sa,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{ie.fo()},0),ie}}function rS(){return typeof window<"u"?window:null}function Ng(){return typeof document<"u"?document:null}function kd(n){return new nb(n,!0)}class _0{constructor(e,t,r=1e3,i=1.5,l=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=l,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&st("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class Fb{constructor(e,t,r,i,l,c,f,_){this.ii=e,this.$o=r,this.Oo=i,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=_,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new _0(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,ke.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,ke.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,ke.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===Pe.RESOURCE_EXHAUSTED?(ls(t.toString()),ls("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===Pe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new Qe(Pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,ke.Z)(function*(){e.state=0,e.start()}))}tu(e){return st("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(st("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Lb extends Fb{constructor(e,t,r,i,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.serializer=l}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function ob(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:jt(),i=e.targetChange.targetIds||[],l=function(_,C){return _.useProto3Json?(Xt(void 0===C||"string"==typeof C),Fs.fromBase64String(C||"")):(Xt(void 0===C||C instanceof Uint8Array),Fs.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&function(_){const C=void 0===_.code?Pe.UNKNOWN:Sv(_.code);return new Qe(C,_.message||"")}(c);t=new eb(r,i,l,f||null)}else if("documentChange"in e){const r=e.documentChange,i=su(n,r.document.name),l=Gi(r.document.updateTime),c=r.document.createTime?Gi(r.document.createTime):Kt.min(),f=new go({mapValue:{fields:r.document.fields}}),_=si.newFoundDocument(i,l,c,f);t=new cp(r.targetIds||[],r.removedTargetIds||[],_.key,_)}else if("documentDelete"in e){const r=e.documentDelete,i=su(n,r.document),l=r.readTime?Gi(r.readTime):Kt.min(),c=si.newNoDocument(i,l);t=new cp([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=su(n,r.document);t=new cp([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return jt();{const r=e.filter,{count:i=0,unchangedNames:l}=r,c=new ap(i,l);t=new l_(r.targetId,c)}}var _;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return Kt.min();const l=i.targetChange;return l.targetIds&&l.targetIds.length?Kt.min():l.readTime?Gi(l.readTime):Kt.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=bg(this.serializer),t.addTarget=function(i,l){let c;const f=l.target;if(c=Jm(f)?{documents:kv(i,f)}:{query:m_(i,f)},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=Pv(i,l.resumeToken);const _=Cg(i,l.expectedCount);null!==_&&(c.expectedCount=_)}else if(l.snapshotVersion.compareTo(Kt.min())>0){c.readTime=Lh(i,l.snapshotVersion.toTimestamp());const _=Cg(i,l.expectedCount);null!==_&&(c.expectedCount=_)}return c}(this.serializer,e);const r=function __(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return jt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=bg(this.serializer),t.removeTarget=e,this.Wo(t)}}class Og extends Fb{constructor(e,t,r,i,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.serializer=l,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Xt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function ab(n,e){return n&&n.length>0?(Xt(void 0!==e),n.map(t=>function(r,i){let l=Gi(r.updateTime?r.updateTime:i);return l.isEqual(Kt.min())&&(l=Gi(i)),new i_(l,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Gi(e.commitTime);return this.listener.cu(r,t)}return Xt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=bg(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>hp(this.serializer,r))};this.Wo(t)}}class iS extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new Qe(Pe.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,l])=>this.connection.Io(e,t,r,i,l)).catch(i=>{throw"FirebaseError"===i.name?(i.code===Pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Qe(Pe.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.vo(e,t,r,l,c,i)).catch(l=>{throw"FirebaseError"===l.name?(l.code===Pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Qe(Pe.UNKNOWN,l.toString())})}terminate(){this.lu=!0}}class oS{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(ls(t),this.mu=!1):st("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class R1{constructor(e,t,r,i,l){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=l,this.Pu.Yr(f=>{r.enqueueAndForget((0,ke.Z)(function*(){var _;Bc(c)&&(st("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,ke.Z)(function*(C){const R=St(C);R.vu.add(4),yield wp(R),R.bu.set("Unknown"),R.vu.delete(4),yield kg(R)}),function(C){return _.apply(this,arguments)})(c))}))}),this.bu=new oS(r,i)}}function kg(n){return F_.apply(this,arguments)}function F_(){return F_=(0,ke.Z)(function*(n){if(Bc(n))for(const e of n.Ru)yield e(!0)}),F_.apply(this,arguments)}function wp(n){return v0.apply(this,arguments)}function v0(){return v0=(0,ke.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),v0.apply(this,arguments)}function Fd(n,e){const t=St(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),w0(t)?U_(t):Ld(t).Ko()&&L_(t,e))}function Fg(n,e){const t=St(n),r=Ld(t);t.Au.delete(e),r.Ko()&&Ub(t,e),0===t.Au.size&&(r.Ko()?r.jo():Bc(t)&&t.bu.set("Unknown"))}function L_(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Kt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ld(n).su(e)}function Ub(n,e){n.Vu.qt(e),Ld(n).iu(e)}function U_(n){n.Vu=new u_({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),Ld(n).start(),n.bu.gu()}function w0(n){return Bc(n)&&!Ld(n).Uo()&&n.Au.size>0}function Bc(n){return 0===St(n).vu.size}function Vb(n){n.Vu=void 0}function C0(n){return b0.apply(this,arguments)}function b0(){return b0=(0,ke.Z)(function*(n){n.Au.forEach((e,t)=>{L_(n,e)})}),b0.apply(this,arguments)}function Bb(n,e){return V_.apply(this,arguments)}function V_(){return V_=(0,ke.Z)(function*(n,e){Vb(n),w0(n)?(n.bu.Iu(e),U_(n)):n.bu.set("Unknown")}),V_.apply(this,arguments)}function aS(n,e,t){return E0.apply(this,arguments)}function E0(){return E0=(0,ke.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof eb&&2===e.state&&e.cause)try{yield(r=(0,ke.Z)(function*(i,l){const c=l.cause;for(const f of l.targetIds)i.Au.has(f)&&(yield i.remoteSyncer.rejectListen(f,c),i.Au.delete(f),i.Vu.removeTarget(f))}),function(i,l){return r.apply(this,arguments)})(n,e)}catch(r){st("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield B_(n,r)}else if(e instanceof cp?n.Vu.Ht(e):e instanceof l_?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(Kt.min()))try{const r=yield o0(n.localStore);t.compareTo(r)>=0&&(yield function(i,l){const c=i.Vu.ce(l);return c.targetChanges.forEach((f,_)=>{if(f.resumeToken.approximateByteSize()>0){const C=i.Au.get(_);C&&i.Au.set(_,C.withResumeToken(f.resumeToken,l))}}),c.targetMismatches.forEach((f,_)=>{const C=i.Au.get(f);if(!C)return;i.Au.set(f,C.withResumeToken(Fs.EMPTY_BYTE_STRING,C.snapshotVersion)),Ub(i,f);const R=new Ad(C.target,f,_,C.sequenceNumber);L_(i,R)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){st("RemoteStore","Failed to raise snapshot:",r),yield B_(n,r)}var r}),E0.apply(this,arguments)}function B_(n,e,t){return Lg.apply(this,arguments)}function Lg(){return Lg=(0,ke.Z)(function*(n,e,t){if(!Eh(e))throw e;n.vu.add(1),yield wp(n),n.bu.set("Offline"),t||(t=()=>o0(n.localStore)),n.asyncQueue.enqueueRetryable((0,ke.Z)(function*(){st("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield kg(n)}))}),Lg.apply(this,arguments)}function Zb(n,e){return e().catch(t=>B_(n,t,e))}function Gh(n){return T0.apply(this,arguments)}function T0(){return T0=(0,ke.Z)(function*(n){const e=St(n),t=Zc(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;lS(e);)try{const i=yield Pb(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,uS(e,i)}catch(i){yield B_(e,i)}jb(e)&&Hb(e)}),T0.apply(this,arguments)}function lS(n){return Bc(n)&&n.Eu.length<10}function uS(n,e){n.Eu.push(e);const t=Zc(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function jb(n){return Bc(n)&&!Zc(n).Uo()&&n.Eu.length>0}function Hb(n){Zc(n).start()}function cS(n){return I0.apply(this,arguments)}function I0(){return I0=(0,ke.Z)(function*(n){Zc(n).hu()}),I0.apply(this,arguments)}function dS(n){return Z_.apply(this,arguments)}function Z_(){return Z_=(0,ke.Z)(function*(n){const e=Zc(n);for(const t of n.Eu)e.uu(t.mutations)}),Z_.apply(this,arguments)}function $b(n,e,t){return S0.apply(this,arguments)}function S0(){return S0=(0,ke.Z)(function*(n,e,t){const r=n.Eu.shift(),i=Id.from(r,e,t);yield Zb(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Gh(n)}),S0.apply(this,arguments)}function hS(n,e){return j_.apply(this,arguments)}function j_(){return j_=(0,ke.Z)(function*(n,e){var t;e&&Zc(n).ou&&(yield(t=(0,ke.Z)(function*(r,i){if(Iv(l=i.code)&&l!==Pe.ABORTED){const c=r.Eu.shift();Zc(r).Qo(),yield Zb(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield Gh(r)}var l}),function(r,i){return t.apply(this,arguments)})(n,e)),jb(n)&&Hb(n)}),j_.apply(this,arguments)}function qb(n,e){return D0.apply(this,arguments)}function D0(){return D0=(0,ke.Z)(function*(n,e){const t=St(n);t.asyncQueue.verifyOperationInProgress(),st("RemoteStore","RemoteStore received new credentials");const r=Bc(t);t.vu.add(3),yield wp(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield kg(t)}),D0.apply(this,arguments)}function A0(n,e){return Ug.apply(this,arguments)}function Ug(){return Ug=(0,ke.Z)(function*(n,e){const t=St(n);e?(t.vu.delete(2),yield kg(t)):e||(t.vu.add(2),yield wp(t),t.bu.set("Unknown"))}),Ug.apply(this,arguments)}function Ld(n){return n.Su||(n.Su=function(e,t,r){const i=St(e);return i.fu(),new Lb(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:C0.bind(null,n),ao:Bb.bind(null,n),nu:aS.bind(null,n)}),n.Ru.push(function(){var e=(0,ke.Z)(function*(t){t?(n.Su.Qo(),w0(n)?U_(n):n.bu.set("Unknown")):(yield n.Su.stop(),Vb(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function Zc(n){return n.Du||(n.Du=function(e,t,r){const i=St(e);return i.fu(),new Og(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:cS.bind(null,n),ao:hS.bind(null,n),au:dS.bind(null,n),cu:$b.bind(null,n)}),n.Ru.push(function(){var e=(0,ke.Z)(function*(t){t?(n.Du.Qo(),yield Gh(n)):(yield n.Du.stop(),n.Eu.length>0&&(st("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class Vg{constructor(e,t,r,i,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=l,this.deferred=new ks,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,l){const c=Date.now()+r,f=new Vg(e,t,c,i,l);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Qe(Pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cp(n,e){if(ls("AsyncQueue",`${e}: ${n}`),Eh(n))return new Qe(Pe.UNAVAILABLE,`${e}: ${n}`);throw n}class bp{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Mt.comparator(t.key,r.key):(t,r)=>Mt.comparator(t.key,r.key),this.keyedMap=Nc(),this.sortedSet=new Wr(this.comparator)}static emptySet(e){return new bp(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof bp)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,l=r.getNext().key;if(!i.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new bp;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class H_{constructor(){this.Cu=new Wr(Mt.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):jt():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Ep{constructor(e,t,r,i,l,c,f,_,C){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=_,this.hasCachedResults=C}static fromInitialDocuments(e,t,r,i,l){const c=[];return t.forEach(f=>{c.push({type:0,doc:f})}),new Ep(e,t,bp.emptySet(t),c,r,i,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ep(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class zb{constructor(){this.Nu=void 0,this.listeners=[]}}class Tp{constructor(){this.queries=new Zu(e=>n_(e),ep),this.onlineState="Unknown",this.ku=new Set}}function $_(n,e){return x0.apply(this,arguments)}function x0(){return x0=(0,ke.Z)(function*(n,e){const t=St(n),r=e.query;let i=!1,l=t.queries.get(r);if(l||(i=!0,l=new zb),i)try{l.Nu=yield t.onListen(r)}catch(c){const f=Cp(c,`Initialization of query '${ru(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,l),l.listeners.push(e),e.Mu(t.onlineState),l.Nu&&e.$u(l.Nu)&&Bg(t)}),x0.apply(this,arguments)}function Gb(n,e){return q_.apply(this,arguments)}function q_(){return q_=(0,ke.Z)(function*(n,e){const t=St(n),r=e.query;let i=!1;const l=t.queries.get(r);if(l){const c=l.listeners.indexOf(e);c>=0&&(l.listeners.splice(c,1),i=0===l.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),q_.apply(this,arguments)}function M0(n,e){const t=St(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const f of c.listeners)f.$u(i)&&(r=!0);c.Nu=i}}r&&Bg(t)}function fS(n,e,t){const r=St(n),i=r.queries.get(e);if(i)for(const l of i.listeners)l.onError(t);r.queries.delete(e)}function Bg(n){n.ku.forEach(e=>{e.next()})}class P0{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Ep(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Ep.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class Wb{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class z_{constructor(e){this.serializer=e}rr(e){return su(this.serializer,e)}ur(e){return e.metadata.exists?Eg(this.serializer,e.document,!1):si.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Gi(e)}}class Kb{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=R0(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=ar.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new z_(this.serializer);for(const i of e)if(i.metadata.queries){const l=r.rr(i.metadata.name);for(const c of i.metadata.queries){const f=(t.get(c)||kn()).add(l);t.set(c,f)}}return t}complete(){var e=this;return(0,ke.Z)(function*(){const t=yield function tS(n,e,t,r){return u0.apply(this,arguments)}(e.localStore,new z_(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const i of e.queries)yield R_(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function R0(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class N0{constructor(e){this.key=e}}class O0{constructor(e){this.key=e}}class Yb{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=kn(),this.mutatedKeys=kn(),this.tc=tp(e),this.ec=new bp(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new H_,i=t?t.ec:this.ec;let l=t?t.mutatedKeys:this.mutatedKeys,c=i,f=!1;const _="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,C="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((R,F)=>{const H=i.get(R),J=Cd(this.query,F)?F:null,ie=!!H&&this.mutatedKeys.has(H.key),we=!!J&&(J.hasLocalMutations||this.mutatedKeys.has(J.key)&&J.hasCommittedMutations);let Fe=!1;H&&J?H.data.isEqual(J.data)?ie!==we&&(r.track({type:3,doc:J}),Fe=!0):this.rc(H,J)||(r.track({type:2,doc:J}),Fe=!0,(_&&this.tc(J,_)>0||C&&this.tc(J,C)<0)&&(f=!0)):!H&&J?(r.track({type:0,doc:J}),Fe=!0):H&&!J&&(r.track({type:1,doc:H}),Fe=!0,(_||C)&&(f=!0)),Fe&&(J?(c=c.add(J),l=we?l.add(R):l.delete(R)):(c=c.delete(R),l=l.delete(R)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const R="F"===this.query.limitType?c.last():c.first();c=c.delete(R.key),l=l.delete(R.key),r.track({type:1,doc:R})}return{ec:c,ic:r,zi:f,mutatedKeys:l}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const l=e.ic.xu();l.sort((C,R)=>function(F,H){const J=ie=>{switch(ie){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return jt()}};return J(F)-J(H)}(C.type,R.type)||this.tc(C.doc,R.doc)),this.oc(r);const c=t?this.uc():[],f=0===this.Zu.size&&this.current?1:0,_=f!==this.Xu;return this.Xu=f,0!==l.length||_?{snapshot:new Ep(this.query,e.ec,i,l,e.mutatedKeys,0===f,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:c}:{cc:c}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new H_,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=kn(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new O0(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new N0(r))}),t}hc(e){this.Yu=e.ir,this.Zu=kn();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Ep.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class pS{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class gS{constructor(e){this.key=e,this.fc=!1}}class mS{constructor(e,t,r,i,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.dc={},this.wc=new Zu(f=>n_(f),ep),this._c=new Map,this.mc=new Set,this.gc=new Wr(Mt.comparator),this.yc=new Map,this.Ic=new A_,this.Tc={},this.Ec=new Map,this.Ac=Hh.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function Qb(n,e){return Jb.apply(this,arguments)}function Jb(){return Jb=(0,ke.Z)(function*(n,e){const t=ny(n);let r,i;const l=t.wc.get(e);if(l)r=l.targetId,t.sharedClientState.addLocalQueryTarget(r),i=l.view.lc();else{const c=yield qh(t.localStore,ko(e)),f=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield G_(t,e,r,"current"===f,c.resumeToken),t.isPrimaryClient&&Fd(t.remoteStore,c)}return i}),Jb.apply(this,arguments)}function G_(n,e,t,r,i){return k0.apply(this,arguments)}function k0(){return k0=(0,ke.Z)(function*(n,e,t,r,i){n.Rc=(F,H,J)=>{return(ie=(0,ke.Z)(function*(we,Fe,lt,$t){let Ut=Fe.view.sc(lt);Ut.zi&&(Ut=yield P_(we.localStore,Fe.query,!1).then(({documents:In})=>Fe.view.sc(In,Ut)));const Qt=$t&&$t.targetChanges.get(Fe.targetId),An=Fe.view.applyChanges(Ut,we.isPrimaryClient,Qt);return Q_(we,Fe.targetId,An.cc),An.snapshot}),function(we,Fe,lt,$t){return ie.apply(this,arguments)})(n,F,H,J);var ie};const l=yield P_(n.localStore,e,!0),c=new Yb(e,l.ir),f=c.sc(l.documents),_=up.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),C=c.applyChanges(f,n.isPrimaryClient,_);Q_(n,t,C.cc);const R=new pS(e,t,c);return n.wc.set(e,R),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),C.snapshot}),k0.apply(this,arguments)}function _S(n,e){return Xb.apply(this,arguments)}function Xb(){return Xb=(0,ke.Z)(function*(n,e){const t=St(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(l=>!ep(l,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield zh(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Fg(t.remoteStore,r.targetId),Kh(t,r.targetId)}).catch(md))):(Kh(t,r.targetId),yield zh(t.localStore,r.targetId,!0))}),Xb.apply(this,arguments)}function F0(){return F0=(0,ke.Z)(function*(n,e,t){const r=jg(n);try{const i=yield function(l,c){const f=St(l),_=Ei.now(),C=c.reduce((H,J)=>H.add(J.key),kn());let R,F;return f.persistence.runTransaction("Locally write mutations","readwrite",H=>{let J=Aa(),ie=kn();return f.Zi.getEntries(H,C).next(we=>{J=we,J.forEach((Fe,lt)=>{lt.isValidDocument()||(ie=ie.add(Fe))})}).next(()=>f.localDocuments.getOverlayedDocuments(H,J)).next(we=>{R=we;const Fe=[];for(const lt of c){const $t=Fo(lt,R.get(lt.key).overlayedDocument);null!=$t&&Fe.push(new Ss(lt.key,$t,kC($t.value.mapValue),Ti.exists(!0)))}return f.mutationQueue.addMutationBatch(H,_,Fe,c)}).next(we=>{F=we;const Fe=we.applyToLocalDocumentSet(R,ie);return f.documentOverlayCache.saveOverlays(H,we.batchId,Fe)})}).then(()=>({batchId:F.batchId,changes:qC(R)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(l,c,f){let _=l.Tc[l.currentUser.toKey()];_||(_=new Wr(Pn)),_=_.insert(c,f),l.Tc[l.currentUser.toKey()]=_}(r,i.batchId,t),yield Ud(r,i.changes),yield Gh(r.remoteStore)}catch(i){const l=Cp(i,"Failed to persist write");t.reject(l)}}),F0.apply(this,arguments)}function eE(n,e){return W_.apply(this,arguments)}function W_(){return W_=(0,ke.Z)(function*(n,e){const t=St(n);try{const r=yield function eS(n,e){const t=St(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const f=[];e.targetChanges.forEach((R,F)=>{const H=i.get(F);if(!H)return;f.push(t.Bs.removeMatchingKeys(l,R.removedDocuments,F).next(()=>t.Bs.addMatchingKeys(l,R.addedDocuments,F)));let J=H.withSequenceNumber(l.currentSequenceNumber);var ie,we,Fe;null!==e.targetMismatches.get(F)?J=J.withResumeToken(Fs.EMPTY_BYTE_STRING,Kt.min()).withLastLimboFreeSnapshotVersion(Kt.min()):R.resumeToken.approximateByteSize()>0&&(J=J.withResumeToken(R.resumeToken,r)),i=i.insert(F,J),we=J,Fe=R,(0===(ie=H).resumeToken.approximateByteSize()||we.snapshotVersion.toMicroseconds()-ie.snapshotVersion.toMicroseconds()>=3e8||Fe.addedDocuments.size+Fe.modifiedDocuments.size+Fe.removedDocuments.size>0)&&f.push(t.Bs.updateTargetData(l,J))});let _=Aa(),C=kn();if(e.documentUpdates.forEach(R=>{e.resolvedLimboDocuments.has(R)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,R))}),f.push(a0(l,c,e.documentUpdates).next(R=>{_=R.nr,C=R.sr})),!r.isEqual(Kt.min())){const R=t.Bs.getLastRemoteSnapshotVersion(l).next(F=>t.Bs.setTargetsMetadata(l,l.currentSequenceNumber,r));f.push(R)}return Te.waitFor(f).next(()=>c.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,_,C)).next(()=>_)}).then(l=>(t.Ji=i,l))}(t.localStore,e);e.targetChanges.forEach((i,l)=>{const c=t.yc.get(l);c&&(Xt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.fc=!0:i.modifiedDocuments.size>0?Xt(c.fc):i.removedDocuments.size>0&&(Xt(c.fc),c.fc=!1))}),yield Ud(t,r,e)}catch(r){yield md(r)}}),W_.apply(this,arguments)}function L0(n,e,t){const r=St(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((l,c)=>{const f=c.view.Mu(e);f.snapshot&&i.push(f.snapshot)}),function(l,c){const f=St(l);f.onlineState=c;let _=!1;f.queries.forEach((C,R)=>{for(const F of R.listeners)F.Mu(c)&&(_=!0)}),_&&Bg(f)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function vS(n,e,t){return U0.apply(this,arguments)}function U0(){return U0=(0,ke.Z)(function*(n,e,t){const r=St(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),l=i&&i.key;if(l){let c=new Wr(Mt.comparator);c=c.insert(l,si.newNoDocument(l,Kt.min()));const f=kn().add(l),_=new vg(Kt.min(),new Map,new Wr(Pn),c,f);yield eE(r,_),r.gc=r.gc.remove(l),r.yc.delete(e),j0(r)}else yield zh(r.localStore,e,!1).then(()=>Kh(r,e,t)).catch(md)}),U0.apply(this,arguments)}function wS(n,e){return V0.apply(this,arguments)}function V0(){return V0=(0,ke.Z)(function*(n,e){const t=St(n),r=e.batch.batchId;try{const i=yield function Mb(n,e){const t=St(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),l=t.Zi.newChangeBuffer({trackRemovals:!0});return function(c,f,_,C){const R=_.batch,F=R.keys();let H=Te.resolve();return F.forEach(J=>{H=H.next(()=>C.getEntry(f,J)).next(ie=>{const we=_.docVersions.get(J);Xt(null!==we),ie.version.compareTo(we)<0&&(R.applyToRemoteDocument(ie,_),ie.isValidDocument()&&(ie.setReadTime(_.commitVersion),C.addEntry(ie)))})}),H.next(()=>c.mutationQueue.removeMutationBatch(f,R))}(t,r,e,l).next(()=>l.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let f=kn();for(let _=0;_<c.mutationResults.length;++_)c.mutationResults[_].transformResults.length>0&&(f=f.add(c.batch.mutations[_].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);Y_(t,r,null),K_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ud(t,i)}catch(i){yield md(i)}}),V0.apply(this,arguments)}function CS(n,e,t){return B0.apply(this,arguments)}function B0(){return B0=(0,ke.Z)(function*(n,e,t){const r=St(n);try{const i=yield function(l,c){const f=St(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let C;return f.mutationQueue.lookupMutationBatch(_,c).next(R=>(Xt(null!==R),C=R.keys(),f.mutationQueue.removeMutationBatch(_,R))).next(()=>f.mutationQueue.performConsistencyCheck(_)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(_,C,c)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,C)).next(()=>f.localDocuments.getDocuments(_,C))})}(r.localStore,e);Y_(r,e,t),K_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ud(r,i)}catch(i){yield md(i)}}),B0.apply(this,arguments)}function Wh(){return Wh=(0,ke.Z)(function*(n,e){const t=St(n);Bc(t.remoteStore)||st("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(l){const c=St(l);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>c.mutationQueue.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ec.get(r)||[];i.push(e),t.Ec.set(r,i)}catch(r){const i=Cp(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),Wh.apply(this,arguments)}function K_(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function Y_(n,e,t){const r=St(n);let i=r.Tc[r.currentUser.toKey()];if(i){const l=i.get(e);l&&(t?l.reject(t):l.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function Kh(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||Z0(n,r)})}function Z0(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(Fg(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),j0(n))}function Q_(n,e,t){for(const r of t)r instanceof N0?(n.Ic.addReference(r.key,e),tE(n,r)):r instanceof O0?(st("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||Z0(n,r.key)):jt()}function tE(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(st("SyncEngine","New document in limbo: "+t),n.mc.add(r),j0(n))}function j0(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new Mt(ar.fromString(e)),r=n.Ac.next();n.yc.set(r,new gS(t)),n.gc=n.gc.insert(t,r),Fd(n.remoteStore,new Ad(ko(Rc(t.path)),r,"TargetPurposeLimboResolution",nl.ct))}}function Ud(n,e,t){return J_.apply(this,arguments)}function J_(){return J_=(0,ke.Z)(function*(n,e,t){const r=St(n),i=[],l=[],c=[];var f;r.wc.isEmpty()||(r.wc.forEach((f,_)=>{c.push(r.Rc(_,e,t).then(C=>{if((C||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,C?.fromCache?"not-current":"current"),C){i.push(C);const R=Nd.Li(_.targetId,C);l.push(R)}}))}),yield Promise.all(c),r.dc.nu(i),yield(f=(0,ke.Z)(function*(_,C){const R=St(_);try{yield R.persistence.runTransaction("notifyLocalViewChanges","readwrite",F=>Te.forEach(C,H=>Te.forEach(H.Fi,J=>R.persistence.referenceDelegate.addReference(F,H.targetId,J)).next(()=>Te.forEach(H.Bi,J=>R.persistence.referenceDelegate.removeReference(F,H.targetId,J)))))}catch(F){if(!Eh(F))throw F;st("LocalStore","Failed to update sequence numbers: "+F)}for(const F of C){const H=F.targetId;if(!F.fromCache){const J=R.Ji.get(H),we=J.withLastLimboFreeSnapshotVersion(J.snapshotVersion);R.Ji=R.Ji.insert(H,we)}}}),function(_,C){return f.apply(this,arguments)})(r.localStore,l))}),J_.apply(this,arguments)}function nE(n,e){return H0.apply(this,arguments)}function H0(){return H0=(0,ke.Z)(function*(n,e){const t=St(n);if(!t.currentUser.isEqual(e)){st("SyncEngine","User change. New user:",e.toKey());const r=yield Li(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(c=>{c.forEach(f=>{f.reject(new Qe(Pe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ud(t,r.er)}var i}),H0.apply(this,arguments)}function ES(n,e){const t=St(n),r=t.yc.get(e);if(r&&r.fc)return kn().add(r.key);{let i=kn();const l=t._c.get(e);if(!l)return i;for(const c of l){const f=t.wc.get(c);i=i.unionWith(f.view.nc)}return i}}function TS(n,e){return Yh.apply(this,arguments)}function Yh(){return Yh=(0,ke.Z)(function*(n,e){const t=St(n),r=yield P_(t.localStore,e.query,!0),i=e.view.hc(r);return t.isPrimaryClient&&Q_(t,e.targetId,i.cc),i}),Yh.apply(this,arguments)}function IS(n,e){return Zg.apply(this,arguments)}function Zg(){return Zg=(0,ke.Z)(function*(n,e){const t=St(n);return vp(t.localStore,e).then(r=>Ud(t,r))}),Zg.apply(this,arguments)}function $u(n,e,t,r){return $0.apply(this,arguments)}function $0(){return $0=(0,ke.Z)(function*(n,e,t,r){const i=St(n),l=yield function(c,f){const _=St(c),C=St(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",R=>C.Sn(R,f).next(F=>F?_.localDocuments.getDocuments(R,F):Te.resolve(null)))}(i.localStore,e);var f;null!==l?("pending"===t?yield Gh(i.remoteStore):"acknowledged"===t||"rejected"===t?(Y_(i,e,r||null),K_(i,e),f=e,St(St(i.localStore).mutationQueue).Cn(f)):jt(),yield Ud(i,l)):st("SyncEngine","Cannot apply mutation batch with id: "+e)}),$0.apply(this,arguments)}function Qh(){return Qh=(0,ke.Z)(function*(n,e){const t=St(n);if(ny(t),jg(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield rE(t,r.toArray());t.vc=!0,yield A0(t.remoteStore,!0);for(const l of i)Fd(t.remoteStore,l)}else if(!1===e&&!1!==t.vc){const r=[];let i=Promise.resolve();t._c.forEach((l,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(Kh(t,c),zh(t.localStore,c,!0))),Fg(t.remoteStore,c)}),yield i,yield rE(t,r),function(l){const c=St(l);c.yc.forEach((f,_)=>{Fg(c.remoteStore,_)}),c.Ic.Ts(),c.yc=new Map,c.gc=new Wr(Mt.comparator)}(t),t.vc=!1,yield A0(t.remoteStore,!1)}}),Qh.apply(this,arguments)}function rE(n,e,t){return z0.apply(this,arguments)}function z0(){return z0=(0,ke.Z)(function*(n,e,t){const r=St(n),i=[],l=[];for(const c of e){let f;const _=r._c.get(c);if(_&&0!==_.length){f=yield qh(r.localStore,ko(_[0]));for(const C of _){const R=r.wc.get(C),F=yield TS(r,R);F.snapshot&&l.push(F.snapshot)}}else{const C=yield Rb(r.localStore,c);f=yield qh(r.localStore,C),yield G_(r,iE(C),c,!1,f.resumeToken)}i.push(f)}return r.dc.nu(l),i}),z0.apply(this,arguments)}function iE(n){return jC(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function X_(n){const e=St(n);return St(St(e.localStore).persistence).$i()}function ey(n,e,t,r){return G0.apply(this,arguments)}function G0(){return G0=(0,ke.Z)(function*(n,e,t,r){const i=St(n);if(i.vc)return void st("SyncEngine","Ignoring unexpected query state notification.");const l=i._c.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const c=yield vp(i.localStore,mg(l[0])),f=vg.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Fs.EMPTY_BYTE_STRING);yield Ud(i,c,f);break}case"rejected":yield zh(i.localStore,e,!0),Kh(i,e,r);break;default:jt()}}),G0.apply(this,arguments)}function SS(n,e,t){return ty.apply(this,arguments)}function ty(){return ty=(0,ke.Z)(function*(n,e,t){const r=ny(n);if(r.vc){for(const i of e){if(r._c.has(i)){st("SyncEngine","Adding an already active target "+i);continue}const l=yield Rb(r.localStore,i),c=yield qh(r.localStore,l);yield G_(r,iE(l),c.targetId,!1,c.resumeToken),Fd(r.remoteStore,c)}for(const i of t)r._c.has(i)&&(yield zh(r.localStore,i,!1).then(()=>{Fg(r.remoteStore,i),Kh(r,i)}).catch(md))}}),ty.apply(this,arguments)}function ny(n){const e=St(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=eE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ES.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vS.bind(null,e),e.dc.nu=M0.bind(null,e.eventManager),e.dc.Pc=fS.bind(null,e.eventManager),e}function jg(n){const e=St(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=wS.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=CS.bind(null,e),e}class Jh{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ke.Z)(function*(){t.serializer=kd(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Pg(this.persistence,new Ab,e.initialUser,this.serializer)}createPersistence(e){return new Rd(yp.zs,this.serializer)}createSharedClientState(e){return new g0}terminate(){var e=this;return(0,ke.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class ry extends Jh{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ke.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield jg(r.Vc.syncEngine),yield Gh(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return Pg(this.persistence,new Ab,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new yb(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new _C(t,this.persistence);return new gI(e.asyncQueue,r)}createPersistence(e){const t=s0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?_o.withCacheSize(this.cacheSizeBytes):_o.DEFAULT;return new dn(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,rS(),Ng(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new g0}}class iy extends ry{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ke.Z)(function*(){yield t().call(r,e);const i=r.Vc.syncEngine;r.sharedClientState instanceof k_&&(r.sharedClientState.syncEngine={jr:$u.bind(null,i),zr:ey.bind(null,i),Wr:SS.bind(null,i),$i:X_.bind(null,i),Qr:IS.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var l=(0,ke.Z)(function*(c){yield function q0(n,e){return Qh.apply(this,arguments)}(r.Vc.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return l.apply(this,arguments)}}())})()}createSharedClientState(e){const t=rS();if(!k_.D(t))throw new Qe(Pe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=s0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new k_(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Vd{initialize(e,t){var r=this;return(0,ke.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>L0(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=nE.bind(null,r.syncEngine),yield A0(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Tp}createDatastore(e){const t=kd(e.databaseInfo.databaseId),r=new P1(e.databaseInfo);return new iS(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,l=f=>L0(this.syncEngine,f,0),c=kb.D()?new kb:new Ob,new R1(t,r,i,l,c);var t,r,i,l,c}createSyncEngine(e,t){return function(r,i,l,c,f,_,C){const R=new mS(r,i,l,c,f,_);return C&&(R.vc=!0),R}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ke.Z)(function*(t){const r=St(t);st("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield wp(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function oE(n,e=10240){let t=0;return{read:()=>(0,ke.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ke.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class sy{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):ls("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class DS{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new ks,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,ke.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,ke.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,ke.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),i=Number(r);isNaN(i)&&e.Mc(`length string (${r}) is not valid number`);const l=yield e.$c(i);return new Wb(JSON.parse(l),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,ke.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,ke.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,ke.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class AS{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ke.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Qe(Pe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,ke.Z)(function*(l,c){const f=St(l),_=bg(f.serializer)+"/documents",C={documents:c.map(J=>dp(f.serializer,J))},R=yield f.vo("BatchGetDocuments",_,C,c.length),F=new Map;R.forEach(J=>{const ie=function sb(n,e){return"found"in e?function(t,r){Xt(!!r.found);const i=su(t,r.found.name),l=Gi(r.found.updateTime),c=r.found.createTime?Gi(r.found.createTime):Kt.min(),f=new go({mapValue:{fields:r.found.fields}});return si.newFoundDocument(i,l,c,f)}(n,e):"missing"in e?function(t,r){Xt(!!r.missing),Xt(!!r.readTime);const i=su(t,r.missing),l=Gi(r.readTime);return si.newNoDocument(i,l)}(n,e):jt()}(f.serializer,J);F.set(ie.key.toString(),ie)});const H=[];return c.forEach(J=>{const ie=F.get(J.toString());Xt(!!ie),H.push(ie)}),H}),function(l,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new iu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ke.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const l=Mt.fromPath(i);e.mutations.push(new Ed(l,e.precondition(l)))}),yield(r=(0,ke.Z)(function*(i,l){const c=St(i),f=bg(c.serializer)+"/documents",_={writes:l.map(C=>hp(c.serializer,C))};yield c.Io("Commit",f,_)}),function(i,l){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw jt();t=Kt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Qe(Pe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Kt.min())?Ti.exists(!1):Ti.updateTime(t):Ti.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Kt.min()))throw new Qe(Pe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ti.updateTime(t)}return Ti.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class aE{constructor(e,t,r,i,l){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=l,this.Bc=r.maxAttempts,this.qo=new _0(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,ke.Z)(function*(){const t=new AS(e.datastore),r=e.qc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(l=>{e.Uc(l)}))}).catch(i=>{e.Uc(i)})}))}qc(e){try{const t=this.updateFunction(e);return!lg(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Iv(t)}return!1}}class K0{constructor(e,t,r,i){var l=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Is.UNAUTHENTICATED,this.clientId=tv.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,ke.Z)(function*(f){st("FirestoreClient","Received user=",f.uid),yield l.authCredentialListener(f),l.user=f});return function(f){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(st("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,ke.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Qe(Pe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ks;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ke.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Cp(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function Hg(n,e){return oy.apply(this,arguments)}function oy(){return oy=(0,ke.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),st("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ke.Z)(function*(l){r.isEqual(l)||(yield Li(e.localStore,l),r=l)});return function(l){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),oy.apply(this,arguments)}function ay(n,e){return ly.apply(this,arguments)}function ly(){return ly=(0,ke.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield uy(n);st("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>qb(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,l)=>qb(e.remoteStore,l)),n._onlineComponents=e}),ly.apply(this,arguments)}function lE(n){return"FirebaseError"===n.name?n.code===Pe.FAILED_PRECONDITION||n.code===Pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function uy(n){return cy.apply(this,arguments)}function cy(){return cy=(0,ke.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){st("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Hg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!lE(t))throw t;Sa("Error using user provided cache. Falling back to memory cache: "+t),yield Hg(n,new Jh)}}else st("FirestoreClient","Using default OfflineComponentProvider"),yield Hg(n,new Jh);return n._offlineComponents}),cy.apply(this,arguments)}function dy(n){return hy.apply(this,arguments)}function hy(){return hy=(0,ke.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(st("FirestoreClient","Using user provided OnlineComponentProvider"),yield ay(n,n._uninitializedComponentsProvider._online)):(st("FirestoreClient","Using default OnlineComponentProvider"),yield ay(n,new Vd))),n._onlineComponents}),hy.apply(this,arguments)}function Y0(n){return uy(n).then(e=>e.persistence)}function Ks(n){return uy(n).then(e=>e.localStore)}function Xh(n){return dy(n).then(e=>e.remoteStore)}function Q0(n){return dy(n).then(e=>e.syncEngine)}function $g(n){return cE.apply(this,arguments)}function cE(){return cE=(0,ke.Z)(function*(n){const e=yield dy(n),t=e.eventManager;return t.onListen=Qb.bind(null,e.syncEngine),t.onUnlisten=_S.bind(null,e.syncEngine),t}),cE.apply(this,arguments)}function hE(n,e,t={}){const r=new ks;return n.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){return function(i,l,c,f,_){const C=new sy({next:F=>{l.enqueueAndForget(()=>Gb(i,R));const H=F.docs.has(c);!H&&F.fromCache?_.reject(new Qe(Pe.UNAVAILABLE,"Failed to get document because the client is offline.")):H&&F.fromCache&&f&&"server"===f.source?_.reject(new Qe(Pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(F)},error:F=>_.reject(F)}),R=new P0(Rc(c.path),C,{includeMetadataChanges:!0,Ku:!0});return $_(i,R)}(yield $g(n),n.asyncQueue,e,t,r)})),r.promise}function fE(n,e,t={}){const r=new ks;return n.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){return function(i,l,c,f,_){const C=new sy({next:F=>{l.enqueueAndForget(()=>Gb(i,R)),F.fromCache&&"server"===f.source?_.reject(new Qe(Pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(F)},error:F=>_.reject(F)}),R=new P0(c,C,{includeMetadataChanges:!0,Ku:!0});return $_(i,R)}(yield $g(n),n.asyncQueue,e,t,r)})),r.promise}function fy(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const ew=new Map;function py(n,e,t){if(!t)throw new Qe(Pe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function zg(n,e,t,r){if(!0===e&&!0===r)throw new Qe(Pe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function gy(n){if(!Mt.isDocumentKey(n))throw new Qe(Pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function RS(n){if(Mt.isDocumentKey(n))throw new Qe(Pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Gg(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":jt()}function nr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Qe(Pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Gg(n);throw new Qe(Pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function tw(n,e){if(e<=0)throw new Qe(Pe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class ef{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Qe(Pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Qe(Pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}zg("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=fy(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new Qe(Pe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Qe(Pe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Qe(Pe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wg{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ef({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Qe(Pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Qe(Pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ef(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new dC;switch(t.type){case"firstParty":return new uI(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Qe(Pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=ew.get(e);t&&(st("ComponentProvider","Removing Datastore"),ew.delete(e),t.terminate())}(this),Promise.resolve()}}class Kr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Kr(this.firestore,e,this._key)}}class Lo{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Lo(this.firestore,e,this._query)}}class qu extends Lo{constructor(e,t,r){super(e,t,Rc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Kr(this.firestore,null,new Mt(e))}withConverter(e){return new qu(this.firestore,e,this._path)}}function NS(n,e,...t){if(n=(0,W.m9)(n),py("collection","path",e),n instanceof Wg){const r=ar.fromString(e,...t);return RS(r),new qu(n,null,r)}{if(!(n instanceof Kr||n instanceof qu))throw new Qe(Pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ar.fromString(e,...t));return RS(r),new qu(n.firestore,null,r)}}function my(n,e,...t){if(n=(0,W.m9)(n),1===arguments.length&&(e=tv.A()),py("doc","path",e),n instanceof Wg){const r=ar.fromString(e,...t);return gy(r),new Kr(n,null,new Mt(r))}{if(!(n instanceof Kr||n instanceof qu))throw new Qe(Pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ar.fromString(e,...t));return gy(r),new Kr(n.firestore,n instanceof qu?n.converter:null,new Mt(r))}}function gE(n,e){return n=(0,W.m9)(n),e=(0,W.m9)(e),(n instanceof Kr||n instanceof qu)&&(e instanceof Kr||e instanceof qu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function _y(n,e){return n=(0,W.m9)(n),e=(0,W.m9)(e),n instanceof Lo&&e instanceof Lo&&n.firestore===e.firestore&&ep(n._query,e._query)&&n.converter===e.converter}class mE{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new _0(this,"async_queue_retry"),this.Xc=()=>{const t=Ng();t&&st("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=Ng();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=Ng();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new ks;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,ke.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Eh(t))throw t;st("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,ls("INTERNAL UNHANDLED ERROR: ",function(l){let c=l.message||"";return l.stack&&(c=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),c}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=Vg.createAndSchedule(this,e,t,r,l=>this.na(l));return this.zc.push(i),i}Zc(){this.Wc&&jt()}verifyOperationInProgress(){}sa(){var e=this;return(0,ke.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function rw(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class _E{constructor(){this._progressObserver={},this._taskCompletionResolver=new ks,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class fi extends Wg{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new mE,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||iw(this),this._firestoreClient.terminate()}}function cs(n){return n._firestoreClient||iw(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function iw(n){var e,t,r;const i=n._freezeSettings(),l=(f=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new NC(n._databaseId,f,n._persistenceKey,(C=i).host,C.ssl,C.experimentalForceLongPolling,C.experimentalAutoDetectLongPolling,fy(C.experimentalLongPollingOptions),C.useFetchStreams));var f,C;n._firestoreClient=new K0(n._authCredentials,n._appCheckCredentials,n._queue,l),null!==(t=i.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function sw(n,e,t){const r=new ks;return n.asyncQueue.enqueue((0,ke.Z)(function*(){try{yield Hg(n,t),yield ay(n,e),r.resolve()}catch(i){const l=i;if(!lE(l))throw l;Sa("Error enabling indexeddb cache. Falling back to memory cache: "+l),r.reject(l)}})).then(()=>r.promise)}function US(n){if(n._initialized||n._terminated)throw new Qe(Pe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class jc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new jc(Fs.fromBase64String(e))}catch(t){throw new Qe(Pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new jc(Fs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Bd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Qe(Pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ip{constructor(e){this._methodName=e}}class Kg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Qe(Pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Qe(Pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Pn(this._lat,e._lat)||Pn(this._long,e._long)}}const vy=/^__.*__$/;class bE{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Ss(e,this.data,this.fieldMask,t,this.fieldTransforms):new Fc(e,this.data,t,this.fieldTransforms)}}class aw{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ss(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function VS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw jt()}}class Sp{constructor(e,t,r,i,l,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===l&&this.ua(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Sp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Pa(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(VS(this.ca)&&vy.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class EE{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||kd(e)}ya(e,t,r,i=!1){return new Sp({ca:e,methodName:t,ga:r,path:qi.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function tf(n){const e=n._freezeSettings(),t=kd(n._databaseId);return new EE(n._databaseId,!!e.ignoreUndefinedProperties,t)}function lw(n,e,t,r,i,l={}){const c=n.ya(l.merge||l.mergeFields?2:0,e,t,i);cw("Data must be an object, but it was:",c,r);const f=AE(r,c);let _,C;if(l.merge)_=new po(c.fieldMask),C=c.fieldTransforms;else if(l.mergeFields){const R=[];for(const F of l.mergeFields){const H=Dp(e,F,t);if(!c.contains(H))throw new Qe(Pe.INVALID_ARGUMENT,`Field '${H}' is specified in your field mask but missing from your input data.`);ME(R,H)||R.push(H)}_=new po(R),C=c.fieldTransforms.filter(F=>_.covers(F.field))}else _=null,C=c.fieldTransforms;return new bE(new go(f),_,C)}class Yg extends Ip{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Yg}}function TE(n,e,t){return new Sp({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class uw extends Ip{_toFieldTransform(e){return new ip(e.path,new rp)}isEqual(e){return e instanceof uw}}class wy extends Ip{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=TE(this,e,!0),r=this.pa.map(l=>nf(l,t)),i=new Rh(r);return new ip(e.path,i)}isEqual(e){return this===e}}class BS extends Ip{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=TE(this,e,!0),r=this.pa.map(l=>nf(l,t)),i=new Nh(r);return new ip(e.path,i)}isEqual(e){return this===e}}class U1 extends Ip{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new Oh(e.serializer,GC(e.serializer,this.Ia));return new ip(e.path,t)}isEqual(e){return this===e}}function IE(n,e,t,r){const i=n.ya(1,e,t);cw("Data must be an object, but it was:",i,r);const l=[],c=go.empty();Ih(r,(_,C)=>{const R=dw(e,_,t);C=(0,W.m9)(C);const F=i.da(R);if(C instanceof Yg)l.push(R);else{const H=nf(C,F);null!=H&&(l.push(R),c.set(R,H))}});const f=new po(l);return new aw(c,f,i.fieldTransforms)}function SE(n,e,t,r,i,l){const c=n.ya(1,e,t),f=[Dp(e,r,t)],_=[i];if(l.length%2!=0)throw new Qe(Pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let H=0;H<l.length;H+=2)f.push(Dp(e,l[H])),_.push(l[H+1]);const C=[],R=go.empty();for(let H=f.length-1;H>=0;--H)if(!ME(C,f[H])){const J=f[H];let ie=_[H];ie=(0,W.m9)(ie);const we=c.da(J);if(ie instanceof Yg)C.push(J);else{const Fe=nf(ie,we);null!=Fe&&(C.push(J),R.set(J,Fe))}}const F=new po(C);return new aw(R,F,c.fieldTransforms)}function DE(n,e,t,r=!1){return nf(t,n.ya(r?4:3,e))}function nf(n,e){if(ZS(n=(0,W.m9)(n)))return cw("Unsupported field value:",e,n),AE(n,e);if(n instanceof Ip)return function(t,r){if(!VS(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let l=0;for(const c of t){let f=nf(c,r.wa(l));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),l++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,W.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return GC(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Ei.fromDate(t);return{timestampValue:Lh(r.serializer,i)}}if(t instanceof Ei){const i=new Ei(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Lh(r.serializer,i)}}if(t instanceof Kg)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof jc)return{bytesValue:Pv(r.serializer,t._byteString)};if(t instanceof Kr){const i=r.databaseId,l=t.firestore._databaseId;if(!l.isEqual(i))throw r._a(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Nv(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${Gg(t)}`)}(n,e)}function AE(n,e){const t={};return xC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ih(n,(r,i)=>{const l=nf(i,e.ha(r));null!=l&&(t[r]=l)}),{mapValue:{fields:t}}}function ZS(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Ei||n instanceof Kg||n instanceof jc||n instanceof Kr||n instanceof Ip)}function cw(n,e,t){if(!ZS(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Gg(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function Dp(n,e,t){if((e=(0,W.m9)(e))instanceof Bd)return e._internalPath;if("string"==typeof e)return dw(n,e);throw Pa("Field path arguments must be of type string or ",n,!1,void 0,t)}const xE=new RegExp("[~\\*/\\[\\]]");function dw(n,e,t){if(e.search(xE)>=0)throw Pa(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Bd(...e.split("."))._internalPath}catch{throw Pa(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Pa(n,e,t,r,i){const l=r&&!r.isEmpty(),c=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let _="";return(l||c)&&(_+=" (found",l&&(_+=` in field ${r}`),c&&(_+=` in document ${i}`),_+=")"),new Qe(Pe.INVALID_ARGUMENT,f+n+_)}function ME(n,e){return n.some(t=>t.isEqual(e))}class rf{constructor(e,t,r,i,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Kr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new jS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(hw("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class jS extends rf{data(){return super.data()}}function hw(n,e){return"string"==typeof e?dw(n,e):e instanceof Bd?e._internalPath:e._delegate._internalPath}function rl(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Qe(Pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fw{}class sf extends fw{}function Zd(n,e,...t){let r=[];e instanceof fw&&r.push(e),r=r.concat(t),function(i){const l=i.filter(f=>f instanceof af).length,c=i.filter(f=>f instanceof Qg).length;if(l>1||l>0&&c>0)throw new Qe(Pe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Qg extends sf{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Qg(e,t,r)}_apply(e){const t=this._parse(e);return FE(e._query,t),new Lo(e.firestore,e.converter,t_(e._query,t))}_parse(e){const t=tf(e.firestore);return function(i,l,c,f,_,C,R){let F;if(_.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new Qe(Pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if("in"===C||"not-in"===C){kE(R,C);const H=[];for(const J of R)H.push(qS(f,i,J));F={arrayValue:{values:H}}}else F=qS(f,i,R)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||kE(R,C),F=DE(c,"where",R,"in"===C||"not-in"===C);return tr.create(_,C,F)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class af extends fw{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new af(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:xr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let l=r;const c=i.getFlattenedFilters();for(const f of c)FE(l,f),l=t_(l,f)}(e._query,t),new Lo(e.firestore,e.converter,t_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Cy extends sf{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Cy(e,t)}_apply(e){const t=function(r,i,l){if(null!==r.startAt)throw new Qe(Pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Qe(Pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Yf(i,l);return function(f,_){if(null===Jf(f)){const C=Cv(f);null!==C&&LE(0,C,_.field)}}(r,c),c}(e._query,this._field,this._direction);return new Lo(e.firestore,e.converter,function(r,i){const l=r.explicitOrderBy.concat([i]);return new Pc(r.path,r.collectionGroup,l,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class by extends sf{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new by(e,t,r)}_apply(e){return new Lo(e.firestore,e.converter,gg(e._query,this._limit,this._limitType))}}class Ap extends sf{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Ap(e,t,r)}_apply(e){const t=OE(e,this.type,this._docOrFields,this._inclusive);return new Lo(e.firestore,e.converter,(i=t,new Pc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class Jg extends sf{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Jg(e,t,r)}_apply(e){const t=OE(e,this.type,this._docOrFields,this._inclusive);return new Lo(e.firestore,e.converter,(i=t,new Pc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function OE(n,e,t,r){if(t[0]=(0,W.m9)(t[0]),t[0]instanceof rf)return function(i,l,c,f,_){if(!f)throw new Qe(Pe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const C=[];for(const R of Xf(i))if(R.field.isKeyField())C.push(Vu(l,f.key));else{const F=f.data.field(R.field);if(cg(F))throw new Qe(Pe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+R.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===F){const H=R.field.canonicalString();throw new Qe(Pe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${H}' (used as the orderBy) does not exist.`)}C.push(F)}return new wd(C,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=tf(n.firestore);return function(l,c,f,_,C,R){const F=l.explicitOrderBy;if(C.length>F.length)throw new Qe(Pe.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const H=[];for(let J=0;J<C.length;J++){const ie=C[J];if(F[J].field.isKeyField()){if("string"!=typeof ie)throw new Qe(Pe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof ie}`);if(!pg(l)&&-1!==ie.indexOf("/"))throw new Qe(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${ie}' contains a slash.`);const we=l.path.child(ar.fromString(ie));if(!Mt.isDocumentKey(we))throw new Qe(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${we}' is not because it contains an odd number of segments.`);const Fe=new Mt(we);H.push(Vu(c,Fe))}else{const we=DE(f,_,ie);H.push(we)}}return new wd(H,R)}(n._query,n.firestore._databaseId,i,e,t,r)}}function qS(n,e,t){if("string"==typeof(t=(0,W.m9)(t))){if(""===t)throw new Qe(Pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!pg(e)&&-1!==t.indexOf("/"))throw new Qe(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(ar.fromString(t));if(!Mt.isDocumentKey(r))throw new Qe(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Vu(n,new Mt(r))}if(t instanceof Kr)return Vu(n,t._key);throw new Qe(Pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gg(t)}.`)}function kE(n,e){if(!Array.isArray(n)||0===n.length)throw new Qe(Pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function FE(n,e){if(e.isInequality()){const r=Cv(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Qe(Pe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const l=Jf(n);null!==l&&LE(0,i,l)}const t=function(r,i){for(const l of r)for(const c of l.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Qe(Pe.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function LE(n,e,t){if(!t.isEqual(e))throw new Qe(Pe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Ey{convertValue(e,t="none"){switch(yd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ac(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw jt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ih(e,(i,l)=>{r[i]=this.convertValue(l,t)}),r}convertGeoPoint(e){return new Kg(zi(e.latitude),zi(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=zm(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(zf(e));default:return null}}convertTimestamp(e){const t=_d(e);return new Ei(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ar.fromString(e);Xt(BI(r));const i=new Lu(r.get(1),r.get(3)),l=new Mt(r.popFirst(5));return i.isEqual(t)||ls(`Document ${l} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function mw(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class VE extends Ey{constructor(e){super(),this.firestore=e}convertBytes(e){return new jc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Kr(this.firestore,null,t)}}class Hd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class zu extends rf{constructor(e,t,r,i,l,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new xp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(hw("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class xp extends zu{data(e={}){return super.data(e)}}class $c{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Hd(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new xp(this._firestore,this._userDataWriter,r.key,r,new Hd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Qe(Pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new xp(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Hd(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:l++}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const f=new xp(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Hd(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,C=-1;return 0!==c.type&&(_=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),1!==c.type&&(l=l.add(c.doc),C=l.indexOf(c.doc.key)),{type:Ty(c.type),doc:f,oldIndex:_,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Ty(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return jt()}}function Xg(n,e){return n instanceof zu&&e instanceof zu?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof $c&&e instanceof $c&&n._firestore===e._firestore&&_y(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class $d extends Ey{constructor(e){super(),this.firestore=e}convertBytes(e){return new jc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Kr(this.firestore,null,t)}}function HE(n,e,t){n=nr(n,Kr);const r=nr(n.firestore,fi),i=mw(n.converter,e,t);return em(r,[lw(tf(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Ti.none())])}function $E(n,e,t,...r){n=nr(n,Kr);const i=nr(n.firestore,fi),l=tf(i);let c;return c="string"==typeof(e=(0,W.m9)(e))||e instanceof Bd?SE(l,"updateDoc",n._key,e,t,r):IE(l,"updateDoc",n._key,e),em(i,[c.toMutation(n._key,Ti.exists(!0))])}function YS(n,...e){var t,r,i;n=(0,W.m9)(n);let l={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||rw(e[c])||(l=e[c],c++);const f={includeMetadataChanges:l.includeMetadataChanges};if(rw(e[c])){const F=e[c];e[c]=null===(t=F.next)||void 0===t?void 0:t.bind(F),e[c+1]=null===(r=F.error)||void 0===r?void 0:r.bind(F),e[c+2]=null===(i=F.complete)||void 0===i?void 0:i.bind(F)}let _,C,R;if(n instanceof Kr)C=nr(n.firestore,fi),R=Rc(n._key.path),_={next:F=>{e[c]&&e[c](qE(C,n,F))},error:e[c+1],complete:e[c+2]};else{const F=nr(n,Lo);C=nr(F.firestore,fi),R=F._query;const H=new $d(C);_={next:J=>{e[c]&&e[c](new $c(C,H,F,J))},error:e[c+1],complete:e[c+2]},rl(n._query)}return function(F,H,J,ie){const we=new sy(ie),Fe=new P0(H,we,J);return F.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){return $_(yield $g(F),Fe)})),()=>{we.Dc(),F.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){return Gb(yield $g(F),Fe)}))}}(cs(C),R,f,_)}function em(n,e){return function(t,r){const i=new ks;return t.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){return function yS(n,e,t){return F0.apply(this,arguments)}(yield Q0(t),r,i)})),i.promise}(cs(n),e)}function qE(n,e,t){const r=t.docs.get(e._key),i=new $d(n);return new zu(n,i,e._key,r,new Hd(t.hasPendingWrites,t.fromCache),e.converter)}const K1={maxAttempts:5};class eD{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=tf(e)}set(e,t,r){this._verifyNotCommitted();const i=uf(e,this._firestore),l=mw(i.converter,t,r),c=lw(this._dataReader,"WriteBatch.set",i._key,l,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,Ti.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const l=uf(e,this._firestore);let c;return c="string"==typeof(t=(0,W.m9)(t))||t instanceof Bd?SE(this._dataReader,"WriteBatch.update",l._key,t,r,i):IE(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,Ti.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=uf(e,this._firestore);return this._mutations=this._mutations.concat(new iu(t._key,Ti.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Qe(Pe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function uf(n,e){if((n=(0,W.m9)(n)).firestore!==e)throw new Qe(Pe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class KE extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=tf(e)}get(e){const t=uf(e,this._firestore),r=new VE(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return jt();const l=i[0];if(l.isFoundDocument())return new rf(this._firestore,r,l.key,l,t.converter);if(l.isNoDocument())return new rf(this._firestore,r,t._key,null,t.converter);throw jt()})}set(e,t,r){const i=uf(e,this._firestore),l=mw(i.converter,t,r),c=lw(this._dataReader,"Transaction.set",i._key,l,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const l=uf(e,this._firestore);let c;return c="string"==typeof(t=(0,W.m9)(t))||t instanceof Bd?SE(this._dataReader,"Transaction.update",l._key,t,r,i):IE(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,c),this}delete(e){const t=uf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=uf(e,this._firestore),r=new $d(this._firestore);return super.get(e).then(i=>new zu(this._firestore,r,t._key,i._document,new Hd(!1,!1),t.converter))}}!function(n,e=!0){Uf=Cs.SDK_VERSION,(0,Cs._registerComponent)(new bs.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const l=t.getProvider("app").getImmediate(),c=new fi(new aI(t.getProvider("auth-internal")),new cI(t.getProvider("app-check-internal")),function(f,_){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Qe(Pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lu(f.options.projectId,_)}(l,r),l);return i=Object.assign({useFetchStreams:e},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),(0,Cs.registerVersion)(oI,"3.13.0",n),(0,Cs.registerVersion)(oI,"3.13.0","esm2017")}();function eT(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Qe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function ww(){if(typeof Uint8Array>"u")throw new Qe("unimplemented","Uint8Arrays are not available in this environment.")}function Dy(){if(!function RC(){return typeof atob<"u"}())throw new Qe("unimplemented","Blobs are unavailable in Firestore in this environment.")}class tm{constructor(e){this._delegate=e}static fromBase64String(e){return Dy(),new tm(jc.fromBase64String(e))}static fromUint8Array(e){return ww(),new tm(jc.fromUint8Array(e))}toBase64(){return Dy(),this._delegate.toBase64()}toUint8Array(){return ww(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Cw(n){return function Q1(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class J1{enableIndexedDbPersistence(e,t){return function vE(n,e){US(n=nr(n,fi));const t=cs(n);if(t._uninitializedComponentsProvider)throw new Qe(Pe.FAILED_PRECONDITION,"SDK cache is already specified.");Sa("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new Vd;return sw(t,i,new ry(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function wE(n){US(n=nr(n,fi));const e=cs(n);if(e._uninitializedComponentsProvider)throw new Qe(Pe.FAILED_PRECONDITION,"SDK cache is already specified.");Sa("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new Vd;return sw(e,r,new iy(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function FS(n){if(n._initialized&&!n._terminated)throw new Qe(Pe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ks;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ke.Z)(function*(){try{yield(t=(0,ke.Z)(function*(r){if(!nu.D())return Promise.resolve();const i=r+"main";yield nu.delete(i)}),function(r){return t.apply(this,arguments)})(s0(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class tT{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Lu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Sa("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function nw(n,e,t,r={}){var i;const l=(n=nr(n,Wg))._getSettings(),c=`${e}:${t}`;if("firestore.googleapis.com"!==l.host&&l.host!==c&&Sa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},l),{host:c,ssl:!1})),r.mockUserToken){let f,_;if("string"==typeof r.mockUserToken)f=r.mockUserToken,_=Is.MOCK_USER;else{f=(0,W.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const C=r.mockUserToken.sub||r.mockUserToken.user_id;if(!C)throw new Qe(Pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Is(C)}n._authCredentials=new Bf(new cC(f,_))}}(this._delegate,e,t,r)}enableNetwork(){return function O1(n){return function dE(n){return n.asyncQueue.enqueue((0,ke.Z)(function*(){const e=yield Y0(n),t=yield Xh(n);return e.setNetworkEnabled(!0),function(r){const i=St(r);return i.vu.delete(0),kg(i)}(t)}))}(cs(n=nr(n,fi)))}(this._delegate)}disableNetwork(){return function CE(n){return function J0(n){return n.asyncQueue.enqueue((0,ke.Z)(function*(){const e=yield Y0(n),t=yield Xh(n);return e.setNetworkEnabled(!1),(r=(0,ke.Z)(function*(i){const l=St(i);l.vu.add(0),yield wp(l),l.bu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(cs(n=nr(n,fi)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,zg("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function LS(n){return function(e){const t=new ks;return e.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){return function bS(n,e){return Wh.apply(this,arguments)}(yield Q0(e),t)})),t.promise}(cs(n=nr(n,fi)))}(this._delegate)}onSnapshotsInSync(e){return function z1(n,e){return function pE(n,e){const t=new sy(e);return n.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){return r=yield $g(n),i=t,St(r).ku.add(i),void i.next();var r,i})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){return r=yield $g(n),i=t,void St(r).ku.delete(i);var r,i}))}}(cs(n=nr(n,fi)),rw(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Qe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new a(this,NS(this._delegate,e))}catch(t){throw oa(t,"collection()","Firestore.collection()")}}doc(e){try{return new ou(this,my(this._delegate,e))}catch(t){throw oa(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ra(this,function OS(n,e){if(n=nr(n,Wg),py("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Qe(Pe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Lo(n,null,(t=e,new Pc(ar.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw oa(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function tD(n,e,t){n=nr(n,fi);const r=Object.assign(Object.assign({},K1),t);return function(i){if(i.maxAttempts<1)throw new Qe(Pe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,l,c){const f=new ks;return i.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){const _=yield function uE(n){return dy(n).then(e=>e.datastore)}(i);new aE(i.asyncQueue,_,c,l,f).run()})),f.promise}(cs(n),i=>e(new KE(n,i)),r)}(this._delegate,t=>e(new aD(this,t)))}batch(){return cs(this._delegate),new lD(new eD(this._delegate,e=>em(this._delegate,e)))}loadBundle(e){return function k1(n,e){const t=cs(n=nr(n,fi)),r=new _E;return function xS(n,e,t,r){const i=function(l,c){let f;return f="string"==typeof l?Dv().encode(l):l,_=function(_,C){if(_ instanceof Uint8Array)return oE(_,C);if(_ instanceof ArrayBuffer)return oE(new Uint8Array(_),C);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new DS(_,c);var _}(t,kd(e));n.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){!function sE(n,e,t){const r=St(n);var i;(i=(0,ke.Z)(function*(l,c,f){try{const _=yield c.getMetadata();if(yield function(H,J){const ie=St(H),we=Gi(J.createTime);return ie.persistence.runTransaction("hasNewerBundle","readonly",Fe=>ie.qs.getBundleMetadata(Fe,J.id)).then(Fe=>!!Fe&&Fe.createTime.compareTo(we)>=0)}(l.localStore,_))return yield c.close(),f._completeWith({taskState:"Success",documentsLoaded:(H=_).totalDocuments,bytesLoaded:H.totalBytes,totalDocuments:H.totalDocuments,totalBytes:H.totalBytes}),Promise.resolve(new Set);f._updateProgress(R0(_));const C=new Kb(_,l.localStore,c.serializer);let R=yield c.bc();for(;R;){const H=yield C.zu(R);H&&f._updateProgress(H),R=yield c.bc()}const F=yield C.complete();return yield Ud(l,F.Ju,void 0),yield function(H,J){const ie=St(H);return ie.persistence.runTransaction("Save bundle","readwrite",we=>ie.qs.saveBundleMetadata(we,J))}(l.localStore,_),f._completeWith(F.progress),Promise.resolve(F.Hu)}catch(_){return Sa("SyncEngine",`Loading bundle failed with ${_}`),f._failWith(_),Promise.resolve(new Set)}var H}),function(l,c,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield Q0(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function F1(n,e){return function MS(n,e){return n.asyncQueue.enqueue((0,ke.Z)(function*(){return function(t,r){const i=St(t);return i.persistence.runTransaction("Get named query","readonly",l=>i.qs.getNamedQuery(l,r))}(yield Ks(n),e)}))}(cs(n=nr(n,fi)),e).then(t=>t?new Lo(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ra(this,t):null)}}class Ay extends Ey{constructor(e){super(),this.firestore=e}convertBytes(e){return new tm(new jc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ou.forKey(t,this.firestore,null)}}class aD{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Ay(e)}get(e){const t=u(e);return this._delegate.get(t).then(r=>new xy(this._firestore,new zu(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=u(e);return r?(eT("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const l=u(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...i),this}delete(e){const t=u(e);return this._delegate.delete(t),this}}class lD{constructor(e){this._delegate=e}set(e,t,r){const i=u(e);return r?(eT("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const l=u(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...i),this}delete(e){const t=u(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Mp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new xp(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new My(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Mp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let l=i.get(t);return l||(l=new Mp(e,new Ay(e),t),i.set(t,l)),l}}Mp.INSTANCES=new WeakMap;class ou{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ay(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Qe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ou(t,new Kr(t._delegate,r,new Mt(e)))}static forKey(e,t,r){return new ou(t,new Kr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new a(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new a(this.firestore,NS(this._delegate,e))}catch(t){throw oa(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,W.m9)(e))instanceof Kr&&gE(this._delegate,e)}set(e,t){t=eT("DocumentReference.set",t);try{return t?HE(this._delegate,e,t):HE(this._delegate,e)}catch(r){throw oa(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?$E(this._delegate,e):$E(this._delegate,e,t,...r)}catch(i){throw oa(i,"updateDoc()","DocumentReference.update()")}}delete(){return function KS(n){return em(nr(n.firestore,fi),[new iu(n._key,Ti.none())])}(this._delegate)}onSnapshot(...e){const t=uD(e),r=cD(e,i=>new xy(this.firestore,new zu(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return YS(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function WS(n){n=nr(n,Kr);const e=nr(n.firestore,fi),t=cs(e),r=new $d(e);return function qg(n,e){const t=new ks;return n.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){return(r=(0,ke.Z)(function*(i,l,c){try{const f=yield function(_,C){const R=St(_);return R.persistence.runTransaction("read document","readonly",F=>R.localDocuments.getDocument(F,C))}(i,l);f.isFoundDocument()?c.resolve(f):f.isNoDocument()?c.resolve(null):c.reject(new Qe(Pe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const _=Cp(f,`Failed to get document '${l} from cache`);c.reject(_)}}),function(i,l,c){return r.apply(this,arguments)})(yield Ks(n),e,t);var r})),t.promise}(t,n._key).then(i=>new zu(e,r,n._key,i,new Hd(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function j1(n){n=nr(n,Kr);const e=nr(n.firestore,fi);return hE(cs(e),n._key,{source:"server"}).then(t=>qE(e,n,t))}(this._delegate):function ZE(n){n=nr(n,Kr);const e=nr(n.firestore,fi);return hE(cs(e),n._key).then(t=>qE(e,n,t))}(this._delegate),t.then(r=>new xy(this.firestore,new zu(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ou(this.firestore,this._delegate.withConverter(e?Mp.getInstance(this.firestore,e):null))}}function oa(n,e,t){return n.message=n.message.replace(e,t),n}function uD(n){for(const e of n)if("object"==typeof e&&!Cw(e))return e;return{}}function cD(n,e){var t,r;let i;return i=Cw(n[0])?n[0]:Cw(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:l=>{i.next&&i.next(e(l))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class xy{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ou(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Xg(this._delegate,e._delegate)}}class My extends xy{data(e){const t=this._delegate.data(e);return function Vm(n,e){n||jt()}(void 0!==t),t}}class Ra{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ay(e)}where(e,t,r){try{return new Ra(this.firestore,Zd(this._delegate,function pw(n,e,t){const r=e,i=hw("where",n);return Qg._create(i,r,t)}(e,t,r)))}catch(i){throw oa(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ra(this.firestore,Zd(this._delegate,function PE(n,e="asc"){const t=e,r=hw("orderBy",n);return Cy._create(r,t)}(e,t)))}catch(r){throw oa(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ra(this.firestore,Zd(this._delegate,function RE(n){return tw("limit",n),by._create("limit",n,"F")}(e)))}catch(t){throw oa(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ra(this.firestore,Zd(this._delegate,function $S(n){return tw("limitToLast",n),by._create("limitToLast",n,"L")}(e)))}catch(t){throw oa(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ra(this.firestore,Zd(this._delegate,function Hc(...n){return Ap._create("startAt",n,!0)}(...e)))}catch(t){throw oa(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ra(this.firestore,Zd(this._delegate,function jd(...n){return Ap._create("startAfter",n,!1)}(...e)))}catch(t){throw oa(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ra(this.firestore,Zd(this._delegate,function gw(...n){return Jg._create("endBefore",n,!1)}(...e)))}catch(t){throw oa(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ra(this.firestore,Zd(this._delegate,function NE(...n){return Jg._create("endAt",n,!0)}(...e)))}catch(t){throw oa(t,"endAt()","Query.endAt()")}}isEqual(e){return _y(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function $1(n){n=nr(n,Lo);const e=nr(n.firestore,fi),t=cs(e),r=new $d(e);return function X0(n,e){const t=new ks;return n.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){return(r=(0,ke.Z)(function*(i,l,c){try{const f=yield P_(i,l,!0),_=new Yb(l,f.ir),C=_.sc(f.documents),R=_.applyChanges(C,!1);c.resolve(R.snapshot)}catch(f){const _=Cp(f,`Failed to execute query '${l} against cache`);c.reject(_)}}),function(i,l,c){return r.apply(this,arguments)})(yield Ks(n),e,t);var r})),t.promise}(t,n._query).then(i=>new $c(e,r,n,i))}(this._delegate):"server"===e?.source?function jE(n){n=nr(n,Lo);const e=nr(n.firestore,fi),t=cs(e),r=new $d(e);return fE(t,n._query,{source:"server"}).then(i=>new $c(e,r,n,i))}(this._delegate):function H1(n){n=nr(n,Lo);const e=nr(n.firestore,fi),t=cs(e),r=new $d(e);return rl(n._query),fE(t,n._query).then(i=>new $c(e,r,n,i))}(this._delegate),t.then(r=>new s(this.firestore,new $c(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=uD(e),r=cD(e,i=>new s(this.firestore,new $c(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return YS(this._delegate,t,r)}withConverter(e){return new Ra(this.firestore,this._delegate.withConverter(e?Mp.getInstance(this.firestore,e):null))}}class X1{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new My(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class s{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ra(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new My(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new X1(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new My(this._firestore,r))})}isEqual(e){return Xg(this._delegate,e._delegate)}}class a extends Ra{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ou(this.firestore,e):null}doc(e){try{return new ou(this.firestore,void 0===e?my(this._delegate):my(this._delegate,e))}catch(t){throw oa(t,"doc()","CollectionReference.doc()")}}add(e){return function q1(n,e){const t=nr(n.firestore,fi),r=my(n),i=mw(n.converter,e);return em(t,[lw(tf(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Ti.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ou(this.firestore,t))}isEqual(e){return gE(this._delegate,e._delegate)}withConverter(e){return new a(this.firestore,this._delegate.withConverter(e?Mp.getInstance(this.firestore,e):null))}}function u(n){return nr(n,Kr)}class d{constructor(...e){this._delegate=new Bd(...e)}static documentId(){return new d(qi.keyField().canonicalString())}isEqual(e){return(e=(0,W.m9)(e))instanceof Bd&&this._delegate._internalPath.isEqual(e._internalPath)}}class h{constructor(e){this._delegate=e}static serverTimestamp(){const e=function rD(){return new uw("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new h(e)}static delete(){const e=function nD(){return new Yg("deleteField")}();return e._methodName="FieldValue.delete",new h(e)}static arrayUnion(...e){const t=function iD(...n){return new wy("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new h(t)}static arrayRemove(...e){const t=function YE(...n){return new BS("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new h(t)}static increment(e){const t=function QE(n){return new U1("increment",n)}(e);return t._methodName="FieldValue.increment",new h(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const m={Firestore:tT,GeoPoint:Kg,Timestamp:Ei,Blob:tm,Transaction:aD,WriteBatch:lD,DocumentReference:ou,DocumentSnapshot:xy,Query:Ra,QueryDocumentSnapshot:My,QuerySnapshot:s,CollectionReference:a,FieldPath:d,FieldValue:h,setLogLevel:function oD(n){!function uC(n){ku.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function D(n){(function w(n,e){n.INTERNAL.registerComponent(new bs.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},m)))})(n,(e,t)=>new tT(e,t,new J1)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(Fr.Z);var P=B(7579),U=B(6451),z=B(5363),Q=B(3900),fe=B(6063);class Ee extends P.x{constructor(e=1/0,t=1/0,r=fe.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:l,_windowTime:c}=this;t||(r.push(e),!i&&r.push(l.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,l=i.slice();for(let c=0;c<l.length&&!e.closed;c+=r?1:2)e.next(l[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,l=(i?1:2)*e;if(e<1/0&&l<r.length&&r.splice(0,r.length-l),!i){const c=t.now();let f=0;for(let _=1;_<r.length&&r[_]<=c;_+=2)f=_;f&&r.splice(0,f+1)}}}var Ge=B(3099);function pt(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,Ge.B)({connector:()=>new Ee(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}var Rt=B(590),Gt=B(576);function gn(n,e){return(0,Gt.m)(e)?(0,Q.w)(()=>n,e):(0,Q.w)(()=>n)}var ot=B(9468);B(259);const hD=new Map,ex={activated:!1,tokenObservers:[]},mN={initialized:!1,enabled:!1};function Ds(n){return hD.get(n)||Object.assign({},ex)}function nT(){return mN}const fD="https://content-firebaseappcheck.googleapis.com/v1",wN="exchangeDebugToken",tx={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class bN{constructor(e,t,r,i,l){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=l,this.pending=null,this.nextErrorWaitInterval=i,i>l)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ke.Z)(function*(){t.stop();try{t.pending=new W.BH,yield function EN(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new W.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const aa=new W.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function pD(n){if(!Ds(n).activated)throw aa.create("use-before-activation",{appName:n.name})}function sT(n,e){return mD.apply(this,arguments)}function mD(){return mD=(0,ke.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const F=yield i.getHeartbeatsHeader();F&&(r["X-Firebase-Client"]=F)}const l={method:"POST",body:JSON.stringify(e),headers:r};let c,f;try{c=yield fetch(n,l)}catch(F){throw aa.create("fetch-network-error",{originalErrorMessage:F?.message})}if(200!==c.status)throw aa.create("fetch-status-error",{httpStatus:c.status});try{f=yield c.json()}catch(F){throw aa.create("fetch-parse-error",{originalErrorMessage:F?.message})}const _=f.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw aa.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const C=1e3*Number(_[1]),R=Date.now();return{token:f.token,expireTimeMillis:R+C,issuedAtTimeMillis:R}}),mD.apply(this,arguments)}function nx(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${fD}/projects/${t}/apps/${r}:${wN}?key=${i}`,body:{debug_token:e}}}const DN="firebase-app-check-database",AN=1,bw="firebase-app-check-store";let oT=null;function _D(){return _D=(0,ke.Z)(function*(n,e){const r=(yield function ix(){return oT||(oT=new Promise((n,e)=>{try{const t=indexedDB.open(DN,AN);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(aa.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(bw,{keyPath:"compositeKey"})}}catch(t){e(aa.create("storage-open",{originalErrorMessage:t?.message}))}}),oT)}()).transaction(bw,"readwrite"),l=r.objectStore(bw).put({compositeKey:n,value:e});return new Promise((c,f)=>{l.onsuccess=_=>{c()},r.onerror=_=>{var C;f(aa.create("storage-set",{originalErrorMessage:null===(C=_.target.error)||void 0===C?void 0:C.message}))}})}),_D.apply(this,arguments)}const Ew=new ii.Yd("@firebase/app-check");function wD(n,e){return(0,W.hl)()?function MN(n,e){return function sx(n,e){return _D.apply(this,arguments)}(function ax(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Ew.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function bD(){return nT().enabled}function ED(){return TD.apply(this,arguments)}function TD(){return TD=(0,ke.Z)(function*(){const n=nT();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),TD.apply(this,arguments)}const FN={error:"UNKNOWN_ERROR"};function LN(n){return W.US.encodeString(JSON.stringify(n),!1)}function aT(n){return ID.apply(this,arguments)}function ID(){return ID=(0,ke.Z)(function*(n,e=!1){const t=n.app;pD(t);const r=Ds(t);let l,i=r.token;if(i&&!Py(i)&&(r.token=void 0,i=void 0),!i){const _=yield r.cachedTokenPromise;_&&(Py(_)?i=_:yield wD(t,void 0))}if(!e&&i&&Py(i))return{token:i.token};let f,c=!1;if(bD()){r.exchangeTokenPromise||(r.exchangeTokenPromise=sT(nx(t,yield ED()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),c=!0);const _=yield r.exchangeTokenPromise;return yield wD(t,_),r.token=_,{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),c=!0),i=yield Ds(t).exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?Ew.warn(_.message):Ew.error(_),l=_}return i?l?f=Py(i)?{token:i.token,internalError:l}:dx(l):(f={token:i.token},r.token=i,yield wD(t,i)):f=dx(l),c&&function cx(n,e){const t=Ds(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,f),f}),ID.apply(this,arguments)}function SD(){return SD=(0,ke.Z)(function*(n){const e=n.app;pD(e);const{provider:t}=Ds(e);if(bD()){const r=yield ED(),{token:i}=yield sT(nx(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}}),SD.apply(this,arguments)}function AD(n,e){const t=Ds(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function ux(n){const{app:e}=n,t=Ds(e);let r=t.tokenRefresher;r||(r=function UN(n){const{app:e}=n;return new bN((0,ke.Z)(function*(){let r;if(r=Ds(e).token?yield aT(n,!0):yield aT(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Ds(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},tx.RETRIAL_MIN_WAIT,tx.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Py(n){return n.expireTimeMillis-Date.now()>0}function dx(n){return{token:LN(FN),error:n}}class VN{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Ds(this.app);for(const t of e)AD(this.app,t.next);return Promise.resolve()}}const vx="app-check-internal";!function XN(){(0,Cs._registerComponent)(new bs.wA("app-check",n=>function BN(n,e){return new VN(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(vx).initialize()})),(0,Cs._registerComponent)(new bs.wA(vx,n=>function ZN(n){return{getToken:e=>aT(n,e),getLimitedUseToken:()=>function lx(n){return SD.apply(this,arguments)}(n),addTokenListener:e=>function DD(n,e,t,r){const{app:i}=n,l=Ds(i);if(l.tokenObservers=[...l.tokenObservers,{next:t,error:r,type:e}],l.token&&Py(l.token)){const f=l.token;Promise.resolve().then(()=>{t({token:f.token}),ux(n)}).catch(()=>{})}l.cachedTokenPromise.then(()=>ux(n))}(n,"INTERNAL",e),removeTokenListener:e=>AD(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Cs.registerVersion)("@firebase/app-check","0.8.0")}();class uT{constructor(){return(0,Xn.vb)("app-check")}}typeof window<"u"&&window;var ND=B(9260);const OD=new o.OlP("angularfire2.auth.use-emulator"),kD=new o.OlP("angularfire2.auth.settings"),FD=new o.OlP("angularfire2.auth.tenant-id"),LD=new o.OlP("angularfire2.auth.langugage-code"),UD=new o.OlP("angularfire2.auth.use-device-language"),VD=new o.OlP("angularfire.auth.persistence"),BD=(n,e,t,r,i,l,c,f)=>(0,$n.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,l&&_.useDeviceLanguage(),c)for(const[C,R]of Object.entries(c))_.settings[C]=R;return f&&_.setPersistence(f),_},[t,r,i,l,c,f]);let nm=(()=>{class n{constructor(t,r,i,l,c,f,_,C,R,F,H,J){const ie=new P.x,we=(0,Po.of)(void 0).pipe((0,z.Q)(c.outsideAngular),(0,Q.w)(()=>l.runOutsideAngular(()=>Promise.resolve().then(B.bind(B,2644)))),(0,un.U)(()=>(0,$n.on)(t,l,r)),(0,un.U)(Fe=>BD(Fe,l,f,C,R,F,_,H)),pt({bufferSize:1,refCount:!1}));if((0,on.PM)(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Po.of)(null);else{we.pipe((0,Rt.P)()).subscribe();const lt=we.pipe((0,Q.w)(Qt=>Qt.getRedirectResult().then(An=>An,()=>null)),Xn.iC,pt({bufferSize:1,refCount:!1})),$t=we.pipe((0,Q.w)(Qt=>new zr.y(An=>({unsubscribe:l.runOutsideAngular(()=>Qt.onAuthStateChanged(In=>An.next(In),In=>An.error(In),()=>An.complete()))})))),Ut=we.pipe((0,Q.w)(Qt=>new zr.y(An=>({unsubscribe:l.runOutsideAngular(()=>Qt.onIdTokenChanged(In=>An.next(In),In=>An.error(In),()=>An.complete()))}))));this.authState=lt.pipe(gn($t),(0,ot.R)(c.outsideAngular),(0,z.Q)(c.insideAngular)),this.user=lt.pipe(gn(Ut),(0,ot.R)(c.outsideAngular),(0,z.Q)(c.insideAngular)),this.idToken=this.user.pipe((0,Q.w)(Qt=>Qt?(0,ws.D)(Qt.getIdToken()):(0,Po.of)(null))),this.idTokenResult=this.user.pipe((0,Q.w)(Qt=>Qt?(0,ws.D)(Qt.getIdTokenResult()):(0,Po.of)(null))),this.credential=(0,U.T)(lt,ie,this.authState.pipe((0,bl.h)(Qt=>!Qt))).pipe((0,un.U)(Qt=>Qt?.user?Qt:null),(0,ot.R)(c.outsideAngular),(0,z.Q)(c.insideAngular))}return(0,$n.pX)(this,we,l,{spy:{apply:(Fe,lt,$t)=>{(Fe.startsWith("signIn")||Fe.startsWith("createUser"))&&$t.then(Ut=>ie.next(Ut))}}})}}return n.\u0275fac=function(t){return new(t||n)(o.LFG($n.Dh),o.LFG($n.xv,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(Xn.HU),o.LFG(OD,8),o.LFG(kD,8),o.LFG(FD,8),o.LFG(LD,8),o.LFG(UD,8),o.LFG(VD,8),o.LFG(uT,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),sO=(()=>{class n{constructor(){ND.Z.registerVersion("angularfire",Xn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[nm]}),n})();function Cx(n,e){return function oO(n,e=Mo.z){return new zr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function ZD(n,e){return Cx(n,e).pipe((0,un.U)(t=>({payload:t,type:"query"})))}function cT(n,e){return ZD(n,e).pipe((0,Wa.O)(void 0),ur(),(0,un.U)(([t,r])=>{const i=r.payload.docChanges(),l=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,f)=>{const _=i.find(R=>R.doc.ref.isEqual(c.ref)),C=t?.payload.docs.find(R=>R.ref.isEqual(c.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(c.metadata)||!_&&C&&JSON.stringify(C.metadata)===JSON.stringify(c.metadata)||l.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:c}})}),l}))}function bx(n,e,t){return cT(n,t).pipe((0,$l.R)((r,i)=>function lO(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function uO(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return jD(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return jD(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return jD(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(l=>l.payload),e),[]),oc(),(0,un.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function jD(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function Ex(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class Tx{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=cT(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,un.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe((0,Wa.O)(void 0),ur(),(0,bl.h)(([r,i])=>i.length>0||!r),(0,un.U)(([r,i])=>i),Xn.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,$l.R)((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Ex(e);return bx(this.query,t,this.afs.schedulers.outsideAngular).pipe(Xn.iC)}valueChanges(e={}){return ZD(this.query,this.afs.schedulers.outsideAngular).pipe((0,un.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Xn.iC)}get(e){return(0,ws.D)(this.query.get(e)).pipe(Xn.iC)}add(e){return this.ref.add(e)}doc(e){return new Ix(this.ref.doc(e),this.afs)}}class Ix{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:l}=Ax(r,t);return new Tx(i,l,this.afs)}snapshotChanges(){return function aO(n,e){return Cx(n,e).pipe((0,Wa.O)(void 0),ur(),(0,un.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Xn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,un.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,ws.D)(this.ref.get(e)).pipe(Xn.iC)}}class cO{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?cT(this.query,this.afs.schedulers.outsideAngular).pipe((0,un.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),(0,bl.h)(t=>t.length>0),Xn.iC):cT(this.query,this.afs.schedulers.outsideAngular).pipe(Xn.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,$l.R)((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Ex(e);return bx(this.query,t,this.afs.schedulers.outsideAngular).pipe(Xn.iC)}valueChanges(e={}){return ZD(this.query,this.afs.schedulers.outsideAngular).pipe((0,un.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Xn.iC)}get(e){return(0,ws.D)(this.query.get(e)).pipe(Xn.iC)}}const Sx=new o.OlP("angularfire2.enableFirestorePersistence"),Dx=new o.OlP("angularfire2.firestore.persistenceSettings"),dO=new o.OlP("angularfire2.firestore.settings"),hO=new o.OlP("angularfire2.firestore.use-emulator");function Ax(n,e=(t=>t)){return{query:e(n),ref:n}}let qc=(()=>{class n{constructor(t,r,i,l,c,f,_,C,R,F,H,J,ie,we,Fe,lt,$t){this.schedulers=_;const Ut=(0,$n.on)(t,f,r),Qt=R;F&&BD(Ut,f,H,ie,we,Fe,J,lt),[this.firestore,this.persistenceEnabled$]=(0,$n.cc)(`${Ut.name}.firestore`,"AngularFirestore",Ut.name,()=>{const An=f.runOutsideAngular(()=>Ut.firestore());if(l&&An.settings(l),Qt&&An.useEmulator(...Qt),i&&!(0,on.PM)(c)){const In=()=>{try{return(0,ws.D)(An.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(dr){return typeof console<"u"&&console.warn(dr),(0,Po.of)(!1)}};return[An,f.runOutsideAngular(In)]}return[An,(0,Po.of)(!1)]},[l,Qt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:l,query:c}=Ax(i,r),f=this.schedulers.ngZone.run(()=>l);return new Tx(f,c,this)}collectionGroup(t,r){const i=r||(c=>c),l=this.firestore.collectionGroup(t);return new cO(i(l),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new Ix(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(o.LFG($n.Dh),o.LFG($n.xv,8),o.LFG(Sx,8),o.LFG(dO,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(Xn.HU),o.LFG(Dx,8),o.LFG(hO,8),o.LFG(nm,8),o.LFG(OD,8),o.LFG(kD,8),o.LFG(FD,8),o.LFG(LD,8),o.LFG(UD,8),o.LFG(VD,8),o.LFG(uT,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),fO=(()=>{class n{constructor(){ND.Z.registerVersion("angularfire",Xn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:Sx,useValue:!0},{provide:Dx,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[qc]}),n})();var xx=B(5032);const Mx="@firebase/database";let HD="";function Rx(n){HD=n}class mO{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,W.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,W.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class _O{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,W.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Nx=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new mO(e)}}catch{}return new _O},rm=Nx("localStorage"),$D=Nx("sessionStorage"),Ry=new ii.Yd("@firebase/database"),Ox=function(){let n=1;return function(){return n++}}(),kx=function(n){const e=(0,W.dS)(n),t=new W.gQ;t.update(e);const r=t.digest();return W.US.encodeByteArray(r)},Tw=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Tw.apply(null,r):e+="object"==typeof r?(0,W.Wl)(r):r,e+=" "}return e};let im=null,Fx=!0;const Lx=function(n,e){(0,W.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Ry.logLevel=ii.in.VERBOSE,im=Ry.log.bind(Ry),e&&$D.set("logging_enabled",!0)):"function"==typeof n?im=n:(im=null,$D.remove("logging_enabled"))},Uo=function(...n){if(!0===Fx&&(Fx=!1,null===im&&!0===$D.get("logging_enabled")&&Lx(!0)),im){const e=Tw.apply(null,n);im(e)}},Iw=function(n){return function(...e){Uo(n,...e)}},qD=function(...n){const e="FIREBASE INTERNAL ERROR: "+Tw(...n);Ry.error(e)},qd=function(...n){const e=`FIREBASE FATAL ERROR: ${Tw(...n)}`;throw Ry.error(e),new Error(e)},Na=function(...n){const e="FIREBASE WARNING: "+Tw(...n);Ry.warn(e)},dT=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Pp="[MIN_NAME]",cf="[MAX_NAME]",sm=function(n,e){if(n===e)return 0;if(n===Pp||e===cf)return-1;if(e===Pp||n===cf)return 1;{const t=Bx(n),r=Bx(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},wO=function(n,e){return n===e?0:n<e?-1:1},Sw=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,W.Wl)(e))},zD=function(n){if("object"!=typeof n||null===n)return(0,W.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,W.Wl)(e[r]),t+=":",t+=zD(n[e[r]]);return t+="}",t},Ux=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Vo(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const Vx=function(n){(0,W.hu)(!dT(n),"Invalid JSON number");const r=1023;let i,l,c,f,_;0===n?(l=0,c=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),r),l=f+r,c=Math.round(n*Math.pow(2,52-f)-Math.pow(2,52))):(l=0,c=Math.round(n/Math.pow(2,-1074))));const C=[];for(_=52;_;_-=1)C.push(c%2?1:0),c=Math.floor(c/2);for(_=11;_;_-=1)C.push(l%2?1:0),l=Math.floor(l/2);C.push(i?1:0),C.reverse();const R=C.join("");let F="";for(_=0;_<64;_+=8){let H=parseInt(R.substr(_,8),2).toString(16);1===H.length&&(H="0"+H),F+=H}return F.toLowerCase()},TO=new RegExp("^-?(0*)\\d{1,10}$"),Bx=function(n){if(TO.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Ny=function(n){try{n()}catch(e){setTimeout(()=>{throw Na("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},DO=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Dw=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class AO{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Na(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class xO{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Uo("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Na(e)}}let Aw=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const qx=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Wx="websocket",Kx="long_polling";class WD{constructor(e,t,r,i,l=!1,c="",f=!1,_=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=l,this.persistenceKey=c,this.includeNamespaceInQueryParams=f,this.isUsingEmulator=_,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=rm.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&rm.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Yx(n,e,t){let r;if((0,W.hu)("string"==typeof e,"typeof type must == string"),(0,W.hu)("object"==typeof t,"typeof params must == object"),e===Wx)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==Kx)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function MO(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Vo(t,(l,c)=>{i.push(l+"="+c)}),r+i.join("&")}class PO{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,W.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,W.p$)(this.counters_)}}const KD={},YD={};function QD(n){const e=n.toString();return KD[e]||(KD[e]=new PO),KD[e]}class NO{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Ny(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Rp{constructor(e,t,r,i,l,c,f){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=l,this.transportSessionId=c,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Iw(e),this.stats_=QD(t),this.urlFn=_=>(this.appCheckToken&&(_.ac=this.appCheckToken),Yx(t,Kx,_))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new NO(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,W.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new JD((...l)=>{const[c,f,_,C,R]=l;if(this.incrementIncomingBytes_(l),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=f,this.password=_;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_()}},(...l)=>{const[c,f]=l;this.incrementIncomingBytes_(l),this.myPacketOrderer.handleResponse(c,f)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&qx.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Rp.forceAllow_=!0}static forceDisallow(){Rp.forceDisallow_=!0}static isAvailable(){return!((0,W.Yr)()||!Rp.forceAllow_&&(Rp.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,W.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,W.h$)(t),i=Ux(r,1840);for(let l=0;l<i.length;l++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[l]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,W.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,W.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class JD{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,W.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Ox(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=JD.createIFrame_();let l="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(l='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+l+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(f){Uo("frame writing exception"),f.stack&&Uo(f.stack),Uo(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Uo("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+i+"="+c.seg+"&ts"+i+"="+c.ts+"&d"+i+"="+c.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,W.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Uo("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let fT=null;typeof MozWebSocket<"u"?fT=MozWebSocket:typeof WebSocket<"u"&&(fT=WebSocket);let Oy=(()=>{class n{constructor(t,r,i,l,c,f,_){this.connId=t,this.applicationId=i,this.appCheckToken=l,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Iw(this.connId),this.stats_=QD(r),this.connURL=n.connectionURL_(r,f,_,l,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,l,c){const f={v:"5"};return!(0,W.Yr)()&&typeof location<"u"&&location.hostname&&qx.test(location.hostname)&&(f.r="f"),r&&(f.s=r),i&&(f.ls=i),l&&(f.ac=l),c&&(f.p=c),Yx(t,Wx,f)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,rm.set("previous_websocket_failure",!0);try{let i;if((0,W.Yr)()){i={headers:{"User-Agent":`Firebase/5/${HD}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,f=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;f&&(i.proxy={origin:f})}this.mySock=new fT(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const l=i.message||i.data;return l&&this.log_(l),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const l=i.message||i.data;l&&this.log_(l),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==fT&&!n.forceDisallow_}static previouslyFailed(){return rm.isInMemoryStorage||!0===rm.get("previous_websocket_failure")}markConnectionHealthy(){rm.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,W.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,W.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,W.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=Ux(r,16384);i.length>1&&this.sendString_(String(i.length));for(let l=0;l<i.length;l++)this.sendString_(i[l])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),rM=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Rp,Oy]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Oy&&Oy.isAvailable();let i=r&&!Oy.previouslyFailed();if(t.webSocketOnly&&(r||Na("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Oy];else{const l=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&l.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class cM{constructor(e,t,r,i,l,c,f,_,C,R){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=l,this.onMessage_=c,this.onReady_=f,this.onDisconnect_=_,this.onKill_=C,this.lastSessionId=R,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Iw("c:"+this.id+":"),this.transportManager_=new rM(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Dw(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Sw("t",e),r=Sw("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Sw("t",e),r=Sw("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Sw("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?qD("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):qD("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Na("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Dw(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Dw(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(rm.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class dM{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class hM{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,W.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let l=0;l<i.length;l++)if(i[l].callback===t&&(!r||r===i[l].context))return void i.splice(l,1)}validateEventType_(e){(0,W.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class pT extends hM{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,W.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new pT}getInitialEvent(e){return(0,W.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const fM=32,pM=768;class Ur{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Er(){return new Ur("")}function Yn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Np(n){return n.pieces_.length-n.pieceNum_}function pi(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Ur(n.pieces_,e)}function eA(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function xw(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function gM(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Ur(e,0)}function Wi(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Ur)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Ur(t,0)}function Qn(n){return n.pieceNum_>=n.pieces_.length}function il(n,e){const t=Yn(n),r=Yn(e);if(null===t)return e;if(t===r)return il(pi(n),pi(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function tk(n,e){const t=xw(n,0),r=xw(e,0);for(let i=0;i<t.length&&i<r.length;i++){const l=sm(t[i],r[i]);if(0!==l)return l}return t.length===r.length?0:t.length<r.length?-1:1}function tA(n,e){if(Np(n)!==Np(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Gu(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Np(n)>Np(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class nk{constructor(e,t){this.errorPrefix_=t,this.parts_=xw(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,W.ug)(this.parts_[r]);mM(this)}}function mM(n){if(n.byteLength_>pM)throw new Error(n.errorPrefix_+"has a key path longer than "+pM+" bytes ("+n.byteLength_+").");if(n.parts_.length>fM)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+fM+") or object contains a cycle "+om(n))}function om(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class nA extends hM{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new nA}getInitialEvent(e){return(0,W.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Mw=1e3;let mT,am=(()=>{class n extends dM{constructor(t,r,i,l,c,f,_,C){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=l,this.onServerInfoUpdate_=c,this.authTokenProvider_=f,this.appCheckTokenProvider_=_,this.authOverride_=C,this.id=n.nextPersistentConnectionId_++,this.log_=Iw("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Mw,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,C&&!(0,W.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");nA.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&pT.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const l=++this.requestNumber_,c={r:l,a:t,b:r};this.log_((0,W.Wl)(c)),(0,W.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[l]=i)}get(t){this.initConnection_();const r=new W.BH,l={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:f=>{const _=f.d;"ok"===f.s?r.resolve(_):r.reject(_)}};return this.outstandingGets_.push(l),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,l){this.initConnection_();const c=t._queryIdentifier,f=t._path.toString();this.log_("Listen called for "+f+" "+c),this.listens.has(f)||this.listens.set(f,new Map),(0,W.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,W.hu)(!this.listens.get(f).has(c),"listen() called twice for same path/queryId.");const _={onComplete:l,hashFn:r,query:t,tag:i};this.listens.get(f).set(c,_),this.connected_&&this.sendListen_(_)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),l=r._queryIdentifier;this.log_("Listen on "+i+" for "+l);const c={p:i};t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,_=>{const C=_.d,R=_.s;n.warnOnListenWarnings_(C,r),(this.listens.get(i)&&this.listens.get(i).get(l))===t&&(this.log_("listen response",_),"ok"!==R&&this.removeListen_(i,l),t.onComplete&&t.onComplete(R,C))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,W.r3)(t,"w")){const i=(0,W.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const l='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();Na(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${l} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,W.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,W.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,l=>{const c=l.s,f=l.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),l=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+l),(0,W.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,l)&&this.connected_&&this.sendUnlisten_(i,l,t._queryObject,r)}sendUnlisten_(t,r,i,l){this.log_("Unlisten on "+t+" for "+r);const c={p:t};l&&(c.q=i,c.t=l),this.sendRequest("n",c)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,l){const c={p:r,d:i};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,f=>{l&&setTimeout(()=>{l(f.s,f.d)},Math.floor(0))})}put(t,r,i,l){this.putInternal("p",t,r,i,l)}merge(t,r,i,l){this.putInternal("m",t,r,i,l)}putInternal(t,r,i,l,c){this.initConnection_();const f={p:r,d:i};void 0!==c&&(f.h=c),this.outstandingPuts_.push({action:t,request:f,onComplete:l}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,l=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),l&&l(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,W.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):qD("Unrecognized action received from server: "+(0,W.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,W.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Mw,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Mw,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Mw),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,ke.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),l=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,f=t.lastSessionId;let _=!1,C=null;const R=function(){C?C.close():(_=!0,l())};t.realtime_={close:R,sendRequest:function(J){(0,W.hu)(C,"sendRequest call when we're not connected not allowed."),C.sendRequest(J)}};const H=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[J,ie]=yield Promise.all([t.authTokenProvider_.getToken(H),t.appCheckTokenProvider_.getToken(H)]);_?Uo("getToken() completed but was canceled"):(Uo("getToken() completed. Creating connection."),t.authToken_=J&&J.accessToken,t.appCheckToken_=ie&&ie.token,C=new cM(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,l,we=>{Na(we+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},f))}catch(J){t.log_("Failed to get token: "+J),_||(t.repoInfo_.nodeAdmin&&Na(J),R())}}})()}interrupt(t){Uo("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Uo("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,W.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Mw,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(c=>zD(c)).join("$"):"default";const l=this.removeListen_(t,i);l&&l.onComplete&&l.onComplete("permission_denied")}removeListen_(t,r){const i=new Ur(t).toString();let l;if(this.listens.has(i)){const c=this.listens.get(i);l=c.get(r),c.delete(r),0===c.size&&this.listens.delete(i)}else l=void 0;return l}onAuthRevoked_(t,r){Uo("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Uo("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,W.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+HD.replace(/\./g,"-")]=1,(0,W.uI)()?t["framework.cordova"]=1:(0,W.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=pT.getInstance().currentlyOnline();return(0,W.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class rr{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new rr(e,t)}}class gT{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new rr(Pp,e),i=new rr(Pp,t);return 0!==this.compare(r,i)}minPost(){return rr.MIN}}class vM extends gT{static get __EMPTY_NODE(){return mT}static set __EMPTY_NODE(e){mT=e}compare(e,t){return sm(e.name,t.name)}isDefinedOn(e){throw(0,W.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return rr.MIN}maxPost(){return new rr(cf,mT)}makePost(e,t){return(0,W.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new rr(e,mT)}toString(){return".key"}}const zd=new vM;class _T{constructor(e,t,r,i,l=null){this.isReverse_=i,this.resultGenerator_=l,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,i&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let iA,zc=(()=>{class n{constructor(t,r,i,l,c){this.key=t,this.value=r,this.color=i??n.RED,this.left=l??Ol.EMPTY_NODE,this.right=c??Ol.EMPTY_NODE}copy(t,r,i,l,c){return new n(t??this.key,r??this.value,i??this.color,l??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let l=this;const c=i(t,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(t,r,i),null):0===c?l.copy(null,r,null,null,null):l.copy(null,null,null,null,l.right.insert(t,r,i)),l.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ol.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,l;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Ol.EMPTY_NODE;l=i.right.min_(),i=i.copy(l.key,l.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Ol{constructor(e,t=Ol.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Ol(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,zc.BLACK,null,null))}remove(e){return new Ol(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,zc.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new _T(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new _T(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new _T(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new _T(this.root_,null,this.comparator_,!0,e)}}function ck(n,e){return sm(n.name,e.name)}function rA(n,e){return sm(n,e)}Ol.EMPTY_NODE=new class uk{copy(e,t,r,i,l){return this}insert(e,t,r){return new zc(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const wM=function(n){return"number"==typeof n?"number:"+Vx(n):"string:"+n},CM=function(n){if(n.isLeafNode()){const e=n.val();(0,W.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,W.r3)(e,".sv"),"Priority must be a string or number.")}else(0,W.hu)(n===iA||n.isEmpty(),"priority of unexpected type.");(0,W.hu)(n===iA||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let bM,EM,TM,ky=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,W.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),CM(this.priorityNode_)}static set __childrenNodeConstructor(t){bM=t}static get __childrenNodeConstructor(){return bM}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Qn(t)?this:".priority"===Yn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Yn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,W.hu)(".priority"!==i||1===Np(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(pi(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+wM(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?Vx(this.value_):this.value_,this.lazyHash_=kx(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,W.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,l=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(i);return(0,W.hu)(l>=0,"Unknown leaf type: "+r),(0,W.hu)(c>=0,"Unknown leaf type: "+i),l===c?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-l}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Ii=new class pk extends gT{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),l=r.compareTo(i);return 0===l?sm(e.name,t.name):l}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return rr.MIN}maxPost(){return new rr(cf,new ky("[PRIORITY-POST]",TM))}makePost(e,t){const r=EM(e);return new rr(t,new ky("[PRIORITY-POST]",r))}toString(){return".priority"}},gk=Math.log(2);class mk{constructor(e){this.count=parseInt(Math.log(e+1)/gk,10),this.current_=this.count-1;const i=(l=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const yT=function(n,e,t,r){n.sort(e);const i=function(_,C){const R=C-_;let F,H;if(0===R)return null;if(1===R)return F=n[_],H=t?t(F):F,new zc(H,F.node,zc.BLACK,null,null);{const J=parseInt(R/2,10)+_,ie=i(_,J),we=i(J+1,C);return F=n[J],H=t?t(F):F,new zc(H,F.node,zc.BLACK,ie,we)}},f=function(_){let C=null,R=null,F=n.length;const H=function(ie,we){const Fe=F-ie,lt=F;F-=ie;const $t=i(Fe+1,lt),Ut=n[Fe],Qt=t?t(Ut):Ut;J(new zc(Qt,Ut.node,we,null,$t))},J=function(ie){C?(C.left=ie,C=ie):(R=ie,C=ie)};for(let ie=0;ie<_.count;++ie){const we=_.nextBitIsOne(),Fe=Math.pow(2,_.count-(ie+1));we?H(Fe,zc.BLACK):(H(Fe,zc.BLACK),H(Fe,zc.RED))}return R}(new mk(n.length));return new Ol(r||e,f)};let sA;const Fy={};class df{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,W.hu)(Fy&&Ii,"ChildrenNode.ts has not been loaded"),sA=sA||new df({".priority":Fy},{".priority":Ii}),sA}get(e){const t=(0,W.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Ol?t:null}hasIndex(e){return(0,W.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,W.hu)(e!==zd,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const l=t.getIterator(rr.Wrap);let f,c=l.getNext();for(;c;)i=i||e.isDefinedOn(c.node),r.push(c),c=l.getNext();f=i?yT(r,e.getCompare()):Fy;const _=e.toString(),C=Object.assign({},this.indexSet_);C[_]=e;const R=Object.assign({},this.indexes_);return R[_]=f,new df(R,C)}addToIndexes(e,t){const r=(0,W.UI)(this.indexes_,(i,l)=>{const c=(0,W.DV)(this.indexSet_,l);if((0,W.hu)(c,"Missing index implementation for "+l),i===Fy){if(c.isDefinedOn(e.node)){const f=[],_=t.getIterator(rr.Wrap);let C=_.getNext();for(;C;)C.name!==e.name&&f.push(C),C=_.getNext();return f.push(e),yT(f,c.getCompare())}return Fy}{const f=t.get(e.name);let _=i;return f&&(_=_.remove(new rr(e.name,f))),_.insert(e,e.node)}});return new df(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,W.UI)(this.indexes_,i=>{if(i===Fy)return i;{const l=t.get(e.name);return l?i.remove(new rr(e.name,l)):i}});return new df(r,this.indexSet_)}}let Pw,Fn=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&CM(this.priorityNode_),this.children_.isEmpty()&&(0,W.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Pw||(Pw=new n(new Ol(rA),null,df.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Pw}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Pw:r}}getChild(t){const r=Yn(t);return null===r?this:this.getImmediateChild(r).getChild(pi(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,W.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new rr(t,r);let l,c;r.isEmpty()?(l=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(i,this.children_)):(l=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(i,this.children_));const f=l.isEmpty()?Pw:this.priorityNode_;return new n(l,f,c)}}updateChild(t,r){const i=Yn(t);if(null===i)return r;{(0,W.hu)(".priority"!==Yn(t)||1===Np(t),".priority must be the last token in a path");const l=this.getImmediateChild(i).updateChild(pi(t),r);return this.updateImmediateChild(i,l)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,l=0,c=!0;if(this.forEachChild(Ii,(f,_)=>{r[f]=_.val(t),i++,c&&n.INTEGER_REGEXP_.test(f)?l=Math.max(l,Number(f)):c=!1}),!t&&c&&l<2*i){const f=[];for(const _ in r)f[_]=r[_];return f}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+wM(this.getPriority().val())+":"),this.forEachChild(Ii,(r,i)=>{const l=i.hash();""!==l&&(t+=":"+r+":"+l)}),this.lazyHash_=""===t?"":kx(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const l=this.resolveIndex_(i);if(l){const c=l.getPredecessorKey(new rr(t,r));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new rr(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new rr(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(l=>r(l.name,l.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,l=>l);{const l=this.children_.getIteratorFrom(t.name,rr.Wrap);let c=l.peek();for(;null!=c&&r.compare(c,t)<0;)l.getNext(),c=l.peek();return l}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,l=>l);{const l=this.children_.getReverseIteratorFrom(t.name,rr.Wrap);let c=l.peek();for(;null!=c&&r.compare(c,t)>0;)l.getNext(),c=l.peek();return l}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Rw?-1:0}withIndex(t){if(t===zd||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===zd||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Ii),l=r.getIterator(Ii);let c=i.getNext(),f=l.getNext();for(;c&&f;){if(c.name!==f.name||!c.node.equals(f.node))return!1;c=i.getNext(),f=l.getNext()}return null===c&&null===f}return!1}return!1}}resolveIndex_(t){return t===zd?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Rw=new class _k extends Fn{constructor(){super(new Ol(rA),Fn.EMPTY_NODE,df.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Fn.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(rr,{MIN:{value:new rr(Pp,Fn.EMPTY_NODE)},MAX:{value:new rr(cf,Rw)}}),vM.__EMPTY_NODE=Fn.EMPTY_NODE,ky.__childrenNodeConstructor=Fn,function dk(n){iA=n}(Rw),function fk(n){TM=n}(Rw);const yk=!0;function hs(n,e=null){if(null===n)return Fn.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,W.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new ky(n,hs(e));if(n instanceof Array||!yk){let t=Fn.EMPTY_NODE;return Vo(n,(r,i)=>{if((0,W.r3)(n,r)&&"."!==r.substring(0,1)){const l=hs(i);(l.isLeafNode()||!l.isEmpty())&&(t=t.updateImmediateChild(r,l))}}),t.updatePriority(hs(e))}{const t=[];let r=!1;if(Vo(n,(c,f)=>{if("."!==c.substring(0,1)){const _=hs(f);_.isEmpty()||(r=r||!_.getPriority().isEmpty(),t.push(new rr(c,_)))}}),0===t.length)return Fn.EMPTY_NODE;const l=yT(t,ck,c=>c.name,rA);if(r){const c=yT(t,Ii.getCompare());return new Fn(l,hs(e),new df({".priority":c},{".priority":Ii}))}return new Fn(l,hs(e),df.Default)}}!function hk(n){EM=n}(hs);class oA extends gT{constructor(e){super(),this.indexPath_=e,(0,W.hu)(!Qn(e)&&".priority"!==Yn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),l=r.compareTo(i);return 0===l?sm(e.name,t.name):l}makePost(e,t){const r=hs(e),i=Fn.EMPTY_NODE.updateChild(this.indexPath_,r);return new rr(t,i)}maxPost(){const e=Fn.EMPTY_NODE.updateChild(this.indexPath_,Rw);return new rr(cf,e)}toString(){return xw(this.indexPath_,0).join("/")}}const aA=new class vk extends gT{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?sm(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return rr.MIN}maxPost(){return rr.MAX}makePost(e,t){const r=hs(e);return new rr(t,r)}toString(){return".value"}};function IM(n){return{type:"value",snapshotNode:n}}function Ly(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Nw(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Ow(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class lA{constructor(e){this.index_=e}updateChild(e,t,r,i,l,c){(0,W.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const f=e.getImmediateChild(t);return f.getChild(i).equals(r.getChild(i))&&f.isEmpty()===r.isEmpty()||(null!=c&&(r.isEmpty()?e.hasChild(t)?c.trackChildChange(Nw(t,f)):(0,W.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):f.isEmpty()?c.trackChildChange(Ly(t,r)):c.trackChildChange(Ow(t,r,f))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Ii,(i,l)=>{t.hasChild(i)||r.trackChildChange(Nw(i,l))}),t.isLeafNode()||t.forEachChild(Ii,(i,l)=>{if(e.hasChild(i)){const c=e.getImmediateChild(i);c.equals(l)||r.trackChildChange(Ow(i,l,c))}else r.trackChildChange(Ly(i,l))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Fn.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class kw{constructor(e){this.indexedFilter_=new lA(e.getIndex()),this.index_=e.getIndex(),this.startPost_=kw.getStartPost_(e),this.endPost_=kw.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,l,c){return this.matches(new rr(t,r))||(r=Fn.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,l,c)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Fn.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Fn.EMPTY_NODE);const l=this;return t.forEachChild(Ii,(c,f)=>{l.matches(new rr(c,f))||(i=i.updateImmediateChild(c,Fn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class Ck{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new kw(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,l,c){return this.rangedFilter_.matches(new rr(t,r))||(r=Fn.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,l,c):this.fullLimitUpdateChild_(e,t,r,l,c)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Fn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let l;i=Fn.EMPTY_NODE.withIndex(this.index_),l=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;l.hasNext()&&c<this.limit_;){const f=l.getNext();if(this.withinDirectionalStart(f)){if(!this.withinDirectionalEnd(f))break;i=i.updateImmediateChild(f.name,f.node),c++}}}else{let l;i=t.withIndex(this.index_),i=i.updatePriority(Fn.EMPTY_NODE),l=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let c=0;for(;l.hasNext();){const f=l.getNext();c<this.limit_&&this.withinDirectionalStart(f)&&this.withinDirectionalEnd(f)?c++:i=i.updateImmediateChild(f.name,Fn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,l){let c;if(this.reverse_){const F=this.index_.getCompare();c=(H,J)=>F(J,H)}else c=this.index_.getCompare();const f=e;(0,W.hu)(f.numChildren()===this.limit_,"");const _=new rr(t,r),C=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),R=this.rangedFilter_.matches(_);if(f.hasChild(t)){const F=f.getImmediateChild(t);let H=i.getChildAfterChild(this.index_,C,this.reverse_);for(;null!=H&&(H.name===t||f.hasChild(H.name));)H=i.getChildAfterChild(this.index_,H,this.reverse_);const J=null==H?1:c(H,_);if(R&&!r.isEmpty()&&J>=0)return l?.trackChildChange(Ow(t,r,F)),f.updateImmediateChild(t,r);{l?.trackChildChange(Nw(t,F));const we=f.updateImmediateChild(t,Fn.EMPTY_NODE);return null!=H&&this.rangedFilter_.matches(H)?(l?.trackChildChange(Ly(H.name,H.node)),we.updateImmediateChild(H.name,H.node)):we}}return r.isEmpty()?e:R&&c(C,_)>=0?(null!=l&&(l.trackChildChange(Nw(C.name,C.node)),l.trackChildChange(Ly(t,r))),f.updateImmediateChild(t,r).updateImmediateChild(C.name,Fn.EMPTY_NODE)):e}}class vT{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ii}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,W.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,W.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Pp}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,W.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,W.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:cf}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,W.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ii}copy(){const e=new vT;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function uA(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function cA(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function wT(n,e){const t=n.copy();return t.index_=e,t}function SM(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Ii?t="$priority":n.index_===aA?t="$value":n.index_===zd?t="$key":((0,W.hu)(n.index_ instanceof oA,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,W.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,W.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,W.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,W.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,W.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function DM(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Ii&&(e.i=n.index_.toString()),e}class CT extends dM{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Iw("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,W.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const l=e._path.toString();this.log_("Listen called for "+l+" "+e._queryIdentifier);const c=CT.getListenId_(e,r),f={};this.listens_[c]=f;const _=SM(e._queryParams);this.restRequest_(l+".json",_,(C,R)=>{let F=R;if(404===C&&(F=null,C=null),null===C&&this.onDataUpdate_(l,F,!1,r),(0,W.DV)(this.listens_,c)===f){let H;H=C?401===C?"permission_denied":"rest_error:"+C:"ok",i(H,null)}})}unlisten(e,t){const r=CT.getListenId_(e,t);delete this.listens_[r]}get(e){const t=SM(e._queryParams),r=e._path.toString(),i=new W.BH;return this.restRequest_(r+".json",t,(l,c)=>{let f=c;404===l&&(f=null,l=null),null===l?(this.onDataUpdate_(r,f,!1,null),i.resolve(f)):i.reject(new Error(f))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,l])=>{i&&i.accessToken&&(t.auth=i.accessToken),l&&l.token&&(t.ac=l.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,W.xO)(t);this.log_("Sending REST request for "+c);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(r&&4===f.readyState){this.log_("REST Response for "+c+" received. status:",f.status,"response:",f.responseText);let _=null;if(f.status>=200&&f.status<300){try{_=(0,W.cI)(f.responseText)}catch{Na("Failed to parse JSON response for "+c+": "+f.responseText)}r(null,_)}else 401!==f.status&&404!==f.status&&Na("Got unsuccessful REST response for "+c+" Status: "+f.status),r(f.status);r=null}},f.open("GET",c,!0),f.send()})}}class Dk{constructor(){this.rootNode_=Fn.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function bT(){return{value:null,children:new Map}}function Uy(n,e,t){if(Qn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Yn(e);n.children.has(r)||n.children.set(r,bT()),Uy(n.children.get(r),e=pi(e),t)}}function dA(n,e){if(Qn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Ii,(r,i)=>{Uy(n,new Ur(r),i)}),dA(n,e)}}if(n.children.size>0){const t=Yn(e);return e=pi(e),n.children.has(t)&&dA(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function hA(n,e,t){null!==n.value?t(e,n.value):function Ak(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{hA(i,new Ur(e.toString()+"/"+r),t)})}class xk{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Vo(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class Rk{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new xk(e);const r=1e4+2e4*Math.random();Dw(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Vo(e,(i,l)=>{l>0&&(0,W.r3)(this.statsToReport_,i)&&(t[i]=l,r=!0)}),r&&this.server_.reportStats(t),Dw(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Wu=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Wu||(Wu={})),Wu))();function gA(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class ET{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Wu.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Qn(this.path)){if(null!=this.affectedTree.value)return(0,W.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Ur(e));return new ET(Er(),t,this.revert)}}return(0,W.hu)(Yn(this.path)===e,"operationForChild called for unrelated child."),new ET(pi(this.path),this.affectedTree,this.revert)}}class Fw{constructor(e,t){this.source=e,this.path=t,this.type=Wu.LISTEN_COMPLETE}operationForChild(e){return Qn(this.path)?new Fw(this.source,Er()):new Fw(this.source,pi(this.path))}}class lm{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Wu.OVERWRITE}operationForChild(e){return Qn(this.path)?new lm(this.source,Er(),this.snap.getImmediateChild(e)):new lm(this.source,pi(this.path),this.snap)}}class Vy{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Wu.MERGE}operationForChild(e){if(Qn(this.path)){const t=this.children.subtree(new Ur(e));return t.isEmpty()?null:t.value?new lm(this.source,Er(),t.value):new Vy(this.source,Er(),t)}return(0,W.hu)(Yn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Vy(this.source,pi(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Op{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Qn(e))return this.isFullyInitialized()&&!this.filtered_;const t=Yn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Nk{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Lw(n,e,t,r,i,l){const c=r.filter(f=>f.type===t);c.sort((f,_)=>function Fk(n,e,t){if(null==e.childName||null==t.childName)throw(0,W.g5)("Should only compare child_ events.");const r=new rr(e.childName,e.snapshotNode),i=new rr(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,f,_)),c.forEach(f=>{const _=function kk(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,f,l);i.forEach(C=>{C.respondsTo(f.type)&&e.push(C.createEvent(_,n.query_))})})}function TT(n,e){return{eventCache:n,serverCache:e}}function Uw(n,e,t,r){return TT(new Op(e,t,r),n.serverCache)}function xM(n,e,t,r){return TT(n.eventCache,new Op(e,t,r))}function IT(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function um(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let mA;class Si{constructor(e,t=(()=>(mA||(mA=new Ol(wO)),mA))()){this.value=e,this.children=t}static fromObject(e){let t=new Si(null);return Vo(e,(r,i)=>{t=t.set(new Ur(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Er(),value:this.value};if(Qn(e))return null;{const r=Yn(e),i=this.children.get(r);if(null!==i){const l=i.findRootMostMatchingPathAndValue(pi(e),t);return null!=l?{path:Wi(new Ur(r),l.path),value:l.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Qn(e))return this;{const t=Yn(e),r=this.children.get(t);return null!==r?r.subtree(pi(e)):new Si(null)}}set(e,t){if(Qn(e))return new Si(t,this.children);{const r=Yn(e),l=(this.children.get(r)||new Si(null)).set(pi(e),t),c=this.children.insert(r,l);return new Si(this.value,c)}}remove(e){if(Qn(e))return this.children.isEmpty()?new Si(null):new Si(null,this.children);{const t=Yn(e),r=this.children.get(t);if(r){const i=r.remove(pi(e));let l;return l=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&l.isEmpty()?new Si(null):new Si(this.value,l)}return this}}get(e){if(Qn(e))return this.value;{const t=Yn(e),r=this.children.get(t);return r?r.get(pi(e)):null}}setTree(e,t){if(Qn(e))return t;{const r=Yn(e),l=(this.children.get(r)||new Si(null)).setTree(pi(e),t);let c;return c=l.isEmpty()?this.children.remove(r):this.children.insert(r,l),new Si(this.value,c)}}fold(e){return this.fold_(Er(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,l)=>{r[i]=l.fold_(Wi(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Er(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Qn(e))return null;{const l=Yn(e),c=this.children.get(l);return c?c.findOnPath_(pi(e),Wi(t,l),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Er(),t)}foreachOnPath_(e,t,r){if(Qn(e))return this;{this.value&&r(t,this.value);const i=Yn(e),l=this.children.get(i);return l?l.foreachOnPath_(pi(e),Wi(t,i),r):new Si(null)}}foreach(e){this.foreach_(Er(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Wi(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Gc{constructor(e){this.writeTree_=e}static empty(){return new Gc(new Si(null))}}function Vw(n,e,t){if(Qn(e))return new Gc(new Si(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let l=r.value;const c=il(i,e);return l=l.updateChild(c,t),new Gc(n.writeTree_.set(i,l))}{const i=new Si(t),l=n.writeTree_.setTree(e,i);return new Gc(l)}}}function _A(n,e,t){let r=n;return Vo(t,(i,l)=>{r=Vw(r,Wi(e,i),l)}),r}function MM(n,e){if(Qn(e))return Gc.empty();{const t=n.writeTree_.setTree(e,new Si(null));return new Gc(t)}}function yA(n,e){return null!=cm(n,e)}function cm(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(il(t.path,e)):null}function PM(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Ii,(r,i)=>{e.push(new rr(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new rr(r,i.value))}),e}function kp(n,e){if(Qn(e))return n;{const t=cm(n,e);return new Gc(null!=t?new Si(t):n.writeTree_.subtree(e))}}function vA(n){return n.writeTree_.isEmpty()}function By(n,e){return RM(Er(),n.writeTree_,e)}function RM(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,l)=>{".priority"===i?((0,W.hu)(null!==l.value,"Priority writes must always be leaf nodes"),r=l.value):t=RM(Wi(n,i),l,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Wi(n,".priority"),r)),t}}function ST(n,e){return LM(e,n)}function jk(n,e){if(n.snap)return Gu(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Gu(Wi(n.path,t),e))return!0;return!1}function $k(n){return n.visible}function NM(n,e,t){let r=Gc.empty();for(let i=0;i<n.length;++i){const l=n[i];if(e(l)){const c=l.path;let f;if(l.snap)Gu(t,c)?(f=il(t,c),r=Vw(r,f,l.snap)):Gu(c,t)&&(f=il(c,t),r=Vw(r,Er(),l.snap.getChild(f)));else{if(!l.children)throw(0,W.g5)("WriteRecord should have .snap or .children");if(Gu(t,c))f=il(t,c),r=_A(r,f,l.children);else if(Gu(c,t))if(f=il(c,t),Qn(f))r=_A(r,Er(),l.children);else{const _=(0,W.DV)(l.children,Yn(f));if(_){const C=_.getChild(pi(f));r=Vw(r,Er(),C)}}}}}return r}function OM(n,e,t,r,i){if(r||i){const l=kp(n.visibleWrites,e);return!i&&vA(l)?t:i||null!=t||yA(l,Er())?By(NM(n.allWrites,function(C){return(C.visible||i)&&(!r||!~r.indexOf(C.writeId))&&(Gu(C.path,e)||Gu(e,C.path))},e),t||Fn.EMPTY_NODE):null}{const l=cm(n.visibleWrites,e);if(null!=l)return l;{const c=kp(n.visibleWrites,e);return vA(c)?t:null!=t||yA(c,Er())?By(c,t||Fn.EMPTY_NODE):null}}}function DT(n,e,t,r){return OM(n.writeTree,n.treePath,e,t,r)}function wA(n,e){return function qk(n,e,t){let r=Fn.EMPTY_NODE;const i=cm(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Ii,(l,c)=>{r=r.updateImmediateChild(l,c)}),r;if(t){const l=kp(n.visibleWrites,e);return t.forEachChild(Ii,(c,f)=>{const _=By(kp(l,new Ur(c)),f);r=r.updateImmediateChild(c,_)}),PM(l).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return PM(kp(n.visibleWrites,e)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,e)}function kM(n,e,t,r){return function zk(n,e,t,r,i){(0,W.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const l=Wi(e,t);if(yA(n.visibleWrites,l))return null;{const c=kp(n.visibleWrites,l);return vA(c)?i.getChild(t):By(c,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function AT(n,e){return function Wk(n,e){return cm(n.visibleWrites,e)}(n.writeTree,Wi(n.treePath,e))}function CA(n,e,t){return function Gk(n,e,t,r){const i=Wi(e,t),l=cm(n.visibleWrites,i);return null!=l?l:r.isCompleteForChild(t)?By(kp(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function FM(n,e){return LM(Wi(n.treePath,e),n.writeTree)}function LM(n,e){return{treePath:n,writeTree:e}}class Jk{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,W.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,W.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const l=i.type;if("child_added"===t&&"child_removed"===l)this.changeMap.set(r,Ow(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===l)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===l)this.changeMap.set(r,Nw(r,i.oldSnap));else if("child_changed"===t&&"child_added"===l)this.changeMap.set(r,Ly(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==l)throw(0,W.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,Ow(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const UM=new class Xk{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class bA{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Op(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return CA(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:um(this.viewCache_),l=function Qk(n,e,t,r,i,l){return function Kk(n,e,t,r,i,l,c){let f;const _=kp(n.visibleWrites,e),C=cm(_,Er());if(null!=C)f=C;else{if(null==t)return[];f=By(_,t)}if(f=f.withIndex(c),f.isEmpty()||f.isLeafNode())return[];{const R=[],F=c.getCompare(),H=l?f.getReverseIteratorFrom(r,c):f.getIteratorFrom(r,c);let J=H.getNext();for(;J&&R.length<i;)0!==F(J,r)&&R.push(J),J=H.getNext();return R}}(n.writeTree,n.treePath,e,t,r,i,l)}(this.writes_,i,t,1,r,e);return 0===l.length?null:l[0]}}function VM(n,e,t,r,i,l){const c=e.eventCache;if(null!=AT(r,t))return e;{let f,_;if(Qn(t))if((0,W.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const C=um(e),F=wA(r,C instanceof Fn?C:Fn.EMPTY_NODE);f=n.filter.updateFullNode(e.eventCache.getNode(),F,l)}else{const C=DT(r,um(e));f=n.filter.updateFullNode(e.eventCache.getNode(),C,l)}else{const C=Yn(t);if(".priority"===C){(0,W.hu)(1===Np(t),"Can't have a priority with additional path components");const R=c.getNode();_=e.serverCache.getNode();const F=kM(r,t,R,_);f=null!=F?n.filter.updatePriority(R,F):c.getNode()}else{const R=pi(t);let F;if(c.isCompleteForChild(C)){_=e.serverCache.getNode();const H=kM(r,t,c.getNode(),_);F=null!=H?c.getNode().getImmediateChild(C).updateChild(R,H):c.getNode().getImmediateChild(C)}else F=CA(r,C,e.serverCache);f=null!=F?n.filter.updateChild(c.getNode(),C,F,R,i,l):c.getNode()}}return Uw(e,f,c.isFullyInitialized()||Qn(t),n.filter.filtersNodes())}}function xT(n,e,t,r,i,l,c,f){const _=e.serverCache;let C;const R=c?n.filter:n.filter.getIndexedFilter();if(Qn(t))C=R.updateFullNode(_.getNode(),r,null);else if(R.filtersNodes()&&!_.isFiltered()){const J=_.getNode().updateChild(t,r);C=R.updateFullNode(_.getNode(),J,null)}else{const J=Yn(t);if(!_.isCompleteForPath(t)&&Np(t)>1)return e;const ie=pi(t),Fe=_.getNode().getImmediateChild(J).updateChild(ie,r);C=".priority"===J?R.updatePriority(_.getNode(),Fe):R.updateChild(_.getNode(),J,Fe,ie,UM,null)}const F=xM(e,C,_.isFullyInitialized()||Qn(t),R.filtersNodes());return VM(n,F,t,i,new bA(i,F,l),f)}function EA(n,e,t,r,i,l,c){const f=e.eventCache;let _,C;const R=new bA(i,e,l);if(Qn(t))C=n.filter.updateFullNode(e.eventCache.getNode(),r,c),_=Uw(e,C,!0,n.filter.filtersNodes());else{const F=Yn(t);if(".priority"===F)C=n.filter.updatePriority(e.eventCache.getNode(),r),_=Uw(e,C,f.isFullyInitialized(),f.isFiltered());else{const H=pi(t),J=f.getNode().getImmediateChild(F);let ie;if(Qn(H))ie=r;else{const we=R.getCompleteChild(F);ie=null!=we?".priority"===eA(H)&&we.getChild(gM(H)).isEmpty()?we:we.updateChild(H,r):Fn.EMPTY_NODE}_=J.equals(ie)?e:Uw(e,n.filter.updateChild(f.getNode(),F,ie,H,R,c),f.isFullyInitialized(),n.filter.filtersNodes())}}return _}function BM(n,e){return n.eventCache.isCompleteForChild(e)}function ZM(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function TA(n,e,t,r,i,l,c,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let C,_=e;C=Qn(t)?r:new Si(null).setTree(t,r);const R=e.serverCache.getNode();return C.children.inorderTraversal((F,H)=>{if(R.hasChild(F)){const ie=ZM(0,e.serverCache.getNode().getImmediateChild(F),H);_=xT(n,_,new Ur(F),ie,i,l,c,f)}}),C.children.inorderTraversal((F,H)=>{const J=!e.serverCache.isCompleteForChild(F)&&null===H.value;if(!R.hasChild(F)&&!J){const we=ZM(0,e.serverCache.getNode().getImmediateChild(F),H);_=xT(n,_,new Ur(F),we,i,l,c,f)}}),_}class lF{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new lA(r.getIndex()),l=function bk(n){return n.loadsAllData()?new lA(n.getIndex()):n.hasLimit()?new Ck(n):new kw(n)}(r);this.processor_=function eF(n){return{filter:n}}(l);const c=t.serverCache,f=t.eventCache,_=i.updateFullNode(Fn.EMPTY_NODE,c.getNode(),null),C=l.updateFullNode(Fn.EMPTY_NODE,f.getNode(),null),R=new Op(_,c.isFullyInitialized(),i.filtersNodes()),F=new Op(C,f.isFullyInitialized(),l.filtersNodes());this.viewCache_=TT(F,R),this.eventGenerator_=new Nk(this.query_)}get query(){return this.query_}}function dF(n,e){const t=um(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Qn(e)&&!t.getImmediateChild(Yn(e)).isEmpty())?t.getChild(e):null}function jM(n){return 0===n.eventRegistrations_.length}function HM(n,e,t){const r=[];if(t){(0,W.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(l=>{const c=l.createCancelEvent(t,i);c&&r.push(c)})}if(e){let i=[];for(let l=0;l<n.eventRegistrations_.length;++l){const c=n.eventRegistrations_[l];if(c.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(l+1));break}}else i.push(c)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function $M(n,e,t,r){e.type===Wu.MERGE&&null!==e.source.queryId&&((0,W.hu)(um(n.viewCache_),"We should always have a full cache before handling merges"),(0,W.hu)(IT(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,l=function nF(n,e,t,r,i){const l=new Jk;let c,f;if(t.type===Wu.OVERWRITE){const C=t;C.source.fromUser?c=EA(n,e,C.path,C.snap,r,i,l):((0,W.hu)(C.source.fromServer,"Unknown source."),f=C.source.tagged||e.serverCache.isFiltered()&&!Qn(C.path),c=xT(n,e,C.path,C.snap,r,i,f,l))}else if(t.type===Wu.MERGE){const C=t;C.source.fromUser?c=function iF(n,e,t,r,i,l,c){let f=e;return r.foreach((_,C)=>{const R=Wi(t,_);BM(e,Yn(R))&&(f=EA(n,f,R,C,i,l,c))}),r.foreach((_,C)=>{const R=Wi(t,_);BM(e,Yn(R))||(f=EA(n,f,R,C,i,l,c))}),f}(n,e,C.path,C.children,r,i,l):((0,W.hu)(C.source.fromServer,"Unknown source."),f=C.source.tagged||e.serverCache.isFiltered(),c=TA(n,e,C.path,C.children,r,i,f,l))}else if(t.type===Wu.ACK_USER_WRITE){const C=t;c=C.revert?function aF(n,e,t,r,i,l){let c;if(null!=AT(r,t))return e;{const f=new bA(r,e,i),_=e.eventCache.getNode();let C;if(Qn(t)||".priority"===Yn(t)){let R;if(e.serverCache.isFullyInitialized())R=DT(r,um(e));else{const F=e.serverCache.getNode();(0,W.hu)(F instanceof Fn,"serverChildren would be complete if leaf node"),R=wA(r,F)}C=n.filter.updateFullNode(_,R,l)}else{const R=Yn(t);let F=CA(r,R,e.serverCache);null==F&&e.serverCache.isCompleteForChild(R)&&(F=_.getImmediateChild(R)),C=null!=F?n.filter.updateChild(_,R,F,pi(t),f,l):e.eventCache.getNode().hasChild(R)?n.filter.updateChild(_,R,Fn.EMPTY_NODE,pi(t),f,l):_,C.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=DT(r,um(e)),c.isLeafNode()&&(C=n.filter.updateFullNode(C,c,l)))}return c=e.serverCache.isFullyInitialized()||null!=AT(r,Er()),Uw(e,C,c,n.filter.filtersNodes())}}(n,e,C.path,r,i,l):function sF(n,e,t,r,i,l,c){if(null!=AT(i,t))return e;const f=e.serverCache.isFiltered(),_=e.serverCache;if(null!=r.value){if(Qn(t)&&_.isFullyInitialized()||_.isCompleteForPath(t))return xT(n,e,t,_.getNode().getChild(t),i,l,f,c);if(Qn(t)){let C=new Si(null);return _.getNode().forEachChild(zd,(R,F)=>{C=C.set(new Ur(R),F)}),TA(n,e,t,C,i,l,f,c)}return e}{let C=new Si(null);return r.foreach((R,F)=>{const H=Wi(t,R);_.isCompleteForPath(H)&&(C=C.set(R,_.getNode().getChild(H)))}),TA(n,e,t,C,i,l,f,c)}}(n,e,C.path,C.affectedTree,r,i,l)}else{if(t.type!==Wu.LISTEN_COMPLETE)throw(0,W.g5)("Unknown operation type: "+t.type);c=function oF(n,e,t,r,i){const l=e.serverCache;return VM(n,xM(e,l.getNode(),l.isFullyInitialized()||Qn(t),l.isFiltered()),t,r,UM,i)}(n,e,t.path,r,l)}const _=l.getChanges();return function rF(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),l=IT(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(l)||!r.getNode().getPriority().equals(l.getPriority()))&&t.push(IM(IT(e)))}}(e,c,_),{viewCache:c,changes:_}}(n.processor_,i,e,t,r);return function tF(n,e){(0,W.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,W.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,l.viewCache),(0,W.hu)(l.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=l.viewCache,qM(n,l.changes,l.viewCache.eventCache.getNode(),null)}function qM(n,e,t,r){return function Ok(n,e,t,r){const i=[],l=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&l.push(function wk(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),Lw(n,i,"child_removed",e,r,t),Lw(n,i,"child_added",e,r,t),Lw(n,i,"child_moved",l,r,t),Lw(n,i,"child_changed",e,r,t),Lw(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let MT,RT;class zM{constructor(){this.views=new Map}}function IA(n,e,t,r){const i=e.source.queryId;if(null!==i){const l=n.views.get(i);return(0,W.hu)(null!=l,"SyncTree gave us an op for an invalid query."),$M(l,e,t,r)}{let l=[];for(const c of n.views.values())l=l.concat($M(c,e,t,r));return l}}function GM(n,e,t,r,i){const c=n.views.get(e._queryIdentifier);if(!c){let f=DT(t,i?r:null),_=!1;f?_=!0:r instanceof Fn?(f=wA(t,r),_=!1):(f=Fn.EMPTY_NODE,_=!1);const C=TT(new Op(f,_,!1),new Op(r,i,!1));return new lF(e,C)}return c}function WM(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Fp(n,e){let t=null;for(const r of n.views.values())t=t||dF(r,e);return t}function KM(n,e){return e._queryParams.loadsAllData()?PT(n):n.views.get(e._queryIdentifier)}function YM(n,e){return null!=KM(n,e)}function Lp(n){return null!=PT(n)}function PT(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let CF=1;class QM{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Si(null),this.pendingWriteTree_=function Yk(){return{visibleWrites:Gc.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function SA(n,e,t,r,i){return function Uk(n,e,t,r,i){(0,W.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Vw(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Zy(n,new lm({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Up(n,e,t=!1){const r=function Bk(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function Zk(n,e){const t=n.allWrites.findIndex(f=>f.writeId===e);(0,W.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,l=!1,c=n.allWrites.length-1;for(;i&&c>=0;){const f=n.allWrites[c];f.visible&&(c>=t&&jk(f,r.path)?i=!1:Gu(r.path,f.path)&&(l=!0)),c--}return!!i&&(l?(function Hk(n){n.visibleWrites=NM(n.allWrites,$k,Er()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=MM(n.visibleWrites,r.path):Vo(r.children,_=>{n.visibleWrites=MM(n.visibleWrites,Wi(r.path,_))}),!0))}(n.pendingWriteTree_,e)){let l=new Si(null);return null!=r.snap?l=l.set(Er(),!0):Vo(r.children,c=>{l=l.set(new Ur(c),!0)}),Zy(n,new ET(r.path,l,t))}return[]}function Bw(n,e,t){return Zy(n,new lm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function NT(n,e,t,r,i=!1){const l=e._path,c=n.syncPointTree_.get(l);let f=[];if(c&&("default"===e._queryIdentifier||YM(c,e))){const _=function yF(n,e,t,r){const i=e._queryIdentifier,l=[];let c=[];const f=Lp(n);if("default"===i)for(const[_,C]of n.views.entries())c=c.concat(HM(C,t,r)),jM(C)&&(n.views.delete(_),C.query._queryParams.loadsAllData()||l.push(C.query));else{const _=n.views.get(i);_&&(c=c.concat(HM(_,t,r)),jM(_)&&(n.views.delete(i),_.query._queryParams.loadsAllData()||l.push(_.query)))}return f&&!Lp(n)&&l.push(new(function gF(){return(0,W.hu)(MT,"Reference.ts has not been loaded"),MT}())(e._repo,e._path)),{removed:l,events:c}}(c,e,t,r);(function mF(n){return 0===n.views.size})(c)&&(n.syncPointTree_=n.syncPointTree_.remove(l));const C=_.removed;if(f=_.events,!i){const R=-1!==C.findIndex(H=>H._queryParams.loadsAllData()),F=n.syncPointTree_.findOnPath(l,(H,J)=>Lp(J));if(R&&!F){const H=n.syncPointTree_.subtree(l);if(!H.isEmpty()){const J=function AF(n){return n.fold((e,t,r)=>{if(t&&Lp(t))return[PT(t)];{let i=[];return t&&(i=WM(t)),Vo(r,(l,c)=>{i=i.concat(c)}),i}})}(H);for(let ie=0;ie<J.length;++ie){const we=J[ie],Fe=we.query,lt=tP(n,we);n.listenProvider_.startListening(jw(Fe),Zw(n,Fe),lt.hashFn,lt.onComplete)}}}!F&&C.length>0&&!r&&(R?n.listenProvider_.stopListening(jw(e),null):C.forEach(H=>{const J=n.queryToTagMap.get(kT(H));n.listenProvider_.stopListening(jw(H),J)}))}!function xF(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=kT(r),l=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(l)}}}(n,C)}return f}function JM(n,e,t,r){const i=AA(n,r);if(null!=i){const l=xA(i),c=l.path,f=l.queryId,_=il(c,e);return MA(n,c,new lm(gA(f),_,t))}return[]}function DA(n,e,t,r=!1){const i=e._path;let l=null,c=!1;n.syncPointTree_.foreachOnPath(i,(H,J)=>{const ie=il(H,i);l=l||Fp(J,ie),c=c||Lp(J)});let _,f=n.syncPointTree_.get(i);f?(c=c||Lp(f),l=l||Fp(f,Er())):(f=new zM,n.syncPointTree_=n.syncPointTree_.set(i,f)),null!=l?_=!0:(_=!1,l=Fn.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((J,ie)=>{const we=Fp(ie,Er());we&&(l=l.updateImmediateChild(J,we))}));const C=YM(f,e);if(!C&&!e._queryParams.loadsAllData()){const H=kT(e);(0,W.hu)(!n.queryToTagMap.has(H),"View does not exist, but we have a tag");const J=function MF(){return CF++}();n.queryToTagMap.set(H,J),n.tagToQueryMap.set(J,H)}let F=function _F(n,e,t,r,i,l){const c=GM(n,e,r,i,l);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),function hF(n,e){n.eventRegistrations_.push(e)}(c,t),function fF(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Ii,(l,c)=>{r.push(Ly(l,c))}),t.isFullyInitialized()&&r.push(IM(t.getNode())),qM(n,r,t.getNode(),e)}(c,t)}(f,e,t,ST(n.pendingWriteTree_,i),l,_);if(!C&&!c&&!r){const H=KM(f,e);F=F.concat(function PF(n,e,t){const r=e._path,i=Zw(n,e),l=tP(n,t),c=n.listenProvider_.startListening(jw(e),i,l.hashFn,l.onComplete),f=n.syncPointTree_.subtree(r);if(i)(0,W.hu)(!Lp(f.value),"If we're adding a query, it shouldn't be shadowed");else{const _=f.fold((C,R,F)=>{if(!Qn(C)&&R&&Lp(R))return[PT(R).query];{let H=[];return R&&(H=H.concat(WM(R).map(J=>J.query))),Vo(F,(J,ie)=>{H=H.concat(ie)}),H}});for(let C=0;C<_.length;++C){const R=_[C];n.listenProvider_.stopListening(jw(R),Zw(n,R))}}return c}(n,e,H))}return F}function OT(n,e,t){const i=n.pendingWriteTree_,l=n.syncPointTree_.findOnPath(e,(c,f)=>{const C=Fp(f,il(c,e));if(C)return C});return OM(i,e,l,t,!0)}function Zy(n,e){return XM(e,n.syncPointTree_,null,ST(n.pendingWriteTree_,Er()))}function XM(n,e,t,r){if(Qn(n.path))return eP(n,e,t,r);{const i=e.get(Er());null==t&&null!=i&&(t=Fp(i,Er()));let l=[];const c=Yn(n.path),f=n.operationForChild(c),_=e.children.get(c);if(_&&f){const C=t?t.getImmediateChild(c):null,R=FM(r,c);l=l.concat(XM(f,_,C,R))}return i&&(l=l.concat(IA(i,n,r,t))),l}}function eP(n,e,t,r){const i=e.get(Er());null==t&&null!=i&&(t=Fp(i,Er()));let l=[];return e.children.inorderTraversal((c,f)=>{const _=t?t.getImmediateChild(c):null,C=FM(r,c),R=n.operationForChild(c);R&&(l=l.concat(eP(R,f,_,C)))}),i&&(l=l.concat(IA(i,n,r,t))),l}function tP(n,e){const t=e.query,r=Zw(n,t);return{hashFn:()=>(function uF(n){return n.viewCache_.serverCache.getNode()}(e)||Fn.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function IF(n,e,t){const r=AA(n,t);if(r){const i=xA(r),l=i.path,c=i.queryId,f=il(l,e);return MA(n,l,new Fw(gA(c),f))}return[]}(n,t._path,r):function TF(n,e){return Zy(n,new Fw({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const l=function EO(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return NT(n,t,null,l)}}}}function Zw(n,e){const t=kT(e);return n.queryToTagMap.get(t)}function kT(n){return n._path.toString()+"$"+n._queryIdentifier}function AA(n,e){return n.tagToQueryMap.get(e)}function xA(n){const e=n.indexOf("$");return(0,W.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Ur(n.substr(0,e))}}function MA(n,e,t){const r=n.syncPointTree_.get(e);return(0,W.hu)(r,"Missing sync point for query tag that we're tracking"),IA(r,t,ST(n.pendingWriteTree_,e),null)}function jw(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function wF(){return(0,W.hu)(RT,"Reference.ts has not been loaded"),RT}())(n._repo,n._path):n}class PA{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new PA(t)}node(){return this.node_}}class RA{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Wi(this.path_,e);return new RA(this.syncTree_,t)}node(){return OT(this.syncTree_,this.path_)}}const RF=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},nP=function(n,e,t){return n&&"object"==typeof n?((0,W.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?NF(n[".sv"],e,t):"object"==typeof n[".sv"]?OF(n[".sv"],e):void(0,W.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},NF=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,W.hu)(!1,"Unexpected server value: "+n)},OF=function(n,e,t){n.hasOwnProperty("increment")||(0,W.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,W.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,W.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const c=i.getValue();return"number"!=typeof c?r:c+r},rP=function(n,e,t,r){return OA(e,new RA(t,n),r)},NA=function(n,e,t){return OA(n,new PA(e),t)};function OA(n,e,t){const r=n.getPriority().val(),i=nP(r,e.getImmediateChild(".priority"),t);let l;if(n.isLeafNode()){const c=n,f=nP(c.getValue(),e,t);return f!==c.getValue()||i!==c.getPriority().val()?new ky(f,hs(i)):n}{const c=n;return l=c,i!==c.getPriority().val()&&(l=l.updatePriority(new ky(i))),c.forEachChild(Ii,(f,_)=>{const C=OA(_,e.getImmediateChild(f),t);C!==_&&(l=l.updateImmediateChild(f,C))}),l}}class kA{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function FT(n,e){let t=e instanceof Ur?e:new Ur(e),r=n,i=Yn(t);for(;null!==i;){const l=(0,W.DV)(r.node.children,i)||{children:{},childCount:0};r=new kA(i,r,l),t=pi(t),i=Yn(t)}return r}function dm(n){return n.node.value}function FA(n,e){n.node.value=e,LA(n)}function iP(n){return n.node.childCount>0}function LT(n,e){Vo(n.node.children,(t,r)=>{e(new kA(t,n,r))})}function sP(n,e,t,r){t&&!r&&e(n),LT(n,i=>{sP(i,e,!0,r)}),t&&r&&e(n)}function Hw(n){return new Ur(null===n.parent?n.name:Hw(n.parent)+"/"+n.name)}function LA(n){null!==n.parent&&function LF(n,e,t){const r=function kF(n){return void 0===dm(n)&&!iP(n)}(t),i=(0,W.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,LA(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,LA(n))}(n.parent,n.name,n)}const UF=/[\[\].#$\/\u0000-\u001F\u007F]/,VF=/[\[\].#$\u0000-\u001F\u007F]/,UA=10485760,UT=function(n){return"string"==typeof n&&0!==n.length&&!UF.test(n)},oP=function(n){return"string"==typeof n&&0!==n.length&&!VF.test(n)},$w=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!dT(n)||n&&"object"==typeof n&&(0,W.r3)(n,".sv")},Gd=function(n,e,t,r){r&&void 0===e||qw((0,W.gK)(n,"value"),e,t)},qw=function(n,e,t){const r=t instanceof Ur?new nk(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+om(r));if("function"==typeof e)throw new Error(n+"contains a function "+om(r)+" with contents = "+e.toString());if(dT(e))throw new Error(n+"contains "+e.toString()+" "+om(r));if("string"==typeof e&&e.length>UA/3&&(0,W.ug)(e)>UA)throw new Error(n+"contains a string greater than "+UA+" utf8 bytes "+om(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,l=!1;if(Vo(e,(c,f)=>{if(".value"===c)i=!0;else if(".priority"!==c&&".sv"!==c&&(l=!0,!UT(c)))throw new Error(n+" contains an invalid key ("+c+") "+om(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function rk(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,W.ug)(e),mM(n)})(r,c),qw(n,f,r),function ik(n){const e=n.parts_.pop();n.byteLength_-=(0,W.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&l)throw new Error(n+' contains ".value" child '+om(r)+" in addition to actual children.")}},aP=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,W.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const l=[];Vo(e,(c,f)=>{const _=new Ur(c);if(qw(i,f,Wi(t,_)),".priority"===eA(_)&&!$w(f))throw new Error(i+"contains an invalid value for '"+_.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");l.push(_)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const l=xw(r);for(let c=0;c<l.length;c++)if((".priority"!==l[c]||c!==l.length-1)&&!UT(l[c]))throw new Error(n+"contains an invalid key ("+l[c]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(tk);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Gu(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,l)},VA=function(n,e,t){if(!t||void 0!==e){if(dT(e))throw new Error((0,W.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!$w(e))throw new Error((0,W.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},zw=function(n,e,t,r){if(!(r&&void 0===t||UT(t)))throw new Error((0,W.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Gw=function(n,e,t,r){if(!(r&&void 0===t||oP(t)))throw new Error((0,W.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},jF=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Gw(n,e,t,r)},Ku=function(n,e){if(".info"===Yn(e))throw new Error(n+" failed = Can't modify data under /.info/")},lP=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!UT(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),oP(n)}(t))throw new Error((0,W.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class HF{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function VT(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],l=i.getPath();null!==t&&!tA(l,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:l}),t.events.push(i)}t&&n.eventLists_.push(t)}function uP(n,e,t){VT(n,t),cP(n,r=>tA(r,e))}function au(n,e,t){VT(n,t),cP(n,r=>Gu(r,e)||Gu(e,r))}function cP(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?($F(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function $F(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();im&&Uo("event: "+t.toString()),Ny(r)}}}const dP="repo_interrupt",qF=25;class zF{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new HF,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=bT(),this.transactionQueueTree_=new kA,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function hP(n){const t=n.infoData_.getNode(new Ur(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Ww(n){return RF({timestamp:hP(n)})}function fP(n,e,t,r,i){n.dataUpdateCount++;const l=new Ur(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(i)if(r){const _=(0,W.UI)(t,C=>hs(C));c=function SF(n,e,t,r){const i=AA(n,r);if(i){const l=xA(i),c=l.path,f=l.queryId,_=il(c,e),C=Si.fromObject(t);return MA(n,c,new Vy(gA(f),_,C))}return[]}(n.serverSyncTree_,l,_,i)}else{const _=hs(t);c=JM(n.serverSyncTree_,l,_,i)}else if(r){const _=(0,W.UI)(t,C=>hs(C));c=function EF(n,e,t){const r=Si.fromObject(t);return Zy(n,new Vy({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,l,_)}else{const _=hs(t);c=Bw(n.serverSyncTree_,l,_)}let f=l;c.length>0&&(f=Hy(n,l)),au(n.eventQueue_,f,c)}function pP(n,e){BA(n,"connected",e),!1===e&&function QF(n){jy(n,"onDisconnectEvents");const e=Ww(n),t=bT();hA(n.onDisconnect_,Er(),(i,l)=>{const c=rP(i,l,n.serverSyncTree_,e);Uy(t,i,c)});let r=[];hA(t,Er(),(i,l)=>{r=r.concat(Bw(n.serverSyncTree_,i,l));const c=$A(n,i);Hy(n,c)}),n.onDisconnect_=bT(),au(n.eventQueue_,Er(),r)}(n)}function BA(n,e,t){const r=new Ur("/.info/"+e),i=hs(t);n.infoData_.updateSnapshot(r,i);const l=Bw(n.infoSyncTree_,r,i);au(n.eventQueue_,r,l)}function BT(n){return n.nextWriteId_++}function ZA(n,e,t,r,i){jy(n,"set",{path:e.toString(),value:t,priority:r});const l=Ww(n),c=hs(t,r),f=OT(n.serverSyncTree_,e),_=NA(c,f,l),C=BT(n),R=SA(n.serverSyncTree_,e,_,C,!0);VT(n.eventQueue_,R),n.server_.put(e.toString(),c.val(!0),(H,J)=>{const ie="ok"===H;ie||Na("set at "+e+" failed: "+H);const we=Up(n.serverSyncTree_,C,!ie);au(n.eventQueue_,e,we),Vp(0,i,H,J)});const F=$A(n,e);Hy(n,F),au(n.eventQueue_,F,[])}function JF(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&dA(n.onDisconnect_,e),Vp(0,t,r,i)})}function gP(n,e,t,r){const i=hs(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(l,c)=>{"ok"===l&&Uy(n.onDisconnect_,e,i),Vp(0,r,l,c)})}function jA(n,e,t){let r;r=".info"===Yn(e._path)?NT(n.infoSyncTree_,e,t):NT(n.serverSyncTree_,e,t),uP(n.eventQueue_,e._path,r)}function mP(n){n.persistentConnection_&&n.persistentConnection_.interrupt(dP)}function jy(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Uo(t,...e)}function Vp(n,e,t,r){e&&Ny(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let l=i;r&&(l+=": "+r);const c=new Error(l);c.code=i,e(c)}})}function HA(n,e,t){return OT(n.serverSyncTree_,e,t)||Fn.EMPTY_NODE}function ZT(n,e=n.transactionQueueTree_){if(e||jT(n,e),dm(e)){const t=yP(n,e);(0,W.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function iL(n,e,t){const r=t.map(C=>C.currentWriteId),i=HA(n,e,r);let l=i;const c=i.hash();for(let C=0;C<t.length;C++){const R=t[C];(0,W.hu)(0===R.status,"tryToSendTransactionQueue_: items in queue should all be run."),R.status=1,R.retryCount++;const F=il(e,R.path);l=l.updateChild(F,R.currentOutputSnapshotRaw)}const f=l.val(!0),_=e;n.server_.put(_.toString(),f,C=>{jy(n,"transaction put response",{path:_.toString(),status:C});let R=[];if("ok"===C){const F=[];for(let H=0;H<t.length;H++)t[H].status=2,R=R.concat(Up(n.serverSyncTree_,t[H].currentWriteId)),t[H].onComplete&&F.push(()=>t[H].onComplete(null,!0,t[H].currentOutputSnapshotResolved)),t[H].unwatcher();jT(n,FT(n.transactionQueueTree_,e)),ZT(n,n.transactionQueueTree_),au(n.eventQueue_,e,R);for(let H=0;H<F.length;H++)Ny(F[H])}else{if("datastale"===C)for(let F=0;F<t.length;F++)t[F].status=3===t[F].status?4:0;else{Na("transaction at "+_.toString()+" failed: "+C);for(let F=0;F<t.length;F++)t[F].status=4,t[F].abortReason=C}Hy(n,e)}},c)}(n,Hw(e),t)}else iP(e)&&LT(e,t=>{ZT(n,t)})}function Hy(n,e){const t=_P(n,e),r=Hw(t);return function sL(n,e,t){if(0===e.length)return;const r=[];let i=[];const c=e.filter(f=>0===f.status).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const _=e[f],C=il(t,_.path);let F,R=!1;if((0,W.hu)(null!==C,"rerunTransactionsUnderNode_: relativePath should not be null."),4===_.status)R=!0,F=_.abortReason,i=i.concat(Up(n.serverSyncTree_,_.currentWriteId,!0));else if(0===_.status)if(_.retryCount>=qF)R=!0,F="maxretry",i=i.concat(Up(n.serverSyncTree_,_.currentWriteId,!0));else{const H=HA(n,_.path,c);_.currentInputSnapshot=H;const J=e[f].update(H.val());if(void 0!==J){qw("transaction failed: Data returned ",J,_.path);let ie=hs(J);"object"==typeof J&&null!=J&&(0,W.r3)(J,".priority")||(ie=ie.updatePriority(H.getPriority()));const Fe=_.currentWriteId,lt=Ww(n),$t=NA(ie,H,lt);_.currentOutputSnapshotRaw=ie,_.currentOutputSnapshotResolved=$t,_.currentWriteId=BT(n),c.splice(c.indexOf(Fe),1),i=i.concat(SA(n.serverSyncTree_,_.path,$t,_.currentWriteId,_.applyLocally)),i=i.concat(Up(n.serverSyncTree_,Fe,!0))}else R=!0,F="nodata",i=i.concat(Up(n.serverSyncTree_,_.currentWriteId,!0))}au(n.eventQueue_,t,i),i=[],R&&(e[f].status=2,setTimeout(e[f].unwatcher,Math.floor(0)),e[f].onComplete&&r.push("nodata"===F?()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot):()=>e[f].onComplete(new Error(F),!1,null)))}jT(n,n.transactionQueueTree_);for(let f=0;f<r.length;f++)Ny(r[f]);ZT(n,n.transactionQueueTree_)}(n,yP(n,t),r),r}function _P(n,e){let t,r=n.transactionQueueTree_;for(t=Yn(e);null!==t&&void 0===dm(r);)r=FT(r,t),t=Yn(e=pi(e));return r}function yP(n,e){const t=[];return vP(n,e,t),t.sort((r,i)=>r.order-i.order),t}function vP(n,e,t){const r=dm(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);LT(e,i=>{vP(n,i,t)})}function jT(n,e){const t=dm(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,FA(e,t.length>0?t:void 0)}LT(e,r=>{jT(n,r)})}function $A(n,e){const t=Hw(_P(n,e)),r=FT(n.transactionQueueTree_,e);return function FF(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{qA(n,i)}),qA(n,r),sP(r,i=>{qA(n,i)}),t}function qA(n,e){const t=dm(e);if(t){const r=[];let i=[],l=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,W.hu)(l===c-1,"All SENT items should be at beginning of queue."),l=c,t[c].status=3,t[c].abortReason="set"):((0,W.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),i=i.concat(Up(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===l?FA(e,void 0):t.length=l+1,au(n.eventQueue_,Hw(e),i);for(let c=0;c<r.length;c++)Ny(r[c])}}const zA=function(n,e){const t=lL(n),r=t.namespace;return"firebase.com"===t.domain&&qd(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&qd("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Na("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new WD(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Ur(t.pathString)}},lL=function(n){let e="",t="",r="",i="",l="",c=!0,f="https",_=443;if("string"==typeof n){let C=n.indexOf("//");C>=0&&(f=n.substring(0,C-1),n=n.substring(C+2));let R=n.indexOf("/");-1===R&&(R=n.length);let F=n.indexOf("?");-1===F&&(F=n.length),e=n.substring(0,Math.min(R,F)),R<F&&(i=function oL(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(R,F)));const H=function aL(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Na(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,F)));C=e.indexOf(":"),C>=0?(c="https"===f||"wss"===f,_=parseInt(e.substring(C+1),10)):C=e.length;const J=e.slice(0,C);if("localhost"===J.toLowerCase())t="localhost";else if(J.split(".").length<=2)t=J;else{const ie=e.indexOf(".");r=e.substring(0,ie).toLowerCase(),t=e.substring(ie+1),l=r}"ns"in H&&(l=H.ns)}return{host:e,port:_,domain:t,subdomain:r,secure:c,scheme:f,pathString:i,namespace:l}},wP="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",uL=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const l=new Array(8);for(i=7;i>=0;i--)l[i]=wP.charAt(t%64),t=Math.floor(t/64);(0,W.hu)(0===t,"Cannot push at time == 0");let c=l.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)c+=wP.charAt(e[i]);return(0,W.hu)(20===c.length,"nextPushId: Length should be 20."),c}}();class CP{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,W.Wl)(this.snapshot.exportVal())}}class bP{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class GA{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,W.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class EP{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new W.BH;return JF(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Ku("OnDisconnect.remove",this._path);const e=new W.BH;return gP(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Ku("OnDisconnect.set",this._path),Gd("OnDisconnect.set",e,this._path,!1);const t=new W.BH;return gP(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Ku("OnDisconnect.setWithPriority",this._path),Gd("OnDisconnect.setWithPriority",e,this._path,!1),VA("OnDisconnect.setWithPriority",t,!1);const r=new W.BH;return function XF(n,e,t,r,i){const l=hs(t,r);n.server_.onDisconnectPut(e.toString(),l.val(!0),(c,f)=>{"ok"===c&&Uy(n.onDisconnect_,e,l),Vp(0,i,c,f)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Ku("OnDisconnect.update",this._path),aP("OnDisconnect.update",e,this._path,!1);const t=new W.BH;return function eL(n,e,t,r){if((0,W.xb)(t))return Uo("onDisconnect().update() called with empty data.  Don't do anything."),void Vp(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,l)=>{"ok"===i&&Vo(t,(c,f)=>{const _=hs(f);Uy(n.onDisconnect_,Wi(e,c),_)}),Vp(0,r,i,l)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class kl{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Qn(this._path)?null:eA(this._path)}get ref(){return new Yu(this._repo,this._path)}get _queryIdentifier(){const e=DM(this._queryParams),t=zD(e);return"{}"===t?"default":t}get _queryObject(){return DM(this._queryParams)}isEqual(e){if(!((e=(0,W.m9)(e))instanceof kl))return!1;const t=this._repo===e._repo,r=tA(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function ek(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function HT(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Bp(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===zd){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Pp)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==cf)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Ii){if(null!=e&&!$w(e)||null!=t&&!$w(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,W.hu)(n.getIndex()instanceof oA||n.getIndex()===aA,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function $T(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Yu extends kl{constructor(e,t){super(e,t,new vT,!1)}get parent(){const e=gM(this._path);return null===e?null:new Yu(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class hm{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Ur(e),r=fm(this.ref,e);return new hm(this._node.getChild(t),r,Ii)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new hm(i,fm(this.ref,r),Ii)))}hasChild(e){const t=new Ur(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function TP(n,e){return(n=(0,W.m9)(n))._checkNotDeleted("ref"),void 0!==e?fm(n._root,e):n._root}function IP(n,e){(n=(0,W.m9)(n))._checkNotDeleted("refFromURL");const t=zA(e,n._repo.repoInfo_.nodeAdmin);lP("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&qd("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),TP(n,t.path.toString())}function fm(n,e){return null===Yn((n=(0,W.m9)(n))._path)?jF("child","path",e,!1):Gw("child","path",e,!1),new Yu(n._repo,Wi(n._path,e))}function WA(n,e){n=(0,W.m9)(n),Ku("set",n._path),Gd("set",e,n._path,!1);const t=new W.BH;return ZA(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function pL(n,e){aP("update",e,n._path,!1);const t=new W.BH;return function YF(n,e,t,r){jy(n,"update",{path:e.toString(),value:t});let i=!0;const l=Ww(n),c={};if(Vo(t,(f,_)=>{i=!1,c[f]=rP(Wi(e,f),hs(_),n.serverSyncTree_,l)}),i)Uo("update() called with empty data.  Don't do anything."),Vp(0,r,"ok",void 0);else{const f=BT(n),_=function bF(n,e,t,r){!function Vk(n,e,t,r){(0,W.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=_A(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Si.fromObject(t);return Zy(n,new Vy({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,c,f);VT(n.eventQueue_,_),n.server_.merge(e.toString(),t,(C,R)=>{const F="ok"===C;F||Na("update at "+e+" failed: "+C);const H=Up(n.serverSyncTree_,f,!F),J=H.length>0?Hy(n,e):e;au(n.eventQueue_,J,H),Vp(0,r,C,R)}),Vo(t,C=>{const R=$A(n,Wi(e,C));Hy(n,R)}),au(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function gL(n){n=(0,W.m9)(n);const e=new GA(()=>{}),t=new Kw(e);return function KF(n,e,t){const r=function DF(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(C,R)=>{const F=il(C,t);r=r||Fp(R,F)});let i=n.syncPointTree_.get(t);i?r=r||Fp(i,Er()):(i=new zM,n.syncPointTree_=n.syncPointTree_.set(t,i));const l=null!=r,c=l?new Op(r,!0,!1):null;return function cF(n){return IT(n.viewCache_)}(GM(i,e,ST(n.pendingWriteTree_,e._path),l?c.getNode():Fn.EMPTY_NODE,l))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const l=hs(i).withIndex(e._queryParams.getIndex());let c;if(DA(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())c=Bw(n.serverSyncTree_,e._path,l);else{const f=Zw(n.serverSyncTree_,e);c=JM(n.serverSyncTree_,e._path,l,f)}return au(n.eventQueue_,e._path,c),NT(n.serverSyncTree_,e,t,null,!0),l},i=>(jy(n,"get for query "+(0,W.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new hm(r,new Yu(n._repo,n._path),n._queryParams.getIndex()))}class Kw{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new CP("value",this,new hm(e.snapshotNode,new Yu(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new bP(this,e,t):null}matches(e){return e instanceof Kw&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class qT{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new bP(this,e,t):null}createEvent(e,t){(0,W.hu)(null!=e.childName,"Child events should have a childName.");const r=fm(new Yu(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new CP(e.type,this,new hm(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof qT&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Yw(n,e,t,r,i){let l;if("object"==typeof r&&(l=void 0,i=r),"function"==typeof r&&(l=r),i&&i.onlyOnce){const _=t,C=(R,F)=>{jA(n._repo,n,f),_(R,F)};C.userCallback=t.userCallback,C.context=t.context,t=C}const c=new GA(t,l||void 0),f="value"===e?new Kw(c):new qT(e,c);return function tL(n,e,t){let r;r=".info"===Yn(e._path)?DA(n.infoSyncTree_,e,t):DA(n.serverSyncTree_,e,t),uP(n.eventQueue_,e._path,r)}(n._repo,n,f),()=>jA(n._repo,n,f)}function KA(n,e,t,r){return Yw(n,"value",e,t,r)}function SP(n,e,t,r){return Yw(n,"child_added",e,t,r)}function DP(n,e,t,r){return Yw(n,"child_changed",e,t,r)}function AP(n,e,t,r){return Yw(n,"child_moved",e,t,r)}function xP(n,e,t,r){return Yw(n,"child_removed",e,t,r)}function MP(n,e,t){let r=null;const i=t?new GA(t):null;"value"===e?r=new Kw(i):e&&(r=new qT(e,i)),jA(n._repo,n,r)}class Wc{}class PP extends Wc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Gd("endAt",this._value,e._path,!0);const t=cA(e._queryParams,this._value,this._key);if($T(t),Bp(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new kl(e._repo,e._path,t,e._orderByCalled)}}class _L extends Wc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Gd("endBefore",this._value,e._path,!1);const t=function Sk(n,e,t){let r;return r=cA(n,e,n.index_===zd||t?t:Pp),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if($T(t),Bp(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new kl(e._repo,e._path,t,e._orderByCalled)}}class RP extends Wc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Gd("startAt",this._value,e._path,!0);const t=uA(e._queryParams,this._value,this._key);if($T(t),Bp(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new kl(e._repo,e._path,t,e._orderByCalled)}}class wL extends Wc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Gd("startAfter",this._value,e._path,!1);const t=function Ik(n,e,t){let r;return r=uA(n,e,n.index_===zd||t?t:cf),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if($T(t),Bp(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new kl(e._repo,e._path,t,e._orderByCalled)}}class bL extends Wc{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new kl(e._repo,e._path,function Ek(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class TL extends Wc{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new kl(e._repo,e._path,function Tk(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class SL extends Wc{constructor(e){super(),this._path=e}_apply(e){HT(e,"orderByChild");const t=new Ur(this._path);if(Qn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new oA(t),i=wT(e._queryParams,r);return Bp(i),new kl(e._repo,e._path,i,!0)}}class AL extends Wc{_apply(e){HT(e,"orderByKey");const t=wT(e._queryParams,zd);return Bp(t),new kl(e._repo,e._path,t,!0)}}class ML extends Wc{_apply(e){HT(e,"orderByPriority");const t=wT(e._queryParams,Ii);return Bp(t),new kl(e._repo,e._path,t,!0)}}class RL extends Wc{_apply(e){HT(e,"orderByValue");const t=wT(e._queryParams,aA);return Bp(t),new kl(e._repo,e._path,t,!0)}}class OL extends Wc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Gd("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new PP(this._value,this._key)._apply(new RP(this._value,this._key)._apply(e))}}function Kc(n,...e){let t=(0,W.m9)(n);for(const r of e)t=r._apply(t);return t}(function pF(n){(0,W.hu)(!MT,"__referenceConstructor has already been defined"),MT=n})(Yu),function vF(n){(0,W.hu)(!RT,"__referenceConstructor has already been defined"),RT=n}(Yu);const FL="FIREBASE_DATABASE_EMULATOR_HOST",YA={};let NP=!1;function OP(n,e,t,r,i){let l=r||n.options.databaseURL;void 0===l&&(n.options.projectId||qd("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Uo("Using default host for project ",n.options.projectId),l=`${n.options.projectId}-default-rtdb.firebaseio.com`);let _,C,c=zA(l,i),f=c.repoInfo;typeof process<"u"&&process.env&&(C=process.env[FL]),C?(_=!0,l=`http://${C}?ns=${f.namespace}`,c=zA(l,i),f=c.repoInfo):_=!c.repoInfo.secure;const R=i&&_?new Aw(Aw.OWNER):new xO(n.name,n.options,e);lP("Invalid Firebase Database URL",c),Qn(c.path)||qd("Database URL must point to the root of a Firebase Database (not including a child path).");const F=function VL(n,e,t,r){let i=YA[e.name];i||(i={},YA[e.name]=i);let l=i[n.toURLString()];return l&&qd("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),l=new zF(n,NP,t,r),i[n.toURLString()]=l,l}(f,n,R,new AO(n.name,t));return new ZL(F,n)}class ZL{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function GF(n,e,t){if(n.stats_=QD(n.repoInfo_),n.forceRestClient_||DO())n.server_=new CT(n.repoInfo_,(r,i,l,c)=>{fP(n,r,i,l,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>pP(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,W.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new am(n.repoInfo_,e,(r,i,l,c)=>{fP(n,r,i,l,c)},r=>{pP(n,r)},r=>{!function WF(n,e){Vo(e,(t,r)=>{BA(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function RO(n,e){const t=n.toString();return YD[t]||(YD[t]=e()),YD[t]}(n.repoInfo_,()=>new Rk(n.stats_,n.server_)),n.infoData_=new Dk,n.infoSyncTree_=new QM({startListening:(r,i,l,c)=>{let f=[];const _=n.infoData_.getNode(r._path);return _.isEmpty()||(f=Bw(n.infoSyncTree_,r._path,_),setTimeout(()=>{c("ok")},0)),f},stopListening:()=>{}}),BA(n,"connected",!1),n.serverSyncTree_=new QM({startListening:(r,i,l,c)=>(n.server_.listen(r,l,i,(f,_)=>{const C=c(f,_);au(n.eventQueue_,r._path,C)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Yu(this._repo,Er())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function UL(n,e){const t=YA[e];(!t||t[n.key]!==n)&&qd(`Database ${e}(${n.repoInfo_}) has already been deleted.`),mP(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&qd("Cannot call "+e+" on a deleted database.")}}function kP(){rM.IS_TRANSPORT_INITIALIZED&&Na("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function jL(){kP(),Rp.forceDisallow()}function HL(){kP(),Oy.forceDisallow(),Rp.forceAllow()}function zL(n,e){Lx(n,e)}const WL={".sv":"timestamp"};class QL{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}am.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},am.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function GL(n){Rx(Cs.SDK_VERSION),(0,Cs._registerComponent)(new bs.wA("database",(e,{instanceIdentifier:t})=>OP(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Cs.registerVersion)(Mx,"0.14.4",n),(0,Cs.registerVersion)(Mx,"0.14.4","esm2017")}();const t2=new ii.Yd("@firebase/database-compat"),LP=function(n){t2.warn("FIREBASE WARNING: "+n)};class i2{constructor(e){this._delegate=e}cancel(e){(0,W.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,W.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,W.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,W.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,W.Dv)("OnDisconnect.set",1,2,arguments.length),(0,W.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,W.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,W.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),l=>r(l)),i}update(e,t){if((0,W.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let l=0;l<e.length;++l)i[""+l]=e[l];e=i,LP("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,W.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class s2{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,W.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Zp{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,W.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,W.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,W.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,W.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,W.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),Gw("DataSnapshot.child","path",e,!1),new Zp(this._database,this._delegate.child(e))}hasChild(e){return(0,W.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Gw("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,W.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,W.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,W.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Zp(this._database,t)))}hasChildren(){return(0,W.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,W.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,W.Dv)("DataSnapshot.ref",0,0,arguments.length),new lu(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class la{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var l;(0,W.Dv)("Query.on",2,4,arguments.length),(0,W.Wj)("Query.on","callback",t,!1);const c=la.getCancelAndContextArgs_("Query.on",r,i),f=(C,R)=>{t.call(c.context,new Zp(this.database,C),R)};f.userCallback=t,f.context=c.context;const _=null===(l=c.cancel)||void 0===l?void 0:l.bind(c.context);switch(e){case"value":return KA(this._delegate,f,_),t;case"child_added":return SP(this._delegate,f,_),t;case"child_removed":return xP(this._delegate,f,_),t;case"child_changed":return DP(this._delegate,f,_),t;case"child_moved":return AP(this._delegate,f,_),t;default:throw new Error((0,W.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,W.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,W.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,W.Wj)("Query.off","callback",t,!0),(0,W.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,MP(this._delegate,e,i)}else MP(this._delegate,e)}get(){return gL(this._delegate).then(e=>new Zp(this.database,e))}once(e,t,r,i){(0,W.Dv)("Query.once",1,4,arguments.length),(0,W.Wj)("Query.once","callback",t,!0);const l=la.getCancelAndContextArgs_("Query.once",r,i),c=new W.BH,f=(C,R)=>{const F=new Zp(this.database,C);t&&t.call(l.context,F,R),c.resolve(F)};f.userCallback=t,f.context=l.context;const _=C=>{l.cancel&&l.cancel.call(l.context,C),c.reject(C)};switch(e){case"value":KA(this._delegate,f,_,{onlyOnce:!0});break;case"child_added":SP(this._delegate,f,_,{onlyOnce:!0});break;case"child_removed":xP(this._delegate,f,_,{onlyOnce:!0});break;case"child_changed":DP(this._delegate,f,_,{onlyOnce:!0});break;case"child_moved":AP(this._delegate,f,_,{onlyOnce:!0});break;default:throw new Error((0,W.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(e){return(0,W.Dv)("Query.limitToFirst",1,1,arguments.length),new la(this.database,Kc(this._delegate,function EL(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new bL(n)}(e)))}limitToLast(e){return(0,W.Dv)("Query.limitToLast",1,1,arguments.length),new la(this.database,Kc(this._delegate,function IL(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new TL(n)}(e)))}orderByChild(e){return(0,W.Dv)("Query.orderByChild",1,1,arguments.length),new la(this.database,Kc(this._delegate,function DL(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Gw("orderByChild","path",n,!1),new SL(n)}(e)))}orderByKey(){return(0,W.Dv)("Query.orderByKey",0,0,arguments.length),new la(this.database,Kc(this._delegate,function xL(){return new AL}()))}orderByPriority(){return(0,W.Dv)("Query.orderByPriority",0,0,arguments.length),new la(this.database,Kc(this._delegate,function PL(){return new ML}()))}orderByValue(){return(0,W.Dv)("Query.orderByValue",0,0,arguments.length),new la(this.database,Kc(this._delegate,function NL(){return new RL}()))}startAt(e=null,t){return(0,W.Dv)("Query.startAt",0,2,arguments.length),new la(this.database,Kc(this._delegate,function vL(n=null,e){return zw("startAt","key",e,!0),new RP(n,e)}(e,t)))}startAfter(e=null,t){return(0,W.Dv)("Query.startAfter",0,2,arguments.length),new la(this.database,Kc(this._delegate,function CL(n,e){return zw("startAfter","key",e,!0),new wL(n,e)}(e,t)))}endAt(e=null,t){return(0,W.Dv)("Query.endAt",0,2,arguments.length),new la(this.database,Kc(this._delegate,function mL(n,e){return zw("endAt","key",e,!0),new PP(n,e)}(e,t)))}endBefore(e=null,t){return(0,W.Dv)("Query.endBefore",0,2,arguments.length),new la(this.database,Kc(this._delegate,function yL(n,e){return zw("endBefore","key",e,!0),new _L(n,e)}(e,t)))}equalTo(e,t){return(0,W.Dv)("Query.equalTo",1,2,arguments.length),new la(this.database,Kc(this._delegate,function kL(n,e){return zw("equalTo","key",e,!0),new OL(n,e)}(e,t)))}toString(){return(0,W.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,W.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,W.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof la))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,W.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,W.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,W.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new lu(this.database,new Yu(this._delegate._repo,this._delegate._path))}}class lu extends la{constructor(e,t){super(e,new kl(t._repo,t._path,new vT,!1)),this.database=e,this._delegate=t}getKey(){return(0,W.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,W.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new lu(this.database,fm(this._delegate,e))}getParent(){(0,W.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new lu(this.database,e):null}getRoot(){return(0,W.Dv)("Reference.root",0,0,arguments.length),new lu(this.database,this._delegate.root)}set(e,t){(0,W.Dv)("Reference.set",1,2,arguments.length),(0,W.Wj)("Reference.set","onComplete",t,!0);const r=WA(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,W.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let l=0;l<e.length;++l)i[""+l]=e[l];e=i,LP("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ku("Reference.update",this._delegate._path),(0,W.Wj)("Reference.update","onComplete",t,!0);const r=pL(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,W.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,W.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function fL(n,e,t){if(Ku("setWithPriority",n._path),Gd("setWithPriority",e,n._path,!1),VA("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new W.BH;return ZA(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),l=>r(l)),i}remove(e){(0,W.Dv)("Reference.remove",0,1,arguments.length),(0,W.Wj)("Reference.remove","onComplete",e,!0);const t=function dL(n){return Ku("remove",n._path),WA(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,W.Dv)("Reference.transaction",1,3,arguments.length),(0,W.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,W.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,W.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function JL(n,e,t){var r;if(n=(0,W.m9)(n),Ku("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,l=new W.BH,f=KA(n,()=>{});return function rL(n,e,t,r,i,l){jy(n,"transaction on "+e);const c={path:e,update:t,onComplete:r,status:null,order:Ox(),applyLocally:l,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},f=HA(n,e,void 0);c.currentInputSnapshot=f;const _=c.update(f.val());if(void 0===_)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{qw("transaction failed: Data returned ",_,c.path),c.status=0;const C=FT(n.transactionQueueTree_,e),R=dm(C)||[];let F;R.push(c),FA(C,R),"object"==typeof _&&null!==_&&(0,W.r3)(_,".priority")?(F=(0,W.DV)(_,".priority"),(0,W.hu)($w(F),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):F=(OT(n.serverSyncTree_,e)||Fn.EMPTY_NODE).getPriority().val();const H=Ww(n),J=hs(_,F),ie=NA(J,f,H);c.currentOutputSnapshotRaw=J,c.currentOutputSnapshotResolved=ie,c.currentWriteId=BT(n);const we=SA(n.serverSyncTree_,e,ie,c.currentWriteId,c.applyLocally);au(n.eventQueue_,e,we),ZT(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(_,C,R)=>{let F=null;_?l.reject(_):(F=new hm(R,new Yu(n._repo,n._path),Ii),l.resolve(new QL(C,F)))},f,i),l.promise}(this._delegate,e,{applyLocally:r}).then(l=>new s2(l.committed,new Zp(this.database,l.snapshot)));return t&&i.then(l=>t(null,l.committed,l.snapshot),l=>t(l,!1,null)),i}setPriority(e,t){(0,W.Dv)("Reference.setPriority",1,2,arguments.length),(0,W.Wj)("Reference.setPriority","onComplete",t,!0);const r=function hL(n,e){n=(0,W.m9)(n),Ku("setPriority",n._path),VA("setPriority",e,!1);const t=new W.BH;return ZA(n._repo,Wi(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,W.Dv)("Reference.push",0,2,arguments.length),(0,W.Wj)("Reference.push","onComplete",t,!0);const r=function cL(n,e){n=(0,W.m9)(n),Ku("push",n._path),Gd("push",e,n._path,!0);const t=hP(n._repo),r=uL(t),i=fm(n,r),l=fm(n,r);let c;return c=null!=e?WA(l,e).then(()=>l):Promise.resolve(l),i.then=c.then.bind(c),i.catch=c.then.bind(c,void 0),i}(this._delegate,e),i=r.then(c=>new lu(this.database,c));t&&i.then(()=>t(null),c=>t(c));const l=new lu(this.database,r);return l.then=i.then.bind(i),l.catch=i.catch.bind(i,void 0),l}onDisconnect(){return Ku("Reference.onDisconnect",this._delegate._path),new i2(new EP(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Qw{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:jL,forceLongPolling:HL}}useEmulator(e,t,r={}){!function FP(n,e,t,r={}){(n=(0,W.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&qd("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let l;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&qd('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),l=new Aw(Aw.OWNER);else if(r.mockUserToken){const c="string"==typeof r.mockUserToken?r.mockUserToken:(0,W.Sg)(r.mockUserToken,n.app.options.projectId);l=new Aw(c)}!function LL(n,e,t,r){n.repoInfo_=new WD(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,l)}(this._delegate,e,t,r)}ref(e){if((0,W.Dv)("database.ref",0,1,arguments.length),e instanceof lu){const t=IP(this._delegate,e.toString());return new lu(this,t)}{const t=TP(this._delegate,e);return new lu(this,t)}}refFromURL(e){(0,W.Dv)("database.refFromURL",1,1,arguments.length);const r=IP(this._delegate,e);return new lu(this,r)}goOffline(){return(0,W.Dv)("database.goOffline",0,0,arguments.length),function $L(n){(n=(0,W.m9)(n))._checkNotDeleted("goOffline"),mP(n._repo)}(this._delegate)}goOnline(){return(0,W.Dv)("database.goOnline",0,0,arguments.length),function qL(n){(n=(0,W.m9)(n))._checkNotDeleted("goOnline"),function nL(n){n.persistentConnection_&&n.persistentConnection_.resume(dP)}(n._repo)}(this._delegate)}}Qw.ServerValue={TIMESTAMP:function KL(){return WL}(),increment:n=>function YL(n){return{".sv":{increment:n}}}(n)};var a2=Object.freeze({__proto__:null,initStandalone:function o2({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:l=!1}){Rx(t);const c=new bs.zt("auth-internal",new bs.H0("database-standalone"));return c.setComponent(new bs.wA("auth-internal",()=>r,"PRIVATE")),{instance:new Qw(OP(n,c,void 0,e,l),n),namespace:i}}});const l2=Qw.ServerValue;function UP(n){return null==n}function VP(n){return"function"==typeof n.set}function BP(n,e){return VP(e)?e:n.ref(e)}function ZP(n,e){if(function c2(n){return"string"==typeof n}(n))return e.stringCase();if(VP(n))return e.firebaseCase();if(function d2(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function Jw(n,e,t="on",r=Mo.z){return new zr.y(i=>{let l=null;return l=n[t](e,(c,f)=>{r.schedule(()=>{i.next({snapshot:c,prevKey:f})}),"once"===t&&r.schedule(()=>i.complete())},c=>{r.schedule(()=>i.error(c))}),"on"===t?{unsubscribe(){null!=l&&n.off(e,l)}}:{unsubscribe(){}}}).pipe((0,un.U)(i=>{const{snapshot:l,prevKey:c}=i;let f=null;return l.exists()&&(f=l.key),{type:e,payload:l,prevKey:c,key:f}}),(0,Ge.B)())}function jP(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function p2(n,e){const{payload:t,prevKey:r,key:i}=e,l=jP(n,i),c=function f2(n,e){if(UP(e))return 0;{const t=jP(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let f=null;e.payload.forEach(_=>{const C={payload:_,type:"value",prevKey:f,key:_.key};return f=_.key,n=[...n,C],!1})}return n;case"child_added":if(l>-1){const f=n[l-1];(f&&f.key||null)!==r&&(n=n.filter(_=>_.payload.key!==t.key)).splice(c,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(c,0,e)}return n;case"child_removed":return n.filter(f=>f.payload.key!==t.key);case"child_changed":return n.map(f=>f.payload.key===i?e:f);case"child_moved":if(l>-1){const f=n.splice(l,1)[0];return(n=n.slice()).splice(c,0,f),n}return n;default:return n}}function HP(n){return(UP(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function $P(n,e,t){return function h2(n,e,t){return Jw(n,"value","once",t).pipe((0,Q.w)(r=>{const i=[(0,Po.of)(r)];return e.forEach(l=>i.push(Jw(n,l,"on",t))),(0,U.T)(...i).pipe((0,$l.R)(p2,[]))}),oc())}(n,e=HP(e),t)}function qP(n,e,t){const r=(e=HP(e)).map(i=>Jw(n,i,"on",t));return(0,U.T)(...r)}function zP(n,e){return function(r,i){return ZP(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function y2(n){return function(t){return t?ZP(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function GP(n,e){return function(){return Jw(n,"value","on",e)}}!function u2(n){n.INTERNAL.registerComponent(new bs.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new Qw(i,r)},"PUBLIC").setServiceProps({Reference:lu,Query:la,Database:Qw,DataSnapshot:Zp,enableLogging:zL,INTERNAL:a2,ServerValue:l2}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.4")}(Fr.Z);const C2=new o.OlP("angularfire2.realtimeDatabaseURL"),b2=new o.OlP("angularfire2.database.use-emulator");let WP=(()=>{class n{constructor(t,r,i,l,c,f,_,C,R,F,H,J,ie,we,Fe){this.schedulers=f;const lt=_,$t=(0,$n.on)(t,c,r);C&&BD($t,c,R,H,J,ie,F,we),this.database=(0,$n.cc)(`${$t.name}.database.${i}`,"AngularFireDatabase",$t.name,()=>{const Ut=c.runOutsideAngular(()=>$t.database(i||void 0));return lt&&Ut.useEmulator(...lt),Ut},[lt])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>BP(this.database,t));let l=i;return r&&(l=r(i)),function v2(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:zP(r,"update"),set:zP(r,"set"),push:i=>r.push(i),remove:y2(r),snapshotChanges:i=>$P(n,i,t).pipe(Xn.iC),stateChanges:i=>qP(n,i,t).pipe(Xn.iC),auditTrail:i=>function g2(n,e,t){return function _2(n,e,t){return function m2(n,e){return Jw(n,"value","on",e).pipe((0,un.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function pO(...n){const e=(0,Hl.jO)(n);return(0,Jo.e)((t,r)=>{const i=n.length,l=new Array(i);let c=n.map(()=>!1),f=!1;for(let _=0;_<i;_++)(0,wi.Xf)(n[_]).subscribe((0,so.x)(r,C=>{l[_]=C,!f&&!c[_]&&(c[_]=!0,(f=c.every(Ka.y))&&(c=null))},xx.Z));t.subscribe((0,so.x)(r,_=>{if(f){const C=[_,...l];r.next(e?e(...C):C)}}))})}(e),(0,un.U)(([i,l])=>{const c=i.lastKeyToLoad,f=l.map(_=>_.key);return{actions:l,lastKeyToLoad:c,loadedKeys:f}}),function gO(n){return(0,Jo.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,so.x)(t,l=>(r||(r=!n(l,i++)))&&t.next(l)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,un.U)(i=>i.actions))}(n,qP(n,e).pipe((0,$l.R)((i,l)=>[...i,l],[])),t)}(n,i,t).pipe(Xn.iC),valueChanges:(i,l)=>$P(n,i,t).pipe((0,un.U)(f=>f.map(_=>l&&l.idField?Object.assign(Object.assign({},_.payload.val()),{[l.idField]:_.key}):_.payload.val())),Xn.iC)}}(l,this)}object(t){return function w2(n,e){return{query:n,snapshotChanges:()=>GP(n,e.schedulers.outsideAngular)().pipe(Xn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>GP(n,e.schedulers.outsideAngular)().pipe(Xn.iC,(0,un.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>BP(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(o.LFG($n.Dh),o.LFG($n.xv,8),o.LFG(C2,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(Xn.HU),o.LFG(b2,8),o.LFG(nm,8),o.LFG(OD,8),o.LFG(kD,8),o.LFG(FD,8),o.LFG(LD,8),o.LFG(UD,8),o.LFG(VD,8),o.LFG(uT,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),E2=(()=>{class n{constructor(){ND.Z.registerVersion("angularfire",Xn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[WP]}),n})();const KP=["toast-component",""];function T2(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"button",5),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.remove())}),o.TgZ(1,"span",6),o._uU(2,"\xd7"),o.qZA()()}}function I2(n,e){if(1&n&&(o.ynx(0),o._uU(1),o.BQk()),2&n){const t=o.oxw(2);o.xp6(1),o.hij("[",t.duplicatesCount+1,"]")}}function S2(n,e){if(1&n&&(o.TgZ(0,"div"),o._uU(1),o.YNc(2,I2,2,1,"ng-container",4),o.qZA()),2&n){const t=o.oxw();o.Tol(t.options.titleClass),o.uIk("aria-label",t.title),o.xp6(1),o.hij(" ",t.title," "),o.xp6(1),o.Q6J("ngIf",t.duplicatesCount)}}function D2(n,e){if(1&n&&o._UZ(0,"div",7),2&n){const t=o.oxw();o.Tol(t.options.messageClass),o.Q6J("innerHTML",t.message,o.oJD)}}function A2(n,e){if(1&n&&(o.TgZ(0,"div",8),o._uU(1),o.qZA()),2&n){const t=o.oxw();o.Tol(t.options.messageClass),o.uIk("aria-label",t.message),o.xp6(1),o.hij(" ",t.message," ")}}function x2(n,e){if(1&n&&(o.TgZ(0,"div"),o._UZ(1,"div",9),o.qZA()),2&n){const t=o.oxw();o.xp6(1),o.Udp("width",t.width+"%")}}class F2{constructor(e,t){this.component=e,this.injector=t}attach(e,t){return this._attachedHost=e,e.attach(this,t)}detach(){const e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class L2{attach(e,t){return this._attachedPortal=e,this.attachComponentPortal(e,t)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}}class U2{constructor(e){this._overlayRef=e,this.duplicatesCount=0,this._afterClosed=new P.x,this._activate=new P.x,this._manualClose=new P.x,this._resetTimeout=new P.x,this._countDuplicate=new P.x}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,t){e&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}}class zT{constructor(e,t,r,i,l,c){this.toastId=e,this.config=t,this.message=r,this.title=i,this.toastType=l,this.toastRef=c,this._onTap=new P.x,this._onAction=new P.x,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}}const QP=new o.OlP("ToastConfig");class V2 extends L2{constructor(e,t,r){super(),this._hostDomElement=e,this._componentFactoryResolver=t,this._appRef=r}attachComponentPortal(e,t){const r=this._componentFactoryResolver.resolveComponentFactory(e.component);let i;return i=r.create(e.injector),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.detachView(i.hostView),i.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(i),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(i)),i}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let B2=(()=>{class n{constructor(){this._document=(0,o.f3M)(on.K0)}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._document.createElement("div");t.classList.add("overlay-container"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),this._containerElement=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Z2{constructor(e){this._portalHost=e}attach(e,t=!0){return this._portalHost.attach(e,t)}detach(){return this._portalHost.detach()}}let j2=(()=>{class n{constructor(){this._overlayContainer=(0,o.f3M)(B2),this._componentFactoryResolver=(0,o.f3M)(o._Vd),this._appRef=(0,o.f3M)(o.z2F),this._document=(0,o.f3M)(on.K0),this._paneElements=new Map}create(t,r){return this._createOverlayRef(this.getPaneElement(t,r))}getPaneElement(t="",r){return this._paneElements.get(r)||this._paneElements.set(r,{}),this._paneElements.get(r)[t]||(this._paneElements.get(r)[t]=this._createPaneElement(t,r)),this._paneElements.get(r)[t]}_createPaneElement(t,r){const i=this._document.createElement("div");return i.id="toast-container",i.classList.add(t),i.classList.add("toast-container"),r?r.getContainerElement().appendChild(i):this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalHost(t){return new V2(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new Z2(this._createPortalHost(t))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Yc=(()=>{class n{constructor(t,r,i,l,c){this.overlay=r,this._injector=i,this.sanitizer=l,this.ngZone=c,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig={...t.default,...t.config},t.config.iconClasses&&(this.toastrConfig.iconClasses={...t.default.iconClasses,...t.config.iconClasses})}show(t,r,i={},l=""){return this._preBuildNotification(l,t,r,this.applyConfig(i))}success(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",t,r,this.applyConfig(i))}error(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",t,r,this.applyConfig(i))}info(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",t,r,this.applyConfig(i))}warning(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",t,r,this.applyConfig(i))}clear(t){for(const r of this.toasts)if(void 0!==t){if(r.toastId===t)return void r.toastRef.manualClose()}else r.toastRef.manualClose()}remove(t){const r=this._findToast(t);if(!r||(r.activeToast.toastRef.close(),this.toasts.splice(r.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const i=this.toasts[this.currentlyActive].toastRef;i.isInactive()||(this.currentlyActive=this.currentlyActive+1,i.activate())}return!0}findDuplicate(t="",r="",i,l){const{includeTitleDuplicates:c}=this.toastrConfig;for(const f of this.toasts)if((!c||c&&f.title===t)&&f.message===r)return f.toastRef.onDuplicate(i,l),f;return null}applyConfig(t={}){return{...this.toastrConfig,...t}}_findToast(t){for(let r=0;r<this.toasts.length;r++)if(this.toasts[r].toastId===t)return{index:r,activeToast:this.toasts[r]};return null}_preBuildNotification(t,r,i,l){return l.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,r,i,l)):this._buildNotification(t,r,i,l)}_buildNotification(t,r,i,l){if(!l.toastComponent)throw new Error("toastComponent required");const c=this.findDuplicate(i,r,this.toastrConfig.resetTimeoutOnDuplicate&&l.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&i||r)&&this.toastrConfig.preventDuplicates&&null!==c)return c;this.previousToastMessage=r;let f=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(f=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const _=this.overlay.create(l.positionClass,this.overlayContainer);this.index=this.index+1;let C=r;r&&l.enableHtml&&(C=this.sanitizer.sanitize(o.q3G.HTML,r));const R=new U2(_),F=new zT(this.index,l,C,i,t,R),J=o.zs3.create({providers:[{provide:zT,useValue:F}],parent:this._injector}),ie=new F2(l.toastComponent,J),we=_.attach(ie,l.newestOnTop);R.componentInstance=we.instance;const Fe={toastId:this.index,title:i||"",message:r||"",toastRef:R,onShown:R.afterActivate(),onHidden:R.afterClosed(),onTap:F.onTap(),onAction:F.onAction(),portal:we};return f||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{Fe.toastRef.activate()})),this.toasts.push(Fe),Fe}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(QP),o.LFG(j2),o.LFG(o.zs3),o.LFG(S.H7),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),JP=(()=>{class n{get displayStyle(){if("inactive"===this.state.value)return"none"}constructor(t,r,i){this.toastrService=t,this.toastPackage=r,this.ngZone=i,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(l=>{this.duplicatesCount=l})}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state={...this.state,value:"active"},!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state={...this.state,value:"active"},this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state={...this.state,value:"removed"},this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&"extendedTimeOut"!==this.options.disableTimeOut&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),r)):this.timeout=setTimeout(()=>t(),r)}outsideInterval(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),r)):this.intervalId=setInterval(()=>t(),r)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(Yc),o.Y36(zT),o.Y36(o.R0b))},n.\u0275cmp=o.Xpm({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(t,r){1&t&&o.NdJ("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),2&t&&(o.d8E("@flyInOut",r.state),o.Tol(r.toastClasses),o.Udp("display",r.displayStyle))},standalone:!0,features:[o.jDz],attrs:KP,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(t,r){1&t&&(o.YNc(0,T2,3,0,"button",0),o.YNc(1,S2,3,5,"div",1),o.YNc(2,D2,1,3,"div",2),o.YNc(3,A2,2,4,"div",3),o.YNc(4,x2,2,2,"div",4)),2&t&&(o.Q6J("ngIf",r.options.closeButton),o.xp6(1),o.Q6J("ngIf",r.title),o.xp6(1),o.Q6J("ngIf",r.message&&r.options.enableHtml),o.xp6(1),o.Q6J("ngIf",r.message&&!r.options.enableHtml),o.xp6(1),o.Q6J("ngIf",r.options.progressBar))},dependencies:[on.O5],encapsulation:2,data:{animation:[me("flyInOut",[ne("inactive",te({opacity:0})),ne("active",te({opacity:1})),ne("removed",te({opacity:0})),at("inactive => active",be("{{ easeTime }}ms {{ easing }}")),at("active => removed",be("{{ easeTime }}ms {{ easing }}"))])]}}),n})();const H2={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",toastComponent:JP},$2=(n={})=>(0,o.MR2)([{provide:QP,useValue:{default:H2,config:n}}]);let q2=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[$2(t)]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[JP]}),n})(),$y=(()=>{var n;class e{constructor(r,i,l){this.firestore=r,this.db=i,this.toastr=l}getProductsByCategory(r){return this.firestore.collection("products").snapshotChanges().pipe((0,un.U)(l=>l.map(c=>{const f=c.payload.doc.data();return{id:c.payload.doc.id,...f}}).filter(c=>c.category===r).sort((c,f)=>f.date.seconds-c.date.seconds)))}getProductsBySubcategory(r){return this.firestore.collection("products").snapshotChanges().pipe((0,un.U)(l=>l.map(c=>{const f=c.payload.doc.data();return{id:c.payload.doc.id,...f}}).filter(c=>c.sub_category===r).sort((c,f)=>f.date.seconds-c.date.seconds)))}getProductById(r){return this.firestore.collection("products").snapshotChanges().pipe((0,un.U)(l=>l.map(c=>{const f=c.payload.doc.data();return{id:c.payload.doc.id,...f}}).filter(c=>c.id===r)))}getProducts(){return this.firestore.collection("products").snapshotChanges().pipe((0,un.U)(i=>i.map(l=>{const c=l.payload.doc.data();return{id:l.payload.doc.id,...c}}).sort((l,c)=>c.date.seconds-l.date.seconds)))}getVarientBySku(r){return this.firestore.collection("varients").snapshotChanges().pipe((0,un.U)(l=>l.map(c=>{const f=c.payload.doc.data();return{id:c.payload.doc.id,...f}}).filter(c=>c.sku===r)))}getDocumentsByReferences(r){return this.firestore.collection("products").snapshotChanges().pipe((0,un.U)(i=>i.map(l=>({id:l.payload.doc.id,...l.payload.doc.data()}))),(0,un.U)(i=>i.filter(l=>{for(const c of r)if(c.path.split("/").slice(1).join("/")===l.id)return!0;return!1})))}filterProducts(r,i){return r&&i&&0!==i.length?r.filter(l=>(console.log(),i.some(c=>{console.log(l.productname.toLowerCase().includes(c.toLowerCase())),l.productname.toLowerCase().includes(c.toLowerCase())}))):r}updateProductStock(r){const i=[];return r.forEach(l=>{const c=this.updateProductStockForItem(l.id,l.quantity);i.push(c)}),sc(i)}updateProductStockForItem(r,i){return new zr.y(l=>{this.db.object(`/products/${r}/stocks`).valueChanges().subscribe({next:c=>{const f=c;if(null==f)return void l.error(`Stock information not found for product ${r}`);const _=f-i;this.db.object(`/products/${r}`).update({stocks:_}).then(()=>{l.next(),l.complete()}).catch(C=>{l.error(C)})},error:c=>{l.error(c)}})})}}return(n=e).\u0275fac=function(r){return new(r||n)(o.LFG(qc),o.LFG(WP),o.LFG(Yc))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})(),QA=(()=>{var n;class e{constructor(r){this.afs=r}getSubCategories(){return this.categoriesCollection=this.afs.collection("sub_category_master",r=>r.orderBy("sub_index","asc")),this.categoriesCollection.snapshotChanges().pipe((0,un.U)(r=>r.map(i=>{const l=i.payload.doc.data();return{id:i.payload.doc.id,...l}})))}getSubcategoriesByCategory(r){return this.categoriesCollection=this.afs.collection("sub_category_master",i=>i.orderBy("sub_index","asc")),this.categoriesCollection.snapshotChanges().pipe((0,un.U)(i=>i.map(l=>{const c=l.payload.doc.data();return{id:l.payload.doc.id,...c}}).filter(l=>l.category===r)))}}return(n=e).\u0275fac=function(r){return new(r||n)(o.LFG(qc))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();var XP=B(1135);class JA{constructor(){this.delivery=0}}let Qu=(()=>{var n;class e{constructor(r,i,l,c){this.auth=r,this.firestore=i,this.toastr=l,this.router=c,this.isLoggedInUser=!1,this.auth.authState.pipe((0,un.U)(f=>{this.user=f||null})).subscribe()}Login(r,i){var l=this;return(0,ke.Z)(function*(){yield l.auth.signInWithEmailAndPassword(r,i).then(c=>{l.isLoggedInUser=!0,localStorage.setItem("user",JSON.stringify(c.user)),l.router.navigate(["/shop"])})})()}register(r,i){var l=this;return(0,ke.Z)(function*(){yield l.auth.createUserWithEmailAndPassword(r,i).then(c=>{l.isLoggedInUser=!0,localStorage.setItem("user",JSON.stringify(c.user))})})()}logout(){this.auth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["/login"])})}getCurrentUser(){return this.user}isLoggedIn(){return!!localStorage.getItem("user")}}return(n=e).\u0275fac=function(r){return new(r||n)(o.LFG(nm),o.LFG(qc),o.LFG(Yc),o.LFG(wn.F0))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})(),jp=(()=>{var n;class e{constructor(r){this.firestore=r}getHomeBanner(){return this.firestore.collection("home_banner").snapshotChanges().pipe((0,un.U)(i=>i.map(l=>{const c=l.payload.doc.data();return{id:l.payload.doc.id,...c}})))}getHomeOtherCharges(){return this.firestore.collection("othercharges").snapshotChanges().pipe((0,un.U)(i=>i.map(l=>{const c=l.payload.doc.data();return{id:l.payload.doc.id,...c}})))}getTeam(){return this.firestore.collection("team").snapshotChanges().pipe((0,un.U)(i=>i.map(l=>{const c=l.payload.doc.data();return{id:l.payload.doc.id,...c}})))}getTestimonial(){return this.firestore.collection("testimonials").snapshotChanges().pipe((0,un.U)(i=>i.map(l=>{const c=l.payload.doc.data();return{id:l.payload.doc.id,...c}})))}getworkinghours(){return this.firestore.collection("workinghours").doc("kdPU4LjLRXb1T4otwHHB").valueChanges().pipe((0,un.U)(i=>i))}getOthercharges(){return this.firestore.collection("othercharges").valueChanges()}}return(n=e).\u0275fac=function(r){return new(r||n)(o.LFG(qc))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})(),Wd=(()=>{var n;class e{constructor(r,i,l,c,f){this.firestore=r,this.router=i,this.toastr=l,this.auth=c,this.otherchargesService=f,this.cartCountSubject=new XP.X(0),this.cartCount$=this.cartCountSubject.asObservable(),this.otercharges=new JA,this.cartCollection=this.firestore.collection("cart"),this.prodCollection=this.firestore.collection("products"),this.varientCollection=this.firestore.collection("varients"),this.cartItems$=this.cartCollection.valueChanges({idField:"id"}),this.getOthercharges()}getCurrentUserId(){this.userId=this.auth.getCurrentUser()?.uid}updateCartCount(r){this.cartCountSubject.next(r)}createCart(r){const i=this.firestore.createId(),l={id:i,...r};this.cartCollection.doc(i).set(l),this.toastr.success("Product added to cart")}getOthercharges(){this.otherchargesService.getHomeOtherCharges().subscribe(r=>{this.otercharges=r[0]})}getCarts(){const r=this.auth.getCurrentUser()?.uid;return r?this.firestore.collection("cart",i=>i.where("userId","==",r)).valueChanges():(0,Po.of)([])}updateQuantity(r,i){this.cartCollection.doc(r).update({quantity:i}).then(()=>{this.toastr.success("Quantity updated successfully!")}).catch(l=>{this.toastr.error("Error updating quantity:",l)})}updateProductStock(r,i){this.prodCollection.doc(r).update({stocks:i}).catch(l=>{this.toastr.error("Error updating quantity:",l)})}updateVarientStock(r,i){this.varientCollection.doc(r).update({stocks:i}).catch(l=>{this.toastr.error("Error updating quantity:",l)}),this.router.navigate(["/shop"])}updateCart(r){const{id:i,...l}=r;this.cartCollection.doc(i).update(l).then(()=>{this.toastr.success("Cart item updated successfully!")}).catch(f=>{this.toastr.error("Error updating cart item:",f)})}deleteCart(r){this.cartCollection.doc(r).delete().then(()=>{this.toastr.success("Item removed from cart successfully!")}).catch(i=>{this.toastr.error("Error removing item from cart:",i)})}clearCart(){const r=this.auth.getCurrentUser()?.uid;r?this.firestore.collection("cart",i=>i.where("userId","==",r)).valueChanges({idField:"id"}).pipe((0,un.U)(i=>i.map(l=>l.id))).subscribe(i=>{i.forEach(l=>{this.cartCollection.doc(l).delete().then(()=>{console.log(`Item ${l} removed from cart successfully for user ${r}`)}).catch(c=>{console.error(`Error removing item ${l} from cart for user ${r}: ${c}`)})})}):console.error("User is not authenticated.")}getSubtotal(r){return r.price*r.quantity}getTotal(){return this.cartItems$.pipe((0,un.U)(r=>{let i=0;return r.forEach(c=>{i+=this.getSubtotal(c)}),i+this.otercharges.delivery}))}getGstAmount(r,i){return r*i/100}}return(n=e).\u0275fac=function(r){return new(r||n)(o.LFG(qc),o.LFG(wn.F0),o.LFG(Yc),o.LFG(Qu),o.LFG(jp))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})(),GT=(()=>{var n;class e{constructor(){this.product$=new XP.X(null)}ngOnInit(){this.getProduct()}setProduct(r){this.product$.next(r)}getProduct(){return this.product$.asObservable()}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();function z2(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"li",15)(1,"div",16)(2,"a",17),o._UZ(3,"img",18),o.qZA()(),o.TgZ(4,"div",19)(5,"h3",20),o._UZ(6,"a",17),o.qZA(),o.TgZ(7,"p")(8,"span",21),o._uU(9),o.TgZ(10,"strong"),o._uU(11,"\xd7"),o.qZA()(),o.TgZ(12,"span",22),o._uU(13),o.qZA()()(),o.TgZ(14,"button",23),o.NdJ("click",function(){const l=o.CHM(t).$implicit,c=o.oxw();return o.KtG(c.removeItem(l.id))}),o._UZ(15,"i",5),o.qZA()()}if(2&n){const t=e.$implicit;o.xp6(2),o.MGl("routerLink","../product-detail/",t.id,""),o.xp6(1),o.s9C("src",t.imageUrl,o.LSH),o.xp6(3),o.MGl("routerLink","../product-detail/",t.id,""),o.xp6(3),o.hij("",t.quantity," "),o.xp6(4),o.hij("\u20b9",null==t?null:t.price,"")}}let XA=(()=>{var n;class e{constructor(r,i,l,c,f){this.elementRef=r,this.cartService=i,this.router=l,this.auth=c,this.otherchargeservice=f,this.total$=null,this.gst=0,this.gstamount=0,this.shipping=0}ngOnInit(){var r=document.createElement("script");r.type="text/javascript",r.src="../assets/js/main.js",this.elementRef.nativeElement.appendChild(r),this.getOthercharges(),this.sub_total=this.cartService.getCarts().pipe((0,un.U)(i=>{let l=0;return i.forEach(c=>{l+=this.cartService.getSubtotal(c)}),this.gstamount=l*this.gst/100,l})),this.getCartItems()}getOthercharges(){this.otherchargeservice.getHomeOtherCharges().subscribe(r=>{this.shipping=r[0].delivery,console.log(this.gst)})}routeToCart(){this.router.navigate(["cart"])}routeToCheckout(){this.router.navigate(["checkout"])}getCartItems(){this.cartService.getCarts().subscribe(r=>{this.cartItems=r})}removeItem(r){this.cartService.deleteCart(r),this.getCartItems()}}return(n=e).\u0275fac=function(r){return new(r||n)(o.Y36(o.SBq),o.Y36(Wd),o.Y36(wn.F0),o.Y36(Qu),o.Y36(jp))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-mini-cart"]],decls:47,vars:16,consts:[[1,"offcanvas-minicart-wrapper"],[1,"minicart-inner"],[1,"offcanvas-overlay"],[1,"minicart-inner-content"],[1,"minicart-close"],[1,"pe-7s-close"],[1,"minicart-content-box"],[1,"minicart-item-wrapper"],["class","minicart-item",4,"ngFor","ngForOf"],[1,"minicart-pricing-box"],[1,"total"],[1,"minicart-button"],[3,"click"],[1,"fa","fa-shopping-cart"],[1,"fa","fa-share"],[1,"minicart-item"],[1,"minicart-thumb"],[3,"routerLink"],["alt","product",3,"src"],[1,"minicart-content"],[1,"product-name"],[1,"cart-quantity"],[1,"cart-price"],[1,"minicart-remove",3,"click"]],template:function(r,i){1&r&&(o.TgZ(0,"div",0)(1,"div",1),o._UZ(2,"div",2),o.TgZ(3,"div",3)(4,"div",4),o._UZ(5,"i",5),o.qZA(),o.TgZ(6,"div",6)(7,"div",7)(8,"ul"),o.YNc(9,z2,16,5,"li",8),o.qZA()(),o.TgZ(10,"div",9)(11,"ul")(12,"li")(13,"span"),o._uU(14,"sub-total"),o.qZA(),o.TgZ(15,"span")(16,"strong"),o._uU(17),o.ALo(18,"number"),o.ALo(19,"async"),o.qZA()()(),o.TgZ(20,"li")(21,"span"),o._uU(22,"Shipping "),o.qZA(),o.TgZ(23,"span")(24,"strong"),o._uU(25),o.qZA()()(),o.TgZ(26,"li")(27,"span"),o._uU(28),o.qZA(),o.TgZ(29,"span")(30,"strong"),o._uU(31),o.qZA()()(),o.TgZ(32,"li",10)(33,"span"),o._uU(34,"total"),o.qZA(),o.TgZ(35,"span")(36,"strong"),o._uU(37),o.ALo(38,"number"),o.ALo(39,"async"),o.qZA()()()()(),o.TgZ(40,"div",11)(41,"a",12),o.NdJ("click",function(){return i.routeToCart()}),o._UZ(42,"i",13),o._uU(43," View Cart"),o.qZA(),o.TgZ(44,"a",12),o.NdJ("click",function(){return i.routeToCheckout()}),o._UZ(45,"i",14),o._uU(46," Checkout"),o.qZA()()()()()()),2&r&&(o.xp6(9),o.Q6J("ngForOf",i.cartItems),o.xp6(8),o.hij("\u20b9",o.xi3(18,6,o.lcZ(19,9,i.sub_total),"1.2-2"),""),o.xp6(8),o.hij("\u20b9",i.shipping,""),o.xp6(3),o.hij("GST (",i.gst," %)"),o.xp6(3),o.hij("\u20b9",i.gstamount,""),o.xp6(6),o.hij("\u20b9",o.xi3(38,11,o.lcZ(39,14,i.total$),"1.2-2"),""))},dependencies:[on.sg,wn.rH,on.Ov,on.JJ]}),e})();function G2(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",59),o.NdJ("click",function(){const l=o.CHM(t).$implicit,c=o.oxw(2);return o.KtG(c.navigateToShop(l.category,l.sub_category))}),o._uU(1),o.ALo(2,"uppercase"),o.qZA()}if(2&n){const t=e.$implicit;o.xp6(1),o.hij(" ",o.lcZ(2,1,t.sub_category)," ")}}function W2(n,e){if(1&n&&(o.TgZ(0,"div",20),o.YNc(1,G2,3,3,"div",21),o.qZA()),2&n){const t=o.oxw();o.xp6(1),o.Q6J("ngForOf",t.subcategory1)}}function K2(n,e){1&n&&o.GkF(0,60)}function Y2(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",61)(1,"figure",62)(2,"a",63),o.NdJ("click",function(){const l=o.CHM(t).$implicit,c=o.oxw();return o.KtG(c.navigateToShop(l.category,l.sub_category))}),o._UZ(3,"img",64)(4,"img",65),o.qZA(),o.TgZ(5,"div",66)(6,"button",67),o.NdJ("click",function(){const l=o.CHM(t).$implicit,c=o.oxw();return o.KtG(c.navigateToShop(l.category,l.sub_category))}),o._uU(7," QUICK VIEW "),o.qZA()()(),o.TgZ(8,"div",68)(9,"h6",69)(10,"a",63),o.NdJ("click",function(){const l=o.CHM(t).$implicit,c=o.oxw();return o.KtG(c.navigateToShop(l.category,l.sub_category))}),o._uU(11),o.ALo(12,"uppercase"),o.qZA()()()()}if(2&n){const t=e.$implicit;o.xp6(3),o.Q6J("src",t.imageUrl,o.LSH),o.xp6(1),o.Q6J("src",t.imageUrl,o.LSH),o.xp6(7),o.Oqu(o.lcZ(12,3,t.sub_category))}}function Q2(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",59),o.NdJ("click",function(){const l=o.CHM(t).$implicit,c=o.oxw();return o.KtG(c.navigateToShop(l.category,l.sub_category))}),o._uU(1),o.ALo(2,"uppercase"),o.qZA()}if(2&n){const t=e.$implicit;o.xp6(1),o.hij(" ",o.lcZ(2,1,t.sub_category)," ")}}function J2(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",61)(1,"figure",62)(2,"a",63),o.NdJ("click",function(){const l=o.CHM(t).$implicit,c=o.oxw();return o.KtG(c.navigateToShop(l.category,l.sub_category))}),o._UZ(3,"img",64)(4,"img",65),o.qZA(),o.TgZ(5,"div",66)(6,"button",67),o.NdJ("click",function(){const l=o.CHM(t).$implicit,c=o.oxw();return o.KtG(c.navigateToShop(l.category,l.sub_category))}),o._uU(7," QUICK VIEW "),o.qZA()()(),o.TgZ(8,"div",68)(9,"h6",69)(10,"a",63),o.NdJ("click",function(){const l=o.CHM(t).$implicit,c=o.oxw();return o.KtG(c.navigateToShop(l.category,l.sub_category))}),o._uU(11),o.ALo(12,"uppercase"),o.qZA()()()()}if(2&n){const t=e.$implicit;o.xp6(3),o.Q6J("src",t.imageUrl,o.LSH),o.xp6(1),o.Q6J("src",t.imageUrl,o.LSH),o.xp6(7),o.Oqu(o.lcZ(12,3,t.sub_category))}}function X2(n,e){if(1&n&&(o.TgZ(0,"div",70)(1,"figure",62)(2,"a",71),o._UZ(3,"img",64)(4,"img",65),o.qZA(),o.TgZ(5,"div",66)(6,"button",72),o._uU(7," add to cart "),o.qZA()()(),o.TgZ(8,"div",68)(9,"div",73)(10,"p",74)(11,"a",75),o._uU(12),o.ALo(13,"uppercase"),o.qZA()()(),o.TgZ(14,"h6",69)(15,"a",75),o._uU(16),o.qZA()(),o.TgZ(17,"div",76)(18,"span",77),o._uU(19),o.qZA()()()()),2&n){const t=e.$implicit;o.xp6(2),o.MGl("routerLink","../product-detail/",t.id,""),o.xp6(1),o.Q6J("src",t.imageUrl[0],o.LSH),o.xp6(1),o.Q6J("src",t.imageUrl[0],o.LSH),o.xp6(7),o.MGl("routerLink","../product-detail/",null==t?null:t.id,""),o.xp6(1),o.Oqu(o.lcZ(13,8,null==t?null:t.category)),o.xp6(3),o.MGl("routerLink","../product-detail/",null==t?null:t.id,""),o.xp6(1),o.Oqu(null==t?null:t.sub_category),o.xp6(3),o.hij("\u20b9",null==t?null:t.min_price,"")}}function eU(n,e){if(1&n&&(o.TgZ(0,"div",78)(1,"p"),o._uU(2),o.qZA(),o.TgZ(3,"div",79)(4,"span"),o._UZ(5,"i",80),o.qZA(),o.TgZ(6,"span"),o._UZ(7,"i",80),o.qZA(),o.TgZ(8,"span"),o._UZ(9,"i",80),o.qZA(),o.TgZ(10,"span"),o._UZ(11,"i",80),o.qZA(),o.TgZ(12,"span"),o._UZ(13,"i",80),o.qZA()(),o.TgZ(14,"h5",81),o._uU(15),o.qZA()()),2&n){const t=e.$implicit;o.xp6(2),o.Oqu(t.comment),o.xp6(13),o.Oqu(t.name)}}let tU=(()=>{var n;class e{constructor(r,i,l,c,f,_,C,R){this.productService=r,this.subCategoryService=i,this.service=l,this.quickViewService=c,this.otherService=f,this.userService=_,this.router=C,this.elementRef=R,this.subcategory1=new Array,this.subcategory2=new Array,this.testimonials=[],this.settings={counter:!0,plugins:[Pi,za,X,Vn,kr]}}ngOnInit(){this.getWorkingHours(),this.getSubcategory1(),this.getSubcategory2(),this.getTestimonials(),this.getFeaturedProducts()}getWorkingHours(){this.otherService.getworkinghours().subscribe(r=>{this.working_hours=r})}getSubcategory1(){this.subCategoryService.getSubcategoriesByCategory("Silver Jewellery").subscribe(r=>{this.subcategory1=r,console.log(r)})}getSubcategory2(){this.subCategoryService.getSubcategoriesByCategory("Brass Decor").subscribe(r=>{this.subcategory2=r})}getFeaturedProducts(){this.productService.getProducts().subscribe(r=>{this.featuredProducts=r.filter(i=>!0===i.featured),console.log(this.featuredProducts)})}navigateToShop(r,i){const l=encodeURIComponent(i),c=encodeURIComponent(r);this.router.navigate(["../products"],{queryParams:{category:c,sub_category:l}})}getTestimonials(){this.otherService.getTestimonial().subscribe(r=>{this.testimonials=r})}openQuickView(r){this.quickViewService.setProduct(r)}}return(n=e).\u0275fac=function(r){return new(r||n)(o.Y36($y),o.Y36(QA),o.Y36(Wd),o.Y36(GT),o.Y36(jp),o.Y36(Qu),o.Y36(wn.F0),o.Y36(o.SBq))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-home"]],decls:179,vars:10,consts:[[1,"product-area","section-padding"],[1,"text-center"],[1,"custom_mobile",2,"color","brown","font-family","CustomFont","font-size","4.3rem","line-height","0.4"],[2,"color","grey","font-weight","normal"],[2,"color","black","font-weight","bold"],[1,"custom-size",2,"color","gray","font-family","CustomFont1","font-size","2.3rem","margin-left","370px"],[1,"container"],[1,"row"],[1,"col-12"],[1,"section-title","text-center"],[1,"title",2,"font-size","25","margin-bottom","20px"],[1,"category-section"],["class","category-container",4,"ngIf"],[1,"product-container"],[1,"tab-content"],[1,"tab-pane","fade","show","active"],[1,"product-carousel-4","slick-row-10","slick-arrow-style"],["display","none",4,"ngIf"],["class","product-item bg:'red",4,"ngFor","ngForOf"],[1,"title",2,"font-size","25"],[1,"category-container"],["class","category-item","type","button",3,"click",4,"ngFor","ngForOf"],[1,"feature-product","section-padding"],[1,"title"],["class","product-item bg:'red'",4,"ngFor","ngForOf"],[2,"background-color","white"],[1,"section-title","text-center",2,"margin-top","15px"],[1,"contact-area","section-padding","pt-0"],[1,"col-lg-12"],[1,"contact-info","text-center"],[1,"working-time"],[1,"fa","fa-fax"],[1,"fa","fa-phone"],[1,"fa","fa-envelope-o"],[2,"padding","10px","width","100%","border-radius","5px","border-style","groove"],["width","100%","height","200","loading","lazy","referrerpolicy","no-referrer-when-downgrade",2,"border","5px"],["src","../../assets/img/shop.png","alt","Shop Image",2,"width","120%","height","120%","object-fit","cover"],[1,"twitter-feed"],[1,"twitter-feed-content","text-center"],["data-bg","../../assets/img/testimonial/testimonials-bg.jpg",1,"testimonial-area","section-padding","bg-img"],[1,"sub-title"],[1,"testimonial-thumb-wrapper"],[1,"testimonial-thumb-carousel"],[1,"testimonial-content-wrapper"],[1,"testimonial-content-carousel"],["class","testimonial-content",4,"ngFor","ngForOf"],[1,"service-policy","section-padding"],[1,"row","mtn-30"],[1,"col-sm-6","col-lg-3"],[1,"policy-item"],[1,"policy-icon"],[1,"pe-7s-plane"],[1,"policy-content"],[1,"pe-7s-help2"],[1,"pe-7s-back"],[1,"pe-7s-credit"],[1,"scroll-top","not-visible"],[1,"fa","fa-angle-up"],["hidden",""],["type","button",1,"category-item",3,"click"],["display","none"],[1,"product-item","bg:'red"],[1,"product-thumb"],[3,"click"],[1,"pri-img",3,"src"],[1,"sec-img",3,"src"],[1,"cart-hover"],[1,"btn","btn-cart",3,"click"],[1,"product-caption","text-center"],[1,"product-name"],[1,"product-item","bg:'red'"],[3,"routerLink"],[1,"btn","btn-cart"],[1,"product-identity"],[1,"manufacturer-name"],[2,"font-size","18 !important","font-weight","bold","font-family","Amethysta",3,"routerLink"],[1,"price-box"],[1,"price-regular",2,"color","#81ca33"],[1,"testimonial-content"],[1,"ratings"],[1,"fa","fa-star-o"],[1,"testimonial-author"]],template:function(r,i){1&r&&(o.TgZ(0,"section",0)(1,"div",1)(2,"h1",2),o._uU(3,"g"),o.TgZ(4,"span",3),o._uU(5,"low-"),o.TgZ(6,"span",4),o._uU(7,"n"),o.qZA(),o._uU(8,"-"),o.qZA(),o._uU(9,"g"),o.TgZ(10,"span",3),o._uU(11,"litter"),o.qZA()(),o.TgZ(12,"span",5),o._uU(13,"it's for you.."),o.qZA()(),o.TgZ(14,"div",6),o._UZ(15,"br"),o.TgZ(16,"div",7)(17,"div",8)(18,"div",9)(19,"h2",10),o._uU(20,"SILVER JEWELLERY"),o.qZA()(),o.TgZ(21,"section",11),o.YNc(22,W2,2,1,"div",12),o.qZA()()(),o.TgZ(23,"div",7)(24,"div",8)(25,"div",13)(26,"div",14)(27,"div",15)(28,"div",16),o.YNc(29,K2,1,0,"ng-container",17),o.YNc(30,Y2,13,5,"div",18),o.qZA()()()()()()()(),o.TgZ(31,"section",0)(32,"div",6),o._UZ(33,"br"),o.TgZ(34,"div",7)(35,"div",8)(36,"div",9)(37,"h2",19),o._uU(38,"BRASS DECOR"),o.qZA()(),o.TgZ(39,"section",11)(40,"div",20),o.YNc(41,Q2,3,3,"div",21),o.qZA()()()(),o.TgZ(42,"div",7)(43,"div",8)(44,"div",13)(45,"div",14)(46,"div",15)(47,"div",16),o.YNc(48,J2,13,5,"div",18),o.qZA()()()()()()()(),o.TgZ(49,"section",22)(50,"div",6)(51,"div",7)(52,"div",8)(53,"div",9)(54,"h5",23),o._uU(55,"FEATURED PRODUCTS"),o.qZA()()()(),o.TgZ(56,"div",7)(57,"div",8)(58,"div",16),o.YNc(59,X2,20,10,"div",24),o.qZA()()()()(),o.TgZ(60,"section",25)(61,"div",6)(62,"div",7)(63,"div",8)(64,"div",26)(65,"h2",23),o._uU(66,"Our Location"),o.qZA()()()(),o.TgZ(67,"div",27)(68,"div",6)(69,"div",28)(70,"div",29)(71,"div",30)(72,"p"),o._UZ(73,"i",31),o._uU(74," Address : 115, Jodhpur Park, Kolkata, West Bengal 700068 "),o.qZA(),o.TgZ(75,"p"),o._UZ(76,"i",32),o._uU(77," E-mail: info@glownglitter.com"),o.qZA(),o.TgZ(78,"p"),o._UZ(79,"i",33),o.TgZ(80,"span"),o._uU(81,"call/whatsapp : "),o.qZA(),o.TgZ(82,"span"),o._uU(83,"91 905 139 8740"),o.qZA()(),o.TgZ(84,"p"),o._UZ(85,"i",33),o.TgZ(86,"span"),o._uU(87,"call/whatsapp :"),o.qZA(),o.TgZ(88,"span"),o._uU(89,"91 987 440 6700"),o.qZA()()()()(),o._UZ(90,"br"),o.TgZ(91,"div",7)(92,"div",28)(93,"div",34)(94,"div",35),o._UZ(95,"img",36),o.qZA()()()(),o._UZ(96,"hr"),o.TgZ(97,"div",28)(98,"div",29)(99,"div",30)(100,"h6"),o._uU(101,"Working Hours"),o.qZA(),o.TgZ(102,"p")(103,"span"),o._uU(104,"Weekdays:"),o.qZA(),o._uU(105),o.qZA(),o.TgZ(106,"p")(107,"span"),o._uU(108,"Sunday:"),o.qZA(),o._uU(109),o.qZA(),o.TgZ(110,"p")(111,"span"),o._uU(112,"Notice:"),o.qZA(),o._uU(113),o.qZA()()()()()()()(),o.TgZ(114,"div",37)(115,"div",6)(116,"div",7)(117,"div",8),o._UZ(118,"div",38),o.qZA()()()(),o.TgZ(119,"section",39)(120,"div",6)(121,"div",7)(122,"div",8)(123,"div",9)(124,"h2",23),o._uU(125,"testimonials"),o.qZA(),o.TgZ(126,"p",40),o._uU(127,"What they say"),o.qZA()()()(),o.TgZ(128,"div",7)(129,"div",8)(130,"div",41),o._UZ(131,"div",42),o.qZA(),o.TgZ(132,"div",43)(133,"div",44),o.YNc(134,eU,16,2,"div",45),o.qZA()()()()()(),o.TgZ(135,"div",46)(136,"div",6)(137,"div",47)(138,"div",48)(139,"div",49)(140,"div",50),o._UZ(141,"i",51),o.qZA(),o.TgZ(142,"div",52)(143,"h6"),o._uU(144,"Free Shipping"),o.qZA(),o.TgZ(145,"p"),o._uU(146,"Free Shipping on all purchases "),o._UZ(147,"br"),o._uU(148," over \u20b9 7000"),o.qZA()()()(),o.TgZ(149,"div",48)(150,"div",49)(151,"div",50),o._UZ(152,"i",53),o.qZA(),o.TgZ(153,"div",52)(154,"h6"),o._uU(155,"Support"),o.qZA(),o.TgZ(156,"p"),o._uU(157,"Call or WhatsApp during business hours "),o.qZA()()()(),o.TgZ(158,"div",48)(159,"div",49)(160,"div",50),o._UZ(161,"i",54),o.qZA(),o.TgZ(162,"div",52)(163,"h6"),o._uU(164,"Money Return"),o.qZA(),o.TgZ(165,"p"),o._uU(166,"30 days for free return"),o.qZA()()()(),o.TgZ(167,"div",48)(168,"div",49)(169,"div",50),o._UZ(170,"i",55),o.qZA(),o.TgZ(171,"div",52)(172,"h6"),o._uU(173,"100% Payment Secure"),o.qZA(),o.TgZ(174,"p"),o._uU(175,"We ensure secure payment"),o.qZA()()()()()()(),o.TgZ(176,"div",56),o._UZ(177,"i",57),o.qZA(),o._UZ(178,"app-mini-cart",58)),2&r&&(o.xp6(22),o.Q6J("ngIf",i.subcategory1.length),o.xp6(7),o.Q6J("ngIf",i.subcategory1[0].imageUrl),o.xp6(1),o.Q6J("ngForOf",i.subcategory1),o.xp6(11),o.Q6J("ngForOf",i.subcategory2),o.xp6(7),o.Q6J("ngForOf",i.subcategory2),o.xp6(11),o.Q6J("ngForOf",i.featuredProducts),o.xp6(46),o.Oqu(null==i.working_hours?null:i.working_hours.weekday),o.xp6(4),o.Oqu(null==i.working_hours?null:i.working_hours.sunday),o.xp6(4),o.Oqu(null==i.working_hours?null:i.working_hours.notice),o.xp6(21),o.Q6J("ngForOf",i.testimonials))},dependencies:[on.sg,on.O5,wn.rH,XA,on.gd],styles:['.category-container[_ngcontent-%COMP%]{display:flex;overflow-x:auto;gap:20px;scroll-behavior:smooth;white-space:nowrap;margin-bottom:40px}.category-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}.working-time[_ngcontent-%COMP%]{justify-content:center}.category-item[_ngcontent-%COMP%]{width:200px;height:40px;padding:10px;background-color:#a9a9a9;border-radius:4px;display:flex;justify-content:center;align-items:center;font-size:18px;color:#fff;font-family:Amethysta}body[_ngcontent-%COMP%]:not(.lg-from-hash)   .lg-outer.lg-start-zoom[_ngcontent-%COMP%]   .lg-item.lg-complete[_ngcontent-%COMP%]   .lg-object[_ngcontent-%COMP%]{opacity:1;margin:50px;width:800px;height:800px;transform:scale3d(1.43678,1.43678,1)}@font-face{font-family:CustomFont;src:url(!PaulMaul_0.81742c729bc57496.ttf) format("truetype")}@font-face{font-family:CustomFont1;src:url(!PaulMaul-b_0.e5db646eb1788086.ttf) format("truetype")}@media only screen and (max-width: 600px){.custom-size[_ngcontent-%COMP%]{font-size:1.4rem!important;margin-left:215px!important}.custom_mobile[_ngcontent-%COMP%]{font-size:3rem!important}}']}),e})();var eR=B(727);let e1=(()=>{var n;class e{constructor(r){this.afs=r,this.defaultcategory="",this.defaultsubcategory=""}getCategories(){return this.categoriesCollection=this.afs.collection("category_master"),this.categoriesCollection.snapshotChanges().pipe((0,un.U)(r=>r.map(i=>{const l=i.payload.doc.data();return{id:i.payload.doc.id,...l}})))}setCategorysubcategory(r,i){this.defaultcategory=r,this.defaultsubcategory=i}getCategorysubcategory(){return console.log(this.defaultcategory,this.defaultsubcategory),this.defaultsubcategory}}return(n=e).\u0275fac=function(r){return new(r||n)(o.LFG(qc))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();function nU(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"a",12),o.NdJ("keyup.enter",function(){o.CHM(t),o.oxw(3);const i=o.MAs(1);return o.KtG(i.previous())})("click",function(){o.CHM(t),o.oxw(3);const i=o.MAs(1);return o.KtG(i.previous())}),o._uU(1),o.TgZ(2,"span",13),o._uU(3),o.qZA()()}if(2&n){const t=o.oxw(3);o.xp6(1),o.hij(" ",t.previousLabel," "),o.xp6(2),o.Oqu(t.screenReaderPageLabel)}}function rU(n,e){if(1&n&&(o.TgZ(0,"span",14),o._uU(1),o.TgZ(2,"span",13),o._uU(3),o.qZA()()),2&n){const t=o.oxw(3);o.xp6(1),o.hij(" ",t.previousLabel," "),o.xp6(2),o.Oqu(t.screenReaderPageLabel)}}function iU(n,e){if(1&n&&(o.TgZ(0,"li",9),o.YNc(1,nU,4,2,"a",10),o.YNc(2,rU,4,2,"span",11),o.qZA()),2&n){o.oxw(2);const t=o.MAs(1);o.ekj("disabled",t.isFirstPage()),o.xp6(1),o.Q6J("ngIf",1<t.getCurrent()),o.xp6(1),o.Q6J("ngIf",t.isFirstPage())}}function sU(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"a",12),o.NdJ("keyup.enter",function(){o.CHM(t);const i=o.oxw().$implicit;o.oxw(2);const l=o.MAs(1);return o.KtG(l.setCurrent(i.value))})("click",function(){o.CHM(t);const i=o.oxw().$implicit;o.oxw(2);const l=o.MAs(1);return o.KtG(l.setCurrent(i.value))}),o.TgZ(1,"span",13),o._uU(2),o.qZA(),o.TgZ(3,"span"),o._uU(4),o.ALo(5,"number"),o.qZA()()}if(2&n){const t=o.oxw().$implicit,r=o.oxw(2);o.xp6(2),o.hij("",r.screenReaderPageLabel," "),o.xp6(2),o.Oqu("..."===t.label?t.label:o.xi3(5,2,t.label,""))}}function oU(n,e){if(1&n&&(o.ynx(0),o.TgZ(1,"span",16)(2,"span",13),o._uU(3),o.qZA(),o.TgZ(4,"span"),o._uU(5),o.ALo(6,"number"),o.qZA()(),o.BQk()),2&n){const t=o.oxw().$implicit,r=o.oxw(2);o.xp6(3),o.hij("",r.screenReaderCurrentLabel," "),o.xp6(2),o.Oqu("..."===t.label?t.label:o.xi3(6,2,t.label,""))}}function aU(n,e){if(1&n&&(o.TgZ(0,"li"),o.YNc(1,sU,6,5,"a",10),o.YNc(2,oU,7,5,"ng-container",15),o.qZA()),2&n){const t=e.$implicit;o.oxw(2);const r=o.MAs(1);o.ekj("current",r.getCurrent()===t.value)("ellipsis","..."===t.label),o.xp6(1),o.Q6J("ngIf",r.getCurrent()!==t.value),o.xp6(1),o.Q6J("ngIf",r.getCurrent()===t.value)}}function lU(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"a",12),o.NdJ("keyup.enter",function(){o.CHM(t),o.oxw(3);const i=o.MAs(1);return o.KtG(i.next())})("click",function(){o.CHM(t),o.oxw(3);const i=o.MAs(1);return o.KtG(i.next())}),o._uU(1),o.TgZ(2,"span",13),o._uU(3),o.qZA()()}if(2&n){const t=o.oxw(3);o.xp6(1),o.hij(" ",t.nextLabel," "),o.xp6(2),o.Oqu(t.screenReaderPageLabel)}}function uU(n,e){if(1&n&&(o.TgZ(0,"span",14),o._uU(1),o.TgZ(2,"span",13),o._uU(3),o.qZA()()),2&n){const t=o.oxw(3);o.xp6(1),o.hij(" ",t.nextLabel," "),o.xp6(2),o.Oqu(t.screenReaderPageLabel)}}function cU(n,e){if(1&n&&(o.TgZ(0,"li",17),o.YNc(1,lU,4,2,"a",10),o.YNc(2,uU,4,2,"span",11),o.qZA()),2&n){o.oxw(2);const t=o.MAs(1);o.ekj("disabled",t.isLastPage()),o.xp6(1),o.Q6J("ngIf",!t.isLastPage()),o.xp6(1),o.Q6J("ngIf",t.isLastPage())}}function dU(n,e){if(1&n&&(o.TgZ(0,"ul",4),o.YNc(1,iU,3,4,"li",5),o.TgZ(2,"li",6),o._uU(3),o.qZA(),o.YNc(4,aU,3,6,"li",7),o.YNc(5,cU,3,4,"li",8),o.qZA()),2&n){const t=o.oxw(),r=o.MAs(1);o.ekj("responsive",t.responsive),o.xp6(1),o.Q6J("ngIf",t.directionLinks),o.xp6(2),o.AsE(" ",r.getCurrent()," / ",r.getLastPage()," "),o.xp6(1),o.Q6J("ngForOf",r.pages)("ngForTrackBy",t.trackByIndex),o.xp6(1),o.Q6J("ngIf",t.directionLinks)}}class t1{constructor(){this.change=new o.vpe,this.instances={},this.DEFAULT_ID="DEFAULT_PAGINATION_ID"}defaultId(){return this.DEFAULT_ID}register(e){return null==e.id&&(e.id=this.DEFAULT_ID),this.instances[e.id]?this.updateInstance(e):(this.instances[e.id]=e,!0)}updateInstance(e){let t=!1;for(let r in this.instances[e.id])e[r]!==this.instances[e.id][r]&&(this.instances[e.id][r]=e[r],t=!0);return t}getCurrentPage(e){return this.instances[e]?this.instances[e].currentPage:1}setCurrentPage(e,t){if(this.instances[e]){let r=this.instances[e];t<=Math.ceil(r.totalItems/r.itemsPerPage)&&1<=t&&(this.instances[e].currentPage=t,this.change.emit(e))}}setTotalItems(e,t){this.instances[e]&&0<=t&&(this.instances[e].totalItems=t,this.change.emit(e))}setItemsPerPage(e,t){this.instances[e]&&(this.instances[e].itemsPerPage=t,this.change.emit(e))}getInstance(e=this.DEFAULT_ID){return this.instances[e]?this.clone(this.instances[e]):{}}clone(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}}const hU=Number.MAX_SAFE_INTEGER;let tR=(()=>{class n{constructor(t){this.service=t,this.state={}}transform(t,r){if(!(t instanceof Array)){let F=r.id||this.service.defaultId();return this.state[F]?this.state[F].slice:t}let f,_,i=r.totalItems&&r.totalItems!==t.length,l=this.createInstance(t,r),c=l.id,C=l.itemsPerPage,R=this.service.register(l);if(!i&&t instanceof Array){if(C=+C||hU,f=(l.currentPage-1)*C,_=f+C,this.stateIsIdentical(c,t,f,_))return this.state[c].slice;{let H=t.slice(f,_);return this.saveState(c,t,H,f,_),this.service.change.emit(c),H}}return R&&this.service.change.emit(c),this.saveState(c,t,t,f,_),t}createInstance(t,r){return this.checkConfig(r),{id:null!=r.id?r.id:this.service.defaultId(),itemsPerPage:+r.itemsPerPage||0,currentPage:+r.currentPage||1,totalItems:+r.totalItems||t.length}}checkConfig(t){const i=["itemsPerPage","currentPage"].filter(l=>!(l in t));if(0<i.length)throw new Error(`PaginatePipe: Argument is missing the following required properties: ${i.join(", ")}`)}saveState(t,r,i,l,c){this.state[t]={collection:r,size:r.length,slice:i,start:l,end:c}}stateIsIdentical(t,r,i,l){let c=this.state[t];return!(!c||c.size!==r.length||c.start!==i||c.end!==l)&&c.slice.every((_,C)=>_===r[i+C])}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(t1,16))},n.\u0275pipe=o.Yjl({name:"paginate",type:n,pure:!1}),n})(),fU=(()=>{class n{constructor(t,r){this.service=t,this.changeDetectorRef=r,this.maxSize=7,this.pageChange=new o.vpe,this.pageBoundsCorrection=new o.vpe,this.pages=[],this.changeSub=this.service.change.subscribe(i=>{this.id===i&&(this.updatePageLinks(),this.changeDetectorRef.markForCheck(),this.changeDetectorRef.detectChanges())})}ngOnInit(){void 0===this.id&&(this.id=this.service.defaultId()),this.updatePageLinks()}ngOnChanges(t){this.updatePageLinks()}ngOnDestroy(){this.changeSub.unsubscribe()}previous(){this.checkValidId(),this.setCurrent(this.getCurrent()-1)}next(){this.checkValidId(),this.setCurrent(this.getCurrent()+1)}isFirstPage(){return 1===this.getCurrent()}isLastPage(){return this.getLastPage()===this.getCurrent()}setCurrent(t){this.pageChange.emit(t)}getCurrent(){return this.service.getCurrentPage(this.id)}getLastPage(){let t=this.service.getInstance(this.id);return t.totalItems<1?1:Math.ceil(t.totalItems/t.itemsPerPage)}getTotalItems(){return this.service.getInstance(this.id).totalItems}checkValidId(){null==this.service.getInstance(this.id).id&&console.warn(`PaginationControlsDirective: the specified id "${this.id}" does not match any registered PaginationInstance`)}updatePageLinks(){let t=this.service.getInstance(this.id);const r=this.outOfBoundCorrection(t);r!==t.currentPage?setTimeout(()=>{this.pageBoundsCorrection.emit(r),this.pages=this.createPageArray(t.currentPage,t.itemsPerPage,t.totalItems,this.maxSize)}):this.pages=this.createPageArray(t.currentPage,t.itemsPerPage,t.totalItems,this.maxSize)}outOfBoundCorrection(t){const r=Math.ceil(t.totalItems/t.itemsPerPage);return r<t.currentPage&&0<r?r:t.currentPage<1?1:t.currentPage}createPageArray(t,r,i,l){l=+l;let c=[];const f=Math.max(Math.ceil(i/r),1),_=Math.ceil(l/2),C=t<=_,R=f-_<t,F=!C&&!R;let H=l<f,J=1;for(;J<=f&&J<=l;){let ie,we=this.calculatePageNumber(J,t,l,f);ie=H&&(2===J&&(F||R)||J===l-1&&(F||C))?"...":we,c.push({label:ie,value:we}),J++}return c}calculatePageNumber(t,r,i,l){let c=Math.ceil(i/2);return t===i?l:1===t?t:i<l?l-c<r?l-i+t:c<r?r-c+t:t:t}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(t1),o.Y36(o.sBO))},n.\u0275dir=o.lG2({type:n,selectors:[["pagination-template"],["","pagination-template",""]],inputs:{id:"id",maxSize:"maxSize"},outputs:{pageChange:"pageChange",pageBoundsCorrection:"pageBoundsCorrection"},exportAs:["paginationApi"],features:[o.TTD]}),n})();function n1(n){return!!n&&"false"!==n}let r1=(()=>{class n{constructor(){this.maxSize=7,this.previousLabel="Previous",this.nextLabel="Next",this.screenReaderPaginationLabel="Pagination",this.screenReaderPageLabel="page",this.screenReaderCurrentLabel="You're on page",this.pageChange=new o.vpe,this.pageBoundsCorrection=new o.vpe,this._directionLinks=!0,this._autoHide=!1,this._responsive=!1}get directionLinks(){return this._directionLinks}set directionLinks(t){this._directionLinks=n1(t)}get autoHide(){return this._autoHide}set autoHide(t){this._autoHide=n1(t)}get responsive(){return this._responsive}set responsive(t){this._responsive=n1(t)}trackByIndex(t){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["pagination-controls"]],inputs:{id:"id",maxSize:"maxSize",directionLinks:"directionLinks",autoHide:"autoHide",responsive:"responsive",previousLabel:"previousLabel",nextLabel:"nextLabel",screenReaderPaginationLabel:"screenReaderPaginationLabel",screenReaderPageLabel:"screenReaderPageLabel",screenReaderCurrentLabel:"screenReaderCurrentLabel"},outputs:{pageChange:"pageChange",pageBoundsCorrection:"pageBoundsCorrection"},decls:4,vars:4,consts:[[3,"id","maxSize","pageChange","pageBoundsCorrection"],["p","paginationApi"],["role","navigation"],["class","ngx-pagination",3,"responsive",4,"ngIf"],[1,"ngx-pagination"],["class","pagination-previous",3,"disabled",4,"ngIf"],[1,"small-screen"],[3,"current","ellipsis",4,"ngFor","ngForOf","ngForTrackBy"],["class","pagination-next",3,"disabled",4,"ngIf"],[1,"pagination-previous"],["tabindex","0",3,"keyup.enter","click",4,"ngIf"],["aria-disabled","true",4,"ngIf"],["tabindex","0",3,"keyup.enter","click"],[1,"show-for-sr"],["aria-disabled","true"],[4,"ngIf"],["aria-live","polite"],[1,"pagination-next"]],template:function(t,r){if(1&t&&(o.TgZ(0,"pagination-template",0,1),o.NdJ("pageChange",function(l){return r.pageChange.emit(l)})("pageBoundsCorrection",function(l){return r.pageBoundsCorrection.emit(l)}),o.TgZ(2,"nav",2),o.YNc(3,dU,6,8,"ul",3),o.qZA()()),2&t){const i=o.MAs(1);o.Q6J("id",r.id)("maxSize",r.maxSize),o.xp6(2),o.uIk("aria-label",r.screenReaderPaginationLabel),o.xp6(1),o.Q6J("ngIf",!(r.autoHide&&i.pages.length<=1))}},dependencies:[fU,on.O5,on.sg,on.JJ],styles:['.ngx-pagination{margin-left:0;margin-bottom:1rem}.ngx-pagination:before,.ngx-pagination:after{content:" ";display:table}.ngx-pagination:after{clear:both}.ngx-pagination li{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;margin-right:.0625rem;border-radius:0}.ngx-pagination li{display:inline-block}.ngx-pagination a,.ngx-pagination button{color:#0a0a0a;display:block;padding:.1875rem .625rem;border-radius:0}.ngx-pagination a:hover,.ngx-pagination button:hover{background:#e6e6e6}.ngx-pagination .current{padding:.1875rem .625rem;background:#2199e8;color:#fefefe;cursor:default}.ngx-pagination .disabled{padding:.1875rem .625rem;color:#cacaca;cursor:default}.ngx-pagination .disabled:hover{background:transparent}.ngx-pagination a,.ngx-pagination button{cursor:pointer}.ngx-pagination .pagination-previous a:before,.ngx-pagination .pagination-previous.disabled:before{content:"\\ab";display:inline-block;margin-right:.5rem}.ngx-pagination .pagination-next a:after,.ngx-pagination .pagination-next.disabled:after{content:"\\bb";display:inline-block;margin-left:.5rem}.ngx-pagination .show-for-sr{position:absolute!important;width:1px;height:1px;overflow:hidden;clip:rect(0,0,0,0)}.ngx-pagination .small-screen{display:none}@media screen and (max-width: 601px){.ngx-pagination.responsive .small-screen{display:inline-block}.ngx-pagination.responsive li:not(.small-screen):not(.pagination-previous):not(.pagination-next){display:none}}\n'],encapsulation:2,changeDetection:0}),n})(),pU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[t1],imports:[[on.ez]]}),n})();const gU=["selectedProduct"];function mU(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",23),o.NdJ("click",function(){const l=o.CHM(t).$implicit,c=o.oxw();return o.KtG(c.updateSelectedCategory(l))}),o._uU(1),o.ALo(2,"uppercase"),o.qZA()}if(2&n){const t=e.$implicit;o.xp6(1),o.hij(" ",o.lcZ(2,1,t.category)," ")}}function _U(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",23),o.NdJ("click",function(){const l=o.CHM(t).$implicit,c=o.oxw();return o.KtG(c.updateSelectedSubCategory(l))}),o._uU(1),o.ALo(2,"uppercase"),o.qZA()}if(2&n){const t=e.$implicit;o.xp6(1),o.hij(" ",o.lcZ(2,1,t.sub_category)," ")}}function yU(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",24)(1,"figure",25)(2,"a"),o._UZ(3,"img",26)(4,"img",27),o.qZA(),o.TgZ(5,"div",28)(6,"button",29),o._uU(7,"QUICK VIEW"),o.qZA()()(),o.TgZ(8,"div",30)(9,"h6",31)(10,"a",32),o.NdJ("click",function(){const l=o.CHM(t).$implicit,c=o.oxw();return o.KtG(c.updateSelectedSubCategory(l))}),o._uU(11),o.ALo(12,"uppercase"),o.qZA()()()()}if(2&n){const t=e.$implicit;o.xp6(3),o.Q6J("src",t.imageUrl,o.LSH),o.xp6(1),o.Q6J("src",t.imageUrl,o.LSH),o.xp6(7),o.Oqu(o.lcZ(12,3,t.sub_category))}}function vU(n,e){if(1&n&&(o.TgZ(0,"div",33)(1,"div",34)(2,"figure",25)(3,"a",35),o._UZ(4,"img",26)(5,"img",27),o.qZA()(),o.TgZ(6,"div",30)(7,"h6",31)(8,"a",36),o._uU(9),o.ALo(10,"uppercase"),o.qZA()()()(),o.TgZ(11,"div",37)(12,"figure",25)(13,"a",35),o._UZ(14,"img",26)(15,"img",27),o.qZA(),o.TgZ(16,"div",38)(17,"div",39)(18,"span"),o._uU(19,"new"),o.qZA()()()(),o.TgZ(20,"div",40)(21,"div",41)(22,"a",36),o._uU(23),o.qZA()(),o.TgZ(24,"h5",31)(25,"a",36),o._uU(26),o.qZA()(),o.TgZ(27,"p"),o._uU(28),o.qZA()()()()),2&n){const t=e.$implicit;o.xp6(3),o.MGl("routerLink","../product-detail/",null==t?null:t.id,""),o.xp6(1),o.s9C("src",null==t?null:t.imageUrl[0],o.LSH),o.xp6(1),o.s9C("src",null==t?null:t.imageUrl[0],o.LSH),o.xp6(4),o.Oqu(o.lcZ(10,10,null==t?null:t.productname)),o.xp6(4),o.MGl("routerLink","../product-detail/",null==t?null:t.id,""),o.xp6(1),o.s9C("src",null==t?null:t.imageUrl[0],o.LSH),o.xp6(1),o.s9C("src",null==t?null:t.imageUrl[0],o.LSH),o.xp6(8),o.Oqu(null==t?null:t.category),o.xp6(3),o.Oqu(null==t?null:t.sub_category),o.xp6(2),o.Oqu(null==t?null:t.description)}}const wU=function(n,e){return{itemsPerPage:n,currentPage:e}};let CU=(()=>{var n;class e{constructor(r,i,l,c,f,_,C,R){this.services=r,this.catService=i,this.subcatService=l,this.cartService=c,this.quickviewService=f,this.userService=_,this.router=C,this.route=R,this.categories=[],this.subcategories=[],this.countProduct=0,this.subscription=new eR.w0,this.p=1,this.pageSize=12,this.getProducts()}ngOnInit(){this.route.queryParams.subscribe(r=>{this.getcategory(),this.getSubcategory(),this.getKey()})}getKey(){this.route.params.subscribe(r=>{this.keyword=r.key,console.log(this.keyword)})}getProducts(){this.services.getProducts().subscribe(r=>{this.products=r})}ngOnDestroy(){this.subscription.unsubscribe()}onPageChange(r){this.p=r,window.scrollTo({top:0,behavior:"smooth"})}getcategory(){this.subscription=this.catService.getCategories().subscribe(r=>{this.categories=r,this.getSubcategory()})}getSubcategory(){this.subscription=this.subcatService.getSubcategoriesByCategory(this.selectedCategory||"Silver Jewellery").subscribe(r=>{this.subcategories=r})}getVarients(){this.selectedSku&&this.services.getVarientBySku(this.selectedSku).subscribe(r=>{this.varient=r,this.selectedVarients=this.varient[0]})}updateVarient(r){this.selectedVarients=this.varient[r]}getCurrentuserid(){this.userId=this.userService.getCurrentUser()}getProductsByCategory(){this.subscription=this.services.getProductsByCategory(this.selectedCategory).subscribe(r=>{this.products=r,this.countProduct=r.length})}getProductsBySubCategory(r){this.subscription=this.services.getProductsBySubcategory(r).subscribe(i=>{this.products=i,this.p=1})}updateSelectedCategory(r){this.selectedCategory=r.category,this.getProductsByCategory(),this.getSubcategory(),this.p=1}updateSelectedSubCategory(r){this.selectedSubcategory=r.sub_category,this.getProductsBySubCategory(this.selectedSubcategory),this.p=1}openQuickView(r){this.quickviewService.setProduct(r)}}return(n=e).\u0275fac=function(r){return new(r||n)(o.Y36($y),o.Y36(e1),o.Y36(QA),o.Y36(Wd),o.Y36(GT),o.Y36(Qu),o.Y36(wn.F0),o.Y36(wn.gz))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-products"]],viewQuery:function(r,i){if(1&r&&o.Gf(gU,5),2&r){let l;o.iGM(l=o.CRH())&&(i.selectedProduct=l.first)}},decls:39,vars:11,consts:[[1,"container"],[1,"row"],[1,"col-12"],[1,"section-title","text-center"],[1,"title",2,"font-size","25","margin-bottom","20px"],[1,"category-section"],[1,"category-container"],["class","category-item","type","button",3,"click",4,"ngFor","ngForOf"],[1,"product-container"],[1,"tab-content"],[1,"tab-pane","fade","show","active"],[1,"product-carousel-4","slick-row-10","slick-arrow-style"],["class","product-item bg:'red'",4,"ngFor","ngForOf"],[1,"shop-main-wrapper","section-padding"],[1,"col-lg-12","order-1","order-lg-2"],[1,"shop-product-wrapper"],[1,"shop-product-wrap","grid-view","row","mbn-30"],["class","col-md-3 col-sm-6",4,"ngFor","ngForOf"],[1,"text-center"],["previousLabel","Previous","nextLabel","Next",1,"my-pagination",3,"pageChange"],[1,"scroll-top","not-visible"],[1,"fa","fa-angle-up"],["hidden",""],["type","button",1,"category-item",3,"click"],[1,"product-item","bg:'red'"],[1,"product-thumb"],[1,"pri-img",3,"src"],[1,"sec-img",3,"src"],[1,"cart-hover","d-flex","justify-content-center"],[1,"btn","btn-cart"],[1,"product-caption","text-center"],[1,"product-name"],[3,"click"],[1,"col-md-3","col-sm-6"],[1,"product-item"],[3,"routerLink"],["routerLink","../product-detail"],[1,"product-list-item"],[1,"product-badge"],[1,"product-label","new"],[1,"product-content-list"],[1,"manufacturer-name"]],template:function(r,i){1&r&&(o.TgZ(0,"div",0),o._UZ(1,"br"),o.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"h2",4),o._uU(6,"Products"),o.qZA()(),o.TgZ(7,"section",5)(8,"div",6),o.YNc(9,mU,3,3,"div",7),o.qZA()(),o.TgZ(10,"div",3)(11,"h2",4),o._uU(12),o.qZA()(),o.TgZ(13,"section",5)(14,"div",6),o.YNc(15,_U,3,3,"div",7),o.qZA()()()(),o.TgZ(16,"div",1)(17,"div",2)(18,"div",8)(19,"div",9)(20,"div",10)(21,"div",11),o._UZ(22,"div"),o.YNc(23,yU,13,5,"div",12),o.qZA()()()()()()(),o.TgZ(24,"div",13)(25,"div",0)(26,"div",1)(27,"div",14)(28,"div",15)(29,"div",16),o.YNc(30,vU,29,12,"div",17),o.ALo(31,"paginate"),o.qZA(),o._UZ(32,"br")(33,"br"),o.TgZ(34,"div",18)(35,"pagination-controls",19),o.NdJ("pageChange",function(c){return i.onPageChange(c)}),o.qZA()()()()()()(),o.TgZ(36,"div",20),o._UZ(37,"i",21),o.qZA(),o._UZ(38,"app-mini-cart",22)),2&r&&(o.xp6(9),o.Q6J("ngForOf",i.categories),o.xp6(3),o.Oqu(i.selectedCategory),o.xp6(3),o.Q6J("ngForOf",i.subcategories),o.xp6(8),o.Q6J("ngForOf",i.categories),o.xp6(7),o.Q6J("ngForOf",o.xi3(31,5,i.products,o.WLB(8,wU,i.pageSize,i.p))))},dependencies:[on.sg,wn.rH,r1,XA,on.gd,tR],styles:[".category-container[_ngcontent-%COMP%]{display:flex;overflow-x:auto;gap:20px;scroll-behavior:smooth;white-space:nowrap;margin-bottom:40px;justify-content:center}.category-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}.category-item[_ngcontent-%COMP%]{height:40px;padding:10px;background-color:#a9a9a9;border-radius:4px;display:flex;justify-content:center;align-items:center;font-size:18px;color:#fff;font-family:Amethysta}.selected-category[_ngcontent-%COMP%]{color:red}.selected-subcategory[_ngcontent-%COMP%]{color:#00f}"]}),e})();function bU(n,e){if(1&n&&(o.TgZ(0,"div",36)(1,"p"),o._uU(2),o.qZA(),o.TgZ(3,"div",37)(4,"span"),o._UZ(5,"i",38),o.qZA(),o.TgZ(6,"span"),o._UZ(7,"i",38),o.qZA(),o.TgZ(8,"span"),o._UZ(9,"i",38),o.qZA(),o.TgZ(10,"span"),o._UZ(11,"i",38),o.qZA(),o.TgZ(12,"span"),o._UZ(13,"i",38),o.qZA()(),o.TgZ(14,"h5",39),o._uU(15),o.qZA()()),2&n){const t=e.$implicit;o.xp6(2),o.hij(" ",t.comment,""),o.xp6(13),o.Oqu(t.name)}}let EU=(()=>{var n;class e{constructor(r){this.otherService=r}ngOnInit(){this.getTestimonials()}getTestimonials(){this.otherService.getTestimonial().subscribe(r=>{this.testimonials=r})}}return(n=e).\u0275fac=function(r){return new(r||n)(o.Y36(jp))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-about"]],decls:76,vars:1,consts:[[1,"breadcrumb-area"],[1,"container"],[1,"row"],[1,"col-12"],[1,"breadcrumb-wrap"],["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","index.html"],[1,"fa","fa-home"],["aria-current","page",1,"breadcrumb-item","active"],[1,"about-us","section-padding"],[1,"row","align-items-center"],[1,"col-lg-5"],[1,"about-thumb"],["src","assets/img/about/about.jpg","alt","about thumb"],[1,"col-lg-7"],[1,"about-content"],[1,"about-title"],[1,"about-sub-title"],[1,"choosing-area","section-padding","pt-0"],[1,"section-title","text-center"],[1,"title"],[1,"row","mbn-30"],[1,"col-lg-4","col-md-4"],[1,"single-choose-item","text-center","mb-30"],[1,"fa","fa-globe"],[1,"fa","fa-plane"],[1,"fa","fa-comments"],["data-bg","../../assets/img/testimonial/testimonials-bg.jpg",1,"testimonial-area","section-padding","bg-img"],[1,"sub-title"],[1,"testimonial-thumb-wrapper"],[1,"testimonial-thumb-carousel"],[1,"testimonial-content-wrapper"],[1,"testimonial-content-carousel"],["class","testimonial-content",4,"ngFor","ngForOf"],[1,"testimonial-content"],[1,"ratings"],[1,"fa","fa-star-o"],[1,"testimonial-author"]],template:function(r,i){1&r&&(o.TgZ(0,"main")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"nav",5)(7,"ul",6)(8,"li",7)(9,"a",8),o._UZ(10,"i",9),o.qZA()(),o.TgZ(11,"li",10),o._uU(12,"About us"),o.qZA()()()()()()()(),o.TgZ(13,"section",11)(14,"div",1)(15,"div",12)(16,"div",13)(17,"div",14),o._UZ(18,"img",15),o.qZA()(),o.TgZ(19,"div",16)(20,"div",17)(21,"h2",18),o._uU(22,"About Us"),o.qZA(),o.TgZ(23,"p"),o._uU(24," Glow N Glitter was born out of a passion to bridge style with sophistication and grace with splendour. Founded in 2012 by Ms. Aparajita Ray, our 92.5 hallmarked, fine silver jewellery is curated with a sharp focus on artistry and quality craftsmanship. Whether it be simple pieces for daily wear or ornate pieces for special occasions, Glow N Glitter silver jewellery is appreciated by silver jewellery connoisseurs. "),o.qZA(),o.TgZ(25,"p"),o._uU(26,"Glow N Glitter specialises in brass items for the home as well. Traditional diyas (lamps), figures of Idols, aesthetic items of home decor, we offer a wide range and variety. "),o.qZA(),o.TgZ(27,"p",19),o._uU(28,"Team Glow and Glitter invites you to explore their fine collection\u{1f64f}"),o.qZA()()()()()(),o.TgZ(29,"div",20)(30,"div",1)(31,"div",2)(32,"div",3)(33,"div",21)(34,"h2",22),o._uU(35,"Why Choose Us"),o.qZA(),o.TgZ(36,"p"),o._uU(37,"Online purchase, potential customers want to feel confident that they are buying from a reputable source. Consider including information about your business and your experience in the antique industry to help build credibility and trust."),o.qZA()()()(),o.TgZ(38,"div",23)(39,"div",24)(40,"div",25),o._UZ(41,"i",26),o.TgZ(42,"h4"),o._uU(43,"shipping"),o.qZA(),o.TgZ(44,"p"),o._uU(45,"At our website, we strive to offer transparent pricing and a seamless shopping experience. To cover the costs of shipping and ensure the quality delivery of your purchases, we have a standard shipping charge. This nominal fee allows us to provide reliable and efficient shipping services to deliver your items securely. Rest assured that our shipping charges are reasonable and competitive within the industry. Shop with us today and enjoy the convenience of standard shipping, ensuring your products reach you in a timely manner."),o.qZA()()(),o.TgZ(46,"div",24)(47,"div",25),o._UZ(48,"i",27),o.TgZ(49,"h4"),o._uU(50,"fast delivery"),o.qZA(),o.TgZ(51,"p"),o._uU(52,"We understand the importance of receiving your purchased items promptly. That's why we prioritize fast delivery. Once you place your order, our dedicated team works diligently to ensure your products are packed and shipped promptly. With our efficient logistics network, you can expect your package to arrive at your doorstep in no time. We value your time and strive to provide a seamless shopping experience. Experience the joy of fast delivery and get your hands on your desired products sooner than ever."),o.qZA()()(),o.TgZ(53,"div",24)(54,"div",25),o._UZ(55,"i",28),o.TgZ(56,"h4"),o._uU(57,"customers support"),o.qZA(),o.TgZ(58,"p"),o._uU(59,"We believe in providing exceptional customer support. Our dedicated team is here to assist you throughout your shopping journey. Whether you have a question about a product, need help with placing an order, or require assistance with any post-purchase queries, we're here to help. Our friendly and knowledgeable support representatives are just a phone call or email away. We value your trust and are committed, Your satisfaction is our top priority. to providing you with the best possible customer service. "),o.qZA()()()()()(),o.TgZ(60,"section",29)(61,"div",1)(62,"div",2)(63,"div",3)(64,"div",21)(65,"h2",22),o._uU(66,"testimonials"),o.qZA(),o.TgZ(67,"p",30),o._uU(68,"What they say"),o.qZA()()()(),o.TgZ(69,"div",2)(70,"div",3)(71,"div",31),o._UZ(72,"div",32),o.qZA(),o.TgZ(73,"div",33)(74,"div",34),o.YNc(75,bU,16,2,"div",35),o.qZA()()()()()()()),2&r&&(o.xp6(75),o.Q6J("ngForOf",i.testimonials))},dependencies:[on.sg]}),e})();const TU=["quantityInput"];function IU(n,e){if(1&n&&(o.TgZ(0,"div",50)(1,"a",51),o._UZ(2,"img",10),o.qZA()()),2&n){const t=o.oxw();o.xp6(1),o.s9C("href",null==t.product?null:t.product.imageUrl[0],o.LSH),o.s9C("title",null==t.product?null:t.product.productname),o.xp6(1),o.Q6J("src",null==t.product?null:t.product.imageUrl[0],o.LSH)}}function SU(n,e){if(1&n&&(o.TgZ(0,"div",50)(1,"a",51),o._UZ(2,"img",10),o.qZA()()),2&n){const t=o.oxw();o.xp6(1),o.s9C("href",null==t.product?null:t.product.imageUrl[1],o.LSH),o.s9C("title",null==t.product?null:t.product.productname),o.xp6(1),o.Q6J("src",null==t.product?null:t.product.imageUrl[1],o.LSH)}}function DU(n,e){if(1&n&&(o.TgZ(0,"div",50)(1,"a",51),o._UZ(2,"img",10),o.qZA()()),2&n){const t=o.oxw();o.xp6(1),o.s9C("href",null==t.product?null:t.product.imageUrl[2],o.LSH),o.s9C("title",null==t.product?null:t.product.productname),o.xp6(1),o.Q6J("src",null==t.product?null:t.product.imageUrl[2],o.LSH)}}function AU(n,e){if(1&n&&(o.TgZ(0,"div",50)(1,"a",51),o._UZ(2,"img",10),o.qZA()()),2&n){const t=o.oxw();o.xp6(1),o.s9C("href",null==t.product?null:t.product.imageUrl[3],o.LSH),o.s9C("title",null==t.product?null:t.product.productname),o.xp6(1),o.Q6J("src",null==t.product?null:t.product.imageUrl[3],o.LSH)}}function xU(n,e){if(1&n&&(o.TgZ(0,"span",52),o._uU(1),o.qZA()),2&n){const t=o.oxw();o.xp6(1),o.hij(" \u20b9",null==t.selectedVarient?null:t.selectedVarient.price,"")}}function MU(n,e){if(1&n&&(o.TgZ(0,"span",52),o._uU(1),o.qZA()),2&n){const t=o.oxw();o.xp6(1),o.hij(" \u20b9",null==t.product?null:t.product.min_price,"")}}function PU(n,e){if(1&n&&(o.TgZ(0,"h6",53)(1,"span"),o._uU(2),o.qZA()()),2&n){const t=o.oxw();o.xp6(2),o.Oqu(t.color[0])}}function RU(n,e){if(1&n&&(o.TgZ(0,"div",32)(1,"h6",54)(2,"span"),o._uU(3),o.qZA()()()),2&n){const t=e.$implicit;o.xp6(3),o.Oqu(t)}}function NU(n,e){if(1&n&&(o.ynx(0),o.YNc(1,RU,4,1,"div",36),o.BQk()),2&n){const t=o.oxw();o.xp6(1),o.Q6J("ngForOf",t.length)}}function OU(n,e){if(1&n&&(o.TgZ(0,"div",32)(1,"h6",54)(2,"span"),o._uU(3),o.qZA()()()),2&n){const t=e.$implicit;o.xp6(3),o.Oqu(t)}}const nR=function(n){return{active:n}};function kU(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",56)(1,"a",57),o.NdJ("click",function(){const l=o.CHM(t).index,c=o.oxw(2);return o.KtG(c.updateVarient(l))}),o._uU(2),o.qZA()()}if(2&n){const t=e.$implicit,r=e.index,i=o.oxw(2);o.Q6J("ngClass",o.VKq(2,nR,i.selectedSizeIndex===r)),o.xp6(2),o.Oqu(t.size)}}function FU(n,e){if(1&n&&(o.TgZ(0,"div",32),o._UZ(1,"h6",54),o.YNc(2,kU,3,4,"div",55),o.qZA()),2&n){const t=o.oxw();o.xp6(2),o.Q6J("ngForOf",t.varient)}}function LU(n,e){1&n&&o._UZ(0,"i",58)}function UU(n,e){1&n&&(o.TgZ(0,"span",59),o._uU(1," Out of Stock"),o.qZA())}function VU(n,e){1&n&&o._UZ(0,"i",58)}function BU(n,e){1&n&&(o.TgZ(0,"span",59),o._uU(1,"In Stock"),o.qZA())}function ZU(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"a",60),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.addToCart())}),o._uU(1,"Buy Now"),o.qZA()}}function jU(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",56)(1,"a",57),o.NdJ("click",function(){const l=o.CHM(t).index,c=o.oxw(2);return o.KtG(c.updateVarient(l))}),o._uU(2),o.qZA()()}if(2&n){const t=e.$implicit,r=e.index,i=o.oxw(2);o.Q6J("ngClass",o.VKq(2,nR,i.selectedSizeIndex===r)),o.xp6(2),o.Oqu(t.size)}}function HU(n,e){if(1&n&&(o.TgZ(0,"div")(1,"div",32)(2,"h6",54),o._uU(3,"size :"),o.qZA(),o.YNc(4,jU,3,4,"div",55),o.qZA()()),2&n){const t=o.oxw();o.xp6(4),o.Q6J("ngForOf",t.varient)}}function $U(n,e){if(1&n&&(o.TgZ(0,"h6",62)(1,"span"),o._uU(2),o.qZA()()),2&n){const t=o.oxw(2);o.xp6(2),o.Oqu(null==t.product?null:t.product.fastening)}}function qU(n,e){if(1&n&&(o.TgZ(0,"div",32),o.YNc(1,$U,3,1,"h6",61),o.qZA()),2&n){const t=o.oxw();o.xp6(1),o.Q6J("ngIf",t.color)}}function zU(n,e){if(1&n&&(o.TgZ(0,"div",63)(1,"div",64),o._uU(2),o.qZA()()),2&n){const t=e.$implicit;o.xp6(2),o.Oqu(t)}}function GU(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",65)(1,"figure",66),o.NdJ("click",function(){const l=o.CHM(t).$implicit,c=o.oxw();return o.KtG(c.updateProduct(l))}),o.TgZ(2,"a",67),o._UZ(3,"img",68)(4,"img",69),o.qZA()(),o.TgZ(5,"div",70)(6,"div",71)(7,"p",72)(8,"a",73),o._uU(9),o.ALo(10,"uppercase"),o.qZA()()(),o.TgZ(11,"h6",74)(12,"a",73),o._uU(13),o.qZA()(),o.TgZ(14,"div",75)(15,"span",52),o._uU(16),o.qZA()()()()}if(2&n){const t=e.$implicit;o.xp6(2),o.MGl("routerLink","../product-detail/",null==t?null:t.id,""),o.xp6(1),o.Q6J("src",null==t?null:t.imageUrl[0],o.LSH),o.xp6(1),o.Q6J("src",null==t?null:t.imageUrl[0],o.LSH),o.xp6(5),o.Oqu(o.lcZ(10,6,null==t?null:t.category)),o.xp6(4),o.Oqu(null==t?null:t.sub_category),o.xp6(3),o.hij("\u20b9",null==t?null:t.min_price,"")}}let WU=(()=>{var n;class e{constructor(r,i,l,c,f,_,C,R){this.cartservice=r,this.router=i,this.navigate=l,this.service=c,this.toaster=f,this.userService=_,this.otherservice=C,this.elementRef=R,this.color=[],this.selectedColorIndex=-1,this.selectedSizeIndex=-1,this.length=[],this.width=[],this.description=[],this.settings={counter:!0,plugins:[Pi,za,X,Vn,kr]}}getCurrentuserid(){this.userId=this.userService.getCurrentUser()?.uid}ngOnInit(){this.getCurrentuserid();var r=document.createElement("script");r.type="text/javascript",r.src="../../../assets/lightbox2-dev/js/lightbox.js",this.elementRef.nativeElement.appendChild(r),this.getCurrentuserid(),this.getProductDetails(),this.getVarients(),this.getcolors()}getRelatedProducts(r){r&&this.service.getDocumentsByReferences(r).subscribe(i=>{this.relatedProducts=i})}updateProduct(r){this.product=r}getProductDetails(){this.service.getProductById(this.router.snapshot.params.id).subscribe(r=>{this.product=r[0],this.stocksCount=r[0]?.stocks,this.selectedSku=this.product.sku,this.getVarients(),this.getcolors(),this.getcolor(),this.getLenght(),this.getwidth(),this.getDescription(),this.getRelatedProducts(this.product.related)})}getcolors(){this.product?.color_varient&&(this.color=this.product?.color_varient.split(","))}getLenght(){this.product.length&&(this.length=this.product?.length.split(","))}getDescription(){this.product.description&&(this.description=this.product?.description.split(","))}getwidth(){this.product?.width&&(this.width=this.product?.width.split(","))}getVarients(){this.selectedSku&&this.service.getVarientBySku(this.selectedSku).subscribe(r=>{this.varient=r,this.varient&&(this.selectedVarient=this?.varient[0])})}updateVarient(r){this.selectedSizeIndex=r,this.selectedVarient=this.varient[r],this.stocksCount=this.selectedVarient.stocks}addToCart(){if(this.product&&this.userService.isLoggedIn()){let i="";this.selectedVarient&&(i=this.selectedVarient.id);const l={varientId:i,id:this.product.id,userId:this.userId,productname:this.product.productname,category:this.product.category,sub_category:this.product.sub_category,price:this.selectedVarient?this.selectedVarient.price:this.product.min_price,sku:this.product.sku,imageUrl:this.product.imageUrl[0],quantity:1,stocks:this.selectedVarient?this.selectedVarient.stocks:this.product.stocks};try{this.cartservice.createCart(l)}catch{this.toaster.error("Product not added to cart")}}else this.navigate.navigate(["../login"])}getcolor(){this.otherservice.getworkinghours().subscribe(r=>{this.web_color=r.website_background})}}return(n=e).\u0275fac=function(r){return new(r||n)(o.Y36(Wd),o.Y36(wn.gz),o.Y36(wn.F0),o.Y36($y),o.Y36(Yc),o.Y36(Qu),o.Y36(jp),o.Y36(o.SBq))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-product-details"]],viewQuery:function(r,i){if(1&r&&o.Gf(TU,5),2&r){let l;o.iGM(l=o.CRH())&&(i.quantityInput=l.first)}},decls:87,vars:26,consts:[[1,"shop-main-wrapper","section-padding","pb-0"],[1,"container"],[1,"row"],[1,"col-lg-12","order-1","order-lg-2"],[1,"product-details-inner"],[1,"col-lg-5"],[1,"product-large-slider"],["class","pro-large-img ",4,"ngIf"],[1,"pro-nav","slick-row-10","slick-arrow-style"],[1,"pro-nav-thumb"],[3,"src"],[1,"col-lg-7"],[1,"col-12"],[1,"breadcrumb-wrap"],["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","..shop"],[1,"fa","fa-home"],["routerLink","../../shop"],["aria-current","page",1,"breadcrumb-item","active"],[1,"product-details-des"],[1,"product-name",2,"font-size","24px","font-family","Amethysta","font-weight","bold","margin-bottom","20px"],[1,"price-box",2,"font-size","24px","font-family","Amethysta","font-weight","bold"],["class","price-regular","style","color: #81ca33",4,"ngIf","ngIfElse"],["default",""],[1,"product-name",2,"font-size","24px","font-family","Amethysta","font-weight","bold"],[1,"quantity-cart-box","d-flex","align-items-center"],[1,"quantity",2,"display","none"],[1,"pro-qty"],["type","number"],["quantityInput",""],[1,"pro-size"],["style","font-size: 18px;font-family:Amethysta;font-weight: bold","class","option-title",4,"ngIf"],[1,"col"],[4,"ngIf"],["class","pro-size",4,"ngFor","ngForOf"],["class","pro-size",4,"ngIf"],[1,"action_link"],[1,"availability"],["class","fa fa-check-circle me-1",4,"ngIf"],["style","font-size: 14px;font-family:Amethysta;font-weight: bold",4,"ngIf"],["style","font-size: 15px;font-family:Amethysta;font-weight: bold","class","btn btn-cart2",3,"click",4,"ngIf"],["class","product-description col",4,"ngFor","ngForOf"],[1,"feature-product","section-padding"],[1,"section-title","text-center"],[1,"title"],[1,"product-carousel-4","slick-row-10","slick-arrow-style"],["class","product-item bg:'red'",4,"ngFor","ngForOf"],["hidden",""],[1,"pro-large-img"],["data-lightbox","models",3,"href","title"],[1,"price-regular",2,"color","#81ca33"],[1,"option-title",2,"font-size","18px","font-family","Amethysta","font-weight","bold"],[1,"option-title",2,"font-size","14px","font-family","Amethysta","font-weight","bold"],["class","size-box",3,"ngClass",4,"ngFor","ngForOf"],[1,"size-box",3,"ngClass"],[2,"font-size","14px","font-family","Amethysta","font-weight","bold",3,"click"],[1,"fa","fa-check-circle","me-1"],[2,"font-size","14px","font-family","Amethysta","font-weight","bold"],[1,"btn","btn-cart2",2,"font-size","15px","font-family","Amethysta","font-weight","bold",3,"click"],["style","font-size: 14px;font-family:Amethysta;font-weight: bold;line-height: 1.7;","class","option-title",4,"ngIf"],[1,"option-title",2,"font-size","14px","font-family","Amethysta","font-weight","bold","line-height","1.7"],[1,"product-description","col"],["rows","6",2,"font-size","16px","font-weight","bold","width","100%"],[1,"product-item","bg:'red'"],[1,"product-thumb",3,"click"],[3,"routerLink"],[1,"pri-img",3,"src"],[1,"sec-img",3,"src"],[1,"product-caption","text-center"],[1,"product-identity"],[1,"manufacturer-name"],[2,"font-size","18 !important","font-weight","bold","font-family","Amethysta"],[1,"product-name"],[1,"price-box"]],template:function(r,i){if(1&r&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",2)(6,"div",5)(7,"div",6),o.YNc(8,IU,3,3,"div",7),o.YNc(9,SU,3,3,"div",7),o.YNc(10,DU,3,3,"div",7),o.YNc(11,AU,3,3,"div",7),o.qZA(),o.TgZ(12,"div",8)(13,"div",9),o._UZ(14,"img",10),o.qZA(),o.TgZ(15,"div",9),o._UZ(16,"img",10),o.qZA(),o.TgZ(17,"div",9),o._UZ(18,"img",10),o.qZA(),o.TgZ(19,"div",9),o._UZ(20,"img",10),o.qZA()()(),o.TgZ(21,"div",11)(22,"div",2)(23,"div",12)(24,"div",13)(25,"nav",14)(26,"ul",15)(27,"li",16)(28,"a",17),o._UZ(29,"i",18),o.qZA()(),o.TgZ(30,"li",16)(31,"a",19),o._uU(32,"shop"),o.qZA()(),o.TgZ(33,"li",20),o._uU(34),o.qZA()()()()()(),o.TgZ(35,"div",21)(36,"h3",22),o._uU(37),o.qZA(),o.TgZ(38,"div",23),o.YNc(39,xU,2,1,"span",24),o.YNc(40,MU,2,1,"ng-template",null,25,o.W1O),o.qZA(),o.TgZ(42,"h3",26),o._UZ(43,"br"),o._uU(44),o.qZA(),o.TgZ(45,"div",27)(46,"div",28)(47,"div",29),o._UZ(48,"input",30,31),o.qZA()()(),o.TgZ(50,"div")(51,"div",32),o.YNc(52,PU,3,1,"h6",33),o.qZA(),o.TgZ(53,"div",2)(54,"div",34),o.YNc(55,NU,2,1,"ng-container",35),o.GkF(56),o.YNc(57,OU,4,1,"div",36),o.TgZ(58,"div"),o.YNc(59,FU,3,1,"div",37),o.qZA()(),o.TgZ(60,"div",34)(61,"div",38)(62,"div",39),o.YNc(63,LU,1,0,"i",40),o.YNc(64,UU,2,0,"span",41),o._UZ(65,"br"),o.YNc(66,VU,1,0,"i",40),o.YNc(67,BU,2,0,"span",41),o._UZ(68,"br"),o.YNc(69,ZU,2,0,"a",42),o.qZA()()()()(),o.YNc(70,HU,5,1,"div",35),o.TgZ(71,"div"),o.YNc(72,qU,2,1,"div",37),o.qZA(),o.TgZ(73,"div",34),o.YNc(74,zU,3,1,"div",43),o.qZA()()()()()()()(),o.TgZ(75,"section",44)(76,"div",1)(77,"div",2)(78,"div",12)(79,"div",45)(80,"h5",46),o._uU(81,"RELATED PRODUCTS"),o.qZA()()()(),o.TgZ(82,"div",2)(83,"div",12)(84,"div",47),o.YNc(85,GU,17,8,"div",48),o.qZA()()()()(),o._UZ(86,"app-mini-cart",49),o.qZA()),2&r){const l=o.MAs(41);o.xp6(8),o.Q6J("ngIf",null==i.product?null:i.product.imageUrl[0]),o.xp6(1),o.Q6J("ngIf",null==i.product?null:i.product.imageUrl[1]),o.xp6(1),o.Q6J("ngIf",null==i.product?null:i.product.imageUrl[2]),o.xp6(1),o.Q6J("ngIf",null==i.product?null:i.product.imageUrl[3]),o.xp6(3),o.s9C("src",null==i.product?null:i.product.imageUrl[0],o.LSH),o.xp6(2),o.s9C("src",null==i.product?null:i.product.imageUrl[1],o.LSH),o.xp6(2),o.s9C("src",null==i.product?null:i.product.imageUrl[2],o.LSH),o.xp6(2),o.s9C("src",null==i.product?null:i.product.imageUrl[3],o.LSH),o.xp6(14),o.hij(" ",i.product.sub_category," "),o.xp6(3),o.hij(" ",null==i.product?null:i.product.productname," "),o.xp6(2),o.Q6J("ngIf",null==i.selectedVarient?null:i.selectedVarient.price)("ngIfElse",l),o.xp6(5),o.hij(" ITEM CODE : ",null==i.product?null:i.product.sku," "),o.xp6(8),o.Q6J("ngIf",i.color),o.xp6(3),o.Q6J("ngIf",i.product.length),o.xp6(2),o.Q6J("ngForOf",i.width),o.xp6(2),o.Q6J("ngIf",(null==i.varient?null:i.varient.length)>0),o.xp6(4),o.Q6J("ngIf",0==i.stocksCount||null==i.stocksCount),o.xp6(1),o.Q6J("ngIf",0==i.stocksCount||null==i.stocksCount),o.xp6(2),o.Q6J("ngIf",i.stocksCount>0),o.xp6(1),o.Q6J("ngIf",i.stocksCount>0),o.xp6(2),o.Q6J("ngIf",i.stocksCount>0),o.xp6(1),o.Q6J("ngIf",(null==i.varient?null:i.varient.length)<0),o.xp6(2),o.Q6J("ngIf",null==i.product?null:i.product.fastening),o.xp6(2),o.Q6J("ngForOf",i.description),o.xp6(11),o.Q6J("ngForOf",i.relatedProducts)}},dependencies:[on.mk,on.sg,on.O5,wn.rH,XA,on.gd],styles:[".size-box[_ngcontent-%COMP%]{display:inline-block;padding:10px;background-color:#f2f2f2;border:1px solid #ccc;border-radius:4px;font-size:14px;margin-left:6px}.mystyle[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{background-color:#000}.pro-size[_ngcontent-%COMP%]   .size-box.active[_ngcontent-%COMP%]{background-color:#81ca33;color:#fff}.price-regular[_ngcontent-%COMP%]{color:#000!important;font-weight:500;font-weight:700}",".product-description[_ngcontent-%COMP%] {\n                      display: flex;\n\n                    }\n\n                    .product-description[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%] {\n                      font-size: 16px;\n                      font-family: 'Amethysta';\n                      font-weight: bold;\n                      border: none;\n                    }"]}),e})(),rR=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.Qsj),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n}),n})(),pm=(()=>{class n extends rR{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=o.n5z(n)))(r||n)}}(),n.\u0275dir=o.lG2({type:n,features:[o.qOj]}),n})();const Kd=new o.OlP("NgValueAccessor"),YU={provide:Kd,useExisting:(0,o.Gpc)(()=>Hp),multi:!0},JU=new o.OlP("CompositionEventMode");let Hp=(()=>{class n extends rR{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function QU(){const n=(0,on.q)()?(0,on.q)().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.Qsj),o.Y36(o.SBq),o.Y36(JU,8))},n.\u0275dir=o.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&o.NdJ("input",function(l){return r._handleInput(l.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(l){return r._compositionEnd(l.target.value)})},features:[o._Bn([YU]),o.qOj]}),n})();const XU=!1;const Oa=new o.OlP("NgValidators"),qp=new o.OlP("NgAsyncValidators");function lR(n){return function $p(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}(n.value)?{required:!0}:null}function WT(n){return null}function pR(n){return null!=n}function gR(n){const e=(0,o.QGY)(n)?(0,ws.D)(n):n;if(XU&&!(0,o.CqO)(e)){let t="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(t+=" Are you using a synchronous validator where an async validator is expected?"),new o.vHH(-1101,t)}return e}function mR(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function _R(n,e){return e.map(t=>t(n))}function yR(n){return n.map(e=>function tV(n){return!n.validate}(e)?e:t=>e.validate(t))}function s1(n){return null!=n?function vR(n){if(!n)return null;const e=n.filter(pR);return 0==e.length?null:function(t){return mR(_R(t,e))}}(yR(n)):null}function o1(n){return null!=n?function wR(n){if(!n)return null;const e=n.filter(pR);return 0==e.length?null:function(t){return sc(_R(t,e).map(gR)).pipe((0,un.U)(mR))}}(yR(n)):null}function CR(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function a1(n){return n?Array.isArray(n)?n:[n]:[]}function KT(n,e){return Array.isArray(n)?n.includes(e):n===e}function TR(n,e){const t=a1(e);return a1(n).forEach(i=>{KT(t,i)||t.push(i)}),t}function IR(n,e){return a1(e).filter(t=>!KT(n,t))}class SR{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=s1(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=o1(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class sl extends SR{get formDirective(){return null}get path(){return null}}class zp extends SR{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class DR{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let qy=(()=>{class n extends DR{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(zp,2))},n.\u0275dir=o.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&o.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[o.qOj]}),n})(),gm=(()=>{class n extends DR{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(sl,10))},n.\u0275dir=o.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&o.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[o.qOj]}),n})();function AR(n,e){return n?`with name: '${e}'`:`at index: ${e}`}const c1=!1,Xw="VALID",QT="INVALID",zy="PENDING",eC="DISABLED";function d1(n){return(JT(n)?n.validators:n)||null}function h1(n,e){return(JT(e)?e.asyncValidators:n)||null}function JT(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class PR{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Xw}get invalid(){return this.status===QT}get pending(){return this.status==zy}get disabled(){return this.status===eC}get enabled(){return this.status!==eC}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(TR(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(TR(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(IR(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(IR(e,this._rawAsyncValidators))}hasValidator(e){return KT(this._rawValidators,e)}hasAsyncValidator(e){return KT(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=zy,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=eC,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Xw,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Xw||this.status===zy)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?eC:Xw}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=zy,this._hasOwnPendingAsyncValidator=!0;const t=gR(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new o.vpe,this.statusChanges=new o.vpe}_calculateStatus(){return this._allControlsDisabled()?eC:this.errors?QT:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(zy)?zy:this._anyControlsHaveStatus(QT)?QT:Xw}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){JT(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function lV(n){return Array.isArray(n)?s1(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function uV(n){return Array.isArray(n)?o1(n):n||null}(this._rawAsyncValidators)}}class f1 extends PR{constructor(e,t,r){super(d1(t),h1(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function MR(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new o.vHH(1002,c1?function aV(n,e){return`Must supply a value for form control ${AR(n,e)}`}(e,i):"")})})(this,!0,e),Object.keys(e).forEach(r=>{(function xR(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new o.vHH(1e3,c1?function sV(n){return`\n    There are no form controls registered with this ${n?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(e):"");if(!r[t])throw new o.vHH(1001,c1?function oV(n,e){return`Cannot find form control ${AR(n,e)}`}(e,t):"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,l)=>{r=t(r,i,l)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const Gy=new o.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>XT}),XT="always";function tC(n,e,t=XT){p1(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function hV(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&RR(n,e)})}(n,e),function pV(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function fV(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&RR(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function dV(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function nI(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function p1(n,e){const t=function bR(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(CR(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function ER(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(CR(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();nI(e._rawValidators,i),nI(e._rawAsyncValidators,i)}function RR(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const vV={provide:sl,useExisting:(0,o.Gpc)(()=>hf)},nC=(()=>Promise.resolve())();let hf=(()=>{class n extends sl{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new o.vpe,this.form=new f1({},s1(t),o1(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){nC.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),tC(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){nC.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){nC.then(()=>{const r=this._findContainer(t.path),i=new f1({});(function NR(n,e){p1(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){nC.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){nC.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function OR(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(Oa,10),o.Y36(qp,10),o.Y36(Gy,8))},n.\u0275dir=o.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&o.NdJ("submit",function(l){return r.onSubmit(l)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[o._Bn([vV]),o.qOj]}),n})();function kR(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function FR(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const LR=class extends PR{constructor(e=null,t,r){super(d1(t),h1(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),JT(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=FR(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){kR(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){kR(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){FR(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},bV={provide:zp,useExisting:(0,o.Gpc)(()=>mm)},BR=(()=>Promise.resolve())();let mm=(()=>{class n extends zp{constructor(t,r,i,l,c,f){super(),this._changeDetectorRef=c,this.callSetDisabledState=f,this.control=new LR,this._registered=!1,this.update=new o.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function _1(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(l=>{l.constructor===Hp?t=l:function _V(n){return Object.getPrototypeOf(n.constructor)===pm}(l)?r=l:i=l}),i||r||t||null}(0,l)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function m1(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){tC(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){BR.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,o.D6c)(r);BR.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function eI(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(sl,9),o.Y36(Oa,10),o.Y36(qp,10),o.Y36(Kd,10),o.Y36(o.sBO,8),o.Y36(Gy,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[o._Bn([bV]),o.qOj,o.TTD]}),n})(),_m=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=o.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const EV={provide:Kd,useExisting:(0,o.Gpc)(()=>y1),multi:!0};let y1=(()=>{class n extends pm{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=o.n5z(n)))(r||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&o.NdJ("input",function(l){return r.onChange(l.target.value)})("blur",function(){return r.onTouched()})},features:[o._Bn([EV]),o.qOj]}),n})(),ZR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})(),ym=(()=>{class n{constructor(){this._validator=WT}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):WT,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=o.lG2({type:n,features:[o.TTD]}),n})();const BV={provide:Oa,useExisting:(0,o.Gpc)(()=>vm),multi:!0};let vm=(()=>{class n extends ym{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=o.D6c,this.createValidator=t=>lR}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=o.n5z(n)))(r||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&o.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[o._Bn([BV]),o.qOj]}),n})(),zV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[ZR]}),n})(),WV=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Gy,useValue:t.callSetDisabledState??XT}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[zV]}),n})();const KV=["contactForm"];let YV=(()=>{var n;class e{constructor(r,i){this.firestore=r,this.toastr=i,this.contact={name:"",subject:"",contact:"",email:"",message:""}}submitForm(){var r=this;return(0,ke.Z)(function*(){r.contactForm.valid?(yield r.firestore.collection("contacts").add({name:r.contact.name,subject:r.contact.subject,contact:r.contact.contact,email:r.contact.email,message:r.contact.message}),r.toastr.success("Enquiry sent!")):r.toastr.error("Something Went wrong!")})()}}return(n=e).\u0275fac=function(r){return new(r||n)(o.Y36(qc),o.Y36(Yc))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-contact"]],viewQuery:function(r,i){if(1&r&&o.Gf(KV,5),2&r){let l;o.iGM(l=o.CRH())&&(i.contactForm=l.first)}},decls:78,vars:6,consts:[[1,"breadcrumb-area"],[1,"container"],[1,"row"],[1,"col-12"],[1,"breadcrumb-wrap"],["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","index.html"],[1,"fa","fa-home"],["aria-current","page",1,"breadcrumb-item","active"],[1,"map-area","section-padding"],[2,"padding","10px","border-radius","5px","border-style","groove","margin","10px 10px"],["src","https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d1842.9684436850537!2d88.36430167118833!3d22.50655099510618!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3a027128155c1587%3A0x2c9f91eb7c29d03c!2sGlow%20N%20Glitter%20%7C%20Best%20Silver%20Jewellery%20and%20Brass%20handicraft%20items%20Shop%20in%20South%20Kolkata!5e0!3m2!1sen!2sin!4v1682152651032!5m2!1sen!2sin","width","100%","height","450","allowfullscreen","","loading","lazy","referrerpolicy","no-referrer-when-downgrade",2,"border","0"],[1,"contact-area","section-padding","pt-0"],[1,"col-lg-6"],[1,"contact-message"],[1,"contact-title"],["id","contact-form",1,"contact-form",3,"ngSubmit"],["contactForm","ngForm"],[1,"col-lg-6","col-md-6","col-sm-6"],["name","name","placeholder","Name *","type","text","required","",3,"ngModel","ngModelChange"],["name","phone","placeholder","Phone *","type","text","required","",3,"ngModel","ngModelChange"],["name","email_address","placeholder","Email *","type","text","required","",3,"ngModel","ngModelChange"],["name","contact_subject","placeholder","Subject *","type","text",3,"ngModel","ngModelChange"],[1,"contact2-textarea","text-center"],["placeholder","Message *","name","message","required","",1,"form-control2",3,"ngModel","ngModelChange"],[1,"contact-btn"],["type","submit",1,"btn","btn-sqr",3,"disabled"],[1,"col-12","d-flex","justify-content-center"],[1,"form-messege"],[1,"contact-info"],[1,"fa","fa-fax"],[1,"fa","fa-phone"],[1,"fa","fa-envelope-o"],[1,"working-time"]],template:function(r,i){if(1&r&&(o.TgZ(0,"main")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"nav",5)(7,"ul",6)(8,"li",7)(9,"a",8),o._UZ(10,"i",9),o.qZA()(),o.TgZ(11,"li",10),o._uU(12,"contact us"),o.qZA()()()()()()()(),o.TgZ(13,"div",11)(14,"div",12),o._UZ(15,"iframe",13),o.qZA()(),o.TgZ(16,"div",14)(17,"div",1)(18,"div",2)(19,"div",15)(20,"div",16)(21,"h4",17),o._uU(22,"Contact Us"),o.qZA(),o.TgZ(23,"form",18,19),o.NdJ("ngSubmit",function(){return i.submitForm()}),o.TgZ(25,"div",2)(26,"div",20)(27,"input",21),o.NdJ("ngModelChange",function(c){return i.contact.name=c}),o.qZA()(),o.TgZ(28,"div",20)(29,"input",22),o.NdJ("ngModelChange",function(c){return i.contact.contact=c}),o.qZA()(),o.TgZ(30,"div",20)(31,"input",23),o.NdJ("ngModelChange",function(c){return i.contact.email=c}),o.qZA()(),o.TgZ(32,"div",20)(33,"input",24),o.NdJ("ngModelChange",function(c){return i.contact.subject=c}),o.qZA()(),o.TgZ(34,"div",3)(35,"div",25)(36,"textarea",26),o.NdJ("ngModelChange",function(c){return i.contact.message=c}),o.qZA()(),o.TgZ(37,"div",27)(38,"button",28),o._uU(39,"Send Message"),o.qZA()()(),o.TgZ(40,"div",29),o._UZ(41,"p",30),o.qZA()()()()(),o.TgZ(42,"div",15)(43,"div",31)(44,"h4",17),o._uU(45,"Contact Us"),o.qZA(),o.TgZ(46,"p"),o._uU(47,"Glow N Glitter is a Firm that specializes in designing manufacturing and retailing silver jewellery. The Glow N Glitter collection caters to a variety of taste ranging from small simple jewellery fit for every day use to more ornate pieces. Keeping pace with the shifting fashion trends GNG focuses on both the contemporary and age old classical designs. The aim is to bridge style with sophistication and grace with splendor."),o.qZA(),o.TgZ(48,"p"),o._uU(49,"Added to the huge collection of silver jewellery the GNG repertoire also boasts of an equally wide range of brass products. The range includes puja items like diyas, elaborate lamps chowkis various statues of Krishna Ganesha Buddha along with items of home d\xe9cor."),o.qZA(),o.TgZ(50,"p"),o._uU(51,"A third item that GNG offers are items in blue pottery ranging from vases to coasters."),o.qZA(),o.TgZ(52,"ul")(53,"li"),o._UZ(54,"i",32),o._uU(55," Address : No 40 Baria Sreet 133/2 west bangal"),o.qZA(),o.TgZ(56,"li"),o._UZ(57,"i",33),o._uU(58," E-mail: info@glownglitter.com"),o.qZA(),o.TgZ(59,"li"),o._UZ(60,"i",34),o.TgZ(61,"span"),o._uU(62,"call/whatsapp : "),o.qZA(),o.TgZ(63,"span"),o._uU(64,"91 905 139 8740"),o.qZA()(),o.TgZ(65,"li"),o._UZ(66,"i",34),o.TgZ(67,"span"),o._uU(68,"call/whatsapp :"),o.qZA(),o.TgZ(69,"span"),o._uU(70,"91 987 440 6700"),o.qZA()()(),o.TgZ(71,"div",35)(72,"h6"),o._uU(73,"Working Hours"),o.qZA(),o.TgZ(74,"p")(75,"span"),o._uU(76,"Monday \u2013 Saturday:"),o.qZA(),o._uU(77,"10AM \u2013 9PM"),o.qZA()()()()()()()()),2&r){const l=o.MAs(24);o.xp6(27),o.Q6J("ngModel",i.contact.name),o.xp6(2),o.Q6J("ngModel",i.contact.contact),o.xp6(2),o.Q6J("ngModel",i.contact.email),o.xp6(2),o.Q6J("ngModel",i.contact.subject),o.xp6(3),o.Q6J("ngModel",i.contact.message),o.xp6(2),o.Q6J("disabled",!l.valid)}},dependencies:[_m,Hp,qy,gm,vm,mm,hf]}),e})(),QV=(()=>{var n;class e{constructor(r){this.auth=r,this.email="",this.password="",this.isSingIn=!1}ngOnInit(){this.isSingIn=null!==localStorage.getItem("user")}login(){var r=this;return(0,ke.Z)(function*(){yield r.auth.Login(r.email,r.password),r.auth.isLoggedInUser&&(r.isSingIn=!0)})()}}return(n=e).\u0275fac=function(r){return new(r||n)(o.Y36(Qu))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-login"]],decls:33,vars:3,consts:[[1,"breadcrumb-area"],[1,"container"],[1,"row"],[1,"col-12"],[1,"breadcrumb-wrap"],["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","index.html"],[1,"fa","fa-home"],["aria-current","page",1,"breadcrumb-item","active"],[1,"login-register-wrapper","section-padding"],[1,"member-area-from-wrap"],[1,"col-lg-12"],[1,"login-reg-form-wrap"],[3,"ngSubmit"],["loginForm","ngForm"],[1,"single-input-item"],["type","email","name","email","placeholder","Email or Username","required","",3,"ngModel","ngModelChange"],["type","password","name","password","placeholder","Enter your Password","required","",3,"ngModel","ngModelChange"],[1,"login-reg-form-meta","d-flex","align-items-center","justify-content-between"],["routerLink","../register",1,"forget-pwd"],["type","submit",1,"btn","btn-sqr",3,"disabled"]],template:function(r,i){if(1&r&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"nav",5)(6,"ul",6)(7,"li",7)(8,"a",8),o._UZ(9,"i",9),o.qZA()(),o.TgZ(10,"li",10),o._uU(11,"login"),o.qZA()()()()()()()(),o.TgZ(12,"div",11)(13,"div",1)(14,"div",12)(15,"div",13)(16,"div",14)(17,"h5"),o._uU(18,"Sign In"),o.qZA(),o.TgZ(19,"form",15,16),o.NdJ("ngSubmit",function(){return i.login()}),o.TgZ(21,"div",17)(22,"input",18),o.NdJ("ngModelChange",function(c){return i.email=c}),o.qZA()(),o.TgZ(23,"div",17)(24,"input",19),o.NdJ("ngModelChange",function(c){return i.password=c}),o.qZA()(),o.TgZ(25,"div",20)(26,"span"),o._uU(27,"If not registered Please: "),o.TgZ(28,"a",21),o._uU(29,"SignUp"),o.qZA()()(),o.TgZ(30,"div",17)(31,"button",22),o._uU(32,"Login"),o.qZA()()()()()()()()),2&r){const l=o.MAs(20);o.xp6(22),o.Q6J("ngModel",i.email),o.xp6(2),o.Q6J("ngModel",i.password),o.xp6(7),o.Q6J("disabled",l.invalid)}},dependencies:[wn.rH,_m,Hp,qy,gm,vm,mm,hf],styles:[".login-register-wrapper[_ngcontent-%COMP%]{margin:0 auto;max-width:500px}"]}),e})();const JV=["registrationForm"];let XV=(()=>{var n;class e{constructor(r,i,l,c,f){this.auth=r,this.firestore=i,this.toastr=l,this.router=c,this.authservice=f,this.user={name:"",email:"",password:"",contact:""},this.isSingIn=!1}ngOnInit(){this.isSingIn=null!==localStorage.getItem("user")}register(){this.auth.createUserWithEmailAndPassword(this.user.email,this.user.password).then(r=>{const i={uid:r.user?.uid,email:r.user?.email,name:this.user.name,createdTime:new Date,contact:this.user.contact};this.firestore.collection("users").doc(r.user?.uid).set(i),this.authservice.isLoggedInUser&&(this.isSingIn=!0),this.toastr.success("Sucessfully registered"),this.registrationForm.resetForm(),this.router.navigate(["../login"])}).catch(r=>this.toastr.error("something went wrong try again"))}}return(n=e).\u0275fac=function(r){return new(r||n)(o.Y36(nm),o.Y36(qc),o.Y36(Yc),o.Y36(wn.F0),o.Y36(Qu))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-register"]],viewQuery:function(r,i){if(1&r&&o.Gf(JV,5),2&r){let l;o.iGM(l=o.CRH())&&(i.registrationForm=l.first)}},decls:39,vars:5,consts:[[1,"breadcrumb-area"],[1,"container"],[1,"row"],[1,"col-12"],[1,"breadcrumb-wrap"],["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","index.html"],[1,"fa","fa-home"],["aria-current","page",1,"breadcrumb-item","active"],[1,"login-register-wrapper","section-padding"],[1,"member-area-from-wrap"],[1,"col-lg-12"],[1,"login-reg-form-wrap","sign-up-form"],["action","#","method","post",3,"ngSubmit"],["registerForm","ngForm"],[1,"single-input-item"],["type","text","name","name","placeholder","Full Name","required","",3,"ngModel","ngModelChange"],["type","email","name","email","placeholder","Enter your Email","required","",3,"ngModel","ngModelChange"],["type","password","name","password","placeholder","Enter your password","required","",3,"ngModel","ngModelChange"],["type","phone","name","phone","placeholder","Enter your contact Number","required","",3,"ngModel","ngModelChange"],[1,"login-reg-form-meta","d-flex","align-items-center","justify-content-between"],["routerLink","../login",1,"forget-pwd"],["type","submit",1,"btn","btn-sqr",3,"disabled"]],template:function(r,i){if(1&r&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"nav",5)(6,"ul",6)(7,"li",7)(8,"a",8),o._UZ(9,"i",9),o.qZA()(),o.TgZ(10,"li",10),o._uU(11,"Register"),o.qZA()()()()()()()(),o.TgZ(12,"div",11)(13,"div",1)(14,"div",12)(15,"div",2)(16,"div",13)(17,"div",14)(18,"h5"),o._uU(19,"Singup Form"),o.qZA(),o.TgZ(20,"form",15,16),o.NdJ("ngSubmit",function(){return i.register()}),o.TgZ(22,"div",17)(23,"input",18),o.NdJ("ngModelChange",function(c){return i.user.name=c}),o.qZA()(),o.TgZ(24,"div",17)(25,"input",19),o.NdJ("ngModelChange",function(c){return i.user.email=c}),o.qZA()(),o.TgZ(26,"div",17)(27,"input",20),o.NdJ("ngModelChange",function(c){return i.user.password=c}),o.qZA()(),o.TgZ(28,"div",17)(29,"input",21),o.NdJ("ngModelChange",function(c){return i.user.contact=c}),o.qZA()(),o.TgZ(30,"div",17)(31,"div",22)(32,"span"),o._uU(33,"If registered please: "),o.TgZ(34,"a",23),o._uU(35,"Login"),o.qZA()()()(),o.TgZ(36,"div",17)(37,"button",24),o._uU(38,"Register"),o.qZA()()()()()()()()()),2&r){const l=o.MAs(21);o.xp6(23),o.Q6J("ngModel",i.user.name),o.xp6(2),o.Q6J("ngModel",i.user.email),o.xp6(2),o.Q6J("ngModel",i.user.password),o.xp6(2),o.Q6J("ngModel",i.user.contact),o.xp6(8),o.Q6J("disabled",l.invalid)}},dependencies:[wn.rH,_m,Hp,qy,gm,vm,mm,hf],styles:[".login-register-wrapper[_ngcontent-%COMP%]{margin:0 auto;max-width:500px}"]}),e})(),t3=(()=>{var n;class e{constructor(r){this.firestore=r,this.destroy$=new P.x,this.orderCollection=this.firestore.collection("orders")}getOrder(r){return this.orderCollection.ref.where("userid","==",r),this.orderCollection.snapshotChanges().pipe((0,un.U)(l=>l.map(c=>{const f=c.payload.doc.data();return{id:c.payload.doc.id,...f}})),function e3(n){return(0,Jo.e)((e,t)=>{(0,wi.Xf)(n).subscribe((0,so.x)(t,()=>t.complete(),xx.Z)),!t.closed&&e.subscribe(t)})}(this.destroy$))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return(n=e).\u0275fac=function(r){return new(r||n)(o.LFG(qc))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();function n3(n,e){if(1&n&&(o.TgZ(0,"tr")(1,"td"),o._uU(2),o.qZA(),o.TgZ(3,"td"),o._uU(4),o.qZA(),o.TgZ(5,"td"),o._uU(6),o.ALo(7,"date"),o.qZA(),o.TgZ(8,"td"),o._uU(9),o.qZA(),o.TgZ(10,"td"),o._uU(11),o.ALo(12,"number"),o.qZA(),o.TgZ(13,"td")(14,"a",37),o._uU(15,"View"),o.qZA()()()),2&n){const t=e.$implicit,r=e.index;o.xp6(2),o.Oqu(r+1),o.xp6(2),o.Oqu(t.cartItems.length),o.xp6(2),o.Oqu(o.xi3(7,5,1e3*t.createdTime.seconds,"dd/MM/yyyy")),o.xp6(3),o.Oqu(t.status),o.xp6(2),o.hij("\u20b9",o.xi3(12,8,t.amount,"1.2-2"),"")}}function r3(n,e){if(1&n&&(o.ynx(0),o.TgZ(1,"address",38),o.ynx(2),o.TgZ(3,"p",39)(4,"strong"),o._uU(5),o.qZA()(),o.TgZ(6,"p")(7,"strong"),o._uU(8),o.qZA()(),o.TgZ(9,"p")(10,"strong"),o._uU(11),o.qZA()(),o.TgZ(12,"p")(13,"strong"),o._uU(14),o.qZA()(),o.TgZ(15,"p")(16,"strong"),o._uU(17),o.qZA()(),o.TgZ(18,"p"),o._uU(19),o.qZA(),o.BQk(),o.qZA(),o.BQk()),2&n){const t=e.$implicit,r=e.index;o.xp6(5),o.hij("Address ",r+1,""),o.xp6(3),o.AsE("Name: ",t.first_name," ",t.last_name,""),o.xp6(3),o.hij("Address1: ",t.address1,""),o.xp6(3),o.hij("Address2: ",t.address2,""),o.xp6(3),o.hij("Pincode: ",t.pincode,""),o.xp6(2),o.hij("Mobile: (+91)",t.contact,"")}}let i3=(()=>{var n;class e{constructor(r,i){this.auth=r,this.orderservice=i}ngOnInit(){this.getuser(),this.getorders()}getuser(){this.userId=this.auth.getCurrentUser()?.uid}getorders(){this.orderservice.getOrder(this.userId).subscribe(r=>{this.orderList=r,this.filderedOrder=r.filter(i=>"delivered"!==i.status),console.log(r)})}logout(){this.auth.logout()}}return(n=e).\u0275fac=function(r){return new(r||n)(o.Y36(Qu),o.Y36(t3))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-my-account"]],decls:75,vars:2,consts:[[1,"my-account-wrapper","section-padding"],[1,"container"],[1,"section-bg-color"],[1,"row"],[1,"col-lg-12"],[1,"myaccount-page-wrapper"],[1,"col-lg-3","col-md-4"],["role","tablist",1,"myaccount-tab-menu","nav"],["href","#orders","data-bs-toggle","tab"],[1,"fa","fa-cart-arrow-down","selected"],["href","#address-edit","data-bs-toggle","tab"],[1,"fa","fa-map-marker"],["href","#account-info","data-bs-toggle","tab"],[1,"fa","fa-user"],[3,"click"],[1,"fa","fa-sign-out"],[1,"col-lg-9","col-md-8"],["id","myaccountContent",1,"tab-content"],["id","orders","role","tabpanel",1,"tab-pane","fade","show","active"],[1,"myaccount-content"],[1,"myaccount-table","table-responsive","text-center"],[1,"table","table-bordered"],[1,"thead-light"],[4,"ngFor","ngForOf"],["id","address-edit","role","tabpanel",1,"tab-pane","fade"],["id","account-info","role","tabpanel",1,"tab-pane","fade"],[1,"account-details-form"],["action","#"],[1,"single-input-item"],["for","current-pwd",1,"required"],["type","password","id","current-pwd","placeholder","Current Password"],[1,"col-lg-6"],["for","new-pwd",1,"required"],["type","password","id","new-pwd","placeholder","New Password"],["for","confirm-pwd",1,"required"],["type","password","id","confirm-pwd","placeholder","Confirm Password"],[1,"btn","btn-sqr"],["routerLink","../cart",1,"btn","btn-sqr"],[2,"background-color","gray","color","rgb(20, 9, 9)","padding","50px","border-radius","20px"],[2,"text-align","center"]],template:function(r,i){1&r&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",3)(7,"div",6)(8,"div",7)(9,"a",8),o._UZ(10,"i",9),o._uU(11," Orders"),o.qZA(),o.TgZ(12,"a",10),o._UZ(13,"i",11),o._uU(14," address"),o.qZA(),o.TgZ(15,"a",12),o._UZ(16,"i",13),o._uU(17," Change Password"),o.qZA(),o.TgZ(18,"a",14),o.NdJ("click",function(){return i.logout()}),o._UZ(19,"i",15),o._uU(20," Logout"),o.qZA()()(),o.TgZ(21,"div",16)(22,"div",17)(23,"div",18)(24,"div",19)(25,"h5"),o._uU(26,"Orders"),o.qZA(),o.TgZ(27,"div",20)(28,"table",21)(29,"thead",22)(30,"tr")(31,"th"),o._uU(32,"S.No"),o.qZA(),o.TgZ(33,"th"),o._uU(34,"Order"),o.qZA(),o.TgZ(35,"th"),o._uU(36,"Date"),o.qZA(),o.TgZ(37,"th"),o._uU(38,"Status"),o.qZA(),o.TgZ(39,"th"),o._uU(40,"Total"),o.qZA(),o.TgZ(41,"th"),o._uU(42,"View Oders"),o.qZA()()(),o.TgZ(43,"tbody"),o.YNc(44,n3,16,11,"tr",23),o.qZA()()()()(),o.TgZ(45,"div",24)(46,"div",19)(47,"h5"),o._uU(48,"Billing Address"),o.qZA(),o.YNc(49,r3,20,7,"ng-container",23),o.qZA()(),o.TgZ(50,"div",25)(51,"div",19)(52,"h5"),o._uU(53,"Change Password"),o.qZA(),o.TgZ(54,"div",26)(55,"form",27)(56,"fieldset")(57,"div",28)(58,"label",29),o._uU(59,"Current Password"),o.qZA(),o._UZ(60,"input",30),o.qZA(),o.TgZ(61,"div",3)(62,"div",31)(63,"div",28)(64,"label",32),o._uU(65,"New Password"),o.qZA(),o._UZ(66,"input",33),o.qZA()(),o.TgZ(67,"div",31)(68,"div",28)(69,"label",34),o._uU(70,"Confirm Password"),o.qZA(),o._UZ(71,"input",35),o.qZA()()()(),o.TgZ(72,"div",28)(73,"button",36),o._uU(74,"Save Changes"),o.qZA()()()()()()()()()()()()()()()),2&r&&(o.xp6(44),o.Q6J("ngForOf",i.orderList),o.xp6(5),o.Q6J("ngForOf",i.filderedOrder))},dependencies:[on.sg,wn.rH,_m,gm,hf,on.JJ,on.uU]}),e})();const s3=["quantityInput"];function o3(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"tr")(1,"td",17)(2,"a",36),o._UZ(3,"img",37),o.qZA()(),o.TgZ(4,"td",18)(5,"a",36),o._uU(6),o.qZA()(),o.TgZ(7,"td",19)(8,"span"),o._uU(9),o.qZA()(),o.TgZ(10,"td",20)(11,"div",38)(12,"input",39,40),o.NdJ("ngModelChange",function(i){const c=o.CHM(t).$implicit;return o.KtG(c.quantity=i)}),o.qZA()()(),o.TgZ(15,"td",21)(16,"span"),o._uU(17),o.qZA()(),o.TgZ(18,"td",22)(19,"a")(20,"i",41),o.NdJ("click",function(){const l=o.CHM(t).$implicit,c=o.oxw();return o.KtG(c.removeCart(l.id))}),o.qZA()()(),o.TgZ(21,"td",22)(22,"a")(23,"a",27),o.NdJ("click",function(){const l=o.CHM(t).$implicit,c=o.oxw();return o.KtG(c.updateQuantity(l.id))}),o._uU(24,"Update Cart"),o.qZA()()()()}if(2&n){const t=e.$implicit;o.xp6(3),o.Q6J("src",t.imageUrl,o.LSH),o.xp6(3),o.hij(" ",t.sub_category,""),o.xp6(3),o.hij("\u20b9",t.price,""),o.xp6(3),o.Q6J("ngModel",t.quantity),o.xp6(5),o.hij(" \u20b9",t.price*t.quantity,"")}}let a3=(()=>{var n;class e{constructor(r,i,l){this.cartService=r,this.toast=i,this.otherservice=l,this.gst=0,this.othercharges=new JA,this.newQuantities={cartItemId:1}}ngOnInit(){this.getCart(),this.getOtherchareges(),this.sub_total=this.cartService.getCarts().pipe((0,un.U)(r=>{let i=0;return r.forEach(l=>{i+=this.cartService.getSubtotal(l),this.total=i+this.othercharges.delivery}),i}))}getCart(){this.cartService.getCarts().subscribe(r=>{this.cartItems=r,this.cartCount=r.length,this.updateCartCount()})}updateCartCount(){this.cartService.updateCartCount(this.cartCount)}getOtherchareges(){this.otherservice.getHomeOtherCharges().subscribe(r=>{this.othercharges=r[0]})}updateQuantity(r){const i=parseInt(this.quantityInput.nativeElement.value,10);isNaN(i)||this.cartService.updateQuantity(r,i)}removeCart(r){this.cartService.deleteCart(r)}clearCart(){this.cartService.clearCart(),this.toast.success("Cart cleared successfully!"),this.cartItems=[],this.total=0}}return(n=e).\u0275fac=function(r){return new(r||n)(o.Y36(Wd),o.Y36(Yc),o.Y36(jp))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-cart"]],viewQuery:function(r,i){if(1&r&&o.Gf(s3,5),2&r){let l;o.iGM(l=o.CRH())&&(i.quantityInput=l.first)}},decls:74,vars:12,consts:[[1,"breadcrumb-area"],[1,"container"],[1,"row"],[1,"col-12"],[1,"breadcrumb-wrap"],["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","index.html"],[1,"fa","fa-home"],["href","shop.html"],["aria-current","page",1,"breadcrumb-item","active"],[1,"cart-main-wrapper","section-padding"],[1,"section-bg-color"],[1,"col-lg-12"],[1,"cart-table","table-responsive"],[1,"table","table-bordered"],[1,"pro-thumbnail"],[1,"pro-title"],[1,"pro-price"],[1,"pro-quantity"],[1,"pro-subtotal"],[1,"pro-remove"],[4,"ngFor","ngForOf"],[1,"cart-update-option","d-block","d-md-flex","justify-content-between"],[1,"apply-coupon-wrapper"],[1,"cart-update"],[1,"btn","btn-sqr",3,"click"],[1,"col-lg-5","ml-auto"],[1,"cart-calculator-wrapper"],[1,"cart-calculate-items"],[1,"table-responsive"],[1,"table"],[1,"total"],[1,"total-amount"],["routerLink","../checkout",1,"btn","btn-sqr","d-block"],["href","#"],["alt","Product",1,"img-fluid",3,"src"],[1,"pro-qty"],["type","number",3,"ngModel","ngModelChange"],["newQuantity","","quantityInput",""],[1,"fa","fa-trash-o",3,"click"]],template:function(r,i){1&r&&(o.TgZ(0,"main")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"nav",5)(7,"ul",6)(8,"li",7)(9,"a",8),o._UZ(10,"i",9),o.qZA()(),o.TgZ(11,"li",7)(12,"a",10),o._uU(13,"shop"),o.qZA()(),o.TgZ(14,"li",11),o._uU(15,"cart"),o.qZA()()()()()()()(),o.TgZ(16,"div",12)(17,"div",1)(18,"div",13)(19,"div",2)(20,"div",14)(21,"div",15)(22,"table",16)(23,"thead")(24,"tr")(25,"th",17),o._uU(26,"Thumbnail"),o.qZA(),o.TgZ(27,"th",18),o._uU(28,"Product"),o.qZA(),o.TgZ(29,"th",19),o._uU(30,"Price"),o.qZA(),o.TgZ(31,"th",20),o._uU(32,"Quantity"),o.qZA(),o.TgZ(33,"th",21),o._uU(34,"Total"),o.qZA(),o.TgZ(35,"th",22),o._uU(36,"Remove"),o.qZA(),o.TgZ(37,"th",22),o._uU(38,"Update"),o.qZA()()(),o.TgZ(39,"tbody"),o.YNc(40,o3,25,5,"tr",23),o.qZA()()(),o.TgZ(41,"div",24),o._UZ(42,"div",25),o.TgZ(43,"div",26)(44,"a",27),o.NdJ("click",function(){return i.clearCart()}),o._uU(45,"Empty Cart"),o.qZA()()()()(),o.TgZ(46,"div",2)(47,"div",28)(48,"div",29)(49,"div",30)(50,"h6"),o._uU(51,"Cart Totals"),o.qZA(),o.TgZ(52,"div",31)(53,"table",32)(54,"tr")(55,"td"),o._uU(56,"Sub Total"),o.qZA(),o.TgZ(57,"td"),o._uU(58),o.ALo(59,"number"),o.ALo(60,"async"),o.qZA()(),o.TgZ(61,"tr")(62,"td"),o._uU(63,"Shipping"),o.qZA(),o.TgZ(64,"td"),o._uU(65),o.qZA()(),o.TgZ(66,"tr",33)(67,"td"),o._uU(68,"Total"),o.qZA(),o.TgZ(69,"td",34),o._uU(70),o.ALo(71,"number"),o.qZA()()()()(),o.TgZ(72,"a",35),o._uU(73,"Proceed Checkout"),o.qZA()()()()()()()()),2&r&&(o.xp6(40),o.Q6J("ngForOf",i.cartItems),o.xp6(18),o.hij("\u20b9",o.xi3(59,4,o.lcZ(60,7,i.sub_total),"1.2-2"),""),o.xp6(7),o.hij("\u20b9",i.othercharges.delivery,""),o.xp6(5),o.hij("\u20b9",o.xi3(71,9,i.total,"1.2-2"),""))},dependencies:[on.sg,wn.rH,Hp,y1,qy,mm,on.Ov,on.JJ]}),e})();const l3=["OrderForm"];function u3(n,e){if(1&n&&(o.TgZ(0,"tr")(1,"td")(2,"a",55),o._uU(3),o.ALo(4,"lowercase"),o.TgZ(5,"strong"),o._uU(6),o.qZA()()(),o.TgZ(7,"td"),o._uU(8),o.ALo(9,"number"),o.qZA()()),2&n){const t=e.$implicit;o.xp6(2),o.MGl("routerLink","../product-detail/",t.id,""),o.xp6(1),o.Oqu(o.lcZ(4,4,t.sub_category)),o.xp6(3),o.hij(" \xd7 ",t.quantity,""),o.xp6(2),o.Oqu(o.xi3(9,6,t.price*t.quantity,"1.2-2"))}}let c3=(()=>{var n;class e{constructor(r,i,l,c,f,_){this.cartService=r,this.router=i,this.toast=l,this.otherservice=c,this.authService=f,this.firestore=_,this.gst=0,this.othercharges=new JA,this.order={orderId:this.generateUniqueRandomNumber(),first_name:"",last_name:"",address1:"",address2:"",country:"",state:"",city:"",pincode:"",email:"",contact:"",note:"",cartItems:this.cartItems,status:"",amount:0,createdTime:""}}ngOnInit(){this.currentUser=this.authService.getCurrentUser()?.uid,this.getOtherchareges(),this.getCart(),this.sub_total=this.cartService.getCarts().pipe((0,un.U)(r=>{let i=0;return r.forEach(l=>{i+=this.cartService.getSubtotal(l)}),this.total=i+this.othercharges.delivery,i}))}getOtherchareges(){this.otherservice.getHomeOtherCharges().subscribe(r=>{this.othercharges=r[0]})}generateUniqueRandomNumber(){return(Math.floor(9e9*Math.random())+1e9).toString()}getCart(){this.cartService.getCarts().subscribe(r=>{this.cartItems=r})}placeOrder(){this.order.cartItems=this.cartItems,this.order.status="requested",this.order.country="India",this.order.amount=this.total,this.order.orderId=this.generateUniqueRandomNumber(),this.OrderForm.valid?(this.order.cartItems.forEach(r=>{r.orderId=this.order.orderId}),this.firestore.collection("orders").add({...this.order,usrid:this.currentUser,createdTime:new Date}).then(()=>{this.toast.success("Placed order successfully"),this.order.cartItems.forEach(r=>{const i=r.id,l=r.varientId,c=r.stocks-r.quantity;i&&c?this.cartService.updateProductStock(i,c):l&&c&&this.cartService.updateVarientStock(l,c)}),this.cartService.clearCart()}).catch(r=>{this.toast.error(r)})):this.toast.error("Something went wrong")}}return(n=e).\u0275fac=function(r){return new(r||n)(o.Y36(Wd),o.Y36(wn.F0),o.Y36(Yc),o.Y36(jp),o.Y36(Qu),o.Y36(qc))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-checkout"]],viewQuery:function(r,i){if(1&r&&o.Gf(l3,5),2&r){let l;o.iGM(l=o.CRH())&&(i.OrderForm=l.first)}},decls:118,vars:23,consts:[[1,"breadcrumb-area"],[1,"container"],[1,"row"],[1,"col-12"],[1,"breadcrumb-wrap"],["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","index.html"],[1,"fa","fa-home"],["href","shop.html"],["aria-current","page",1,"breadcrumb-item","active"],[1,"checkout-page-wrapper","section-padding"],[1,"col-lg-6"],[1,"checkout-billing-details-wrap"],[1,"checkout-title"],[1,"billing-form-wrap"],["OrderForm","ngForm"],[1,"col-md-6"],[1,"single-input-item"],["for","f_name",1,"required"],["name","first_name","type","text","placeholder","First Name","required","",3,"ngModel","ngModelChange"],["for","last_name",1,"required"],["name","last_name","type","text","id","l_name","placeholder","Last Name","required","",3,"ngModel","ngModelChange"],["for","email",1,"required"],["type","email","name","email","id","email","placeholder","Email Address","required","",3,"ngModel","ngModelChange"],["for","street-address",1,"required","mt-20"],["type","text","name","address1","id","street-address","placeholder","Street address Line 1","required","",3,"ngModel","ngModelChange"],["name","address2","type","text","placeholder","Street address Line 2 (Optional)",3,"ngModel","ngModelChange"],["for","town",1,"required"],["name","city","type","text","id","town","placeholder","Town / City","required","",3,"ngModel","ngModelChange"],["for","state"],["name","state","type","text","id","state","placeholder","State / Divition",3,"ngModel","ngModelChange"],["for","postcode",1,"required"],["name","pincode","type","text","id","postcode","placeholder","Postcode / ZIP","required","",3,"ngModel","ngModelChange"],["for","phone"],["type","text","id","phone","name","contact","placeholder","Phone",3,"ngModel","ngModelChange"],["for","ordernote"],["name","note","id","ordernote","cols","30","rows","3","placeholder","Notes about your order, e.g. special notes for delivery.",3,"ngModel","ngModelChange"],[1,"order-summary-details"],[1,"order-summary-content"],[1,"order-summary-table","table-responsive","text-center"],[1,"table","table-bordered"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center"],[1,"shipping-type"],[1,"custom-control","custom-radio"],["type","radio","id","flatrate","name","shipping","checked","",1,"custom-control-input"],["for","flatrate",1,"custom-control-label"],[1,"order-payment-method"],[1,"summary-footer-area"],[1,"custom-control","custom-checkbox","mb-20"],["type","checkbox","id","terms","required","",1,"custom-control-input"],["for","terms",1,"custom-control-label"],["type","submit",1,"btn","btn-sqr",3,"disabled","click"],[3,"routerLink"]],template:function(r,i){if(1&r&&(o.TgZ(0,"main")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"nav",5)(7,"ul",6)(8,"li",7)(9,"a",8),o._UZ(10,"i",9),o.qZA()(),o.TgZ(11,"li",7)(12,"a",10),o._uU(13,"shop"),o.qZA()(),o.TgZ(14,"li",11),o._uU(15,"checkout"),o.qZA()()()()()()()(),o.TgZ(16,"div",12)(17,"div",1)(18,"div",2)(19,"div",13)(20,"div",14)(21,"h5",15),o._uU(22,"Billing Details"),o.qZA(),o.TgZ(23,"div",16)(24,"form",null,17)(26,"div",2)(27,"div",18)(28,"div",19)(29,"label",20),o._uU(30,"First Name"),o.qZA(),o.TgZ(31,"input",21),o.NdJ("ngModelChange",function(c){return i.order.first_name=c}),o.qZA()()(),o.TgZ(32,"div",18)(33,"div",19)(34,"label",22),o._uU(35,"Last Name"),o.qZA(),o.TgZ(36,"input",23),o.NdJ("ngModelChange",function(c){return i.order.last_name=c}),o.qZA()()()(),o.TgZ(37,"div",19)(38,"label",24),o._uU(39,"Email Address"),o.qZA(),o.TgZ(40,"input",25),o.NdJ("ngModelChange",function(c){return i.order.email=c}),o.qZA()(),o.TgZ(41,"div",19)(42,"label",26),o._uU(43,"Street address"),o.qZA(),o.TgZ(44,"input",27),o.NdJ("ngModelChange",function(c){return i.order.address1=c}),o.qZA()(),o.TgZ(45,"div",19)(46,"input",28),o.NdJ("ngModelChange",function(c){return i.order.address2=c}),o.qZA()(),o.TgZ(47,"div",19)(48,"label",29),o._uU(49,"Town / City"),o.qZA(),o.TgZ(50,"input",30),o.NdJ("ngModelChange",function(c){return i.order.city=c}),o.qZA()(),o.TgZ(51,"div",19)(52,"label",31),o._uU(53,"State"),o.qZA(),o.TgZ(54,"input",32),o.NdJ("ngModelChange",function(c){return i.order.state=c}),o.qZA()(),o.TgZ(55,"div",19)(56,"label",33),o._uU(57,"Postcode / ZIP"),o.qZA(),o.TgZ(58,"input",34),o.NdJ("ngModelChange",function(c){return i.order.pincode=c}),o.qZA()(),o.TgZ(59,"div",19)(60,"label",35),o._uU(61,"Phone"),o.qZA(),o.TgZ(62,"input",36),o.NdJ("ngModelChange",function(c){return i.order.contact=c}),o.qZA()(),o.TgZ(63,"div",19)(64,"label",37),o._uU(65,"Order Note"),o.qZA(),o.TgZ(66,"textarea",38),o.NdJ("ngModelChange",function(c){return i.order.note=c}),o.qZA()()()()()(),o.TgZ(67,"div",13)(68,"div",39)(69,"h5",15),o._uU(70,"Your Order Summary"),o.qZA(),o.TgZ(71,"div",40)(72,"div",41)(73,"table",42)(74,"thead")(75,"tr")(76,"th"),o._uU(77,"Products"),o.qZA(),o.TgZ(78,"th"),o._uU(79,"Total"),o.qZA()()(),o.TgZ(80,"tbody"),o.YNc(81,u3,10,9,"tr",43),o.qZA(),o.TgZ(82,"tfoot")(83,"tr")(84,"td"),o._uU(85,"Sub Total"),o.qZA(),o.TgZ(86,"td")(87,"strong"),o._uU(88),o.ALo(89,"number"),o.ALo(90,"async"),o.qZA()()(),o.TgZ(91,"tr")(92,"td"),o._uU(93,"Shipping"),o.qZA(),o.TgZ(94,"td",44)(95,"ul",45)(96,"li")(97,"div",46),o._UZ(98,"input",47),o.TgZ(99,"label",48),o._uU(100),o.qZA()()()()()(),o.TgZ(101,"tr")(102,"td"),o._uU(103,"Total Amount"),o.qZA(),o.TgZ(104,"td")(105,"strong"),o._uU(106),o.ALo(107,"number"),o.qZA()()()()()(),o.TgZ(108,"div",49)(109,"div",50)(110,"div",51),o._UZ(111,"input",52),o.TgZ(112,"label",53),o._uU(113,"I have read and agree to the website "),o.TgZ(114,"a",8),o._uU(115,"terms and conditions."),o.qZA()()(),o.TgZ(116,"button",54),o.NdJ("click",function(){return i.placeOrder()}),o._uU(117,"Place Order"),o.qZA()()()()()()()()()()),2&r){const l=o.MAs(25);o.xp6(31),o.Q6J("ngModel",i.order.first_name),o.xp6(5),o.Q6J("ngModel",i.order.last_name),o.xp6(4),o.Q6J("ngModel",i.order.email),o.xp6(4),o.Q6J("ngModel",i.order.address1),o.xp6(2),o.Q6J("ngModel",i.order.address2),o.xp6(4),o.Q6J("ngModel",i.order.city),o.xp6(4),o.Q6J("ngModel",i.order.state),o.xp6(4),o.Q6J("ngModel",i.order.pincode),o.xp6(4),o.Q6J("ngModel",i.order.contact),o.xp6(4),o.Q6J("ngModel",i.order.note),o.xp6(15),o.Q6J("ngForOf",i.cartItems),o.xp6(7),o.hij("\u20b9",o.xi3(89,15,o.lcZ(90,18,i.sub_total),"1.2-2"),""),o.xp6(12),o.hij("Flat Rate: \u20b9",i.othercharges.delivery,""),o.xp6(6),o.hij("\u20b9",o.xi3(107,20,i.total,"1.2-2")," (including GST)"),o.xp6(10),o.Q6J("disabled",!l.valid)}},dependencies:[on.sg,wn.rH,_m,Hp,qy,gm,vm,mm,hf,on.Ov,on.i8,on.JJ]}),e})();function d3(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",18)(1,"div",19)(2,"figure",20)(3,"a",21),o.NdJ("click",function(){const l=o.CHM(t).$implicit,c=o.oxw();return o.KtG(c.navigatetodetail(l.id))}),o._UZ(4,"img",22)(5,"img",23),o.qZA()(),o.TgZ(6,"div",24)(7,"h6",25)(8,"a",26),o._uU(9),o.qZA()()()(),o.TgZ(10,"div",27)(11,"figure",20)(12,"a",28),o._UZ(13,"img",22)(14,"img",23),o.qZA(),o.TgZ(15,"div",29)(16,"div",30)(17,"span"),o._uU(18,"new"),o.qZA()()()(),o.TgZ(19,"div",31)(20,"div",32)(21,"a",26),o._uU(22),o.qZA()(),o.TgZ(23,"h5",25)(24,"a",26),o._uU(25),o.qZA()(),o.TgZ(26,"div",33)(27,"span",34),o._uU(28," \u20b950.00"),o.qZA()(),o.TgZ(29,"p"),o._uU(30),o.qZA()()()()}if(2&n){const t=e.$implicit;o.xp6(4),o.s9C("src",t.imageUrl[0],o.LSH),o.xp6(1),o.s9C("src",t.imageUrl[0],o.LSH),o.xp6(4),o.Oqu(null==t?null:t.productname),o.xp6(3),o.MGl("routerLink","../product-detail/",t.id,""),o.xp6(1),o.s9C("src",t.imageUrl[0],o.LSH),o.xp6(1),o.s9C("src",t.imageUrl[0],o.LSH),o.xp6(8),o.Oqu(t.category),o.xp6(3),o.Oqu(t.sub_category),o.xp6(5),o.Oqu(t.description)}}let h3=(()=>{var n;class e{constructor(r,i,l){this.service=r,this.router=i,this.navigate=l,this.products=[],this.refinedProducts=[],this.p=1,this.pageSize=12}ngOnInit(){this.subscribeToRouterParams()}ngOnDestroy(){this.unsubscribeFromRouterParams()}subscribeToRouterParams(){this.keywordSubscription=this.router.params.subscribe(r=>{this.keyword=r.key,this.getProducts()})}unsubscribeFromRouterParams(){this.keywordSubscription&&this.keywordSubscription.unsubscribe()}onPageChange(r){this.p=r,window.scrollTo({top:0,behavior:"smooth"})}getProducts(){this.service.getProducts().subscribe(r=>{this.products=r.filter(i=>i.productname&&i.productname.toLowerCase().includes(this.keyword.toLowerCase())),this.productCount=this.products.length,console.log(this.products)})}navigatetodetail(r){this.navigate.navigate([`product-detail/${r}`])}}return(n=e).\u0275fac=function(r){return new(r||n)(o.Y36($y),o.Y36(wn.gz),o.Y36(wn.F0))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-search"]],decls:24,vars:2,consts:[[1,"feature-product","section-padding"],[1,"container"],[1,"row"],[1,"col-12"],[1,"section-title","text-center"],[1,"title"],[1,"col-lg-12","order-1","order-lg-2"],[1,"shop-product-wrapper"],[1,"shop-top-bar"],[1,"row","align-items-center"],[1,"col-lg-7","col-md-6","order-2","order-md-1"],[1,"top-bar-left"],[1,"product-view-mode"],[1,"product-amount"],[1,"shop-product-wrap","grid-view","row"],["class","col-md-3 col-sm-6",4,"ngFor","ngForOf"],[1,"text-center"],["previousLabel","Previous","nextLabel","Next",1,"my-pagination",3,"pageChange"],[1,"col-md-3","col-sm-6"],[1,"product-item"],[1,"product-thumb"],[3,"click"],[1,"pri-img",3,"src"],[1,"sec-img",3,"src"],[1,"product-caption","text-center"],[1,"product-name"],["routerLink","../product-detail"],[1,"product-list-item"],[3,"routerLink"],[1,"product-badge"],[1,"product-label","new"],[1,"product-content-list"],[1,"manufacturer-name"],[1,"price-box"],[1,"price-regular"]],template:function(r,i){1&r&&(o.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2",5),o._uU(6,"Searched products"),o.qZA()()()(),o.TgZ(7,"div",2)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11),o._UZ(14,"div",12),o.TgZ(15,"div",13)(16,"p"),o._uU(17),o.qZA()()()()()(),o.TgZ(18,"div",14),o.YNc(19,d3,31,9,"div",15),o.qZA(),o._UZ(20,"br")(21,"br"),o.TgZ(22,"div",16)(23,"pagination-controls",17),o.NdJ("pageChange",function(c){return i.onPageChange(c)}),o.qZA()()()()()()()),2&r&&(o.xp6(17),o.hij("Showing ",i.productCount," results"),o.xp6(2),o.Q6J("ngForOf",i.products))},dependencies:[on.sg,wn.rH,r1]}),e})(),T1=(()=>{var n;class e{constructor(r,i){this.auth=r,this.router=i}canActivate(){return this.auth.authState.pipe((0,un.U)(r=>!!r||(this.router.navigate(["/login"]),!1)))}}return(n=e).\u0275fac=function(r){return new(r||n)(o.LFG(nm),o.LFG(wn.F0))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();const f3=["quantityInput"],sN=function(n){return{active:n}};function p3(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",41)(1,"a",42),o.NdJ("click",function(){const l=o.CHM(t).index,c=o.oxw();return o.KtG(c.updatedColor(l))}),o._uU(2),o.qZA()()}if(2&n){const t=e.$implicit,r=e.index,i=o.oxw();o.Q6J("ngClass",o.VKq(2,sN,i.selectedColorIndex===r)),o.xp6(2),o.Oqu(t)}}function g3(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",41)(1,"a",42),o.NdJ("click",function(){const l=o.CHM(t).index,c=o.oxw();return o.KtG(c.updateVarient(l))}),o._uU(2),o.qZA()()}if(2&n){const t=e.$implicit,r=e.index,i=o.oxw();o.Q6J("ngClass",o.VKq(2,sN,i.selectedSizeIndex===r)),o.xp6(2),o.Oqu(t.size)}}let m3=(()=>{var n;class e{constructor(r,i,l,c,f,_){this.service=r,this.cartService=i,this.proservice=l,this.userService=c,this.toaster=f,this.router=_,this.selectedColorIndex=-1,this.selectedSizeIndex=-1,this.settings={counter:!0,plugins:[Pi,za,X,Vn,kr]}}ngOnInit(){this.getData()}getData(){this.service.getProduct().subscribe(r=>{this.data=r,this.selectedSku=this.data?.sku,this.getVarients(),this.getcolors()})}getcolors(){this.data?.color_varient&&(this.color=this.data?.color_varient.split(","),console.log(this.color))}getVarients(){this.selectedSku&&this.proservice.getVarientBySku(this.selectedSku).subscribe(r=>{this.varient=r,this.selectedVarient=this.varient[0]})}updatedColor(r){this.selectedColorIndex=r,this.selectedColor=this.color[r]}updateVarient(r){this.selectedSizeIndex=r,this.selectedVarient=this.varient[r]}}return(n=e).\u0275fac=function(r){return new(r||n)(o.Y36(GT),o.Y36(Wd),o.Y36($y),o.Y36(Qu),o.Y36(Yc),o.Y36(wn.F0))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-quick-model"]],viewQuery:function(r,i){if(1&r&&o.Gf(f3,5),2&r){let l;o.iGM(l=o.CRH())&&(i.quantityInput=l.first)}},decls:71,vars:15,consts:[["id","quick_view",1,"modal"],[1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal",1,"close"],[1,"modal-body"],[1,"product-details-inner"],[1,"row"],[1,"col-lg-5"],[1,"product-large-slider"],[1,"pro-large-img"],[3,"src"],[1,"pro-nav","slick-row-10","slick-arrow-style"],[1,"pro-nav-thumb"],[1,"col-lg-7"],[1,"product-details-des"],[1,"manufacturer-name"],["href","product-details.html"],[1,"product-name"],[1,"price-box"],[1,"price-regular",2,"color","#81ca33"],[1,"pro-desc"],[1,"quantity-cart-box","d-flex","align-items-center"],[1,"option-title"],[1,"quantity"],[1,"pro-qty"],["type","number","value","1"],["quantityInput",""],[1,"action_link"],[1,"btn","btn-cart2"],[1,"pro-size"],["class","size-box",3,"ngClass",4,"ngFor","ngForOf"],[1,"like-icon"],["href","#",1,"facebook"],[1,"fa","fa-facebook"],["href","#",1,"twitter"],[1,"fa","fa-twitter"],["href","#",1,"pinterest"],[1,"fa","fa-pinterest"],["href","#",1,"google"],[1,"fa","fa-google-plus"],[1,"size-box",3,"ngClass"],[3,"click"]],template:function(r,i){1&r&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),o._uU(5,"\xd7"),o.qZA()(),o.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10),o._UZ(12,"img",11),o.qZA(),o.TgZ(13,"div",10),o._UZ(14,"img",11),o.qZA(),o.TgZ(15,"div",10),o._UZ(16,"img",11),o.qZA(),o.TgZ(17,"div",10),o._UZ(18,"img",11),o.qZA()(),o.TgZ(19,"div",12)(20,"div",13),o._UZ(21,"img",11),o.qZA(),o.TgZ(22,"div",13),o._UZ(23,"img",11),o.qZA(),o.TgZ(24,"div",13),o._UZ(25,"img",11),o.qZA(),o.TgZ(26,"div",13),o._UZ(27,"img",11),o.qZA()()(),o.TgZ(28,"div",14)(29,"div",15)(30,"div",16)(31,"a",17),o._uU(32),o.qZA()(),o.TgZ(33,"h3",18),o._uU(34),o.qZA(),o.TgZ(35,"div",19)(36,"span",20),o._uU(37),o.qZA()(),o.TgZ(38,"p",21),o._uU(39),o.qZA(),o.TgZ(40,"div",22)(41,"h6",23),o._uU(42),o.qZA(),o.TgZ(43,"div",24)(44,"div",25),o._UZ(45,"input",26,27),o.qZA()(),o.TgZ(47,"div",28)(48,"a",29),o._uU(49,"Add to cart"),o.qZA()()(),o.TgZ(50,"div",30)(51,"h6",23),o._uU(52,"color :"),o.qZA(),o.YNc(53,p3,3,4,"div",31),o.qZA(),o.TgZ(54,"div",30)(55,"h6",23),o._uU(56,"size :"),o.qZA(),o.YNc(57,g3,3,4,"div",31),o.qZA(),o.TgZ(58,"div",32)(59,"a",33),o._UZ(60,"i",34),o._uU(61,"like"),o.qZA(),o.TgZ(62,"a",35),o._UZ(63,"i",36),o._uU(64,"tweet"),o.qZA(),o.TgZ(65,"a",37),o._UZ(66,"i",38),o._uU(67,"save"),o.qZA(),o.TgZ(68,"a",39),o._UZ(69,"i",40),o._uU(70,"share"),o.qZA()()()()()()()()()()),2&r&&(o.xp6(12),o.s9C("src",null==i.data?null:i.data.imageUrl[0],o.LSH),o.xp6(2),o.s9C("src",null==i.data?null:i.data.imageUrl[1],o.LSH),o.xp6(2),o.s9C("src",null==i.data?null:i.data.imageUrl[2],o.LSH),o.xp6(2),o.s9C("src",null==i.data?null:i.data.imageUrl[3],o.LSH),o.xp6(3),o.s9C("src",null==i.data?null:i.data.imageUrl[0],o.LSH),o.xp6(2),o.s9C("src",null==i.data?null:i.data.imageUrl[1],o.LSH),o.xp6(2),o.s9C("src",null==i.data?null:i.data.imageUrl[2],o.LSH),o.xp6(2),o.s9C("src",null==i.data?null:i.data.imageUrl[3],o.LSH),o.xp6(5),o.Oqu(null==i.data?null:i.data.description),o.xp6(2),o.Oqu(null==i.data?null:i.data.sub_category),o.xp6(3),o.hij("\u20b9 ",null==i.selectedVarient?null:i.selectedVarient.price,""),o.xp6(2),o.Oqu(null==i.data?null:i.data.description),o.xp6(3),o.hij("qty:",null==i.data?null:i.data.quantity,""),o.xp6(11),o.Q6J("ngForOf",i.color),o.xp6(4),o.Q6J("ngForOf",i.varient))},dependencies:[on.mk,on.sg],styles:[".size-box[_ngcontent-%COMP%]{display:inline-block;padding:10px;background-color:#f2f2f2;border:1px solid #ccc;border-radius:4px;font-size:14px;margin-right:6px}.pro-size[_ngcontent-%COMP%]   .size-box.active[_ngcontent-%COMP%]{background-color:#81ca33;color:#fff}"]}),e})();const _3=["selectedProduct"];function y3(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",19)(1,"figure",20)(2,"a"),o._UZ(3,"img",21)(4,"img",22),o.qZA(),o.TgZ(5,"div",23)(6,"button",24),o._uU(7,"QUICK VIEW"),o.qZA()()(),o.TgZ(8,"div",25)(9,"h6",26)(10,"a",27),o.NdJ("click",function(){const l=o.CHM(t).$implicit,c=o.oxw();return o.KtG(c.updateSelectedSubCategory(l))}),o._uU(11),o.ALo(12,"uppercase"),o.qZA()()()()}if(2&n){const t=e.$implicit;o.xp6(3),o.Q6J("src",t.imageUrl,o.LSH),o.xp6(1),o.Q6J("src",t.imageUrl,o.LSH),o.xp6(7),o.Oqu(o.lcZ(12,3,t.sub_category))}}function v3(n,e){if(1&n&&(o.TgZ(0,"div",28)(1,"div",29)(2,"figure",20)(3,"a",30),o._UZ(4,"img",21)(5,"img",22),o.qZA()(),o.TgZ(6,"div",25)(7,"h6",26)(8,"a",31),o._uU(9),o.qZA()()()(),o.TgZ(10,"div",32)(11,"figure",20)(12,"a",30),o._UZ(13,"img",21)(14,"img",22),o.qZA(),o.TgZ(15,"div",33)(16,"div",34)(17,"span"),o._uU(18,"new"),o.qZA()()()(),o.TgZ(19,"div",35)(20,"div",36)(21,"a",31),o._uU(22),o.qZA()(),o.TgZ(23,"h5",26)(24,"a",31),o._uU(25),o.qZA()(),o.TgZ(26,"p"),o._uU(27),o.qZA()()()()),2&n){const t=e.$implicit;o.xp6(3),o.MGl("routerLink","../product-detail/",null==t?null:t.id,""),o.xp6(1),o.s9C("src",null==t?null:t.imageUrl[0],o.LSH),o.xp6(1),o.s9C("src",null==t?null:t.imageUrl[0],o.LSH),o.xp6(4),o.Oqu(null==t?null:t.productname),o.xp6(3),o.MGl("routerLink","../product-detail/",null==t?null:t.id,""),o.xp6(1),o.s9C("src",null==t?null:t.imageUrl[0],o.LSH),o.xp6(1),o.s9C("src",null==t?null:t.imageUrl[0],o.LSH),o.xp6(8),o.Oqu(null==t?null:t.category),o.xp6(3),o.Oqu(null==t?null:t.sub_category),o.xp6(2),o.Oqu(null==t?null:t.description)}}const w3=function(n,e){return{itemsPerPage:n,currentPage:e}},C3=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:tU},{path:"shop",component:CU,data:{shouldDetach:!0}},{path:"products",component:(()=>{var n;class e{constructor(r,i,l,c,f,_,C,R,F){this.services=r,this.catService=i,this.subcatService=l,this.cartService=c,this.quickviewService=f,this.userService=_,this.router=C,this.activatedRoute=R,this.elementRef=F,this.categories=[],this.subcategories=[],this.subscription=new eR.w0,this.p=1,this.pageSize=12}ngOnInit(){var r=document.createElement("script");r.type="text/javascript",r.src="../../../assets/js/main.js",this.elementRef.nativeElement.appendChild(r),this.getcategory(),this.getProductsByCategory(),this.getSubcategory(),this.activatedRoute.queryParams.subscribe(i=>{this.selectedSubcategory=decodeURIComponent(i.sub_category),this.selectedCategory=decodeURIComponent(i.category),this.getProductsBySubCategory(this.selectedSubcategory)})}ngOnDestroy(){this.subscription.unsubscribe()}navigateWithParams(){this.router.navigate([],{relativeTo:this.activatedRoute,queryParams:{category:this.selectedCategory,sub_category:this.selectedSubcategory},queryParamsHandling:"merge"})}onPageChange(r){this.p=r,window.scrollTo({top:0,behavior:"smooth"})}getcategory(){this.subscription=this.catService.getCategories().subscribe(r=>{this.categories=r,this.getSubcategory()})}getSubcategory(){this.subscription=this.subcatService.getSubcategoriesByCategory(this.selectedCategory).subscribe(r=>{this.subcategories=r})}getVarients(){this.selectedSku&&this.services.getVarientBySku(this.selectedSku).subscribe(r=>{this.varient=r,this.selectedVarients=this.varient[0]})}updateVarient(r){this.selectedVarients=this.varient[r]}getCurrentuserid(){this.userId=this.userService.getCurrentUser()}getProductsByCategory(){this.subscription=this.services.getProductsByCategory(this.selectedCategory).subscribe(r=>{this.products=r})}getProductsBySubCategory(r){this.subscription=this.services.getProductsBySubcategory(r).subscribe(i=>{this.products=i,this.p=1})}updateSelectedCategory(r){this.selectedCategory=r.category,this.getProductsByCategory(),this.getSubcategory(),this.p=1}updateSelectedSubCategory(r){this.selectedSubcategory=r.sub_category,this.getProductsBySubCategory(this.selectedSubcategory),this.p=1}openQuickView(r){this.quickviewService.setProduct(r)}}return(n=e).\u0275fac=function(r){return new(r||n)(o.Y36($y),o.Y36(e1),o.Y36(QA),o.Y36(Wd),o.Y36(GT),o.Y36(Qu),o.Y36(wn.F0),o.Y36(wn.gz),o.Y36(o.SBq))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-shop"]],viewQuery:function(r,i){if(1&r&&o.Gf(_3,5),2&r){let l;o.iGM(l=o.CRH())&&(i.selectedProduct=l.first)}},decls:30,vars:9,consts:[[1,"container"],[1,"row"],[1,"col-12"],[1,"section-title","text-center"],[1,"title",2,"font-size","25","margin-bottom","20px"],[1,"product-container"],[1,"tab-content"],[1,"tab-pane","fade","show","active"],[1,"product-carousel-4","slick-row-10","slick-arrow-style"],["class","product-item bg:'red'",4,"ngFor","ngForOf"],[1,"shop-main-wrapper","section-padding"],[1,"col-lg-12","order-1","order-lg-2"],[1,"shop-product-wrapper"],[1,"shop-product-wrap","grid-view","row","mbn-30"],["class","col-md-3 col-sm-6",4,"ngFor","ngForOf"],[1,"text-center"],["previousLabel","Previous","nextLabel","Next",1,"my-pagination",3,"pageChange"],[1,"scroll-top","not-visible"],[1,"fa","fa-angle-up"],[1,"product-item","bg:'red'"],[1,"product-thumb"],[1,"pri-img",3,"src"],[1,"sec-img",3,"src"],[1,"cart-hover","d-flex","justify-content-center"],[1,"btn","btn-cart"],[1,"product-caption","text-center"],[1,"product-name"],[3,"click"],[1,"col-md-3","col-sm-6"],[1,"product-item"],[3,"routerLink"],["routerLink","../product-detail"],[1,"product-list-item"],[1,"product-badge"],[1,"product-label","new"],[1,"product-content-list"],[1,"manufacturer-name"]],template:function(r,i){1&r&&(o.TgZ(0,"div",0),o._UZ(1,"br"),o.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"h2",4),o._uU(6),o.qZA()()()(),o.TgZ(7,"div",1)(8,"div",2)(9,"div",5)(10,"div",6)(11,"div",7)(12,"div",8),o._UZ(13,"div"),o.YNc(14,y3,13,5,"div",9),o.qZA()()()()()()(),o.TgZ(15,"div",10)(16,"div",0)(17,"div",1)(18,"div",11)(19,"div",12)(20,"div",13),o.YNc(21,v3,28,10,"div",14),o.ALo(22,"paginate"),o.qZA(),o._UZ(23,"br")(24,"br"),o.TgZ(25,"div",15)(26,"pagination-controls",16),o.NdJ("pageChange",function(c){return i.onPageChange(c)}),o.qZA()()()()()()(),o.TgZ(27,"div",17),o._UZ(28,"i",18),o.qZA(),o._UZ(29,"app-quick-model")),2&r&&(o.xp6(6),o.Oqu(i.selectedSubcategory),o.xp6(8),o.Q6J("ngForOf",i.categories),o.xp6(7),o.Q6J("ngForOf",o.xi3(22,3,i.products,o.WLB(6,w3,i.pageSize,i.p))))},dependencies:[on.sg,wn.rH,r1,m3,on.gd,tR],styles:[".category-container[_ngcontent-%COMP%]{display:flex;overflow-x:auto;gap:20px;scroll-behavior:smooth;white-space:nowrap;margin-bottom:40px;justify-content:center}.category-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}.category-item[_ngcontent-%COMP%]{height:40px;padding:10px;background-color:#a9a9a9;border-radius:4px;display:flex;justify-content:center;align-items:center;font-size:18px;color:#fff;font-family:Amethysta}.selected-category[_ngcontent-%COMP%]{color:red}.selected-subcategory[_ngcontent-%COMP%]{color:#00f}"]}),e})(),data:{shouldDetach:!0}},{path:"about",component:EU},{path:"product-detail/:id",component:WU},{path:"contact",component:YV},{path:"login",component:QV},{path:"register",component:XV},{path:"account",canActivate:[T1],component:i3,pathMatch:"full"},{path:"cart",canActivate:[T1],component:a3,pathMatch:"full"},{path:"checkout",canActivate:[T1],component:c3,pathMatch:"full"},{path:"search/:key",component:h3,data:{shouldDetach:!0}},{path:"information",loadChildren:()=>B.e(531).then(B.bind(B,531)).then(n=>n.InformationRoutingModule)}];let b3=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[wn.Bz.forRoot(C3,{scrollPositionRestoration:"enabled"}),wn.Bz]}),e})(),E3=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-footer"]],decls:91,vars:0,consts:[[1,"footer-widget-area",2,"background-color","white"],[1,"footer-top","section-padding"],[1,"container"],[1,"row"],[1,"col-lg-3","col-md-6"],[1,"widget-item"],[1,"widget-title"],[1,"widget-logo"],["href","index.html"],["src","../assets/img/logo/logo.png","alt","brand logo"],[1,"widget-body"],[1,"contact-block"],[1,"pe-7s-home"],[1,"pe-7s-mail"],["href","mailto:info@glownglitter.com"],[1,"pe-7s-call"],["href","tel:(+91)9051398740"],["href","tel:(+91)9874406700"],[1,"col-lg-3","col-md-8"],[1,"info-list"],["routerLink","about"],["routerLink","information/shipping"],["routerLink","information/cancellation"],["routerLink","information/policy"],["routerLink","information/terms"],["routerLink","contact"],[1,"widget-body","social-link"],["href","https://www.facebook.com/GlowNGlitter"],[1,"fa","fa-facebook"],["href","#"],[1,"fa","fa-twitter"],[1,"fa","fa-instagram"],[1,"fa","fa-youtube"],[1,"footer-bottom"],[1,"col-12"],[1,"copyright-text","text-center"],[1,"fa","fa-heart","text-danger"],["href","http://www.soltechsolution.in/"],[2,"color","brown"]],template:function(r,i){1&r&&(o._UZ(0,"hr"),o.TgZ(1,"footer",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"a",8),o._UZ(10,"img",9),o.qZA()()(),o.TgZ(11,"div",10)(12,"p"),o._uU(13,"Exclusive Collection of Silver Jewellery and Brass Handicrafts. "),o.qZA()()()(),o.TgZ(14,"div",4)(15,"div",5)(16,"h6",6),o._uU(17,"Contact Us"),o.qZA(),o.TgZ(18,"div",10)(19,"address",11)(20,"ul")(21,"li"),o._UZ(22,"i",12),o._uU(23," 115, JODHPUR PARK KOLKATA "),o.qZA(),o.TgZ(24,"li"),o._UZ(25,"i",12),o._uU(26," PINCODE-700068"),o.qZA(),o.TgZ(27,"li"),o._UZ(28,"i",13),o.TgZ(29,"a",14),o._uU(30,"glownglitter.com"),o.qZA()(),o.TgZ(31,"li"),o._UZ(32,"i",15),o.TgZ(33,"a",16),o._uU(34,"(+91) 9051398740"),o.qZA()(),o.TgZ(35,"li"),o._UZ(36,"i",15),o.TgZ(37,"a",17),o._uU(38,"(+91) 9874406700"),o.qZA()()()()()()(),o.TgZ(39,"div",18)(40,"div",5)(41,"h6",6),o._uU(42,"Information"),o.qZA(),o.TgZ(43,"div",10)(44,"ul",19)(45,"li")(46,"a",20),o._uU(47,"about us"),o.qZA()(),o.TgZ(48,"li")(49,"a",21),o._uU(50,"Shipping"),o.qZA()(),o.TgZ(51,"li")(52,"a",22),o._uU(53,"Cancellation & Refund "),o.qZA()(),o.TgZ(54,"li")(55,"a",23),o._uU(56,"privacy policy"),o.qZA()(),o.TgZ(57,"li")(58,"a",24),o._uU(59,"Terms & Conditions"),o.qZA()(),o.TgZ(60,"li")(61,"a",25),o._uU(62,"contact us"),o.qZA()()()()()(),o.TgZ(63,"div",4)(64,"div",5)(65,"h6",6),o._uU(66,"Follow Us"),o.qZA(),o.TgZ(67,"div",26)(68,"a",27),o._UZ(69,"i",28),o.qZA(),o.TgZ(70,"a",29),o._UZ(71,"i",30),o.qZA(),o.TgZ(72,"a",29),o._UZ(73,"i",31),o.qZA(),o.TgZ(74,"a",29),o._UZ(75,"i",32),o.qZA()()()()()()(),o.TgZ(76,"div",33)(77,"div",2)(78,"div",3)(79,"div",34)(80,"div",35)(81,"p"),o._uU(82,"\xa9 2023 "),o.TgZ(83,"b"),o._uU(84,"Glow & Glitter"),o.qZA(),o._uU(85," Made by"),o._UZ(86,"i",36),o._uU(87," by "),o.TgZ(88,"a",37)(89,"b",38),o._uU(90,"Soltech Solution"),o.qZA()()()()()()()()())},dependencies:[wn.rH],styles:["img[_ngcontent-%COMP%]{background-color:#000;max-width:100%}"]}),e})();function T3(n,e){1&n&&(o.TgZ(0,"ul",80)(1,"li")(2,"a",81),o._uU(3,"Login"),o.qZA()(),o.TgZ(4,"li")(5,"a",82),o._uU(6,"Register"),o.qZA()()())}function I3(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"ul",80)(1,"li",83),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.signOut())}),o.TgZ(2,"a",84),o._uU(3,"Logout"),o.qZA()(),o.TgZ(4,"li")(5,"a",85),o._uU(6,"My Account"),o.qZA()()()}}let S3=(()=>{var n;class e{constructor(r,i,l,c,f){this.authService=r,this.catService=i,this.cartService=l,this.router=c,this.elementRef=f,this.category=[],this.cartCount=0,this.isSingIn=!1,this.router.events.subscribe(_=>{_ instanceof wn.m2&&this.updateIsSignIn()})}ngOnInit(){this.getUserid(),this.getcategory();const r=this.authService.isLoggedIn();this.isSingIn=!!r,this.cartService.cartCount$.subscribe(i=>{this.cartCount=i})}getCurrentUser(){this.isSingIn||this.router.navigate(["../login"])}getUserid(){this.userId=this.authService.getCurrentUser()}signOut(){this.isSingIn=!1,this.authService.logout()}updateIsSignIn(){const r=this.authService.isLoggedIn();this.isSingIn=r}getcategory(){this.subscription=this.catService.getCategories().subscribe(r=>{this.category=r})}onSearchChange(r){this.router.navigate([`search/${r}`])}}return(n=e).\u0275fac=function(r){return new(r||n)(o.Y36(Qu),o.Y36(e1),o.Y36(Wd),o.Y36(wn.F0),o.Y36(o.SBq))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-header"]],decls:128,vars:3,consts:[[1,"header-area","header-wide","py-1"],[1,"main-header","d-none","d-lg-block"],[1,"header-main-area","sticky","py-1"],[1,"container"],[1,"row","align-items-center","position-relative",2,"background-color","#070605"],[1,"col-lg-2"],[1,"logo"],["routerLink","./home"],["src","../assets/img/logo/logo.png","height","80px","width","150%","alt","Brand Logo"],[1,"col-lg-6","position-static"],[1,"main-menu-area"],[1,"main-menu"],[1,"desktop-menu"],[1,"mobile-menu"],["routerLink","../home",1,"menu-item-has-children"],["routerLink","../shop",1,"menu-item-has-children"],["routerLink","../about",1,"menu-item-has-children"],["routerLink","../contact"],[1,"col-lg-4"],[1,"header-right","d-flex","align-items-center","justify-content-xl-between","justify-content-lg-end"],[1,"header-search-container"],[1,"header-search-box","d-lg-none","d-xl-block"],["type","text","placeholder","Search entire store",1,"header-search-field",3,"keyup.Enter"],["keyword",""],[1,"header-configure-area",2,"background-color","#180905"],[1,"nav","justify-content-end"],[1,"user-hover"],[1,"pe-7s-user"],["class","dropdown-list",4,"ngIf","ngIfElse"],["logout",""],["routerLink","../cart",1,"minicart-btn"],[1,"pe-7s-shopbag"],[1,"mobile-header","d-lg-none","d-md-block","sticky",2,"background-color","rgb(15, 12, 8)"],[1,"container-fluid"],[1,"row","align-items-center"],[1,"col-12"],[1,"mobile-main-header"],[1,"mobile-logo"],["routerLink","../home"],["src","../assets/img/logo/logo.png","alt","Brand Logo"],[1,"mobile-menu-toggler"],[1,"mini-cart-wrap"],["routerLink","cart"],["routerLink","./cart",1,"pe-7s-shopbag"],[1,"notification"],[1,"mobile-menu-btn",2,"background-color","rgb(233, 227, 219)"],[1,"off-canvas-wrapper"],[1,"off-canvas-overlay"],[1,"off-canvas-inner-content"],[1,"btn-close-off-canvas"],[1,"pe-7s-close"],[1,"off-canvas-inner"],[1,"search-box-offcanvas"],["keyword1",""],[1,"search-btn"],[1,"pe-7s-search"],[1,"mobile-navigation"],[1,"menu-item-has-children"],["routerLink","../shop"],["routerLink","../about"],[1,"mobile-settings"],[1,"nav"],[1,"dropdown","mobile-top-dropdown"],["href","#","id","myaccount","data-bs-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"dropdown-toggle"],[1,"fa","fa-angle-down"],["aria-labelledby","myaccount",1,"dropdown-menu"],["routerLink","../account",1,"dropdown-item"],["routerLink","../login",1,"dropdown-item"],["routerLink","../register",1,"dropdown-item"],[1,"offcanvas-widget-area"],[1,"off-canvas-contact-widget"],[1,"fa","fa-mobile"],[1,"fa","fa-envelope-o"],[1,"off-canvas-social-widget"],["routerLink","blog"],[1,"fa","fa-facebook"],[1,"fa","fa-twitter"],[1,"fa","fa-pinterest-p"],[1,"fa","fa-linkedin"],[1,"fa","fa-youtube-play"],[1,"dropdown-list"],["routerLink","../login"],["routerLink","../register"],[3,"click"],["routerLink","../logout"],["routerLink","../account"]],template:function(r,i){if(1&r){const l=o.EpF();o.TgZ(0,"header",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"a",7),o._UZ(8,"img",8),o.qZA()()(),o.TgZ(9,"div",9)(10,"div",10)(11,"div",11)(12,"nav",12)(13,"ul",13)(14,"li",14)(15,"a"),o._uU(16,"Home"),o.qZA()(),o.TgZ(17,"li",15)(18,"a"),o._uU(19," shop"),o.qZA()(),o.TgZ(20,"li",16)(21,"a"),o._uU(22,"About us"),o.qZA()(),o.TgZ(23,"li",17)(24,"a"),o._uU(25,"Contact us"),o.qZA()()()()()()(),o.TgZ(26,"div",18)(27,"div",19)(28,"div",20)(29,"form",21)(30,"input",22,23),o.NdJ("keyup.Enter",function(){o.CHM(l);const f=o.MAs(31);return o.KtG(i.onSearchChange(f.value))}),o.qZA()()(),o.TgZ(32,"div",24)(33,"ul",25)(34,"li",26)(35,"a"),o._UZ(36,"i",27),o.qZA(),o.YNc(37,T3,7,0,"ul",28),o.YNc(38,I3,7,0,"ng-template",null,29,o.W1O),o.qZA(),o.TgZ(40,"li")(41,"a",30),o._UZ(42,"i",31),o.qZA()()()()()()()()()(),o.TgZ(43,"div",32)(44,"div",33)(45,"div",34)(46,"div",35)(47,"div",36)(48,"div",37)(49,"a",38),o._UZ(50,"img",39),o.qZA()(),o.TgZ(51,"div",40)(52,"div",41)(53,"a",42),o._UZ(54,"i",43),o.TgZ(55,"div",44),o._uU(56),o.qZA()()(),o.TgZ(57,"button",45),o._UZ(58,"span")(59,"span")(60,"span"),o.qZA()()()()()()(),o.TgZ(61,"aside",46),o._UZ(62,"div",47),o.TgZ(63,"div",48)(64,"div",49),o._UZ(65,"i",50),o.qZA(),o.TgZ(66,"div",51)(67,"div",52)(68,"form")(69,"input",22,53),o.NdJ("keyup.Enter",function(){o.CHM(l);const f=o.MAs(70);return o.KtG(i.onSearchChange(f.value))}),o.qZA(),o.TgZ(71,"button",54),o._UZ(72,"i",55),o.qZA()()(),o.TgZ(73,"div",56)(74,"nav")(75,"ul",13)(76,"li",57)(77,"a",38),o._uU(78,"Home"),o.qZA()(),o.TgZ(79,"li",57)(80,"a",58),o._uU(81,"shop"),o.qZA()(),o.TgZ(82,"li",57)(83,"a",59),o._uU(84,"About us"),o.qZA()(),o.TgZ(85,"li")(86,"a",17),o._uU(87,"Contact us"),o.qZA()()()()(),o.TgZ(88,"div",60)(89,"ul",61)(90,"li")(91,"div",62)(92,"a",63),o._uU(93," My Account "),o._UZ(94,"i",64),o.qZA(),o.TgZ(95,"div",65)(96,"a",66),o._uU(97,"my account"),o.qZA(),o.TgZ(98,"a",67),o._uU(99," login"),o.qZA(),o.TgZ(100,"a",68),o._uU(101,"register"),o.qZA()()()()()(),o.TgZ(102,"div",69)(103,"div",70)(104,"ul")(105,"li"),o._UZ(106,"i",71),o.TgZ(107,"a",17),o._uU(108,"(+91) 9051398740"),o.qZA()(),o.TgZ(109,"li"),o._UZ(110,"i",71),o.TgZ(111,"a",17),o._uU(112,"(+91) 9874406700"),o.qZA()(),o.TgZ(113,"li"),o._UZ(114,"i",72),o.TgZ(115,"a",17),o._uU(116,"info@glownglitter.com"),o.qZA()()()(),o.TgZ(117,"div",73)(118,"a",74),o._UZ(119,"i",75),o.qZA(),o.TgZ(120,"a",74),o._UZ(121,"i",76),o.qZA(),o.TgZ(122,"a",74),o._UZ(123,"i",77),o.qZA(),o.TgZ(124,"a",74),o._UZ(125,"i",78),o.qZA(),o.TgZ(126,"a",74),o._UZ(127,"i",79),o.qZA()()()()()()()}if(2&r){const l=o.MAs(39);o.xp6(37),o.Q6J("ngIf",!i.isSingIn)("ngIfElse",l),o.xp6(19),o.Oqu(i.cartCount)}},dependencies:[on.O5,wn.rH,_m,gm,hf],styles:[".header-main-area[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}.header-main-area[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:180%!important}.modile-menu[_ngcontent-%COMP%]   .menu-item-has-children[_ngcontent-%COMP%]{padding-left:160px}img[_ngcontent-%COMP%]{background-color:#000;max-width:150%}"]}),e})(),D3=(()=>{var n;class e{constructor(r,i){this.service=r,this.cartservice=i}ngOnInit(){this.getcolor()}getcolor(){this.service.getworkinghours().subscribe(r=>{this.web_color=r.website_background})}}return(n=e).\u0275fac=function(r){return new(r||n)(o.Y36(jp),o.Y36(Wd))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-root"]],decls:4,vars:2,template:function(r,i){1&r&&(o.TgZ(0,"main"),o._UZ(1,"app-header")(2,"router-outlet")(3,"app-footer"),o.qZA()),2&r&&o.Udp("background-color",i.web_color)},dependencies:[wn.lC,E3,S3]}),e})();const A3_firebaseConfig={apiKey:"AIzaSyAz2djSj0Xr_Yqj0ItYwCTaN3YcNFY987A",authDomain:"glownglitter-1f7ab.firebaseapp.com",projectId:"glownglitter-1f7ab",storageBucket:"glownglitter-1f7ab.appspot.com",messagingSenderId:"688201133661",appId:"1:688201133661:web:c48ef6737e6aa762a027b4",measurementId:"G-XH0EQ90JQ8"};let M3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[on.ez]}),n})(),P3=(()=>{var n;class e{constructor(){this.handlers={}}shouldDetach(r){return this.isDetachable(r)}store(r,i){const l=this.getStoreKey(r);i&&(this.handlers[l]={handle:i,storeTime:+new Date})}shouldAttach(r){const i=this.getStoreKey(r);return!!this.isAtachable(r,i)&&(this.clearNewerHandlerOnAttach(this.handlers[i].storeTime),!0)}retrieve(r){const i=this.getStoreKey(r);return this.handlers[i]?.handle}shouldReuseRoute(r,i){return r.routeConfig===i.routeConfig}getResolvedUrl(r){return r.pathFromRoot.map(i=>i.url.map(l=>l.toString()).join("/")).join("/")}getStoreKey(r){const i=this.getResolvedUrl(r),l=[];let c=r;for(;c.firstChild;)c=c.firstChild,l.push(c.url.map(f=>f.path).join("/"));return i+"////"+l.join("/")}isDetachable(r){return!!r?.routeConfig?.data?.shouldDetach}isAtachable(r,i){return!(!this.isDetachable(r)||!this.handlers[i]?.handle)}clearNewerHandlerOnAttach(r){Object.keys(this.handlers).forEach(l=>{if(this.handlers[l].storeTime>r){const c=this.handlers[l].handle.componentRef;c&&c.destroy(),delete this.handlers[l]}})}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),e})(),R3=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=o.oAB({type:n,bootstrap:[D3]}),n.\u0275inj=o.cJS({providers:[Location,{provide:wn.wN,useClass:P3}],imports:[S.b2,yl,b3,M3,WV,pU,E2,sO,fO,$n.hO.initializeApp(A3_firebaseConfig),q2.forRoot()]}),e})();S.q6().bootstrapModule(R3).catch(n=>console.error(n))},1135:(Pt,Re,B)=>{B.d(Re,{X:()=>o});var S=B(7579);class o extends S.x{constructor(he){super(),this._value=he}get value(){return this.getValue()}_subscribe(he){const ce=super._subscribe(he);return!ce.closed&&he.next(this._value),ce}getValue(){const{hasError:he,thrownError:ce,_value:me}=this;if(he)throw ce;return this._throwIfClosed(),me}next(he){super.next(this._value=he)}}},9751:(Pt,Re,B)=>{B.d(Re,{y:()=>Se});var S=B(930),o=B(727),q=B(8822),he=B(9635),ce=B(2416),me=B(576),be=B(2806);let Se=(()=>{class de{constructor(We){We&&(this._subscribe=We)}lift(We){const ht=new de;return ht.source=this,ht.operator=We,ht}subscribe(We,ht,Nt){const Ue=function ne(de){return de&&de instanceof S.Lv||function te(de){return de&&(0,me.m)(de.next)&&(0,me.m)(de.error)&&(0,me.m)(de.complete)}(de)&&(0,o.Nn)(de)}(We)?We:new S.Hp(We,ht,Nt);return(0,be.x)(()=>{const{operator:Je,source:Xe}=this;Ue.add(Je?Je.call(Ue,Xe):Xe?this._subscribe(Ue):this._trySubscribe(Ue))}),Ue}_trySubscribe(We){try{return this._subscribe(We)}catch(ht){We.error(ht)}}forEach(We,ht){return new(ht=Ie(ht))((Nt,Ue)=>{const Je=new S.Hp({next:Xe=>{try{We(Xe)}catch(ct){Ue(ct),Je.unsubscribe()}},error:Ue,complete:Nt});this.subscribe(Je)})}_subscribe(We){var ht;return null===(ht=this.source)||void 0===ht?void 0:ht.subscribe(We)}[q.L](){return this}pipe(...We){return(0,he.U)(We)(this)}toPromise(We){return new(We=Ie(We))((ht,Nt)=>{let Ue;this.subscribe(Je=>Ue=Je,Je=>Nt(Je),()=>ht(Ue))})}}return de.create=at=>new de(at),de})();function Ie(de){var at;return null!==(at=de??ce.v.Promise)&&void 0!==at?at:Promise}},7579:(Pt,Re,B)=>{B.d(Re,{x:()=>be});var S=B(9751),o=B(727);const he=(0,B(3888).d)(Ie=>function(){Ie(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ce=B(8737),me=B(2806);let be=(()=>{class Ie extends S.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ne){const de=new Se(this,this);return de.operator=ne,de}_throwIfClosed(){if(this.closed)throw new he}next(ne){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const de of this.currentObservers)de.next(ne)}})}error(ne){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ne;const{observers:de}=this;for(;de.length;)de.shift().error(ne)}})}complete(){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ne}=this;for(;ne.length;)ne.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ne;return(null===(ne=this.observers)||void 0===ne?void 0:ne.length)>0}_trySubscribe(ne){return this._throwIfClosed(),super._trySubscribe(ne)}_subscribe(ne){return this._throwIfClosed(),this._checkFinalizedStatuses(ne),this._innerSubscribe(ne)}_innerSubscribe(ne){const{hasError:de,isStopped:at,observers:We}=this;return de||at?o.Lc:(this.currentObservers=null,We.push(ne),new o.w0(()=>{this.currentObservers=null,(0,ce.P)(We,ne)}))}_checkFinalizedStatuses(ne){const{hasError:de,thrownError:at,isStopped:We}=this;de?ne.error(at):We&&ne.complete()}asObservable(){const ne=new S.y;return ne.source=this,ne}}return Ie.create=(te,ne)=>new Se(te,ne),Ie})();class Se extends be{constructor(te,ne){super(),this.destination=te,this.source=ne}next(te){var ne,de;null===(de=null===(ne=this.destination)||void 0===ne?void 0:ne.next)||void 0===de||de.call(ne,te)}error(te){var ne,de;null===(de=null===(ne=this.destination)||void 0===ne?void 0:ne.error)||void 0===de||de.call(ne,te)}complete(){var te,ne;null===(ne=null===(te=this.destination)||void 0===te?void 0:te.complete)||void 0===ne||ne.call(te)}_subscribe(te){var ne,de;return null!==(de=null===(ne=this.source)||void 0===ne?void 0:ne.subscribe(te))&&void 0!==de?de:o.Lc}}},930:(Pt,Re,B)=>{B.d(Re,{Hp:()=>Nt,Lv:()=>de});var S=B(576),o=B(727),q=B(2416),he=B(7849),ce=B(5032);const me=Ie("C",void 0,void 0);function Ie(tt,Be,He){return{kind:tt,value:Be,error:He}}var te=B(3410),ne=B(2806);class de extends o.w0{constructor(Be){super(),this.isStopped=!1,Be?(this.destination=Be,(0,o.Nn)(Be)&&Be.add(this)):this.destination=ct}static create(Be,He,ft){return new Nt(Be,He,ft)}next(Be){this.isStopped?Xe(function Se(tt){return Ie("N",tt,void 0)}(Be),this):this._next(Be)}error(Be){this.isStopped?Xe(function be(tt){return Ie("E",void 0,tt)}(Be),this):(this.isStopped=!0,this._error(Be))}complete(){this.isStopped?Xe(me,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Be){this.destination.next(Be)}_error(Be){try{this.destination.error(Be)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const at=Function.prototype.bind;function We(tt,Be){return at.call(tt,Be)}class ht{constructor(Be){this.partialObserver=Be}next(Be){const{partialObserver:He}=this;if(He.next)try{He.next(Be)}catch(ft){Ue(ft)}}error(Be){const{partialObserver:He}=this;if(He.error)try{He.error(Be)}catch(ft){Ue(ft)}else Ue(Be)}complete(){const{partialObserver:Be}=this;if(Be.complete)try{Be.complete()}catch(He){Ue(He)}}}class Nt extends de{constructor(Be,He,ft){let et;if(super(),(0,S.m)(Be)||!Be)et={next:Be??void 0,error:He??void 0,complete:ft??void 0};else{let At;this&&q.v.useDeprecatedNextContext?(At=Object.create(Be),At.unsubscribe=()=>this.unsubscribe(),et={next:Be.next&&We(Be.next,At),error:Be.error&&We(Be.error,At),complete:Be.complete&&We(Be.complete,At)}):et=Be}this.destination=new ht(et)}}function Ue(tt){q.v.useDeprecatedSynchronousErrorHandling?(0,ne.O)(tt):(0,he.h)(tt)}function Xe(tt,Be){const{onStoppedNotification:He}=q.v;He&&te.z.setTimeout(()=>He(tt,Be))}const ct={closed:!0,next:ce.Z,error:function Je(tt){throw tt},complete:ce.Z}},727:(Pt,Re,B)=>{B.d(Re,{Lc:()=>me,w0:()=>ce,Nn:()=>be});var S=B(576);const q=(0,B(3888).d)(Ie=>function(ne){Ie(this),this.message=ne?`${ne.length} errors occurred during unsubscription:\n${ne.map((de,at)=>`${at+1}) ${de.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ne});var he=B(8737);class ce{constructor(te){this.initialTeardown=te,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let te;if(!this.closed){this.closed=!0;const{_parentage:ne}=this;if(ne)if(this._parentage=null,Array.isArray(ne))for(const We of ne)We.remove(this);else ne.remove(this);const{initialTeardown:de}=this;if((0,S.m)(de))try{de()}catch(We){te=We instanceof q?We.errors:[We]}const{_finalizers:at}=this;if(at){this._finalizers=null;for(const We of at)try{Se(We)}catch(ht){te=te??[],ht instanceof q?te=[...te,...ht.errors]:te.push(ht)}}if(te)throw new q(te)}}add(te){var ne;if(te&&te!==this)if(this.closed)Se(te);else{if(te instanceof ce){if(te.closed||te._hasParent(this))return;te._addParent(this)}(this._finalizers=null!==(ne=this._finalizers)&&void 0!==ne?ne:[]).push(te)}}_hasParent(te){const{_parentage:ne}=this;return ne===te||Array.isArray(ne)&&ne.includes(te)}_addParent(te){const{_parentage:ne}=this;this._parentage=Array.isArray(ne)?(ne.push(te),ne):ne?[ne,te]:te}_removeParent(te){const{_parentage:ne}=this;ne===te?this._parentage=null:Array.isArray(ne)&&(0,he.P)(ne,te)}remove(te){const{_finalizers:ne}=this;ne&&(0,he.P)(ne,te),te instanceof ce&&te._removeParent(this)}}ce.EMPTY=(()=>{const Ie=new ce;return Ie.closed=!0,Ie})();const me=ce.EMPTY;function be(Ie){return Ie instanceof ce||Ie&&"closed"in Ie&&(0,S.m)(Ie.remove)&&(0,S.m)(Ie.add)&&(0,S.m)(Ie.unsubscribe)}function Se(Ie){(0,S.m)(Ie)?Ie():Ie.unsubscribe()}},2416:(Pt,Re,B)=>{B.d(Re,{v:()=>S});const S={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(Pt,Re,B)=>{B.d(Re,{z:()=>ce});var S=B(8189),q=B(7669),he=B(8996);function ce(...me){return function o(){return(0,S.J)(1)}()((0,he.D)(me,(0,q.yG)(me)))}},515:(Pt,Re,B)=>{B.d(Re,{E:()=>o});const o=new(B(9751).y)(ce=>ce.complete())},8996:(Pt,Re,B)=>{B.d(Re,{D:()=>Be});var S=B(8421),o=B(5363),q=B(9468),me=B(9751),Se=B(2202),Ie=B(576),te=B(9672);function de(He,ft){if(!He)throw new Error("Iterable cannot be null");return new me.y(et=>{(0,te.f)(et,ft,()=>{const At=He[Symbol.asyncIterator]();(0,te.f)(et,ft,()=>{At.next().then(De=>{De.done?et.complete():et.next(De.value)})},0,!0)})})}var at=B(3670),We=B(8239),ht=B(1144),Nt=B(6495),Ue=B(2206),Je=B(4532),Xe=B(3260);function Be(He,ft){return ft?function tt(He,ft){if(null!=He){if((0,at.c)(He))return function he(He,ft){return(0,S.Xf)(He).pipe((0,q.R)(ft),(0,o.Q)(ft))}(He,ft);if((0,ht.z)(He))return function be(He,ft){return new me.y(et=>{let At=0;return ft.schedule(function(){At===He.length?et.complete():(et.next(He[At++]),et.closed||this.schedule())})})}(He,ft);if((0,We.t)(He))return function ce(He,ft){return(0,S.Xf)(He).pipe((0,q.R)(ft),(0,o.Q)(ft))}(He,ft);if((0,Ue.D)(He))return de(He,ft);if((0,Nt.T)(He))return function ne(He,ft){return new me.y(et=>{let At;return(0,te.f)(et,ft,()=>{At=He[Se.h](),(0,te.f)(et,ft,()=>{let De,Yt;try{({value:De,done:Yt}=At.next())}catch(_t){return void et.error(_t)}Yt?et.complete():et.next(De)},0,!0)}),()=>(0,Ie.m)(At?.return)&&At.return()})}(He,ft);if((0,Xe.L)(He))return function ct(He,ft){return de((0,Xe.Q)(He),ft)}(He,ft)}throw(0,Je.z)(He)}(He,ft):(0,S.Xf)(He)}},8421:(Pt,Re,B)=>{B.d(Re,{Xf:()=>at});var S=B(655),o=B(1144),q=B(8239),he=B(9751),ce=B(3670),me=B(2206),be=B(4532),Se=B(6495),Ie=B(3260),te=B(576),ne=B(7849),de=B(8822);function at(tt){if(tt instanceof he.y)return tt;if(null!=tt){if((0,ce.c)(tt))return function We(tt){return new he.y(Be=>{const He=tt[de.L]();if((0,te.m)(He.subscribe))return He.subscribe(Be);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(tt);if((0,o.z)(tt))return function ht(tt){return new he.y(Be=>{for(let He=0;He<tt.length&&!Be.closed;He++)Be.next(tt[He]);Be.complete()})}(tt);if((0,q.t)(tt))return function Nt(tt){return new he.y(Be=>{tt.then(He=>{Be.closed||(Be.next(He),Be.complete())},He=>Be.error(He)).then(null,ne.h)})}(tt);if((0,me.D)(tt))return Je(tt);if((0,Se.T)(tt))return function Ue(tt){return new he.y(Be=>{for(const He of tt)if(Be.next(He),Be.closed)return;Be.complete()})}(tt);if((0,Ie.L)(tt))return function Xe(tt){return Je((0,Ie.Q)(tt))}(tt)}throw(0,be.z)(tt)}function Je(tt){return new he.y(Be=>{(function ct(tt,Be){var He,ft,et,At;return(0,S.mG)(this,void 0,void 0,function*(){try{for(He=(0,S.KL)(tt);!(ft=yield He.next()).done;)if(Be.next(ft.value),Be.closed)return}catch(De){et={error:De}}finally{try{ft&&!ft.done&&(At=He.return)&&(yield At.call(He))}finally{if(et)throw et.error}}Be.complete()})})(tt,Be).catch(He=>Be.error(He))})}},6451:(Pt,Re,B)=>{B.d(Re,{T:()=>me});var S=B(8189),o=B(8421),q=B(515),he=B(7669),ce=B(8996);function me(...be){const Se=(0,he.yG)(be),Ie=(0,he._6)(be,1/0),te=be;return te.length?1===te.length?(0,o.Xf)(te[0]):(0,S.J)(Ie)((0,ce.D)(te,Se)):q.E}},9646:(Pt,Re,B)=>{B.d(Re,{of:()=>q});var S=B(7669),o=B(8996);function q(...he){const ce=(0,S.yG)(he);return(0,o.D)(he,ce)}},5403:(Pt,Re,B)=>{B.d(Re,{x:()=>o});var S=B(930);function o(he,ce,me,be,Se){return new q(he,ce,me,be,Se)}class q extends S.Lv{constructor(ce,me,be,Se,Ie,te){super(ce),this.onFinalize=Ie,this.shouldUnsubscribe=te,this._next=me?function(ne){try{me(ne)}catch(de){ce.error(de)}}:super._next,this._error=Se?function(ne){try{Se(ne)}catch(de){ce.error(de)}finally{this.unsubscribe()}}:super._error,this._complete=be?function(){try{be()}catch(ne){ce.error(ne)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ce;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:me}=this;super.unsubscribe(),!me&&(null===(ce=this.onFinalize)||void 0===ce||ce.call(this))}}}},6590:(Pt,Re,B)=>{B.d(Re,{d:()=>q});var S=B(4482),o=B(5403);function q(he){return(0,S.e)((ce,me)=>{let be=!1;ce.subscribe((0,o.x)(me,Se=>{be=!0,me.next(Se)},()=>{be||me.next(he),me.complete()}))})}},9300:(Pt,Re,B)=>{B.d(Re,{h:()=>q});var S=B(4482),o=B(5403);function q(he,ce){return(0,S.e)((me,be)=>{let Se=0;me.subscribe((0,o.x)(be,Ie=>he.call(ce,Ie,Se++)&&be.next(Ie)))})}},590:(Pt,Re,B)=>{B.d(Re,{P:()=>be});var S=B(6805),o=B(9300),q=B(5698),he=B(6590),ce=B(8068),me=B(4671);function be(Se,Ie){const te=arguments.length>=2;return ne=>ne.pipe(Se?(0,o.h)((de,at)=>Se(de,at,ne)):me.y,(0,q.q)(1),te?(0,he.d)(Ie):(0,ce.T)(()=>new S.K))}},4004:(Pt,Re,B)=>{B.d(Re,{U:()=>q});var S=B(4482),o=B(5403);function q(he,ce){return(0,S.e)((me,be)=>{let Se=0;me.subscribe((0,o.x)(be,Ie=>{be.next(he.call(ce,Ie,Se++))}))})}},8189:(Pt,Re,B)=>{B.d(Re,{J:()=>q});var S=B(5577),o=B(4671);function q(he=1/0){return(0,S.z)(o.y,he)}},5577:(Pt,Re,B)=>{B.d(Re,{z:()=>Se});var S=B(4004),o=B(8421),q=B(4482),he=B(9672),ce=B(5403),be=B(576);function Se(Ie,te,ne=1/0){return(0,be.m)(te)?Se((de,at)=>(0,S.U)((We,ht)=>te(de,We,at,ht))((0,o.Xf)(Ie(de,at))),ne):("number"==typeof te&&(ne=te),(0,q.e)((de,at)=>function me(Ie,te,ne,de,at,We,ht,Nt){const Ue=[];let Je=0,Xe=0,ct=!1;const tt=()=>{ct&&!Ue.length&&!Je&&te.complete()},Be=ft=>Je<de?He(ft):Ue.push(ft),He=ft=>{We&&te.next(ft),Je++;let et=!1;(0,o.Xf)(ne(ft,Xe++)).subscribe((0,ce.x)(te,At=>{at?.(At),We?Be(At):te.next(At)},()=>{et=!0},void 0,()=>{if(et)try{for(Je--;Ue.length&&Je<de;){const At=Ue.shift();ht?(0,he.f)(te,ht,()=>He(At)):He(At)}tt()}catch(At){te.error(At)}}))};return Ie.subscribe((0,ce.x)(te,Be,()=>{ct=!0,tt()})),()=>{Nt?.()}}(de,at,Ie,ne)))}},5363:(Pt,Re,B)=>{B.d(Re,{Q:()=>he});var S=B(9672),o=B(4482),q=B(5403);function he(ce,me=0){return(0,o.e)((be,Se)=>{be.subscribe((0,q.x)(Se,Ie=>(0,S.f)(Se,ce,()=>Se.next(Ie),me),()=>(0,S.f)(Se,ce,()=>Se.complete(),me),Ie=>(0,S.f)(Se,ce,()=>Se.error(Ie),me)))})}},5026:(Pt,Re,B)=>{B.d(Re,{R:()=>he});var S=B(4482),o=B(5403);function he(ce,me){return(0,S.e)(function q(ce,me,be,Se,Ie){return(te,ne)=>{let de=be,at=me,We=0;te.subscribe((0,o.x)(ne,ht=>{const Nt=We++;at=de?ce(at,ht,Nt):(de=!0,ht),Se&&ne.next(at)},Ie&&(()=>{de&&ne.next(at),ne.complete()})))}}(ce,me,arguments.length>=2,!0))}},3099:(Pt,Re,B)=>{B.d(Re,{B:()=>ce});var S=B(8421),o=B(7579),q=B(930),he=B(4482);function ce(be={}){const{connector:Se=(()=>new o.x),resetOnError:Ie=!0,resetOnComplete:te=!0,resetOnRefCountZero:ne=!0}=be;return de=>{let at,We,ht,Nt=0,Ue=!1,Je=!1;const Xe=()=>{We?.unsubscribe(),We=void 0},ct=()=>{Xe(),at=ht=void 0,Ue=Je=!1},tt=()=>{const Be=at;ct(),Be?.unsubscribe()};return(0,he.e)((Be,He)=>{Nt++,!Je&&!Ue&&Xe();const ft=ht=ht??Se();He.add(()=>{Nt--,0===Nt&&!Je&&!Ue&&(We=me(tt,ne))}),ft.subscribe(He),!at&&Nt>0&&(at=new q.Hp({next:et=>ft.next(et),error:et=>{Je=!0,Xe(),We=me(ct,Ie,et),ft.error(et)},complete:()=>{Ue=!0,Xe(),We=me(ct,te),ft.complete()}}),(0,S.Xf)(Be).subscribe(at))})(de)}}function me(be,Se,...Ie){if(!0===Se)return void be();if(!1===Se)return;const te=new q.Hp({next:()=>{te.unsubscribe(),be()}});return(0,S.Xf)(Se(...Ie)).subscribe(te)}},8675:(Pt,Re,B)=>{B.d(Re,{O:()=>he});var S=B(7272),o=B(7669),q=B(4482);function he(...ce){const me=(0,o.yG)(ce);return(0,q.e)((be,Se)=>{(me?(0,S.z)(ce,be,me):(0,S.z)(ce,be)).subscribe(Se)})}},9468:(Pt,Re,B)=>{B.d(Re,{R:()=>o});var S=B(4482);function o(q,he=0){return(0,S.e)((ce,me)=>{me.add(q.schedule(()=>ce.subscribe(me),he))})}},3900:(Pt,Re,B)=>{B.d(Re,{w:()=>he});var S=B(8421),o=B(4482),q=B(5403);function he(ce,me){return(0,o.e)((be,Se)=>{let Ie=null,te=0,ne=!1;const de=()=>ne&&!Ie&&Se.complete();be.subscribe((0,q.x)(Se,at=>{Ie?.unsubscribe();let We=0;const ht=te++;(0,S.Xf)(ce(at,ht)).subscribe(Ie=(0,q.x)(Se,Nt=>Se.next(me?me(at,Nt,ht,We++):Nt),()=>{Ie=null,de()}))},()=>{ne=!0,de()}))})}},5698:(Pt,Re,B)=>{B.d(Re,{q:()=>he});var S=B(515),o=B(4482),q=B(5403);function he(ce){return ce<=0?()=>S.E:(0,o.e)((me,be)=>{let Se=0;me.subscribe((0,q.x)(be,Ie=>{++Se<=ce&&(be.next(Ie),ce<=Se&&be.complete())}))})}},8505:(Pt,Re,B)=>{B.d(Re,{b:()=>ce});var S=B(576),o=B(4482),q=B(5403),he=B(4671);function ce(me,be,Se){const Ie=(0,S.m)(me)||be||Se?{next:me,error:be,complete:Se}:me;return Ie?(0,o.e)((te,ne)=>{var de;null===(de=Ie.subscribe)||void 0===de||de.call(Ie);let at=!0;te.subscribe((0,q.x)(ne,We=>{var ht;null===(ht=Ie.next)||void 0===ht||ht.call(Ie,We),ne.next(We)},()=>{var We;at=!1,null===(We=Ie.complete)||void 0===We||We.call(Ie),ne.complete()},We=>{var ht;at=!1,null===(ht=Ie.error)||void 0===ht||ht.call(Ie,We),ne.error(We)},()=>{var We,ht;at&&(null===(We=Ie.unsubscribe)||void 0===We||We.call(Ie)),null===(ht=Ie.finalize)||void 0===ht||ht.call(Ie)}))}):he.y}},8068:(Pt,Re,B)=>{B.d(Re,{T:()=>he});var S=B(6805),o=B(4482),q=B(5403);function he(me=ce){return(0,o.e)((be,Se)=>{let Ie=!1;be.subscribe((0,q.x)(Se,te=>{Ie=!0,Se.next(te)},()=>Ie?Se.complete():Se.error(me())))})}function ce(){return new S.K}},4408:(Pt,Re,B)=>{B.d(Re,{o:()=>ce});var S=B(727);class o extends S.w0{constructor(be,Se){super()}schedule(be,Se=0){return this}}const q={setInterval(me,be,...Se){const{delegate:Ie}=q;return Ie?.setInterval?Ie.setInterval(me,be,...Se):setInterval(me,be,...Se)},clearInterval(me){const{delegate:be}=q;return(be?.clearInterval||clearInterval)(me)},delegate:void 0};var he=B(8737);class ce extends o{constructor(be,Se){super(be,Se),this.scheduler=be,this.work=Se,this.pending=!1}schedule(be,Se=0){var Ie;if(this.closed)return this;this.state=be;const te=this.id,ne=this.scheduler;return null!=te&&(this.id=this.recycleAsyncId(ne,te,Se)),this.pending=!0,this.delay=Se,this.id=null!==(Ie=this.id)&&void 0!==Ie?Ie:this.requestAsyncId(ne,this.id,Se),this}requestAsyncId(be,Se,Ie=0){return q.setInterval(be.flush.bind(be,this),Ie)}recycleAsyncId(be,Se,Ie=0){if(null!=Ie&&this.delay===Ie&&!1===this.pending)return Se;null!=Se&&q.clearInterval(Se)}execute(be,Se){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ie=this._execute(be,Se);if(Ie)return Ie;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(be,Se){let te,Ie=!1;try{this.work(be)}catch(ne){Ie=!0,te=ne||new Error("Scheduled action threw falsy error")}if(Ie)return this.unsubscribe(),te}unsubscribe(){if(!this.closed){const{id:be,scheduler:Se}=this,{actions:Ie}=Se;this.work=this.state=this.scheduler=null,this.pending=!1,(0,he.P)(Ie,this),null!=be&&(this.id=this.recycleAsyncId(Se,be,null)),this.delay=null,super.unsubscribe()}}}},7565:(Pt,Re,B)=>{B.d(Re,{v:()=>q});var S=B(6063);class o{constructor(ce,me=o.now){this.schedulerActionCtor=ce,this.now=me}schedule(ce,me=0,be){return new this.schedulerActionCtor(this,ce).schedule(be,me)}}o.now=S.l.now;class q extends o{constructor(ce,me=o.now){super(ce,me),this.actions=[],this._active=!1}flush(ce){const{actions:me}=this;if(this._active)return void me.push(ce);let be;this._active=!0;do{if(be=ce.execute(ce.state,ce.delay))break}while(ce=me.shift());if(this._active=!1,be){for(;ce=me.shift();)ce.unsubscribe();throw be}}}},4986:(Pt,Re,B)=>{B.d(Re,{z:()=>q});var S=B(4408);const q=new(B(7565).v)(S.o)},6063:(Pt,Re,B)=>{B.d(Re,{l:()=>S});const S={now:()=>(S.delegate||Date).now(),delegate:void 0}},3410:(Pt,Re,B)=>{B.d(Re,{z:()=>S});const S={setTimeout(o,q,...he){const{delegate:ce}=S;return ce?.setTimeout?ce.setTimeout(o,q,...he):setTimeout(o,q,...he)},clearTimeout(o){const{delegate:q}=S;return(q?.clearTimeout||clearTimeout)(o)},delegate:void 0}},2202:(Pt,Re,B)=>{B.d(Re,{h:()=>o});const o=function S(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Pt,Re,B)=>{B.d(Re,{L:()=>S});const S="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(Pt,Re,B)=>{B.d(Re,{K:()=>o});const o=(0,B(3888).d)(q=>function(){q(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(Pt,Re,B)=>{B.d(Re,{_6:()=>me,jO:()=>he,yG:()=>ce});var S=B(576);function q(be){return be[be.length-1]}function he(be){return(0,S.m)(q(be))?be.pop():void 0}function ce(be){return function o(be){return be&&(0,S.m)(be.schedule)}(q(be))?be.pop():void 0}function me(be,Se){return"number"==typeof q(be)?be.pop():Se}},4742:(Pt,Re,B)=>{B.d(Re,{D:()=>ce});const{isArray:S}=Array,{getPrototypeOf:o,prototype:q,keys:he}=Object;function ce(be){if(1===be.length){const Se=be[0];if(S(Se))return{args:Se,keys:null};if(function me(be){return be&&"object"==typeof be&&o(be)===q}(Se)){const Ie=he(Se);return{args:Ie.map(te=>Se[te]),keys:Ie}}}return{args:be,keys:null}}},8737:(Pt,Re,B)=>{function S(o,q){if(o){const he=o.indexOf(q);0<=he&&o.splice(he,1)}}B.d(Re,{P:()=>S})},3888:(Pt,Re,B)=>{function S(o){const he=o(ce=>{Error.call(ce),ce.stack=(new Error).stack});return he.prototype=Object.create(Error.prototype),he.prototype.constructor=he,he}B.d(Re,{d:()=>S})},1810:(Pt,Re,B)=>{function S(o,q){return o.reduce((he,ce,me)=>(he[ce]=q[me],he),{})}B.d(Re,{n:()=>S})},2806:(Pt,Re,B)=>{B.d(Re,{O:()=>he,x:()=>q});var S=B(2416);let o=null;function q(ce){if(S.v.useDeprecatedSynchronousErrorHandling){const me=!o;if(me&&(o={errorThrown:!1,error:null}),ce(),me){const{errorThrown:be,error:Se}=o;if(o=null,be)throw Se}}else ce()}function he(ce){S.v.useDeprecatedSynchronousErrorHandling&&o&&(o.errorThrown=!0,o.error=ce)}},9672:(Pt,Re,B)=>{function S(o,q,he,ce=0,me=!1){const be=q.schedule(function(){he(),me?o.add(this.schedule(null,ce)):this.unsubscribe()},ce);if(o.add(be),!me)return be}B.d(Re,{f:()=>S})},4671:(Pt,Re,B)=>{function S(o){return o}B.d(Re,{y:()=>S})},1144:(Pt,Re,B)=>{B.d(Re,{z:()=>S});const S=o=>o&&"number"==typeof o.length&&"function"!=typeof o},2206:(Pt,Re,B)=>{B.d(Re,{D:()=>o});var S=B(576);function o(q){return Symbol.asyncIterator&&(0,S.m)(q?.[Symbol.asyncIterator])}},576:(Pt,Re,B)=>{function S(o){return"function"==typeof o}B.d(Re,{m:()=>S})},3670:(Pt,Re,B)=>{B.d(Re,{c:()=>q});var S=B(8822),o=B(576);function q(he){return(0,o.m)(he[S.L])}},6495:(Pt,Re,B)=>{B.d(Re,{T:()=>q});var S=B(2202),o=B(576);function q(he){return(0,o.m)(he?.[S.h])}},8239:(Pt,Re,B)=>{B.d(Re,{t:()=>o});var S=B(576);function o(q){return(0,S.m)(q?.then)}},3260:(Pt,Re,B)=>{B.d(Re,{L:()=>he,Q:()=>q});var S=B(655),o=B(576);function q(ce){return(0,S.FC)(this,arguments,function*(){const be=ce.getReader();try{for(;;){const{value:Se,done:Ie}=yield(0,S.qq)(be.read());if(Ie)return yield(0,S.qq)(void 0);yield yield(0,S.qq)(Se)}}finally{be.releaseLock()}})}function he(ce){return(0,o.m)(ce?.getReader)}},4482:(Pt,Re,B)=>{B.d(Re,{A:()=>o,e:()=>q});var S=B(576);function o(he){return(0,S.m)(he?.lift)}function q(he){return ce=>{if(o(ce))return ce.lift(function(me){try{return he(me,this)}catch(be){this.error(be)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Pt,Re,B)=>{B.d(Re,{Z:()=>he});var S=B(4004);const{isArray:o}=Array;function he(ce){return(0,S.U)(me=>function q(ce,me){return o(me)?ce(...me):ce(me)}(ce,me))}},5032:(Pt,Re,B)=>{function S(){}B.d(Re,{Z:()=>S})},9635:(Pt,Re,B)=>{B.d(Re,{U:()=>q,z:()=>o});var S=B(4671);function o(...he){return q(he)}function q(he){return 0===he.length?S.y:1===he.length?he[0]:function(me){return he.reduce((be,Se)=>Se(be),me)}}},7849:(Pt,Re,B)=>{B.d(Re,{h:()=>q});var S=B(2416),o=B(3410);function q(he){o.z.setTimeout(()=>{const{onUnhandledError:ce}=S.v;if(!ce)throw he;ce(he)})}},4532:(Pt,Re,B)=>{function S(o){return new TypeError(`You provided ${null!==o&&"object"==typeof o?"an invalid object":`'${o}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}B.d(Re,{z:()=>S})},655:(Pt,Re,B)=>{function he(Ne,Ve){var ze={};for(var $e in Ne)Object.prototype.hasOwnProperty.call(Ne,$e)&&Ve.indexOf($e)<0&&(ze[$e]=Ne[$e]);if(null!=Ne&&"function"==typeof Object.getOwnPropertySymbols){var dt=0;for($e=Object.getOwnPropertySymbols(Ne);dt<$e.length;dt++)Ve.indexOf($e[dt])<0&&Object.prototype.propertyIsEnumerable.call(Ne,$e[dt])&&(ze[$e[dt]]=Ne[$e[dt]])}return ze}function de(Ne,Ve,ze,$e){return new(ze||(ze=Promise))(function(ut,Ct){function xt(Cn){try{Tt($e.next(Cn))}catch(Jt){Ct(Jt)}}function sn(Cn){try{Tt($e.throw(Cn))}catch(Jt){Ct(Jt)}}function Tt(Cn){Cn.done?ut(Cn.value):function dt(ut){return ut instanceof ze?ut:new ze(function(Ct){Ct(ut)})}(Cn.value).then(xt,sn)}Tt(($e=$e.apply(Ne,Ve||[])).next())})}function tt(Ne){return this instanceof tt?(this.v=Ne,this):new tt(Ne)}function Be(Ne,Ve,ze){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var dt,$e=ze.apply(Ne,Ve||[]),ut=[];return dt={},Ct("next"),Ct("throw"),Ct("return"),dt[Symbol.asyncIterator]=function(){return this},dt;function Ct(xn){$e[xn]&&(dt[xn]=function(Jn){return new Promise(function(hr,Mr){ut.push([xn,Jn,hr,Mr])>1||xt(xn,Jn)})})}function xt(xn,Jn){try{!function sn(xn){xn.value instanceof tt?Promise.resolve(xn.value.v).then(Tt,Cn):Jt(ut[0][2],xn)}($e[xn](Jn))}catch(hr){Jt(ut[0][3],hr)}}function Tt(xn){xt("next",xn)}function Cn(xn){xt("throw",xn)}function Jt(xn,Jn){xn(Jn),ut.shift(),ut.length&&xt(ut[0][0],ut[0][1])}}function ft(Ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ze,Ve=Ne[Symbol.asyncIterator];return Ve?Ve.call(Ne):(Ne=function Nt(Ne){var Ve="function"==typeof Symbol&&Symbol.iterator,ze=Ve&&Ne[Ve],$e=0;if(ze)return ze.call(Ne);if(Ne&&"number"==typeof Ne.length)return{next:function(){return Ne&&$e>=Ne.length&&(Ne=void 0),{value:Ne&&Ne[$e++],done:!Ne}}};throw new TypeError(Ve?"Object is not iterable.":"Symbol.iterator is not defined.")}(Ne),ze={},$e("next"),$e("throw"),$e("return"),ze[Symbol.asyncIterator]=function(){return this},ze);function $e(ut){ze[ut]=Ne[ut]&&function(Ct){return new Promise(function(xt,sn){!function dt(ut,Ct,xt,sn){Promise.resolve(sn).then(function(Tt){ut({value:Tt,done:xt})},Ct)}(xt,sn,(Ct=Ne[ut](Ct)).done,Ct.value)})}}}B.d(Re,{FC:()=>Be,KL:()=>ft,_T:()=>he,mG:()=>de,qq:()=>tt})},6895:(Pt,Re,B)=>{B.d(Re,{Do:()=>Xe,EM:()=>ma,HT:()=>he,JF:()=>Wo,JJ:()=>cl,K0:()=>me,Mx:()=>As,O5:()=>Zs,Ov:()=>Co,PM:()=>Go,S$:()=>Nt,V_:()=>Ie,Ye:()=>ct,b0:()=>Je,bD:()=>du,ez:()=>es,gd:()=>Sr,i8:()=>ni,mk:()=>rn,q:()=>q,sg:()=>Qs,uU:()=>Xi,w_:()=>ce});var S=B(4650);let o=null;function q(){return o}function he(x){o||(o=x)}class ce{}const me=new S.OlP("DocumentToken");let be=(()=>{class x{historyGo(N){throw new Error("Not implemented")}}return x.\u0275fac=function(N){return new(N||x)},x.\u0275prov=S.Yz7({token:x,factory:function(){return function Se(){return(0,S.LFG)(te)}()},providedIn:"platform"}),x})();const Ie=new S.OlP("Location Initialized");let te=(()=>{class x extends be{constructor(N){super(),this._doc=N,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return q().getBaseHref(this._doc)}onPopState(N){const $=q().getGlobalEventTarget(this._doc,"window");return $.addEventListener("popstate",N,!1),()=>$.removeEventListener("popstate",N)}onHashChange(N){const $=q().getGlobalEventTarget(this._doc,"window");return $.addEventListener("hashchange",N,!1),()=>$.removeEventListener("hashchange",N)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(N){this._location.pathname=N}pushState(N,$,X){ne()?this._history.pushState(N,$,X):this._location.hash=X}replaceState(N,$,X){ne()?this._history.replaceState(N,$,X):this._location.hash=X}forward(){this._history.forward()}back(){this._history.back()}historyGo(N=0){this._history.go(N)}getState(){return this._history.state}}return x.\u0275fac=function(N){return new(N||x)(S.LFG(me))},x.\u0275prov=S.Yz7({token:x,factory:function(){return function de(){return new te((0,S.LFG)(me))}()},providedIn:"platform"}),x})();function ne(){return!!window.history.pushState}function at(x,V){if(0==x.length)return V;if(0==V.length)return x;let N=0;return x.endsWith("/")&&N++,V.startsWith("/")&&N++,2==N?x+V.substring(1):1==N?x+V:x+"/"+V}function We(x){const V=x.match(/#|\?|$/),N=V&&V.index||x.length;return x.slice(0,N-("/"===x[N-1]?1:0))+x.slice(N)}function ht(x){return x&&"?"!==x[0]?"?"+x:x}let Nt=(()=>{class x{historyGo(N){throw new Error("Not implemented")}}return x.\u0275fac=function(N){return new(N||x)},x.\u0275prov=S.Yz7({token:x,factory:function(){return(0,S.f3M)(Je)},providedIn:"root"}),x})();const Ue=new S.OlP("appBaseHref");let Je=(()=>{class x extends Nt{constructor(N,$){super(),this._platformLocation=N,this._removeListenerFns=[],this._baseHref=$??this._platformLocation.getBaseHrefFromDOM()??(0,S.f3M)(me).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(N){this._removeListenerFns.push(this._platformLocation.onPopState(N),this._platformLocation.onHashChange(N))}getBaseHref(){return this._baseHref}prepareExternalUrl(N){return at(this._baseHref,N)}path(N=!1){const $=this._platformLocation.pathname+ht(this._platformLocation.search),X=this._platformLocation.hash;return X&&N?`${$}${X}`:$}pushState(N,$,X,xe){const qe=this.prepareExternalUrl(X+ht(xe));this._platformLocation.pushState(N,$,qe)}replaceState(N,$,X,xe){const qe=this.prepareExternalUrl(X+ht(xe));this._platformLocation.replaceState(N,$,qe)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(N=0){this._platformLocation.historyGo?.(N)}}return x.\u0275fac=function(N){return new(N||x)(S.LFG(be),S.LFG(Ue,8))},x.\u0275prov=S.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})(),Xe=(()=>{class x extends Nt{constructor(N,$){super(),this._platformLocation=N,this._baseHref="",this._removeListenerFns=[],null!=$&&(this._baseHref=$)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(N){this._removeListenerFns.push(this._platformLocation.onPopState(N),this._platformLocation.onHashChange(N))}getBaseHref(){return this._baseHref}path(N=!1){let $=this._platformLocation.hash;return null==$&&($="#"),$.length>0?$.substring(1):$}prepareExternalUrl(N){const $=at(this._baseHref,N);return $.length>0?"#"+$:$}pushState(N,$,X,xe){let qe=this.prepareExternalUrl(X+ht(xe));0==qe.length&&(qe=this._platformLocation.pathname),this._platformLocation.pushState(N,$,qe)}replaceState(N,$,X,xe){let qe=this.prepareExternalUrl(X+ht(xe));0==qe.length&&(qe=this._platformLocation.pathname),this._platformLocation.replaceState(N,$,qe)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(N=0){this._platformLocation.historyGo?.(N)}}return x.\u0275fac=function(N){return new(N||x)(S.LFG(be),S.LFG(Ue,8))},x.\u0275prov=S.Yz7({token:x,factory:x.\u0275fac}),x})(),ct=(()=>{class x{constructor(N){this._subject=new S.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=N;const $=this._locationStrategy.getBaseHref();this._basePath=function ft(x){if(new RegExp("^(https?:)?//").test(x)){const[,N]=x.split(/\/\/[^\/]+/);return N}return x}(We(He($))),this._locationStrategy.onPopState(X=>{this._subject.emit({url:this.path(!0),pop:!0,state:X.state,type:X.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(N=!1){return this.normalize(this._locationStrategy.path(N))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(N,$=""){return this.path()==this.normalize(N+ht($))}normalize(N){return x.stripTrailingSlash(function Be(x,V){if(!x||!V.startsWith(x))return V;const N=V.substring(x.length);return""===N||["/",";","?","#"].includes(N[0])?N:V}(this._basePath,He(N)))}prepareExternalUrl(N){return N&&"/"!==N[0]&&(N="/"+N),this._locationStrategy.prepareExternalUrl(N)}go(N,$="",X=null){this._locationStrategy.pushState(X,"",N,$),this._notifyUrlChangeListeners(this.prepareExternalUrl(N+ht($)),X)}replaceState(N,$="",X=null){this._locationStrategy.replaceState(X,"",N,$),this._notifyUrlChangeListeners(this.prepareExternalUrl(N+ht($)),X)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(N=0){this._locationStrategy.historyGo?.(N)}onUrlChange(N){return this._urlChangeListeners.push(N),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe($=>{this._notifyUrlChangeListeners($.url,$.state)})),()=>{const $=this._urlChangeListeners.indexOf(N);this._urlChangeListeners.splice($,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(N="",$){this._urlChangeListeners.forEach(X=>X(N,$))}subscribe(N,$,X){return this._subject.subscribe({next:N,error:$,complete:X})}}return x.normalizeQueryParams=ht,x.joinWithSlash=at,x.stripTrailingSlash=We,x.\u0275fac=function(N){return new(N||x)(S.LFG(Nt))},x.\u0275prov=S.Yz7({token:x,factory:function(){return function tt(){return new ct((0,S.LFG)(Nt))}()},providedIn:"root"}),x})();function He(x){return x.replace(/\/index.html$/,"")}var At=(()=>((At=At||{})[At.Decimal=0]="Decimal",At[At.Percent=1]="Percent",At[At.Currency=2]="Currency",At[At.Scientific=3]="Scientific",At))(),Yt=(()=>((Yt=Yt||{})[Yt.Format=0]="Format",Yt[Yt.Standalone=1]="Standalone",Yt))(),_t=(()=>((_t=_t||{})[_t.Narrow=0]="Narrow",_t[_t.Abbreviated=1]="Abbreviated",_t[_t.Wide=2]="Wide",_t[_t.Short=3]="Short",_t))(),Dt=(()=>((Dt=Dt||{})[Dt.Short=0]="Short",Dt[Dt.Medium=1]="Medium",Dt[Dt.Long=2]="Long",Dt[Dt.Full=3]="Full",Dt))(),Et=(()=>((Et=Et||{})[Et.Decimal=0]="Decimal",Et[Et.Group=1]="Group",Et[Et.List=2]="List",Et[Et.PercentSign=3]="PercentSign",Et[Et.PlusSign=4]="PlusSign",Et[Et.MinusSign=5]="MinusSign",Et[Et.Exponential=6]="Exponential",Et[Et.SuperscriptingExponent=7]="SuperscriptingExponent",Et[Et.PerMille=8]="PerMille",Et[Et.Infinity=9]="Infinity",Et[Et.NaN=10]="NaN",Et[Et.TimeSeparator=11]="TimeSeparator",Et[Et.CurrencyDecimal=12]="CurrencyDecimal",Et[Et.CurrencyGroup=13]="CurrencyGroup",Et))();function sn(x,V){return Vr((0,S.cg1)(x)[S.wAp.DateFormat],V)}function Tt(x,V){return Vr((0,S.cg1)(x)[S.wAp.TimeFormat],V)}function Cn(x,V){return Vr((0,S.cg1)(x)[S.wAp.DateTimeFormat],V)}function Jt(x,V){const N=(0,S.cg1)(x),$=N[S.wAp.NumberSymbols][V];if(typeof $>"u"){if(V===Et.CurrencyDecimal)return N[S.wAp.NumberSymbols][Et.Decimal];if(V===Et.CurrencyGroup)return N[S.wAp.NumberSymbols][Et.Group]}return $}function en(x){if(!x[S.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${x[S.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Vr(x,V){for(let N=V;N>-1;N--)if(typeof x[N]<"u")return x[N];throw new Error("Locale data API: locale data undefined")}function Vt(x){const[V,N]=x.split(":");return{hours:+V,minutes:+N}}const ai=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Vs={},nn=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var mn=(()=>((mn=mn||{})[mn.Short=0]="Short",mn[mn.ShortGMT=1]="ShortGMT",mn[mn.Long=2]="Long",mn[mn.Extended=3]="Extended",mn))(),vt=(()=>((vt=vt||{})[vt.FullYear=0]="FullYear",vt[vt.Month=1]="Month",vt[vt.Date=2]="Date",vt[vt.Hours=3]="Hours",vt[vt.Minutes=4]="Minutes",vt[vt.Seconds=5]="Seconds",vt[vt.FractionalSeconds=6]="FractionalSeconds",vt[vt.Day=7]="Day",vt))(),Wt=(()=>((Wt=Wt||{})[Wt.DayPeriods=0]="DayPeriods",Wt[Wt.Days=1]="Days",Wt[Wt.Months=2]="Months",Wt[Wt.Eras=3]="Eras",Wt))();function li(x,V,N,$){let X=function ve(x){if(le(x))return x;if("number"==typeof x&&!isNaN(x))return new Date(x);if("string"==typeof x){if(x=x.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(x)){const[X,xe=1,qe=1]=x.split("-").map(Ot=>+Ot);return ei(X,xe-1,qe)}const N=parseFloat(x);if(!isNaN(x-N))return new Date(N);let $;if($=x.match(ai))return function it(x){const V=new Date(0);let N=0,$=0;const X=x[8]?V.setUTCFullYear:V.setFullYear,xe=x[8]?V.setUTCHours:V.setHours;x[9]&&(N=Number(x[9]+x[10]),$=Number(x[9]+x[11])),X.call(V,Number(x[1]),Number(x[2])-1,Number(x[3]));const qe=Number(x[4]||0)-N,Ot=Number(x[5]||0)-$,mr=Number(x[6]||0),Un=Math.floor(1e3*parseFloat("0."+(x[7]||0)));return xe.call(V,qe,Ot,mr,Un),V}($)}const V=new Date(x);if(!le(V))throw new Error(`Unable to convert "${x}" into a date`);return V}(x);V=fr(N,V)||V;let Ot,qe=[];for(;V;){if(Ot=nn.exec(V),!Ot){qe.push(V);break}{qe=qe.concat(Ot.slice(1));const Mn=qe.pop();if(!Mn)break;V=Mn}}let mr=X.getTimezoneOffset();$&&(mr=ee($,mr),X=function Ze(x,V,N){const $=N?-1:1,X=x.getTimezoneOffset();return function ue(x,V){return(x=new Date(x.getTime())).setMinutes(x.getMinutes()+V),x}(x,$*(ee(V,X)-X))}(X,$,!0));let Un="";return qe.forEach(Mn=>{const Tn=function re(x){if(Zr[x])return Zr[x];let V;switch(x){case"G":case"GG":case"GGG":V=cn(Wt.Eras,_t.Abbreviated);break;case"GGGG":V=cn(Wt.Eras,_t.Wide);break;case"GGGGG":V=cn(Wt.Eras,_t.Narrow);break;case"y":V=Zn(vt.FullYear,1,0,!1,!0);break;case"yy":V=Zn(vt.FullYear,2,0,!0,!0);break;case"yyy":V=Zn(vt.FullYear,3,0,!1,!0);break;case"yyyy":V=Zn(vt.FullYear,4,0,!1,!0);break;case"Y":V=Ki(1);break;case"YY":V=Ki(2,!0);break;case"YYY":V=Ki(3);break;case"YYYY":V=Ki(4);break;case"M":case"L":V=Zn(vt.Month,1,1);break;case"MM":case"LL":V=Zn(vt.Month,2,1);break;case"MMM":V=cn(Wt.Months,_t.Abbreviated);break;case"MMMM":V=cn(Wt.Months,_t.Wide);break;case"MMMMM":V=cn(Wt.Months,_t.Narrow);break;case"LLL":V=cn(Wt.Months,_t.Abbreviated,Yt.Standalone);break;case"LLLL":V=cn(Wt.Months,_t.Wide,Yt.Standalone);break;case"LLLLL":V=cn(Wt.Months,_t.Narrow,Yt.Standalone);break;case"w":V=ir(1);break;case"ww":V=ir(2);break;case"W":V=ir(1,!0);break;case"d":V=Zn(vt.Date,1);break;case"dd":V=Zn(vt.Date,2);break;case"c":case"cc":V=Zn(vt.Day,1);break;case"ccc":V=cn(Wt.Days,_t.Abbreviated,Yt.Standalone);break;case"cccc":V=cn(Wt.Days,_t.Wide,Yt.Standalone);break;case"ccccc":V=cn(Wt.Days,_t.Narrow,Yt.Standalone);break;case"cccccc":V=cn(Wt.Days,_t.Short,Yt.Standalone);break;case"E":case"EE":case"EEE":V=cn(Wt.Days,_t.Abbreviated);break;case"EEEE":V=cn(Wt.Days,_t.Wide);break;case"EEEEE":V=cn(Wt.Days,_t.Narrow);break;case"EEEEEE":V=cn(Wt.Days,_t.Short);break;case"a":case"aa":case"aaa":V=cn(Wt.DayPeriods,_t.Abbreviated);break;case"aaaa":V=cn(Wt.DayPeriods,_t.Wide);break;case"aaaaa":V=cn(Wt.DayPeriods,_t.Narrow);break;case"b":case"bb":case"bbb":V=cn(Wt.DayPeriods,_t.Abbreviated,Yt.Standalone,!0);break;case"bbbb":V=cn(Wt.DayPeriods,_t.Wide,Yt.Standalone,!0);break;case"bbbbb":V=cn(Wt.DayPeriods,_t.Narrow,Yt.Standalone,!0);break;case"B":case"BB":case"BBB":V=cn(Wt.DayPeriods,_t.Abbreviated,Yt.Format,!0);break;case"BBBB":V=cn(Wt.DayPeriods,_t.Wide,Yt.Format,!0);break;case"BBBBB":V=cn(Wt.DayPeriods,_t.Narrow,Yt.Format,!0);break;case"h":V=Zn(vt.Hours,1,-12);break;case"hh":V=Zn(vt.Hours,2,-12);break;case"H":V=Zn(vt.Hours,1);break;case"HH":V=Zn(vt.Hours,2);break;case"m":V=Zn(vt.Minutes,1);break;case"mm":V=Zn(vt.Minutes,2);break;case"s":V=Zn(vt.Seconds,1);break;case"ss":V=Zn(vt.Seconds,2);break;case"S":V=Zn(vt.FractionalSeconds,1);break;case"SS":V=Zn(vt.FractionalSeconds,2);break;case"SSS":V=Zn(vt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":V=Rn(mn.Short);break;case"ZZZZZ":V=Rn(mn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":V=Rn(mn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":V=Rn(mn.Long);break;default:return null}return Zr[x]=V,V}(Mn);Un+=Tn?Tn(X,N,mr):"''"===Mn?"'":Mn.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),Un}function ei(x,V,N){const $=new Date(0);return $.setFullYear(x,V,N),$.setHours(0,0,0),$}function fr(x,V){const N=function Ve(x){return(0,S.cg1)(x)[S.wAp.LocaleId]}(x);if(Vs[N]=Vs[N]||{},Vs[N][V])return Vs[N][V];let $="";switch(V){case"shortDate":$=sn(x,Dt.Short);break;case"mediumDate":$=sn(x,Dt.Medium);break;case"longDate":$=sn(x,Dt.Long);break;case"fullDate":$=sn(x,Dt.Full);break;case"shortTime":$=Tt(x,Dt.Short);break;case"mediumTime":$=Tt(x,Dt.Medium);break;case"longTime":$=Tt(x,Dt.Long);break;case"fullTime":$=Tt(x,Dt.Full);break;case"short":const X=fr(x,"shortTime"),xe=fr(x,"shortDate");$=Bn(Cn(x,Dt.Short),[X,xe]);break;case"medium":const qe=fr(x,"mediumTime"),Ot=fr(x,"mediumDate");$=Bn(Cn(x,Dt.Medium),[qe,Ot]);break;case"long":const mr=fr(x,"longTime"),Un=fr(x,"longDate");$=Bn(Cn(x,Dt.Long),[mr,Un]);break;case"full":const Mn=fr(x,"fullTime"),Tn=fr(x,"fullDate");$=Bn(Cn(x,Dt.Full),[Mn,Tn])}return $&&(Vs[N][V]=$),$}function Bn(x,V){return V&&(x=x.replace(/\{([^}]+)}/g,function(N,$){return null!=V&&$ in V?V[$]:N})),x}function pr(x,V,N="-",$,X){let xe="";(x<0||X&&x<=0)&&(X?x=1-x:(x=-x,xe=N));let qe=String(x);for(;qe.length<V;)qe="0"+qe;return $&&(qe=qe.slice(qe.length-V)),xe+qe}function Zn(x,V,N=0,$=!1,X=!1){return function(xe,qe){let Ot=function Di(x,V){switch(x){case vt.FullYear:return V.getFullYear();case vt.Month:return V.getMonth();case vt.Date:return V.getDate();case vt.Hours:return V.getHours();case vt.Minutes:return V.getMinutes();case vt.Seconds:return V.getSeconds();case vt.FractionalSeconds:return V.getMilliseconds();case vt.Day:return V.getDay();default:throw new Error(`Unknown DateType value "${x}".`)}}(x,xe);if((N>0||Ot>-N)&&(Ot+=N),x===vt.Hours)0===Ot&&-12===N&&(Ot=12);else if(x===vt.FractionalSeconds)return function ti(x,V){return pr(x,3).substring(0,V)}(Ot,V);const mr=Jt(qe,Et.MinusSign);return pr(Ot,V,mr,$,X)}}function cn(x,V,N=Yt.Format,$=!1){return function(X,xe){return function an(x,V,N,$,X,xe){switch(N){case Wt.Months:return function dt(x,V,N){const $=(0,S.cg1)(x),xe=Vr([$[S.wAp.MonthsFormat],$[S.wAp.MonthsStandalone]],V);return Vr(xe,N)}(V,X,$)[x.getMonth()];case Wt.Days:return function $e(x,V,N){const $=(0,S.cg1)(x),xe=Vr([$[S.wAp.DaysFormat],$[S.wAp.DaysStandalone]],V);return Vr(xe,N)}(V,X,$)[x.getDay()];case Wt.DayPeriods:const qe=x.getHours(),Ot=x.getMinutes();if(xe){const Un=function Xr(x){const V=(0,S.cg1)(x);return en(V),(V[S.wAp.ExtraData][2]||[]).map($=>"string"==typeof $?Vt($):[Vt($[0]),Vt($[1])])}(V),Mn=function Us(x,V,N){const $=(0,S.cg1)(x);en($);const xe=Vr([$[S.wAp.ExtraData][0],$[S.wAp.ExtraData][1]],V)||[];return Vr(xe,N)||[]}(V,X,$),Tn=Un.findIndex(Dr=>{if(Array.isArray(Dr)){const[Vn,Cr]=Dr,Ri=qe>=Vn.hours&&Ot>=Vn.minutes,ns=qe<Cr.hours||qe===Cr.hours&&Ot<Cr.minutes;if(Vn.hours<Cr.hours){if(Ri&&ns)return!0}else if(Ri||ns)return!0}else if(Dr.hours===qe&&Dr.minutes===Ot)return!0;return!1});if(-1!==Tn)return Mn[Tn]}return function ze(x,V,N){const $=(0,S.cg1)(x),xe=Vr([$[S.wAp.DayPeriodsFormat],$[S.wAp.DayPeriodsStandalone]],V);return Vr(xe,N)}(V,X,$)[qe<12?0:1];case Wt.Eras:return function ut(x,V){return Vr((0,S.cg1)(x)[S.wAp.Eras],V)}(V,$)[x.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${N}`)}}(X,xe,x,V,N,$)}}function Rn(x){return function(V,N,$){const X=-1*$,xe=Jt(N,Et.MinusSign),qe=X>0?Math.floor(X/60):Math.ceil(X/60);switch(x){case mn.Short:return(X>=0?"+":"")+pr(qe,2,xe)+pr(Math.abs(X%60),2,xe);case mn.ShortGMT:return"GMT"+(X>=0?"+":"")+pr(qe,1,xe);case mn.Long:return"GMT"+(X>=0?"+":"")+pr(qe,2,xe)+":"+pr(Math.abs(X%60),2,xe);case mn.Extended:return 0===$?"Z":(X>=0?"+":"")+pr(qe,2,xe)+":"+pr(Math.abs(X%60),2,xe);default:throw new Error(`Unknown zone width "${x}"`)}}}const Br=0,qn=4;function Ai(x){return ei(x.getFullYear(),x.getMonth(),x.getDate()+(qn-x.getDay()))}function ir(x,V=!1){return function(N,$){let X;if(V){const xe=new Date(N.getFullYear(),N.getMonth(),1).getDay()-1,qe=N.getDate();X=1+Math.floor((qe+xe)/7)}else{const xe=Ai(N),qe=function Tr(x){const V=ei(x,Br,1).getDay();return ei(x,0,1+(V<=qn?qn:qn+7)-V)}(xe.getFullYear()),Ot=xe.getTime()-qe.getTime();X=1+Math.round(Ot/6048e5)}return pr(X,x,Jt($,Et.MinusSign))}}function Ki(x,V=!1){return function(N,$){return pr(Ai(N).getFullYear(),x,Jt($,Et.MinusSign),V)}}const Zr={};function ee(x,V){x=x.replace(/:/g,"");const N=Date.parse("Jan 01, 1970 00:00:00 "+x)/6e4;return isNaN(N)?V:N}function le(x){return x instanceof Date&&!isNaN(x.valueOf())}const se=/^(\d+)?\.((\d+)(-(\d+))?)?$/,K=22,pe=".",Le="0",Ye=";",Bt=",",Ln="#";function bn(x){const V=parseInt(x);if(isNaN(V))throw new Error("Invalid integer literal when parsing "+x);return V}function As(x,V){V=encodeURIComponent(V);for(const N of x.split(";")){const $=N.indexOf("="),[X,xe]=-1==$?[N,""]:[N.slice(0,$),N.slice($+1)];if(X.trim()===V)return decodeURIComponent(xe)}return null}const gi=/\s+/,wt=[];let rn=(()=>{class x{constructor(N,$,X,xe){this._iterableDiffers=N,this._keyValueDiffers=$,this._ngEl=X,this._renderer=xe,this.initialClasses=wt,this.stateMap=new Map}set klass(N){this.initialClasses=null!=N?N.trim().split(gi):wt}set ngClass(N){this.rawClass="string"==typeof N?N.trim().split(gi):N}ngDoCheck(){for(const $ of this.initialClasses)this._updateState($,!0);const N=this.rawClass;if(Array.isArray(N)||N instanceof Set)for(const $ of N)this._updateState($,!0);else if(null!=N)for(const $ of Object.keys(N))this._updateState($,Boolean(N[$]));this._applyStateDiff()}_updateState(N,$){const X=this.stateMap.get(N);void 0!==X?(X.enabled!==$&&(X.changed=!0,X.enabled=$),X.touched=!0):this.stateMap.set(N,{enabled:$,changed:!0,touched:!0})}_applyStateDiff(){for(const N of this.stateMap){const $=N[0],X=N[1];X.changed?(this._toggleClass($,X.enabled),X.changed=!1):X.touched||(X.enabled&&this._toggleClass($,!1),this.stateMap.delete($)),X.touched=!1}}_toggleClass(N,$){(N=N.trim()).length>0&&N.split(gi).forEach(X=>{$?this._renderer.addClass(this._ngEl.nativeElement,X):this._renderer.removeClass(this._ngEl.nativeElement,X)})}}return x.\u0275fac=function(N){return new(N||x)(S.Y36(S.ZZ4),S.Y36(S.aQg),S.Y36(S.SBq),S.Y36(S.Qsj))},x.\u0275dir=S.lG2({type:x,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),x})();class jn{constructor(V,N,$,X){this.$implicit=V,this.ngForOf=N,this.index=$,this.count=X}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Qs=(()=>{class x{set ngForOf(N){this._ngForOf=N,this._ngForOfDirty=!0}set ngForTrackBy(N){this._trackByFn=N}get ngForTrackBy(){return this._trackByFn}constructor(N,$,X){this._viewContainer=N,this._template=$,this._differs=X,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(N){N&&(this._template=N)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const N=this._ngForOf;!this._differ&&N&&(this._differ=this._differs.find(N).create(this.ngForTrackBy))}if(this._differ){const N=this._differ.diff(this._ngForOf);N&&this._applyChanges(N)}}_applyChanges(N){const $=this._viewContainer;N.forEachOperation((X,xe,qe)=>{if(null==X.previousIndex)$.createEmbeddedView(this._template,new jn(X.item,this._ngForOf,-1,-1),null===qe?void 0:qe);else if(null==qe)$.remove(null===xe?void 0:xe);else if(null!==xe){const Ot=$.get(xe);$.move(Ot,qe),Wn(Ot,X)}});for(let X=0,xe=$.length;X<xe;X++){const Ot=$.get(X).context;Ot.index=X,Ot.count=xe,Ot.ngForOf=this._ngForOf}N.forEachIdentityChange(X=>{Wn($.get(X.currentIndex),X)})}static ngTemplateContextGuard(N,$){return!0}}return x.\u0275fac=function(N){return new(N||x)(S.Y36(S.s_b),S.Y36(S.Rgc),S.Y36(S.ZZ4))},x.\u0275dir=S.lG2({type:x,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),x})();function Wn(x,V){x.context.$implicit=V.item}let Zs=(()=>{class x{constructor(N,$){this._viewContainer=N,this._context=new En,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=$}set ngIf(N){this._context.$implicit=this._context.ngIf=N,this._updateView()}set ngIfThen(N){ca("ngIfThen",N),this._thenTemplateRef=N,this._thenViewRef=null,this._updateView()}set ngIfElse(N){ca("ngIfElse",N),this._elseTemplateRef=N,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(N,$){return!0}}return x.\u0275fac=function(N){return new(N||x)(S.Y36(S.s_b),S.Y36(S.Rgc))},x.\u0275dir=S.lG2({type:x,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),x})();class En{constructor(){this.$implicit=null,this.ngIf=null}}function ca(x,V){if(V&&!V.createEmbeddedView)throw new Error(`${x} must be a TemplateRef, but received '${(0,S.AaK)(V)}'.`)}function Qi(x,V){return new S.vHH(2100,!1)}class Ho{createSubscription(V,N){return V.subscribe({next:N,error:$=>{throw $}})}dispose(V){V.unsubscribe()}}class ol{createSubscription(V,N){return V.then(N,$=>{throw $})}dispose(V){}}const da=new ol,wo=new Ho;let Co=(()=>{class x{constructor(N){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=N}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(N){return this._obj?N!==this._obj?(this._dispose(),this.transform(N)):this._latestValue:(N&&this._subscribe(N),this._latestValue)}_subscribe(N){this._obj=N,this._strategy=this._selectStrategy(N),this._subscription=this._strategy.createSubscription(N,$=>this._updateLatestValue(N,$))}_selectStrategy(N){if((0,S.QGY)(N))return da;if((0,S.F4k)(N))return wo;throw Qi()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(N,$){N===this._obj&&(this._latestValue=$,this._ref.markForCheck())}}return x.\u0275fac=function(N){return new(N||x)(S.Y36(S.sBO,16))},x.\u0275pipe=S.Yjl({name:"async",type:x,pure:!1,standalone:!0}),x})(),ni=(()=>{class x{transform(N){if(null==N)return null;if("string"!=typeof N)throw Qi();return N.toLowerCase()}}return x.\u0275fac=function(N){return new(N||x)},x.\u0275pipe=S.Yjl({name:"lowercase",type:x,pure:!0,standalone:!0}),x})(),Sr=(()=>{class x{transform(N){if(null==N)return null;if("string"!=typeof N)throw Qi();return N.toUpperCase()}}return x.\u0275fac=function(N){return new(N||x)},x.\u0275pipe=S.Yjl({name:"uppercase",type:x,pure:!0,standalone:!0}),x})();const bo=new S.OlP("DATE_PIPE_DEFAULT_TIMEZONE"),ha=new S.OlP("DATE_PIPE_DEFAULT_OPTIONS");let Xi=(()=>{class x{constructor(N,$,X){this.locale=N,this.defaultTimezone=$,this.defaultOptions=X}transform(N,$,X,xe){if(null==N||""===N||N!=N)return null;try{return li(N,$??this.defaultOptions?.dateFormat??"mediumDate",xe||this.locale,X??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(qe){throw Qi()}}}return x.\u0275fac=function(N){return new(N||x)(S.Y36(S.soG,16),S.Y36(bo,24),S.Y36(ha,24))},x.\u0275pipe=S.Yjl({name:"date",type:x,pure:!0,standalone:!0}),x})(),cl=(()=>{class x{constructor(N){this._locale=N}transform(N,$,X){if(!function pa(x){return!(null==x||""===x||x!=x)}(N))return null;X=X||this._locale;try{return function Ht(x,V,N){return function Me(x,V,N,$,X,xe,qe=!1){let Ot="",mr=!1;if(isFinite(x)){let Un=function zt(x){let $,X,xe,qe,Ot,V=Math.abs(x)+"",N=0;for((X=V.indexOf(pe))>-1&&(V=V.replace(pe,"")),(xe=V.search(/e/i))>0?(X<0&&(X=xe),X+=+V.slice(xe+1),V=V.substring(0,xe)):X<0&&(X=V.length),xe=0;V.charAt(xe)===Le;xe++);if(xe===(Ot=V.length))$=[0],X=1;else{for(Ot--;V.charAt(Ot)===Le;)Ot--;for(X-=xe,$=[],qe=0;xe<=Ot;xe++,qe++)$[qe]=Number(V.charAt(xe))}return X>K&&($=$.splice(0,K-1),N=X-1,X=1),{digits:$,exponent:N,integerLen:X}}(x);qe&&(Un=function _n(x){if(0===x.digits[0])return x;const V=x.digits.length-x.integerLen;return x.exponent?x.exponent+=2:(0===V?x.digits.push(0,0):1===V&&x.digits.push(0),x.integerLen+=2),x}(Un));let Mn=V.minInt,Tn=V.minFrac,Dr=V.maxFrac;if(xe){const kr=xe.match(se);if(null===kr)throw new Error(`${xe} is not a valid digit info`);const zr=kr[1],rs=kr[3],wi=kr[5];null!=zr&&(Mn=bn(zr)),null!=rs&&(Tn=bn(rs)),null!=wi?Dr=bn(wi):null!=rs&&Tn>Dr&&(Dr=Tn)}!function vn(x,V,N){if(V>N)throw new Error(`The minimum number of digits after fraction (${V}) is higher than the maximum (${N}).`);let $=x.digits,X=$.length-x.integerLen;const xe=Math.min(Math.max(V,X),N);let qe=xe+x.integerLen,Ot=$[qe];if(qe>0){$.splice(Math.max(x.integerLen,qe));for(let Tn=qe;Tn<$.length;Tn++)$[Tn]=0}else{X=Math.max(0,X),x.integerLen=1,$.length=Math.max(1,qe=xe+1),$[0]=0;for(let Tn=1;Tn<qe;Tn++)$[Tn]=0}if(Ot>=5)if(qe-1<0){for(let Tn=0;Tn>qe;Tn--)$.unshift(0),x.integerLen++;$.unshift(1),x.integerLen++}else $[qe-1]++;for(;X<Math.max(0,xe);X++)$.push(0);let mr=0!==xe;const Un=V+x.integerLen,Mn=$.reduceRight(function(Tn,Dr,Vn,Cr){return Cr[Vn]=(Dr+=Tn)<10?Dr:Dr-10,mr&&(0===Cr[Vn]&&Vn>=Un?Cr.pop():mr=!1),Dr>=10?1:0},0);Mn&&($.unshift(Mn),x.integerLen++)}(Un,Tn,Dr);let Vn=Un.digits,Cr=Un.integerLen;const Ri=Un.exponent;let ns=[];for(mr=Vn.every(kr=>!kr);Cr<Mn;Cr++)Vn.unshift(0);for(;Cr<0;Cr++)Vn.unshift(0);Cr>0?ns=Vn.splice(Cr,Vn.length):(ns=Vn,Vn=[0]);const xo=[];for(Vn.length>=V.lgSize&&xo.unshift(Vn.splice(-V.lgSize,Vn.length).join(""));Vn.length>V.gSize;)xo.unshift(Vn.splice(-V.gSize,Vn.length).join(""));Vn.length&&xo.unshift(Vn.join("")),Ot=xo.join(Jt(N,$)),ns.length&&(Ot+=Jt(N,X)+ns.join("")),Ri&&(Ot+=Jt(N,Et.Exponential)+"+"+Ri)}else Ot=Jt(N,Et.Infinity);return Ot=x<0&&!mr?V.negPre+Ot+V.negSuf:V.posPre+Ot+V.posSuf,Ot}(x,function Ft(x,V="-"){const N={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},$=x.split(Ye),X=$[0],xe=$[1],qe=-1!==X.indexOf(pe)?X.split(pe):[X.substring(0,X.lastIndexOf(Le)+1),X.substring(X.lastIndexOf(Le)+1)],Ot=qe[0],mr=qe[1]||"";N.posPre=Ot.substring(0,Ot.indexOf(Ln));for(let Mn=0;Mn<mr.length;Mn++){const Tn=mr.charAt(Mn);Tn===Le?N.minFrac=N.maxFrac=Mn+1:Tn===Ln?N.maxFrac=Mn+1:N.posSuf+=Tn}const Un=Ot.split(Bt);if(N.gSize=Un[1]?Un[1].length:0,N.lgSize=Un[2]||Un[1]?(Un[2]||Un[1]).length:0,xe){const Mn=X.length-N.posPre.length-N.posSuf.length,Tn=xe.indexOf(Ln);N.negPre=xe.substring(0,Tn).replace(/'/g,""),N.negSuf=xe.slice(Tn+Mn).replace(/'/g,"")}else N.negPre=V+N.posPre,N.negSuf=N.posSuf;return N}(function xn(x,V){return(0,S.cg1)(x)[S.wAp.NumberFormats][V]}(V,At.Decimal),Jt(V,Et.MinusSign)),V,Et.Group,Et.Decimal,N)}(function cu(x){if("string"==typeof x&&!isNaN(Number(x)-parseFloat(x)))return Number(x);if("number"!=typeof x)throw new Error(`${x} is not a number`);return x}(N),X,$)}catch(xe){throw Qi()}}}return x.\u0275fac=function(N){return new(N||x)(S.Y36(S.soG,16))},x.\u0275pipe=S.Yjl({name:"number",type:x,pure:!0,standalone:!0}),x})();let es=(()=>{class x{}return x.\u0275fac=function(N){return new(N||x)},x.\u0275mod=S.oAB({type:x}),x.\u0275inj=S.cJS({}),x})();const du="browser",dl="server";function Go(x){return x===dl}let ma=(()=>{class x{}return x.\u0275prov=(0,S.Yz7)({token:x,providedIn:"root",factory:()=>new Ll((0,S.LFG)(me),window)}),x})();class Ll{constructor(V,N){this.document=V,this.window=N,this.offset=()=>[0,0]}setOffset(V){this.offset=Array.isArray(V)?()=>V:V}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(V){this.supportsScrolling()&&this.window.scrollTo(V[0],V[1])}scrollToAnchor(V){if(!this.supportsScrolling())return;const N=function eo(x,V){const N=x.getElementById(V)||x.getElementsByName(V)[0];if(N)return N;if("function"==typeof x.createTreeWalker&&x.body&&(x.body.createShadowRoot||x.body.attachShadow)){const $=x.createTreeWalker(x.body,NodeFilter.SHOW_ELEMENT);let X=$.currentNode;for(;X;){const xe=X.shadowRoot;if(xe){const qe=xe.getElementById(V)||xe.querySelector(`[name="${V}"]`);if(qe)return qe}X=$.nextNode()}}return null}(this.document,V);N&&(this.scrollToElement(N),N.focus())}setHistoryScrollRestoration(V){if(this.supportScrollRestoration()){const N=this.window.history;N&&N.scrollRestoration&&(N.scrollRestoration=V)}}scrollToElement(V){const N=V.getBoundingClientRect(),$=N.left+this.window.pageXOffset,X=N.top+this.window.pageYOffset,xe=this.offset();this.window.scrollTo($-xe[0],X-xe[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const V=fl(this.window.history)||fl(Object.getPrototypeOf(this.window.history));return!(!V||!V.writable&&!V.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function fl(x){return Object.getOwnPropertyDescriptor(x,"scrollRestoration")}class Wo{}},4650:(Pt,Re,B)=>{B.d(Re,{$8M:()=>qt,$WT:()=>Ir,$Z:()=>Mc,AFp:()=>bE,ALo:()=>tE,AaK:()=>Se,AsE:()=>S_,BQk:()=>h_,CHM:()=>Io,CRH:()=>ly,CZH:()=>vy,CqO:()=>Pv,D6c:()=>oD,EJc:()=>BS,EiD:()=>ra,EpF:()=>nb,F4k:()=>Lh,FYo:()=>hC,FiY:()=>Ar,Gf:()=>oy,GfV:()=>jm,GkF:()=>Mv,Gpc:()=>ne,JOm:()=>ta,JVY:()=>Om,JZr:()=>Nt,KtG:()=>Ba,L6k:()=>kf,LAX:()=>uo,LFG:()=>Rn,LSH:()=>Gs,Lbi:()=>tf,Lck:()=>x0,MAs:()=>up,MGl:()=>Eg,MMx:()=>Bg,MR2:()=>sI,NdJ:()=>Rv,OlP:()=>er,Oqu:()=>Zh,P3R:()=>wh,PXZ:()=>FE,Q6J:()=>cp,QGY:()=>Cg,QbO:()=>Yg,Qsj:()=>qi,R0b:()=>rl,RDi:()=>Pm,Rgc:()=>Qh,SBq:()=>Dc,Sil:()=>nf,Suo:()=>ay,TTD:()=>hl,TgZ:()=>wg,Tol:()=>db,Udp:()=>$v,VKq:()=>W_,W1O:()=>Y0,WLB:()=>L0,X6Q:()=>WS,XFs:()=>Vt,Xpm:()=>Ln,Xts:()=>ag,Y36:()=>Uu,YKP:()=>$_,YNc:()=>lp,Yjl:()=>_n,Yz7:()=>Jt,Z0I:()=>Mr,ZZ4:()=>vw,_Bn:()=>zb,_UZ:()=>c_,_Vd:()=>jf,_c5:()=>tT,_uU:()=>Sg,aQg:()=>Dy,c2e:()=>TE,cJS:()=>Jn,cg1:()=>yp,d8E:()=>t0,dDg:()=>by,dqk:()=>nn,eBb:()=>km,eFA:()=>VE,eJc:()=>J0,ekj:()=>C_,eoX:()=>RE,f3M:()=>qn,g9A:()=>EE,h0i:()=>Tp,hGG:()=>Ay,hij:()=>Dg,iGM:()=>Hg,ifc:()=>Ze,ip1:()=>Kg,jDz:()=>Wb,kL8:()=>Sb,lG2:()=>Ft,lcZ:()=>J_,lqb:()=>St,lri:()=>Cy,mCW:()=>Pu,n5z:()=>ac,oAB:()=>Ce,oJD:()=>Ff,oxw:()=>f_,pB0:()=>Tc,q3G:()=>Gr,q4F:()=>gd,qLn:()=>$f,qOj:()=>r_,qZA:()=>u_,qzn:()=>tu,rWj:()=>PE,s9C:()=>p_,sBO:()=>HE,s_b:()=>ey,soG:()=>wy,tb:()=>NE,tp0:()=>Ts,uIk:()=>o_,vHH:()=>Ue,vpe:()=>$u,wAp:()=>dn,xi3:()=>nE,xp6:()=>bC,ynx:()=>d_,z2F:()=>Ty,z3N:()=>Os,zSh:()=>Sa,zs3:()=>Th});var S=B(7579),o=B(727),q=B(9751),he=B(6451),ce=B(3099);function me(s){for(let a in s)if(s[a]===me)return a;throw Error("Could not find renamed property on target object.")}function be(s,a){for(const u in a)a.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=a[u])}function Se(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(Se).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const a=s.toString();if(null==a)return""+a;const u=a.indexOf("\n");return-1===u?a:a.substring(0,u)}function Ie(s,a){return null==s||""===s?null===a?"":a:null==a||""===a?s:s+" "+a}const te=me({__forward_ref__:me});function ne(s){return s.__forward_ref__=ne,s.toString=function(){return Se(this())},s}function de(s){return at(s)?s():s}function at(s){return"function"==typeof s&&s.hasOwnProperty(te)&&s.__forward_ref__===ne}function We(s){return s&&!!s.\u0275providers}const Nt="https://g.co/ng/security#xss";class Ue extends Error{constructor(a,u){super(Je(a,u)),this.code=a}}function Je(s,a){return`NG0${Math.abs(s)}${a?": "+a.trim():""}`}function Xe(s){return"string"==typeof s?s:null==s?"":String(s)}function ft(s,a){throw new Ue(-201,!1)}function Ct(s,a){null==s&&function xt(s,a,u,d){throw new Error(`ASSERTION ERROR: ${s}`+(null==d?"":` [Expected=> ${u} ${d} ${a} <=Actual]`))}(a,s,null,"!=")}function Jt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Jn(s){return{providers:s.providers||[],imports:s.imports||[]}}function hr(s){return Qr(s,Xr)||Qr(s,Ui)}function Mr(s){return null!==hr(s)}function Qr(s,a){return s.hasOwnProperty(a)?s[a]:null}function en(s){return s&&(s.hasOwnProperty(Us)||s.hasOwnProperty(Vr))?s[Us]:null}const Xr=me({\u0275prov:me}),Us=me({\u0275inj:me}),Ui=me({ngInjectableDef:me}),Vr=me({ngInjectorDef:me});var Vt=(()=>((Vt=Vt||{})[Vt.Default=0]="Default",Vt[Vt.Host=1]="Host",Vt[Vt.Self=2]="Self",Vt[Vt.SkipSelf=4]="SkipSelf",Vt[Vt.Optional=8]="Optional",Vt))();let lr;function oi(s){const a=lr;return lr=s,a}function ai(s,a,u){const d=hr(s);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:u&Vt.Optional?null:void 0!==a?a:void ft(Se(s))}const nn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),li={},ei="__NG_DI_FLAG__",fr="ngTempTokenPath",Bn="ngTokenPath",pr=/\n/gm,ti="\u0275",Zn="__source";let Di;function cn(s){const a=Di;return Di=s,a}function an(s,a=Vt.Default){if(void 0===Di)throw new Ue(-203,!1);return null===Di?ai(s,void 0,a):Di.get(s,a&Vt.Optional?null:void 0,a)}function Rn(s,a=Vt.Default){return(function ua(){return lr}()||an)(de(s),a)}function qn(s,a=Vt.Default){return Rn(s,Tr(a))}function Tr(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function Ai(s){const a=[];for(let u=0;u<s.length;u++){const d=de(s[u]);if(Array.isArray(d)){if(0===d.length)throw new Ue(900,!1);let h,m=Vt.Default;for(let w=0;w<d.length;w++){const D=d[w],P=Ki(D);"number"==typeof P?-1===P?h=D.token:m|=P:h=D}a.push(Rn(h,m))}else a.push(Rn(d))}return a}function ir(s,a){return s[ei]=a,s.prototype[ei]=a,s}function Ki(s){return s[ei]}function ee(s){return{toString:s}.toString()}var ue=(()=>((ue=ue||{})[ue.OnPush=0]="OnPush",ue[ue.Default=1]="Default",ue))(),Ze=(()=>{return(s=Ze||(Ze={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Ze;var s})();const ve={},it=[],le=me({\u0275cmp:me}),se=me({\u0275dir:me}),K=me({\u0275pipe:me}),pe=me({\u0275mod:me}),Le=me({\u0275fac:me}),Ye=me({__NG_ELEMENT_ID__:me});let Bt=0;function Ln(s){return ee(()=>{const a=Bs(s),u={...a,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===ue.OnPush,directiveDefs:null,pipeDefs:null,dependencies:a.standalone&&s.dependencies||null,getStandaloneInjector:null,data:s.data||{},encapsulation:s.encapsulation||Ze.Emulated,id:"c"+Bt++,styles:s.styles||it,_:null,schemas:s.schemas||null,tView:null};Zo(u);const d=s.dependencies;return u.directiveDefs=As(d,!1),u.pipeDefs=As(d,!0),u})}function yo(s){return zt(s)||vn(s)}function Me(s){return null!==s}function Ce(s){return ee(()=>({type:s.type,bootstrap:s.bootstrap||it,declarations:s.declarations||it,imports:s.imports||it,exports:s.exports||it,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function Ht(s,a){if(null==s)return ve;const u={};for(const d in s)if(s.hasOwnProperty(d)){let h=s[d],m=h;Array.isArray(h)&&(m=h[1],h=h[0]),u[h]=d,a&&(a[h]=m)}return u}function Ft(s){return ee(()=>{const a=Bs(s);return Zo(a),a})}function _n(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function zt(s){return s[le]||null}function vn(s){return s[se]||null}function bn(s){return s[K]||null}function Ir(s){const a=zt(s)||vn(s)||bn(s);return null!==a&&a.standalone}function _r(s,a){const u=s[pe]||null;if(!u&&!0===a)throw new Error(`Type ${Se(s)} does not have '\u0275mod' property.`);return u}function Bs(s){const a={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:a,exportAs:s.exportAs||null,standalone:!0===s.standalone,selectors:s.selectors||it,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Ht(s.inputs,a),outputs:Ht(s.outputs)}}function Zo(s){s.features?.forEach(a=>a(s))}function As(s,a){if(!s)return null;const u=a?bn:yo;return()=>("function"==typeof s?s():s).map(d=>u(d)).filter(Me)}const gi=0,wt=1,rn=2,gr=3,ps=4,Gn=5,jn=6,Qs=7,Wn=8,vo=9,Zs=10,En=11,ca=12,jo=13,gs=14,jr=15,wr=16,Yi=17,ms=18,mi=19,xs=20,ui=21,sr=22,Ho=1,ol=2,da=7,wo=8,Co=9,ni=10;function Ji(s){return Array.isArray(s)&&"object"==typeof s[Ho]}function Sr(s){return Array.isArray(s)&&!0===s[Ho]}function $o(s){return 0!=(4&s.flags)}function bo(s){return s.componentOffset>-1}function ha(s){return 1==(1&s.flags)}function Xi(s){return!!s.template}function ll(s){return 0!=(256&s[rn])}function js(s,a){return s.hasOwnProperty(Le)?s[Le]:null}class Xs{constructor(a,u,d){this.previousValue=a,this.currentValue=u,this.firstChange=d}isFirstChange(){return this.firstChange}}function hl(){return ma}function ma(s){return s.type.prototype.ngOnChanges&&(s.setInput=fl),Ll}function Ll(){const s=Ua(this),a=s?.current;if(a){const u=s.previous;if(u===ve)s.previous=a;else for(let d in a)u[d]=a[d];s.current=null,this.ngOnChanges(a)}}function fl(s,a,u,d){const h=this.declaredInputs[u],m=Ua(s)||function Wo(s,a){return s[eo]=a}(s,{previous:ve,current:null}),w=m.current||(m.current={}),D=m.previous,P=D[h];w[h]=new Xs(P&&P.currentValue,a,D===ve),s[d]=a}hl.ngInherit=!0;const eo="__ngSimpleChanges__";function Ua(s){return s[eo]||null}const _i=function(s,a,u){};function yi(s){for(;Array.isArray(s);)s=s[gi];return s}function to(s,a){return yi(a[s])}function vi(s,a){return yi(a[s.index])}function pl(s,a){return s.data[a]}function $r(s,a){return s[a]}function Pr(s,a){const u=a[s];return Ji(u)?u:u[gi]}function Rr(s){return 64==(64&s[rn])}function ys(s,a){return null==a?null:s[a]}function wa(s){s[ms]=0}function To(s,a){s[Gn]+=a;let u=s,d=s[gr];for(;null!==d&&(1===a&&1===u[Gn]||-1===a&&0===u[Gn]);)d[Gn]+=a,u=d,d=d[gr]}const ln={lFrame:pu(null),bindingsEnabled:!0};function gl(){return ln.bindingsEnabled}function Oe(){return ln.lFrame.lView}function hn(){return ln.lFrame.tView}function Io(s){return ln.lFrame.contextLView=s,s[Wn]}function Ba(s){return ln.lFrame.contextLView=null,s}function ri(){let s=ro();for(;null!==s&&64===s.type;)s=s.parent;return s}function ro(){return ln.lFrame.currentTNode}function Vi(s,a){const u=ln.lFrame;u.currentTNode=s,u.isParent=a}function hu(){return ln.lFrame.isParent}function on(){ln.lFrame.isParent=!1}function Or(){const s=ln.lFrame;let a=s.bindingRootIndex;return-1===a&&(a=s.bindingRootIndex=s.tView.bindingStartIndex),a}function Qo(){return ln.lFrame.bindingIndex++}function ts(s){const a=ln.lFrame,u=a.bindingIndex;return a.bindingIndex=a.bindingIndex+s,u}function _l(s,a){const u=ln.lFrame;u.bindingIndex=u.bindingRootIndex=s,qr(a)}function qr(s){ln.lFrame.currentDirectiveIndex=s}function So(s){const a=ln.lFrame.currentDirectiveIndex;return-1===a?null:s[a]}function Ha(){return ln.lFrame.currentQueryIndex}function Do(s){ln.lFrame.currentQueryIndex=s}function Ca(s){const a=s[wt];return 2===a.type?a.declTNode:1===a.type?s[jn]:null}function yl(s,a,u){if(u&Vt.SkipSelf){let h=a,m=s;for(;!(h=h.parent,null!==h||u&Vt.Host||(h=Ca(m),null===h||(m=m[jr],10&h.type))););if(null===h)return!1;a=h,s=m}const d=ln.lFrame=vl();return d.currentTNode=a,d.lView=s,!0}function Zl(s){const a=vl(),u=s[wt];ln.lFrame=a,a.currentTNode=u.firstChild,a.lView=s,a.tView=u,a.contextLView=s,a.bindingIndex=u.bindingStartIndex,a.inI18n=!1}function vl(){const s=ln.lFrame,a=null===s?null:s.child;return null===a?pu(s):a}function pu(s){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=a),a}function wn(){const s=ln.lFrame;return ln.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const ba=wn;function $a(){const s=wn();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function di(){return ln.lFrame.selectedIndex}function Pi(s){ln.lFrame.selectedIndex=s}function Hn(){const s=ln.lFrame;return pl(s.tView,s.selectedIndex)}function Cl(s,a){for(let u=a.directiveStart,d=a.directiveEnd;u<d;u++){const m=s.data[u].type.prototype,{ngAfterContentInit:w,ngAfterContentChecked:D,ngAfterViewInit:P,ngAfterViewChecked:U,ngOnDestroy:z}=m;w&&(s.contentHooks??(s.contentHooks=[])).push(-u,w),D&&((s.contentHooks??(s.contentHooks=[])).push(u,D),(s.contentCheckHooks??(s.contentCheckHooks=[])).push(u,D)),P&&(s.viewHooks??(s.viewHooks=[])).push(-u,P),U&&((s.viewHooks??(s.viewHooks=[])).push(u,U),(s.viewCheckHooks??(s.viewCheckHooks=[])).push(u,U)),null!=z&&(s.destroyHooks??(s.destroyHooks=[])).push(u,z)}}function jl(s,a,u){V(s,a,3,u)}function za(s,a,u,d){(3&s[rn])===u&&V(s,a,u,d)}function x(s,a){let u=s[rn];(3&u)===a&&(u&=2047,u+=1,s[rn]=u)}function V(s,a,u,d){const m=d??-1,w=a.length-1;let D=0;for(let P=void 0!==d?65535&s[ms]:0;P<w;P++)if("number"==typeof a[P+1]){if(D=a[P],null!=d&&D>=d)break}else a[P]<0&&(s[ms]+=65536),(D<m||-1==m)&&(N(s,u,a,P),s[ms]=(4294901760&s[ms])+P+2),P++}function N(s,a,u,d){const h=u[d]<0,m=u[d+1],D=s[h?-u[d]:u[d]];if(h){if(s[rn]>>11<s[ms]>>16&&(3&s[rn])===a){s[rn]+=2048,_i(4,D,m);try{m.call(D)}finally{_i(5,D,m)}}}else{_i(4,D,m);try{m.call(D)}finally{_i(5,D,m)}}}const $=-1;class X{constructor(a,u,d){this.factory=a,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=d}}function Vn(s,a,u){let d=0;for(;d<u.length;){const h=u[d];if("number"==typeof h){if(0!==h)break;d++;const m=u[d++],w=u[d++],D=u[d++];s.setAttribute(a,w,D,m)}else{const m=h,w=u[++d];Ri(m)?s.setProperty(a,m,w):s.setAttribute(a,m,w),d++}}return d}function Cr(s){return 3===s||4===s||6===s}function Ri(s){return 64===s.charCodeAt(0)}function ns(s,a){if(null!==a&&0!==a.length)if(null===s||0===s.length)s=a.slice();else{let u=-1;for(let d=0;d<a.length;d++){const h=a[d];"number"==typeof h?u=h:0===u||xo(s,u,h,null,-1===u||2===u?a[++d]:null)}}return s}function xo(s,a,u,d,h){let m=0,w=s.length;if(-1===a)w=-1;else for(;m<s.length;){const D=s[m++];if("number"==typeof D){if(D===a){w=-1;break}if(D>a){w=m-1;break}}}for(;m<s.length;){const D=s[m];if("number"==typeof D)break;if(D===u){if(null===d)return void(null!==h&&(s[m+1]=h));if(d===s[m+1])return void(s[m+2]=h)}m++,null!==d&&m++,null!==h&&m++}-1!==w&&(s.splice(w,0,a),m=w+1),s.splice(m++,0,u),null!==d&&s.splice(m++,0,d),null!==h&&s.splice(m++,0,h)}function kr(s){return s!==$}function zr(s){return 32767&s}function wi(s,a){let u=function rs(s){return s>>16}(s),d=a;for(;u>0;)d=d[jr],u--;return d}let Hl=!0;function so(s){const a=Hl;return Hl=s,a}const Ga=255,sc=5;let un=0;const Mo={};function Po(s,a){const u=Wa(s,a);if(-1!==u)return u;const d=a[wt];d.firstCreatePass&&(s.injectorIndex=a.length,Xn(d.data,s),Xn(a,null),Xn(d.blueprint,null));const h=Jo(s,a),m=s.injectorIndex;if(kr(h)){const w=zr(h),D=wi(h,a),P=D[wt].data;for(let U=0;U<8;U++)a[m+U]=D[w+U]|P[w+U]}return a[m+8]=h,m}function Xn(s,a){s.push(0,0,0,0,0,0,0,0,a)}function Wa(s,a){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===a[s.injectorIndex+8]?-1:s.injectorIndex}function Jo(s,a){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,d=null,h=a;for(;null!==h;){if(d=Ya(h),null===d)return $;if(u++,h=h[jr],-1!==d.injectorIndex)return d.injectorIndex|u<<16}return $}function ur(s,a,u){!function ws(s,a,u){let d;"string"==typeof u?d=u.charCodeAt(0)||0:u.hasOwnProperty(Ye)&&(d=u[Ye]),null==d&&(d=u[Ye]=un++);const h=d&Ga;a.data[s+(h>>sc)]|=1<<h}(s,a,u)}function Ka(s,a,u){if(u&Vt.Optional||void 0!==s)return s;ft()}function oc(s,a,u,d){if(u&Vt.Optional&&void 0===d&&(d=null),!(u&(Vt.Self|Vt.Host))){const h=s[vo],m=oi(void 0);try{return h?h.get(a,d,u&Vt.Optional):ai(a,d,u&Vt.Optional)}finally{oi(m)}}return Ka(d,0,u)}function _u(s,a,u,d=Vt.Default,h){if(null!==s){if(1024&a[rn]){const w=function bt(s,a,u,d,h){let m=s,w=a;for(;null!==m&&null!==w&&1024&w[rn]&&!(256&w[rn]);){const D=bl(m,w,u,d|Vt.Self,Mo);if(D!==Mo)return D;let P=m.parent;if(!P){const U=w[ui];if(U){const z=U.get(u,Mo,d);if(z!==Mo)return z}P=Ya(w),w=w[jr]}m=P}return h}(s,a,u,d,Mo);if(w!==Mo)return w}const m=bl(s,a,u,d,Mo);if(m!==Mo)return m}return oc(a,u,d,h)}function bl(s,a,u,d,h){const m=function ke(s){if("string"==typeof s)return s.charCodeAt(0)||0;const a=s.hasOwnProperty(Ye)?s[Ye]:void 0;return"number"==typeof a?a>=0?a&Ga:W:a}(u);if("function"==typeof m){if(!yl(a,s,d))return d&Vt.Host?Ka(h,0,d):oc(a,u,d,h);try{const w=m(d);if(null!=w||d&Vt.Optional)return w;ft()}finally{ba()}}else if("number"==typeof m){let w=null,D=Wa(s,a),P=$,U=d&Vt.Host?a[wr][jn]:null;for((-1===D||d&Vt.SkipSelf)&&(P=-1===D?Jo(s,a):a[D+8],P!==$&&bs(d,!1)?(w=a[wt],D=zr(P),a=wi(P,a)):D=-1);-1!==D;){const z=a[wt];if(Cs(m,D,z.data)){const Q=$n(D,a,u,w,d,U);if(Q!==Mo)return Q}P=a[D+8],P!==$&&bs(d,a[wt].data[D+8]===U)&&Cs(m,D,a)?(w=z,D=zr(P),a=wi(P,a)):D=-1}}return h}function $n(s,a,u,d,h,m){const w=a[wt],D=w.data[s+8],z=Ni(D,w,u,null==d?bo(D)&&Hl:d!=w&&0!=(3&D.type),h&Vt.Host&&m===D);return null!==z?Fr(a,w,z,D):Mo}function Ni(s,a,u,d,h){const m=s.providerIndexes,w=a.data,D=1048575&m,P=s.directiveStart,z=m>>20,fe=h?D+z:s.directiveEnd;for(let Ee=d?D:D+z;Ee<fe;Ee++){const Ge=w[Ee];if(Ee<P&&u===Ge||Ee>=P&&Ge.type===u)return Ee}if(h){const Ee=w[P];if(Ee&&Xi(Ee)&&Ee.type===u)return P}return null}function Fr(s,a,u,d){let h=s[u];const m=a.data;if(function xe(s){return s instanceof X}(h)){const w=h;w.resolving&&function tt(s,a){const u=a?`. Dependency path: ${a.join(" > ")} > ${s}`:"";throw new Ue(-200,`Circular dependency in DI detected for ${s}${u}`)}(function ct(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():Xe(s)}(m[u]));const D=so(w.canSeeViewProviders);w.resolving=!0;const P=w.injectImpl?oi(w.injectImpl):null;yl(s,d,Vt.Default);try{h=s[u]=w.factory(void 0,m,s,d),a.firstCreatePass&&u>=d.directiveStart&&function ic(s,a,u){const{ngOnChanges:d,ngOnInit:h,ngDoCheck:m}=a.type.prototype;if(d){const w=ma(a);(u.preOrderHooks??(u.preOrderHooks=[])).push(s,w),(u.preOrderCheckHooks??(u.preOrderCheckHooks=[])).push(s,w)}h&&(u.preOrderHooks??(u.preOrderHooks=[])).push(0-s,h),m&&((u.preOrderHooks??(u.preOrderHooks=[])).push(s,m),(u.preOrderCheckHooks??(u.preOrderCheckHooks=[])).push(s,m))}(u,m[u],a)}finally{null!==P&&oi(P),so(D),w.resolving=!1,ba()}}return h}function Cs(s,a,u){return!!(u[a+(s>>sc)]&1<<s)}function bs(s,a){return!(s&Vt.Self||s&Vt.Host&&a)}class ii{constructor(a,u){this._tNode=a,this._lView=u}get(a,u,d){return _u(this._tNode,this._lView,a,Tr(d),u)}}function W(){return new ii(ri(),Oe())}function ac(s){return ee(()=>{const a=s.prototype.constructor,u=a[Le]||Zi(a),d=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==d;){const m=h[Le]||Zi(h);if(m&&m!==u)return m;h=Object.getPrototypeOf(h)}return m=>new m})}function Zi(s){return at(s)?()=>{const a=Zi(de(s));return a&&a()}:js(s)}function Ya(s){const a=s[wt],u=a.type;return 2===u?a.declTNode:1===u?s[jn]:null}function qt(s){return function $l(s,a){if("class"===a)return s.classes;if("style"===a)return s.styles;const u=s.attrs;if(u){const d=u.length;let h=0;for(;h<d;){const m=u[h];if(Cr(m))break;if(0===m)h+=2;else if("number"==typeof m)for(h++;h<d&&"string"==typeof u[h];)h++;else{if(m===a)return u[h+1];h+=2}}}return null}(ri(),s)}const is="__parameters__";function Xo(s,a,u){return ee(()=>{const d=function ss(s){return function(...u){if(s){const d=s(...u);for(const h in d)this[h]=d[h]}}}(a);function h(...m){if(this instanceof h)return d.apply(this,m),this;const w=new h(...m);return D.annotation=w,D;function D(P,U,z){const Q=P.hasOwnProperty(is)?P[is]:Object.defineProperty(P,is,{value:[]})[is];for(;Q.length<=z;)Q.push(null);return(Q[z]=Q[z]||[]).push(w),P}}return u&&(h.prototype=Object.create(u.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class er{constructor(a,u){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=Jt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function $s(s,a){s.forEach(u=>Array.isArray(u)?$s(u,a):a(u))}function bu(s,a,u){a>=s.length?s.push(u):s.splice(a,0,u)}function ea(s,a){return a>=s.length-1?s.pop():s.splice(a,1)[0]}function ki(s,a,u){let d=b(s,a);return d>=0?s[1|d]=u:(d=~d,function Tl(s,a,u,d){let h=s.length;if(h==a)s.push(u,d);else if(1===h)s.push(d,s[0]),s[0]=u;else{for(h--,s.push(s[h-1],s[h]);h>a;)s[h]=s[h-2],h--;s[a]=u,s[a+1]=d}}(s,d,a,u)),d}function Il(s,a){const u=b(s,a);if(u>=0)return s[1|u]}function b(s,a){return function y(s,a,u){let d=0,h=s.length>>u;for(;h!==d;){const m=d+(h-d>>1),w=s[m<<u];if(a===w)return m<<u;w>a?h=m:d=m+1}return~(h<<u)}(s,a,1)}const Ar=ir(Xo("Optional"),8),Ts=ir(Xo("SkipSelf"),4);var ta=(()=>((ta=ta||{})[ta.Important=1]="Important",ta[ta.DashCase=2]="DashCase",ta))();const rh=new Map;let pc=0;const _e="__ngContext__";function Ae(s,a){Ji(a)?(s[_e]=a[xs],function gc(s){rh.set(s[xs],s)}(a)):s[_e]=a}let ao;function mc(s,a){return ao(s,a)}function ud(s){const a=s[gr];return Sr(a)?a[gr]:a}function ih(s){return yc(s[jo])}function Ql(s){return yc(s[ps])}function yc(s){for(;null!==s&&!Sr(s);)s=s[ps];return s}function na(s,a,u,d,h){if(null!=d){let m,w=!1;Sr(d)?m=d:Ji(d)&&(w=!0,d=d[gi]);const D=yi(d);0===s&&null!==u?null==h?Tf(a,u,D):wc(a,u,D,h||null,!0):1===s&&null!==u?wc(a,u,D,h||null,!0):2===s?function fh(s,a,u){const d=ch(s,a);d&&function uh(s,a,u,d){s.removeChild(a,u,d)}(s,d,a,u)}(a,D,w):3===s&&a.destroyNode(D),null!=m&&function Yy(s,a,u,d,h){const m=u[da];m!==yi(u)&&na(a,s,d,m,h);for(let D=ni;D<u.length;D++){const P=u[D];dd(P[wt],P,s,a,d,m)}}(a,s,m,u,h)}}function bf(s,a,u){return s.createElement(a,u)}function Xp(s,a){const u=s[Co],d=u.indexOf(a),h=a[gr];512&a[rn]&&(a[rn]&=-513,To(h,-1)),u.splice(d,1)}function yr(s,a){if(s.length<=ni)return;const u=ni+a,d=s[u];if(d){const h=d[Yi];null!==h&&h!==s&&Xp(h,d),a>0&&(s[u-1][ps]=d[ps]);const m=ea(s,ni+a);!function Em(s,a){dd(s,a,a[En],2,null,null),a[gi]=null,a[jn]=null}(d[wt],d);const w=m[mi];null!==w&&w.detachView(m[wt]),d[gr]=null,d[ps]=null,d[rn]&=-65}return d}function oh(s,a){if(!(128&a[rn])){const u=a[En];u.destroyNode&&dd(s,a,u,3,null,null),function xu(s){let a=s[jo];if(!a)return Jl(s[wt],s);for(;a;){let u=null;if(Ji(a))u=a[jo];else{const d=a[ni];d&&(u=d)}if(!u){for(;a&&!a[ps]&&a!==s;)Ji(a)&&Jl(a[wt],a),a=a[gr];null===a&&(a=s),Ji(a)&&Jl(a[wt],a),u=a&&a[ps]}a=u}}(a)}}function Jl(s,a){if(!(128&a[rn])){a[rn]&=-65,a[rn]|=128,function Ky(s,a){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let d=0;d<u.length;d+=2){const h=a[u[d]];if(!(h instanceof X)){const m=u[d+1];if(Array.isArray(m))for(let w=0;w<m.length;w+=2){const D=h[m[w]],P=m[w+1];_i(4,D,P);try{P.call(D)}finally{_i(5,D,P)}}else{_i(4,h,m);try{m.call(h)}finally{_i(5,h,m)}}}}}(s,a),function ah(s,a){const u=s.cleanup,d=a[Qs];let h=-1;if(null!==u)for(let m=0;m<u.length-1;m+=2)if("string"==typeof u[m]){const w=u[m+3];w>=0?d[h=w]():d[h=-w].unsubscribe(),m+=2}else{const w=d[h=u[m+1]];u[m].call(w)}if(null!==d){for(let m=h+1;m<d.length;m++)(0,d[m])();a[Qs]=null}}(s,a),1===a[wt].type&&a[En].destroy();const u=a[Yi];if(null!==u&&Sr(a[gr])){u!==a[gr]&&Xp(u,a);const d=a[mi];null!==d&&d.detachView(s)}!function I(s){rh.delete(s[xs])}(a)}}function lh(s,a,u){return function Im(s,a,u){let d=a;for(;null!==d&&40&d.type;)d=(a=d).parent;if(null===d)return u[gi];{const{componentOffset:h}=d;if(h>-1){const{encapsulation:m}=s.data[d.directiveStart+h];if(m===Ze.None||m===Ze.Emulated)return null}return vi(d,u)}}(s,a.parent,u)}function wc(s,a,u,d,h){s.insertBefore(a,u,d,h)}function Tf(s,a,u){s.appendChild(a,u)}function Sm(s,a,u,d,h){null!==d?wc(s,a,u,d,h):Tf(s,a,u)}function ch(s,a){return s.parentNode(a)}let eg,bc,mh,Ec,Am=function Xl(s,a,u){return 40&s.type?vi(s,u):null};function cd(s,a,u,d){const h=lh(s,d,a),m=a[En],D=function If(s,a,u){return Am(s,a,u)}(d.parent||a[jn],d,a);if(null!=h)if(Array.isArray(u))for(let P=0;P<u.length;P++)Sm(m,h,u[P],D,!1);else Sm(m,h,u,D,!1);void 0!==eg&&eg(m,d,a,u,h)}function hh(s,a){if(null!==a){const u=a.type;if(3&u)return vi(a,s);if(4&u)return Mu(-1,s[a.index]);if(8&u){const d=a.child;if(null!==d)return hh(s,d);{const h=s[a.index];return Sr(h)?Mu(-1,h):yi(h)}}if(32&u)return mc(a,s)()||yi(s[a.index]);{const d=tg(s,a);return null!==d?Array.isArray(d)?d[0]:hh(ud(s[wr]),d):hh(s,a.next)}}return null}function tg(s,a){return null!==a?s[wr][jn].projection[a.projection]:null}function Mu(s,a){const u=ni+s+1;if(u<a.length){const d=a[u],h=d[wt].firstChild;if(null!==h)return hh(d,h)}return a[da]}function Sf(s,a,u,d,h,m,w){for(;null!=u;){const D=d[u.index],P=u.type;if(w&&0===a&&(D&&Ae(yi(D),d),u.flags|=2),32!=(32&u.flags))if(8&P)Sf(s,a,u.child,d,h,m,!1),na(a,s,h,D,m);else if(32&P){const U=mc(u,d);let z;for(;z=U();)na(a,s,h,z,m);na(a,s,h,D,m)}else 16&P?Mm(s,a,d,u,h,m):na(a,s,h,D,m);u=w?u.projectionNext:u.next}}function dd(s,a,u,d,h,m){Sf(u,d,s.firstChild,a,h,m,!1)}function Mm(s,a,u,d,h,m){const w=u[wr],P=w[jn].projection[d.projection];if(Array.isArray(P))for(let U=0;U<P.length;U++)na(a,s,h,P[U],m);else Sf(s,a,P,w[gr],h,m,!0)}function xl(s,a,u){""===u?s.removeAttribute(a,"class"):s.setAttribute(a,"class",u)}function ph(s,a,u){const{mergedAttrs:d,classes:h,styles:m}=u;null!==d&&Vn(s,a,d),null!==h&&xl(s,a,h),null!==m&&function Df(s,a,u){s.setAttribute(a,"style",u)}(s,a,m)}function Ml(s){return function Af(){if(void 0===bc&&(bc=null,nn.trustedTypes))try{bc=nn.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return bc}()?.createHTML(s)||s}function Pm(s){mh=s}function Mf(){if(void 0===Ec&&(Ec=null,nn.trustedTypes))try{Ec=nn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Ec}function lo(s){return Mf()?.createHTML(s)||s}function Pf(s){return Mf()?.createScriptURL(s)||s}class zs{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Nt})`}}class Rf extends zs{getTypeName(){return"HTML"}}class ng extends zs{getTypeName(){return"Style"}}class Nm extends zs{getTypeName(){return"Script"}}class Nf extends zs{getTypeName(){return"URL"}}class _h extends zs{getTypeName(){return"ResourceURL"}}function Os(s){return s instanceof zs?s.changingThisBreaksApplicationSecurity:s}function tu(s,a){const u=function Of(s){return s instanceof zs&&s.getTypeName()||null}(s);if(null!=u&&u!==a){if("ResourceURL"===u&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${u} (see ${Nt})`)}return u===a}function Om(s){return new Rf(s)}function kf(s){return new ng(s)}function km(s){return new Nm(s)}function uo(s){return new Nf(s)}function Tc(s){return new _h(s)}class Fm{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const u=(new window.DOMParser).parseFromString(Ml(a),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(a):(u.removeChild(u.firstChild),u)}catch{return null}}}class el{constructor(a){this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(a){const u=this.inertDocument.createElement("template");return u.innerHTML=Ml(a),u}}const rg=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Pu(s){return(s=String(s)).match(rg)?s:"unsafe:"+s}function Pl(s){const a={};for(const u of s.split(","))a[u]=!0;return a}function Ru(...s){const a={};for(const u of s)for(const d in u)u.hasOwnProperty(d)&&(a[d]=!0);return a}const Nu=Pl("area,br,col,hr,img,wbr"),ig=Pl("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),sg=Pl("rp,rt"),g=Ru(Nu,Ru(ig,Pl("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ru(sg,Pl("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ru(sg,ig)),E=Pl("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),oe=Ru(E,Pl("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Pl("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),ye=Pl("script,style,template");class rt{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let u=a.firstChild,d=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?d=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,d&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let h=this.checkClobberedElement(u,u.nextSibling);if(h){u=h;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(a){const u=a.nodeName.toLowerCase();if(!g.hasOwnProperty(u))return this.sanitizedSomething=!0,!ye.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const d=a.attributes;for(let h=0;h<d.length;h++){const m=d.item(h),w=m.name,D=w.toLowerCase();if(!oe.hasOwnProperty(D)){this.sanitizedSomething=!0;continue}let P=m.value;E[D]&&(P=Pu(P)),this.buf.push(" ",w,'="',kt(P),'"')}return this.buf.push(">"),!0}endElement(a){const u=a.nodeName.toLowerCase();g.hasOwnProperty(u)&&!Nu.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(a){this.buf.push(kt(a))}checkClobberedElement(a,u){if(u&&(a.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return u}}const Ke=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Lt=/([^\#-~ |!])/g;function kt(s){return s.replace(/&/g,"&amp;").replace(Ke,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(Lt,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Kn;function ra(s,a){let u=null;try{Kn=Kn||function yh(s){const a=new el(s);return function Ic(){try{return!!(new window.DOMParser).parseFromString(Ml(""),"text/html")}catch{return!1}}()?new Fm(a):a}(s);let d=a?String(a):"";u=Kn.getInertBodyElement(d);let h=5,m=d;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,d=m,m=u.innerHTML,u=Kn.getInertBodyElement(d)}while(d!==m);return Ml((new rt).sanitizeChildren(Ou(u)||u))}finally{if(u){const d=Ou(u)||u;for(;d.firstChild;)d.removeChild(d.firstChild)}}}function Ou(s){return"content"in s&&function Sc(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var Gr=(()=>((Gr=Gr||{})[Gr.NONE=0]="NONE",Gr[Gr.HTML=1]="HTML",Gr[Gr.STYLE=2]="STYLE",Gr[Gr.SCRIPT=3]="SCRIPT",Gr[Gr.URL=4]="URL",Gr[Gr.RESOURCE_URL=5]="RESOURCE_URL",Gr))();function Ff(s){const a=og();return a?lo(a.sanitize(Gr.HTML,s)||""):tu(s,"HTML")?lo(Os(s)):ra(function Rm(){return void 0!==mh?mh:typeof document<"u"?document:void 0}(),Xe(s))}function Gs(s){const a=og();return a?a.sanitize(Gr.URL,s)||"":tu(s,"URL")?Os(s):Pu(Xe(s))}function as(s){const a=og();if(a)return Pf(a.sanitize(Gr.RESOURCE_URL,s)||"");if(tu(s,"ResourceURL"))return Pf(Os(s));throw new Ue(904,!1)}function wh(s,a,u){return function Lf(s,a){return"src"===a&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===a&&("base"===s||"link"===s)?as:Gs}(a,u)(s)}function og(){const s=Oe();return s&&s[ca]}const ag=new er("ENVIRONMENT_INITIALIZER"),sC=new er("INJECTOR",-1),oC=new er("INJECTOR_DEF_TYPES");class ev{get(a,u=li){if(u===li){const d=new Error(`NullInjectorError: No provider for ${Se(a)}!`);throw d.name="NullInjectorError",d}return u}}function sI(s){return{\u0275providers:s}}function Lm(...s){return{\u0275providers:aC(0,s),\u0275fromNgModule:!0}}function aC(s,...a){const u=[],d=new Set;let h;return $s(a,m=>{const w=m;pd(w,u,[],d)&&(h||(h=[]),h.push(w))}),void 0!==h&&lC(h,u),u}function lC(s,a){for(let u=0;u<s.length;u++){const{providers:h}=s[u];Is(h,m=>{a.push(m)})}}function pd(s,a,u,d){if(!(s=de(s)))return!1;let h=null,m=en(s);const w=!m&&zt(s);if(m||w){if(w&&!w.standalone)return!1;h=s}else{const P=s.ngModule;if(m=en(P),!m)return!1;h=P}const D=d.has(h);if(w){if(D)return!1;if(d.add(h),w.dependencies){const P="function"==typeof w.dependencies?w.dependencies():w.dependencies;for(const U of P)pd(U,a,u,d)}}else{if(!m)return!1;{if(null!=m.imports&&!D){let U;d.add(h);try{$s(m.imports,z=>{pd(z,a,u,d)&&(U||(U=[]),U.push(z))})}finally{}void 0!==U&&lC(U,a)}if(!D){const U=js(h)||(()=>new h);a.push({provide:h,useFactory:U,deps:it},{provide:oC,useValue:h,multi:!0},{provide:ag,useValue:()=>Rn(h),multi:!0})}const P=m.providers;null==P||D||Is(P,z=>{a.push(z)})}}return h!==s&&void 0!==s.providers}function Is(s,a){for(let u of s)We(u)&&(u=u.\u0275providers),Array.isArray(u)?Is(u,a):a(u)}const Uf=me({provide:String,useValue:me});function ku(s){return null!==s&&"object"==typeof s&&Uf in s}function st(s){return"function"==typeof s}const Sa=new er("Set Injector scope."),Vf={},jt={};let Xt;function Vm(){return void 0===Xt&&(Xt=new ev),Xt}class St{}class Pe extends St{get destroyed(){return this._destroyed}constructor(a,u,d,h){super(),this.parent=u,this.source=d,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Bm(a,w=>this.processProvider(w)),this.records.set(sC,Bf(void 0,this)),h.has("environment")&&this.records.set(St,Bf(void 0,this));const m=this.records.get(Sa);null!=m&&"string"==typeof m.value&&this.scopes.add(m.value),this.injectorDefTypes=new Set(this.get(oC.multi,it,Vt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();for(const a of this._onDestroyHooks)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(a){this._onDestroyHooks.push(a)}runInContext(a){this.assertNotDestroyed();const u=cn(this),d=oi(void 0);try{return a()}finally{cn(u),oi(d)}}get(a,u=li,d=Vt.Default){this.assertNotDestroyed(),d=Tr(d);const h=cn(this),m=oi(void 0);try{if(!(d&Vt.SkipSelf)){let D=this.records.get(a);if(void 0===D){const P=function uI(s){return"function"==typeof s||"object"==typeof s&&s instanceof er}(a)&&hr(a);D=P&&this.injectableDefInScope(P)?Bf(Qe(a),Vf):null,this.records.set(a,D)}if(null!=D)return this.hydrate(a,D)}return(d&Vt.Self?Vm():this.parent).get(a,u=d&Vt.Optional&&u===li?null:u)}catch(w){if("NullInjectorError"===w.name){if((w[fr]=w[fr]||[]).unshift(Se(a)),h)throw w;return function Zr(s,a,u,d){const h=s[fr];throw a[Zn]&&h.unshift(a[Zn]),s.message=function re(s,a,u,d=null){s=s&&"\n"===s.charAt(0)&&s.charAt(1)==ti?s.slice(2):s;let h=Se(a);if(Array.isArray(a))h=a.map(Se).join(" -> ");else if("object"==typeof a){let m=[];for(let w in a)if(a.hasOwnProperty(w)){let D=a[w];m.push(w+":"+("string"==typeof D?JSON.stringify(D):Se(D)))}h=`{${m.join(", ")}}`}return`${u}${d?"("+d+")":""}[${h}]: ${s.replace(pr,"\n  ")}`}("\n"+s.message,h,u,d),s[Bn]=h,s[fr]=null,s}(w,a,"R3InjectorError",this.source)}throw w}finally{oi(m),cn(h)}}resolveInjectorInitializers(){const a=cn(this),u=oi(void 0);try{const d=this.get(ag.multi,it,Vt.Self);for(const h of d)h()}finally{cn(a),oi(u)}}toString(){const a=[],u=this.records;for(const d of u.keys())a.push(Se(d));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ue(205,!1)}processProvider(a){let u=st(a=de(a))?a:de(a&&a.provide);const d=function cC(s){return ku(s)?Bf(void 0,s.useValue):Bf(dC(s),Vf)}(a);if(st(a)||!0!==a.multi)this.records.get(u);else{let h=this.records.get(u);h||(h=Bf(void 0,Vf,!0),h.factory=()=>Ai(h.multi),this.records.set(u,h)),u=a,h.multi.push(a)}this.records.set(u,d)}hydrate(a,u){return u.value===Vf&&(u.value=jt,u.value=u.factory()),"object"==typeof u.value&&u.value&&function lI(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(a){if(!a.providedIn)return!1;const u=de(a.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function Qe(s){const a=hr(s),u=null!==a?a.factory:js(s);if(null!==u)return u;if(s instanceof er)throw new Ue(204,!1);if(s instanceof Function)return function ks(s){const a=s.length;if(a>0)throw function zl(s,a){const u=[];for(let d=0;d<s;d++)u.push(a);return u}(a,"?"),new Ue(204,!1);const u=function Jr(s){return s&&(s[Xr]||s[Ui])||null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new Ue(204,!1)}function dC(s,a,u){let d;if(st(s)){const h=de(s);return js(h)||Qe(h)}if(ku(s))d=()=>de(s.useValue);else if(function uC(s){return!(!s||!s.useFactory)}(s))d=()=>s.useFactory(...Ai(s.deps||[]));else if(function Um(s){return!(!s||!s.useExisting)}(s))d=()=>Rn(de(s.useExisting));else{const h=de(s&&(s.useClass||s.provide));if(!function aI(s){return!!s.deps}(s))return js(h)||Qe(h);d=()=>new h(...Ai(s.deps))}return d}function Bf(s,a,u=!1){return{factory:s,value:a,multi:u?[]:void 0}}function Bm(s,a){for(const u of s)Array.isArray(u)?Bm(u,a):u&&We(u)?Bm(u.\u0275providers,a):a(u)}class cI{}class dI{}class Zf{resolveComponentFactory(a){throw function hI(s){const a=Error(`No component factory found for ${Se(s)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=s,a}(a)}}let jf=(()=>{class s{}return s.NULL=new Zf,s})();function Ei(){return Kt(ri(),Oe())}function Kt(s,a){return new Dc(vi(s,a))}let Dc=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=Ei,s})();function ar(s){return s instanceof Dc?s.nativeElement:s}class hC{}let qi=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function Mt(){const s=Oe(),u=Pr(ri().index,s);return(Ji(u)?u:s)[En]}(),s})(),Zm=(()=>{class s{}return s.\u0275prov=Jt({token:s,providedIn:"root",factory:()=>null}),s})();class jm{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const gd=new jm("15.2.9"),nv={},Hf="ngOriginalError";function bh(s){return s[Hf]}class $f{constructor(){this._console=console}handleError(a){const u=this._findOriginalError(a);this._console.error("ERROR",a),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(a){let u=a&&bh(a);for(;u&&bh(u);)u=bh(u);return u||null}}function Nl(s){return s instanceof Function?s():s}function sv(s,a,u){let d=s.length;for(;;){const h=s.indexOf(a,u);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const m=a.length;if(h+m===d||s.charCodeAt(h+m)<=32)return h}u=h+1}}const $m="ng-template";function gI(s,a,u){let d=0,h=!0;for(;d<s.length;){let m=s[d++];if("string"==typeof m&&h){const w=s[d++];if(u&&"class"===m&&-1!==sv(w.toLowerCase(),a,0))return!0}else{if(1===m){for(;d<s.length&&"string"==typeof(m=s[d++]);)if(m.toLowerCase()===a)return!0;return!1}"number"==typeof m&&(h=!1)}}return!1}function _C(s){return 4===s.type&&s.value!==$m}function nl(s,a,u){return a===(4!==s.type||u?s.value:$m)}function lg(s,a,u){let d=4;const h=s.attrs||[],m=function vC(s){for(let a=0;a<s.length;a++)if(Cr(s[a]))return a;return s.length}(h);let w=!1;for(let D=0;D<a.length;D++){const P=a[D];if("number"!=typeof P){if(!w)if(4&d){if(d=2|1&d,""!==P&&!nl(s,P,u)||""===P&&1===a.length){if(ia(d))return!1;w=!0}}else{const U=8&d?P:a[++D];if(8&d&&null!==s.attrs){if(!gI(s.attrs,U,u)){if(ia(d))return!1;w=!0}continue}const Q=yC(8&d?"class":P,h,_C(s),u);if(-1===Q){if(ia(d))return!1;w=!0;continue}if(""!==U){let fe;fe=Q>m?"":h[Q+1].toLowerCase();const Ee=8&d?fe:null;if(Ee&&-1!==sv(Ee,U,0)||2&d&&U!==fe){if(ia(d))return!1;w=!0}}}}else{if(!w&&!ia(d)&&!ia(P))return!1;if(w&&ia(P))continue;w=!1,d=P|1&d}}return ia(d)||w}function ia(s){return 0==(1&s)}function yC(s,a,u,d){if(null===a)return-1;let h=0;if(d||!u){let m=!1;for(;h<a.length;){const w=a[h];if(w===s)return h;if(3===w||6===w)m=!0;else{if(1===w||2===w){let D=a[++h];for(;"string"==typeof D;)D=a[++h];continue}if(4===w)break;if(0===w){h+=4;continue}}h+=m?1:2}return-1}return function Fu(s,a){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const d=s[u];if("number"==typeof d)return-1;if(d===a)return u;u++}return-1}(a,s)}function co(s,a,u=!1){for(let d=0;d<a.length;d++)if(lg(s,a[d],u))return!0;return!1}function ug(s,a){return s?":not("+a.trim()+")":a}function CC(s){let a=s[0],u=1,d=2,h="",m=!1;for(;u<s.length;){let w=s[u];if("string"==typeof w)if(2&d){const D=s[++u];h+="["+w+(D.length>0?'="'+D+'"':"")+"]"}else 8&d?h+="."+w:4&d&&(h+=" "+w);else""!==h&&!ia(w)&&(a+=ug(m,h),h=""),d=w,m=m||!ia(d);u++}return""!==h&&(a+=ug(m,h)),a}const On={};function bC(s){EC(hn(),Oe(),di()+s,!1)}function EC(s,a,u,d){if(!d)if(3==(3&a[rn])){const m=s.preOrderCheckHooks;null!==m&&jl(a,m,u)}else{const m=s.preOrderHooks;null!==m&&za(a,m,0,u)}Pi(u)}function DC(s,a=null,u=null,d){const h=ov(s,a,u,d);return h.resolveInjectorInitializers(),h}function ov(s,a=null,u=null,d,h=new Set){const m=[u||it,Lm(s)];return d=d||("object"==typeof s?void 0:Se(s)),new Pe(m,a||Vm(),d||null,h)}let Th=(()=>{class s{static create(u,d){if(Array.isArray(u))return DC({name:""},d,u,"");{const h=u.name??"";return DC({name:h},u.parent,u.providers,h)}}}return s.THROW_IF_NOT_FOUND=li,s.NULL=new ev,s.\u0275prov=Jt({token:s,providedIn:"any",factory:()=>Rn(sC)}),s.__NG_ELEMENT_ID__=-1,s})();function Uu(s,a=Vt.Default){const u=Oe();return null===u?Rn(s,a):_u(ri(),u,de(s),a)}function Mc(){throw new Error("invalid")}function Ah(s,a){const u=s.contentQueries;if(null!==u)for(let d=0;d<u.length;d+=2){const m=u[d+1];if(-1!==m){const w=s.data[m];Do(u[d]),w.contentQueries(2,a[m],m)}}}function Vu(s,a,u,d,h,m,w,D,P,U,z){const Q=a.blueprint.slice();return Q[gi]=h,Q[rn]=76|d,(null!==z||s&&1024&s[rn])&&(Q[rn]|=1024),wa(Q),Q[gr]=Q[jr]=s,Q[Wn]=u,Q[Zs]=w||s&&s[Zs],Q[En]=D||s&&s[En],Q[ca]=P||s&&s[ca]||null,Q[vo]=U||s&&s[vo]||null,Q[jn]=m,Q[xs]=function vf(){return pc++}(),Q[ui]=z,Q[wr]=2==a.type?s[wr]:Q,Q}function vd(s,a,u,d,h){let m=s.data[a];if(null===m)m=function xh(s,a,u,d,h){const m=ro(),w=hu(),P=s.data[a]=function wd(s,a,u,d,h,m){return{type:u,index:d,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,w?m:m&&m.parent,u,a,d,h);return null===s.firstChild&&(s.firstChild=P),null!==m&&(w?null==m.child&&null!==P.parent&&(m.child=P):null===m.next&&(m.next=P,P.prev=m)),P}(s,a,u,d,h),function fu(){return ln.lFrame.inI18n}()&&(m.flags|=32);else if(64&m.type){m.type=u,m.value=d,m.attrs=h;const w=function ml(){const s=ln.lFrame,a=s.currentTNode;return s.isParent?a:a.parent}();m.injectorIndex=null===w?-1:w.injectorIndex}return Vi(m,!0),m}function Wf(s,a,u,d){if(0===u)return-1;const h=a.length;for(let m=0;m<u;m++)a.push(d),s.blueprint.push(d),s.data.push(null);return h}function Wm(s,a,u){Zl(a);try{const d=s.viewQuery;null!==d&&pg(1,d,u);const h=s.template;null!==h&&Kf(s,a,h,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Ah(s,a),s.staticViewQueries&&pg(2,s.viewQuery,u);const m=s.components;null!==m&&function Gm(s,a){for(let u=0;u<a.length;u++)Pc(s,a[u])}(a,m)}catch(d){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),d}finally{a[rn]&=-5,$a()}}function Mh(s,a,u,d){const h=a[rn];if(128!=(128&h)){Zl(a);try{wa(a),function Ps(s){return ln.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&Kf(s,a,u,2,d);const w=3==(3&h);if(w){const U=s.preOrderCheckHooks;null!==U&&jl(a,U,null)}else{const U=s.preOrderHooks;null!==U&&za(a,U,0,null),x(a,0)}if(function Xm(s){for(let a=ih(s);null!==a;a=Ql(a)){if(!a[ol])continue;const u=a[Co];for(let d=0;d<u.length;d++){const h=u[d];512&h[rn]||To(h[gr],1),h[rn]|=512}}}(a),function Jm(s){for(let a=ih(s);null!==a;a=Ql(a))for(let u=ni;u<a.length;u++){const d=a[u],h=d[wt];Rr(d)&&Mh(h,d,h.template,d[Wn])}}(a),null!==s.contentQueries&&Ah(s,a),w){const U=s.contentCheckHooks;null!==U&&jl(a,U)}else{const U=s.contentHooks;null!==U&&za(a,U,1),x(a,1)}!function OC(s,a){const u=s.hostBindingOpCodes;if(null!==u)try{for(let d=0;d<u.length;d++){const h=u[d];if(h<0)Pi(~h);else{const m=h,w=u[++d],D=u[++d];_l(w,m),D(2,a[m])}}}finally{Pi(-1)}}(s,a);const D=s.components;null!==D&&function cv(s,a){for(let u=0;u<a.length;u++)ZC(s,a[u])}(a,D);const P=s.viewQuery;if(null!==P&&pg(2,P,d),w){const U=s.viewCheckHooks;null!==U&&jl(a,U)}else{const U=s.viewHooks;null!==U&&za(a,U,2),x(a,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),a[rn]&=-41,512&a[rn]&&(a[rn]&=-513,To(a[gr],-1))}finally{$a()}}}function Kf(s,a,u,d,h){const m=di(),w=2&d;try{Pi(-1),w&&a.length>sr&&EC(s,a,sr,!1),_i(w?2:0,h),u(d,h)}finally{Pi(m),_i(w?3:1,h)}}function Km(s,a,u){if($o(a)){const h=a.directiveEnd;for(let m=a.directiveStart;m<h;m++){const w=s.data[m];w.contentQueries&&w.contentQueries(1,u[m],m)}}}function dv(s,a,u){gl()&&(function LC(s,a,u,d){const h=u.directiveStart,m=u.directiveEnd;bo(u)&&function MI(s,a,u){const d=vi(a,s),h=fv(u),m=s[Zs],w=Rc(s,Vu(s,h,null,u.onPush?32:16,d,a,m,m.createRenderer(d,u),null,null,null));s[a.index]=w}(a,u,s.data[h+u.componentOffset]),s.firstCreatePass||Po(u,a),Ae(d,a);const w=u.initialInputs;for(let D=h;D<m;D++){const P=s.data[D],U=Fr(a,s,D,u);Ae(U,a),null!==w&&wv(0,D-h,U,P,0,w),Xi(P)&&(Pr(u.index,a)[Wn]=Fr(a,s,D,u))}}(s,a,u,vi(u,a)),64==(64&u.flags)&&_v(s,a,u))}function hv(s,a,u=vi){const d=a.localNames;if(null!==d){let h=a.index+1;for(let m=0;m<d.length;m+=2){const w=d[m+1],D=-1===w?u(a,s):s[w];s[h++]=D}}}function fv(s){const a=s.tView;return null===a||a.incompleteFirstPass?s.tView=Ym(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):a}function Ym(s,a,u,d,h,m,w,D,P,U){const z=sr+d,Q=z+h,fe=function go(s,a){const u=[];for(let d=0;d<a;d++)u.push(d<s?null:On);return u}(z,Q),Ee="function"==typeof U?U():U;return fe[wt]={type:s,blueprint:fe,template:u,queries:null,viewQuery:D,declTNode:a,data:fe.slice().fill(null,z),bindingStartIndex:z,expandoStartIndex:Q,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof w?w():w,firstChild:null,schemas:P,consts:Ee,incompleteFirstPass:!1}}function si(s,a,u,d){const h=ko(a);null===u?h.push(d):(h.push(u),s.firstCreatePass&&t_(s).push(d,h.length-1))}function pv(s,a,u,d){for(let h in s)if(s.hasOwnProperty(h)){u=null===u?{}:u;const m=s[h];null===d?gv(u,a,h,m):d.hasOwnProperty(h)&&gv(u,a,d[h],m)}return u}function gv(s,a,u,d){s.hasOwnProperty(u)?s[u].push(a,d):s[u]=[a,d]}function Da(s,a,u,d,h,m,w,D){const P=vi(a,u);let z,U=a.inputs;!D&&null!=U&&(z=U[d])?(n_(s,u,z,d,h),bo(a)&&function tr(s,a){const u=Pr(a,s);16&u[rn]||(u[rn]|=32)}(u,a.index)):3&a.type&&(d=function SI(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(d),h=null!=w?w(h,a.value||"",d):h,m.setProperty(P,d,h))}function hg(s,a,u,d){if(gl()){const h=null===d?null:{"":-1},m=function DI(s,a){const u=s.directiveRegistry;let d=null,h=null;if(u)for(let m=0;m<u.length;m++){const w=u[m];if(co(a,w.selectors,!1))if(d||(d=[]),Xi(w))if(null!==w.findHostDirectiveDefs){const D=[];h=h||new Map,w.findHostDirectiveDefs(w,D,h),d.unshift(...D,w),yv(s,a,D.length)}else d.unshift(w),yv(s,a,0);else h=h||new Map,w.findHostDirectiveDefs?.(w,d,h),d.push(w)}return null===d?null:[d,h]}(s,u);let w,D;null===m?w=D=null:[w,D]=m,null!==w&&Qm(s,a,u,w,h,D),h&&function AI(s,a,u){if(a){const d=s.localNames=[];for(let h=0;h<a.length;h+=2){const m=u[a[h+1]];if(null==m)throw new Ue(-301,!1);d.push(a[h],m)}}}(u,d,h)}u.mergedAttrs=ns(u.mergedAttrs,u.attrs)}function Qm(s,a,u,d,h,m){for(let U=0;U<d.length;U++)ur(Po(u,a),s,d[U].type);!function xI(s,a,u){s.flags|=1,s.directiveStart=a,s.directiveEnd=a+u,s.providerIndexes=a}(u,s.data.length,d.length);for(let U=0;U<d.length;U++){const z=d[U];z.providersResolver&&z.providersResolver(z)}let w=!1,D=!1,P=Wf(s,a,d.length,null);for(let U=0;U<d.length;U++){const z=d[U];u.mergedAttrs=ns(u.mergedAttrs,z.hostAttrs),BC(s,u,a,P,z),VC(P,z,h),null!==z.contentQueries&&(u.flags|=4),(null!==z.hostBindings||null!==z.hostAttrs||0!==z.hostVars)&&(u.flags|=64);const Q=z.type.prototype;!w&&(Q.ngOnChanges||Q.ngOnInit||Q.ngDoCheck)&&((s.preOrderHooks??(s.preOrderHooks=[])).push(u.index),w=!0),!D&&(Q.ngOnChanges||Q.ngDoCheck)&&((s.preOrderCheckHooks??(s.preOrderCheckHooks=[])).push(u.index),D=!0),P++}!function Yf(s,a,u){const h=a.directiveEnd,m=s.data,w=a.attrs,D=[];let P=null,U=null;for(let z=a.directiveStart;z<h;z++){const Q=m[z],fe=u?u.get(Q):null,Ge=fe?fe.outputs:null;P=pv(Q.inputs,z,P,fe?fe.inputs:null),U=pv(Q.outputs,z,U,Ge);const pt=null===P||null===w||_C(a)?null:Ph(P,z,w);D.push(pt)}null!==P&&(P.hasOwnProperty("class")&&(a.flags|=8),P.hasOwnProperty("style")&&(a.flags|=16)),a.initialInputs=D,a.inputs=P,a.outputs=U}(s,u,m)}function _v(s,a,u){const d=u.directiveStart,h=u.directiveEnd,m=u.index,w=function nc(){return ln.lFrame.currentDirectiveIndex}();try{Pi(m);for(let D=d;D<h;D++){const P=s.data[D],U=a[D];qr(D),(null!==P.hostBindings||0!==P.hostVars||null!==P.hostAttrs)&&UC(P,U)}}finally{Pi(-1),qr(w)}}function UC(s,a){null!==s.hostBindings&&s.hostBindings(1,a)}function yv(s,a,u){a.componentOffset=u,(s.components??(s.components=[])).push(a.index)}function VC(s,a,u){if(u){if(a.exportAs)for(let d=0;d<a.exportAs.length;d++)u[a.exportAs[d]]=s;Xi(a)&&(u[""]=s)}}function BC(s,a,u,d,h){s.data[d]=h;const m=h.factory||(h.factory=js(h.type)),w=new X(m,Xi(h),Uu);s.blueprint[d]=w,u[d]=w,function FC(s,a,u,d,h){const m=h.hostBindings;if(m){let w=s.hostBindingOpCodes;null===w&&(w=s.hostBindingOpCodes=[]);const D=~a.index;(function mv(s){let a=s.length;for(;a>0;){const u=s[--a];if("number"==typeof u&&u<0)return u}return 0})(w)!=D&&w.push(D),w.push(u,d,m)}}(s,a,d,Wf(s,u,h.hostVars,On),h)}function Bu(s,a,u,d,h,m){const w=vi(s,a);!function vv(s,a,u,d,h,m,w){if(null==m)s.removeAttribute(a,h,u);else{const D=null==w?Xe(m):w(m,d||"",h);s.setAttribute(a,h,D,u)}}(a[En],w,m,s.value,u,d,h)}function wv(s,a,u,d,h,m){const w=m[a];if(null!==w){const D=d.setInput;for(let P=0;P<w.length;){const U=w[P++],z=w[P++],Q=w[P++];null!==D?d.setInput(u,Q,U,z):u[z]=Q}}}function Ph(s,a,u){let d=null,h=0;for(;h<u.length;){const m=u[h];if(0!==m)if(5!==m){if("number"==typeof m)break;if(s.hasOwnProperty(m)){null===d&&(d=[]);const w=s[m];for(let D=0;D<w.length;D+=2)if(w[D]===a){d.push(m,w[D+1],u[h+1]);break}}h+=2}else h+=2;else h+=4}return d}function Qf(s,a,u,d){return[s,!0,!1,a,null,0,d,u,null,null]}function ZC(s,a){const u=Pr(a,s);if(Rr(u)){const d=u[wt];48&u[rn]?Mh(d,u,d.template,u[Wn]):u[Gn]>0&&e_(u)}}function e_(s){for(let d=ih(s);null!==d;d=Ql(d))for(let h=ni;h<d.length;h++){const m=d[h];if(Rr(m))if(512&m[rn]){const w=m[wt];Mh(w,m,w.template,m[Wn])}else m[Gn]>0&&e_(m)}const u=s[wt].components;if(null!==u)for(let d=0;d<u.length;d++){const h=Pr(u[d],s);Rr(h)&&h[Gn]>0&&e_(h)}}function Pc(s,a){const u=Pr(a,s),d=u[wt];(function jC(s,a){for(let u=a.length;u<s.blueprint.length;u++)a.push(s.blueprint[u])})(d,u),Wm(d,u,u[Wn])}function Rc(s,a){return s[jo]?s[gs][ps]=a:s[jo]=a,s[gs]=a,a}function fg(s){for(;s;){s[rn]|=32;const a=ud(s);if(ll(s)&&!a)return s;s=a}return null}function Jf(s,a,u,d=!0){const h=a[Zs];h.begin&&h.begin();try{Mh(s,a,s.template,u)}catch(w){throw d&&ep(a,w),w}finally{h.end&&h.end()}}function pg(s,a,u){Do(0),a(s,u)}function ko(s){return s[Qs]||(s[Qs]=[])}function t_(s){return s.cleanup||(s.cleanup=[])}function ep(s,a){const u=s[vo],d=u?u.get($f,null):null;d&&d.handleError(a)}function n_(s,a,u,d,h){for(let m=0;m<u.length;){const w=u[m++],D=u[m++],P=a[w],U=s.data[w];null!==U.setInput?U.setInput(P,h,d,D):P[D]=h}}function ru(s,a,u){const d=to(a,s);!function bm(s,a,u){s.setValue(a,u)}(s[En],d,u)}function Cd(s,a,u){let d=u?s.styles:null,h=u?s.classes:null,m=0;if(null!==a)for(let w=0;w<a.length;w++){const D=a[w];"number"==typeof D?m=D:1==m?h=Ie(h,D):2==m&&(d=Ie(d,D+": "+a[++w]+";"))}u?s.styles=d:s.stylesWithoutHost=d,u?s.classes=h:s.classesWithoutHost=h}function mg(s,a,u,d,h=!1){for(;null!==u;){const m=a[u.index];if(null!==m&&d.push(yi(m)),Sr(m))for(let D=ni;D<m.length;D++){const P=m[D],U=P[wt].firstChild;null!==U&&mg(P[wt],P,U,d)}const w=u.type;if(8&w)mg(s,a,u.child,d);else if(32&w){const D=mc(u,a);let P;for(;P=D();)d.push(P)}else if(16&w){const D=tg(a,u);if(Array.isArray(D))d.push(...D);else{const P=ud(a[wr]);mg(P[wt],P,D,d,!0)}}u=h?u.projectionNext:u.next}return d}class tp{get rootNodes(){const a=this._lView,u=a[wt];return mg(u,a,u.firstChild,[])}constructor(a,u){this._lView=a,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Wn]}set context(a){this._lView[Wn]=a}get destroyed(){return 128==(128&this._lView[rn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[gr];if(Sr(a)){const u=a[wo],d=u?u.indexOf(this):-1;d>-1&&(yr(a,d),ea(u,d))}this._attachedToViewContainer=!1}oh(this._lView[wt],this._lView)}onDestroy(a){si(this._lView[wt],this._lView,null,a)}markForCheck(){fg(this._cdRefInjectingView||this._lView)}detach(){this._lView[rn]&=-65}reattach(){this._lView[rn]|=64}detectChanges(){Jf(this._lView[wt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ue(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function vc(s,a){dd(s,a,a[En],2,null,null)}(this._lView[wt],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new Ue(902,!1);this._appRef=a}}class PI extends tp{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;Jf(a[wt],a,a[Wn],!1)}checkNoChanges(){}get context(){return null}}class Zu extends jf{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const u=zt(a);return new Nc(u,this.ngModule)}}function HC(s){const a=[];for(let u in s)s.hasOwnProperty(u)&&a.push({propName:s[u],templateName:u});return a}class $C{constructor(a,u){this.injector=a,this.parentInjector=u}get(a,u,d){d=Tr(d);const h=this.injector.get(a,nv,d);return h!==nv||u===nv?h:this.parentInjector.get(a,u,d)}}class Nc extends dI{get inputs(){return HC(this.componentDef.inputs)}get outputs(){return HC(this.componentDef.outputs)}constructor(a,u){super(),this.componentDef=a,this.ngModule=u,this.componentType=a.type,this.selector=function _I(s){return s.map(CC).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!u}create(a,u,d,h){let m=(h=h||this.ngModule)instanceof St?h:h?.injector;m&&null!==this.componentDef.getStandaloneInjector&&(m=this.componentDef.getStandaloneInjector(m)||m);const w=m?new $C(a,m):a,D=w.get(hC,null);if(null===D)throw new Ue(407,!1);const P=w.get(Zm,null),U=D.createRenderer(null,this.componentDef),z=this.componentDef.selectors[0][0]||"div",Q=d?function kC(s,a,u){return s.selectRootElement(a,u===Ze.ShadowDom)}(U,d,this.componentDef.encapsulation):bf(U,z,function Aa(s){const a=s.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(z)),fe=this.componentDef.onPush?288:272,Ee=Ym(0,null,null,1,0,null,null,null,null,null),Ge=Vu(null,Ee,null,fe,null,null,D,U,P,w,null);let pt,Rt;Zl(Ge);try{const Gt=this.componentDef;let gn,ot=null;Gt.findHostDirectiveDefs?(gn=[],ot=new Map,Gt.findHostDirectiveDefs(Gt,gn,ot),gn.push(Gt)):gn=[Gt];const Dn=function zC(s,a){const u=s[wt],d=sr;return s[d]=a,vd(u,d,2,"#host",null)}(Ge,Q),Yr=function _g(s,a,u,d,h,m,w,D){const P=h[wt];!function RI(s,a,u,d){for(const h of s)a.mergedAttrs=ns(a.mergedAttrs,h.hostAttrs);null!==a.mergedAttrs&&(Cd(a,a.mergedAttrs,!0),null!==u&&ph(d,u,a))}(d,s,a,w);const U=m.createRenderer(a,u),z=Vu(h,fv(u),null,u.onPush?32:16,h[s.index],s,m,U,D||null,null,null);return P.firstCreatePass&&yv(P,s,d.length-1),Rc(h,z),h[s.index]=z}(Dn,Q,Gt,gn,Ge,D,U);Rt=pl(Ee,sr),Q&&function kn(s,a,u,d){if(d)Vn(s,u,["ng-version",gd.full]);else{const{attrs:h,classes:m}=function yI(s){const a=[],u=[];let d=1,h=2;for(;d<s.length;){let m=s[d];if("string"==typeof m)2===h?""!==m&&a.push(m,s[++d]):8===h&&u.push(m);else{if(!ia(h))break;h=m}d++}return{attrs:a,classes:u}}(a.selectors[0]);h&&Vn(s,u,h),m&&m.length>0&&xl(s,u,m.join(" "))}}(U,Gt,Q,d),void 0!==u&&function OI(s,a,u){const d=s.projection=[];for(let h=0;h<a.length;h++){const m=u[h];d.push(null!=m?Array.from(m):null)}}(Rt,this.ngContentSelectors,u),pt=function NI(s,a,u,d,h,m){const w=ri(),D=h[wt],P=vi(w,h);Qm(D,h,w,u,null,d);for(let z=0;z<u.length;z++)Ae(Fr(h,D,w.directiveStart+z,w),h);_v(D,h,w),P&&Ae(P,h);const U=Fr(h,D,w.directiveStart+w.componentOffset,w);if(s[Wn]=h[Wn]=U,null!==m)for(const z of m)z(U,a);return Km(D,w,s),U}(Yr,Gt,gn,ot,Ge,[bv]),Wm(Ee,Ge,null)}finally{$a()}return new qC(this.componentType,pt,Kt(Rt,Ge),Ge,Rt)}}class qC extends cI{constructor(a,u,d,h,m){super(),this.location=d,this._rootLView=h,this._tNode=m,this.instance=u,this.hostView=this.changeDetectorRef=new PI(h),this.componentType=a}setInput(a,u){const d=this._tNode.inputs;let h;if(null!==d&&(h=d[a])){const m=this._rootLView;n_(m[wt],m,h,a,u),fg(Pr(this._tNode.index,m))}}get injector(){return new ii(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function bv(){const s=ri();Cl(Oe()[wt],s)}function r_(s){let a=function Ev(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const d=[s];for(;a;){let h;if(Xi(s))h=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new Ue(903,!1);h=a.\u0275dir}if(h){if(u){d.push(h);const w=s;w.inputs=np(s.inputs),w.declaredInputs=np(s.declaredInputs),w.outputs=np(s.outputs);const D=h.hostBindings;D&&WC(s,D);const P=h.viewQuery,U=h.contentQueries;if(P&&kI(s,P),U&&FI(s,U),be(s.inputs,h.inputs),be(s.declaredInputs,h.declaredInputs),be(s.outputs,h.outputs),Xi(h)&&h.data.animation){const z=s.data;z.animation=(z.animation||[]).concat(h.data.animation)}}const m=h.features;if(m)for(let w=0;w<m.length;w++){const D=m[w];D&&D.ngInherit&&D(s),D===r_&&(u=!1)}}a=Object.getPrototypeOf(a)}!function GC(s){let a=0,u=null;for(let d=s.length-1;d>=0;d--){const h=s[d];h.hostVars=a+=h.hostVars,h.hostAttrs=ns(h.hostAttrs,u=ns(u,h.hostAttrs))}}(d)}function np(s){return s===ve?{}:s===it?[]:s}function kI(s,a){const u=s.viewQuery;s.viewQuery=u?(d,h)=>{a(d,h),u(d,h)}:a}function FI(s,a){const u=s.contentQueries;s.contentQueries=u?(d,h,m)=>{a(d,h,m),u(d,h,m)}:a}function WC(s,a){const u=s.hostBindings;s.hostBindings=u?(d,h)=>{a(d,h),u(d,h)}:a}function i_(s){return!!sp(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function sp(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function ju(s,a,u){return s[a]=u}function Fo(s,a,u){return!Object.is(s[a],u)&&(s[a]=u,!0)}function bd(s,a,u,d){const h=Fo(s,a,u);return Fo(s,a+1,d)||h}function o_(s,a,u,d){const h=Oe();return Fo(h,Qo(),a)&&(hn(),Bu(Hn(),h,s,a,u,d)),o_}function Fh(s,a,u,d){return Fo(s,Qo(),u)?a+Xe(u)+d:On}function iu(s,a,u,d,h,m){const D=bd(s,function Mi(){return ln.lFrame.bindingIndex}(),u,h);return ts(2),D?a+Xe(u)+d+Xe(h)+m:On}function lp(s,a,u,d,h,m,w,D){const P=Oe(),U=hn(),z=s+sr,Q=U.firstCreatePass?function xv(s,a,u,d,h,m,w,D,P){const U=a.consts,z=vd(a,s,4,w||null,ys(U,D));hg(a,u,z,ys(U,P)),Cl(a,z);const Q=z.tView=Ym(2,z,d,h,m,a.directiveRegistry,a.pipeRegistry,null,a.schemas,U);return null!==a.queries&&(a.queries.template(a,z),Q.queries=a.queries.embeddedTView(z)),z}(z,U,P,a,u,d,h,m,w):U.data[z];Vi(Q,!1);const fe=P[En].createComment("");cd(U,P,fe,Q),Ae(fe,P),Rc(P,P[z]=Qf(fe,P,fe,Q)),ha(Q)&&dv(U,P,Q),null!=w&&hv(P,Q,D)}function up(s){return $r(function Bl(){return ln.lFrame.contextLView}(),sr+s)}function cp(s,a,u){const d=Oe();return Fo(d,Qo(),a)&&Da(hn(),Hn(),d,s,a,d[En],u,!1),cp}function l_(s,a,u,d,h){const w=h?"class":"style";n_(s,u,a.inputs[w],w,d)}function wg(s,a,u,d){const h=Oe(),m=hn(),w=sr+s,D=h[En],P=m.firstCreatePass?function eb(s,a,u,d,h,m){const w=a.consts,P=vd(a,s,2,d,ys(w,h));return hg(a,u,P,ys(w,m)),null!==P.attrs&&Cd(P,P.attrs,!1),null!==P.mergedAttrs&&Cd(P,P.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,P),P}(w,m,h,a,u,d):m.data[w],U=h[w]=bf(D,a,function gu(){return ln.lFrame.currentNamespace}()),z=ha(P);return Vi(P,!0),ph(D,U,P),32!=(32&P.flags)&&cd(m,h,U,P),0===function Vl(){return ln.lFrame.elementDepthCount}()&&Ae(U,h),function Nr(){ln.lFrame.elementDepthCount++}(),z&&(dv(m,h,P),Km(m,P,h)),null!==d&&hv(h,P),wg}function u_(){let s=ri();hu()?on():(s=s.parent,Vi(s,!1));const a=s;!function Ms(){ln.lFrame.elementDepthCount--}();const u=hn();return u.firstCreatePass&&(Cl(u,s),$o(s)&&u.queries.elementEnd(s)),null!=a.classesWithoutHost&&function Un(s){return 0!=(8&s.flags)}(a)&&l_(u,a,Oe(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function Mn(s){return 0!=(16&s.flags)}(a)&&l_(u,a,Oe(),a.stylesWithoutHost,!1),u_}function c_(s,a,u,d){return wg(s,a,u,d),u_(),c_}function d_(s,a,u){const d=Oe(),h=hn(),m=s+sr,w=h.firstCreatePass?function tb(s,a,u,d,h){const m=a.consts,w=ys(m,d),D=vd(a,s,8,"ng-container",w);return null!==w&&Cd(D,w,!0),hg(a,u,D,ys(m,h)),null!==a.queries&&a.queries.elementStart(a,D),D}(m,h,d,a,u):h.data[m];Vi(w,!0);const D=d[m]=d[En].createComment("");return cd(h,d,D,w),Ae(D,d),ha(w)&&(dv(h,d,w),Km(h,w,d)),null!=u&&hv(d,w),d_}function h_(){let s=ri();const a=hn();return hu()?on():(s=s.parent,Vi(s,!1)),a.firstCreatePass&&(Cl(a,s),$o(s)&&a.queries.elementEnd(s)),h_}function Mv(s,a,u){return d_(s,a,u),h_(),Mv}function nb(){return Oe()}function Cg(s){return!!s&&"function"==typeof s.then}function Lh(s){return!!s&&"function"==typeof s.subscribe}const Pv=Lh;function Rv(s,a,u,d){const h=Oe(),m=hn(),w=ri();return function Ov(s,a,u,d,h,m,w){const D=ha(d),U=s.firstCreatePass&&t_(s),z=a[Wn],Q=ko(a);let fe=!0;if(3&d.type||w){const pt=vi(d,a),Rt=w?w(pt):pt,Gt=Q.length,gn=w?Dn=>w(yi(Dn[d.index])):d.index;let ot=null;if(!w&&D&&(ot=function Nv(s,a,u,d){const h=s.cleanup;if(null!=h)for(let m=0;m<h.length-1;m+=2){const w=h[m];if(w===u&&h[m+1]===d){const D=a[Qs],P=h[m+2];return D.length>P?D[P]:null}"string"==typeof w&&(m+=2)}return null}(s,a,h,d.index)),null!==ot)(ot.__ngLastListenerFn__||ot).__ngNextListenerFn__=m,ot.__ngLastListenerFn__=m,fe=!1;else{m=su(d,a,z,m,!1);const Dn=u.listen(Rt,h,m);Q.push(m,Dn),U&&U.push(h,gn,Gt,Gt+1)}}else m=su(d,a,z,m,!1);const Ee=d.outputs;let Ge;if(fe&&null!==Ee&&(Ge=Ee[h])){const pt=Ge.length;if(pt)for(let Rt=0;Rt<pt;Rt+=2){const Yr=a[Ge[Rt]][Ge[Rt+1]].subscribe(m),ds=Q.length;Q.push(m,Yr),U&&U.push(h,d.index,ds,-(ds+1))}}}(m,h,h[En],w,s,a,d),Rv}function dp(s,a,u,d){try{return _i(6,a,u),!1!==u(d)}catch(h){return ep(s,h),!1}finally{_i(7,a,u)}}function su(s,a,u,d,h){return function m(w){if(w===Function)return d;fg(s.componentOffset>-1?Pr(s.index,a):a);let P=dp(a,u,d,w),U=m.__ngNextListenerFn__;for(;U;)P=dp(a,u,U,w)&&P,U=U.__ngNextListenerFn__;return h&&!1===P&&(w.preventDefault(),w.returnValue=!1),P}}function f_(s=1){return function vs(s){return(ln.lFrame.contextLView=function Ao(s,a){for(;s>0;)a=a[jr],s--;return a}(s,ln.lFrame.contextLView))[Wn]}(s)}function p_(s,a,u){return Eg(s,"",a,"",u),p_}function Eg(s,a,u,d,h){const m=Oe(),w=Fh(m,a,u,d);return w!==On&&Da(hn(),Hn(),m,s,w,m[En],h,!1),Eg}function __(s,a){return s<<17|a<<2}function Lc(s){return s>>17&32767}function Lv(s){return 2|s}function xa(s){return(131068&s)>>2}function Dd(s,a){return-131069&s|a<<2}function Uv(s){return 1|s}function Vv(s,a,u,d,h){const m=s[u+1],w=null===a;let D=d?Lc(m):xa(m),P=!1;for(;0!==D&&(!1===P||w);){const z=s[D+1];y_(s[D],a)&&(P=!0,s[D+1]=d?Uv(z):Lv(z)),D=d?Lc(z):xa(z)}P&&(s[u+1]=d?Lv(m):Uv(m))}function y_(s,a){return null===s||null==a||(Array.isArray(s)?s[1]:s)===a||!(!Array.isArray(s)||"string"!=typeof a)&&b(s,a)>=0}const hi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function xd(s){return s.substring(hi.key,hi.keyEnd)}function Bv(s,a){const u=hi.textEnd;return u===a?-1:(a=hi.keyEnd=function jI(s,a,u){for(;a<u&&s.charCodeAt(a)>32;)a++;return a}(s,hi.key=a,u),Vh(s,a,u))}function Vh(s,a,u){for(;a<u&&s.charCodeAt(a)<=32;)a++;return a}function $v(s,a,u){return mo(s,a,u,!1),$v}function C_(s,a){return mo(s,a,null,!0),C_}function db(s){!function Ws(s,a,u,d){const h=hn(),m=ts(2);h.firstUpdatePass&&hb(h,null,m,d);const w=Oe();if(u!==On&&Fo(w,m,u)){const D=h.data[di()];if(gp(D,d)&&!qv(h,m)){let P=d?D.classesWithoutHost:D.stylesWithoutHost;null!==P&&(u=Ie(P,u||"")),l_(h,D,w,u,d)}else!function qI(s,a,u,d,h,m,w,D){h===On&&(h=it);let P=0,U=0,z=0<h.length?h[0]:null,Q=0<m.length?m[0]:null;for(;null!==z||null!==Q;){const fe=P<h.length?h[P+1]:void 0,Ee=U<m.length?m[U+1]:void 0;let pt,Ge=null;z===Q?(P+=2,U+=2,fe!==Ee&&(Ge=Q,pt=Ee)):null===Q||null!==z&&z<Q?(P+=2,Ge=z):(U+=2,Ge=Q,pt=Ee),null!==Ge&&T_(s,a,u,d,Ge,pt,w,D),z=P<h.length?h[P]:null,Q=U<m.length?m[U]:null}}(h,D,w,w[En],w[m+1],w[m+1]=function Wv(s,a,u){if(null==u||""===u)return it;const d=[],h=Os(u);if(Array.isArray(h))for(let m=0;m<h.length;m++)s(d,h[m],!0);else if("object"==typeof h)for(const m in h)h.hasOwnProperty(m)&&s(d,m,h[m]);else"string"==typeof h&&a(d,h);return d}(s,a,u),d,m)}}(E_,Ma,s,!0)}function Ma(s,a){for(let u=function Tg(s){return function jv(s){hi.key=0,hi.keyEnd=0,hi.value=0,hi.valueEnd=0,hi.textEnd=s.length}(s),Bv(s,Vh(s,0,hi.textEnd))}(a);u>=0;u=Bv(a,u))ki(s,xd(a),!0)}function mo(s,a,u,d){const h=Oe(),m=hn(),w=ts(2);m.firstUpdatePass&&hb(m,s,w,d),a!==On&&Fo(h,w,a)&&T_(m,m.data[di()],h,h[En],s,h[w+1]=function pb(s,a){return null==s||""===s||("string"==typeof a?s+=a:"object"==typeof s&&(s=Se(Os(s)))),s}(a,u),d,w)}function qv(s,a){return a>=s.expandoStartIndex}function hb(s,a,u,d){const h=s.data;if(null===h[u+1]){const m=h[di()],w=qv(s,u);gp(m,d)&&null===a&&!w&&(a=!1),a=function fb(s,a,u,d){const h=So(s);let m=d?a.residualClasses:a.residualStyles;if(null===h)0===(d?a.classBindings:a.styleBindings)&&(u=Bh(u=b_(null,s,a,u,d),a.attrs,d),m=null);else{const w=a.directiveStylingLast;if(-1===w||s[w]!==h)if(u=b_(h,s,a,u,d),null===m){let P=function $I(s,a,u){const d=u?a.classBindings:a.styleBindings;if(0!==xa(d))return s[Lc(d)]}(s,a,d);void 0!==P&&Array.isArray(P)&&(P=b_(null,s,a,P[1],d),P=Bh(P,a.attrs,d),function zv(s,a,u,d){s[Lc(u?a.classBindings:a.styleBindings)]=d}(s,a,d,P))}else m=function Gv(s,a,u){let d;const h=a.directiveEnd;for(let m=1+a.directiveStylingLast;m<h;m++)d=Bh(d,s[m].hostAttrs,u);return Bh(d,a.attrs,u)}(s,a,d)}return void 0!==m&&(d?a.residualClasses=m:a.residualStyles=m),u}(h,m,a,d),function ub(s,a,u,d,h,m){let w=m?a.classBindings:a.styleBindings,D=Lc(w),P=xa(w);s[d]=u;let z,U=!1;if(Array.isArray(u)?(z=u[1],(null===z||b(u,z)>0)&&(U=!0)):z=u,h)if(0!==P){const fe=Lc(s[D+1]);s[d+1]=__(fe,D),0!==fe&&(s[fe+1]=Dd(s[fe+1],d)),s[D+1]=function VI(s,a){return 131071&s|a<<17}(s[D+1],d)}else s[d+1]=__(D,0),0!==D&&(s[D+1]=Dd(s[D+1],d)),D=d;else s[d+1]=__(P,0),0===D?D=d:s[P+1]=Dd(s[P+1],d),P=d;U&&(s[d+1]=Lv(s[d+1])),Vv(s,z,d,!0),Vv(s,z,d,!1),function ZI(s,a,u,d,h){const m=h?s.residualClasses:s.residualStyles;null!=m&&"string"==typeof a&&b(m,a)>=0&&(u[d+1]=Uv(u[d+1]))}(a,z,s,d,m),w=__(D,P),m?a.classBindings=w:a.styleBindings=w}(h,m,a,u,w,d)}}function b_(s,a,u,d,h){let m=null;const w=u.directiveEnd;let D=u.directiveStylingLast;for(-1===D?D=u.directiveStart:D++;D<w&&(m=a[D],d=Bh(d,m.hostAttrs,h),m!==s);)D++;return null!==s&&(u.directiveStylingLast=D),d}function Bh(s,a,u){const d=u?1:2;let h=-1;if(null!==a)for(let m=0;m<a.length;m++){const w=a[m];"number"==typeof w?h=w:h===d&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),ki(s,w,!!u||a[++m]))}return void 0===s?null:s}function E_(s,a,u){const d=String(a);""!==d&&!d.includes(" ")&&ki(s,d,u)}function T_(s,a,u,d,h,m,w,D){if(!(3&a.type))return;const P=s.data,U=P[D+1],z=function lb(s){return 1==(1&s)}(U)?Ig(P,a,u,h,xa(U),w):void 0;I_(z)||(I_(m)||function UI(s){return 2==(2&s)}(U)&&(m=Ig(P,null,u,h,D,w)),function Qy(s,a,u,d,h){if(a)h?s.addClass(u,d):s.removeClass(u,d);else{let m=-1===d.indexOf("-")?void 0:ta.DashCase;null==h?s.removeStyle(u,d,m):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),m|=ta.Important),s.setStyle(u,d,h,m))}}(d,w,to(di(),u),h,m))}function Ig(s,a,u,d,h,m){const w=null===a;let D;for(;h>0;){const P=s[h],U=Array.isArray(P),z=U?P[1]:P,Q=null===z;let fe=u[h+1];fe===On&&(fe=Q?it:void 0);let Ee=Q?Il(fe,d):z===d?fe:void 0;if(U&&!I_(Ee)&&(Ee=Il(P,d)),I_(Ee)&&(D=Ee,w))return D;const Ge=s[h+1];h=w?Lc(Ge):xa(Ge)}if(null!==a){let P=m?a.residualClasses:a.residualStyles;null!=P&&(D=Il(P,d))}return D}function I_(s){return void 0!==s}function gp(s,a){return 0!=(s.flags&(a?8:16))}function Sg(s,a=""){const u=Oe(),d=hn(),h=s+sr,m=d.firstCreatePass?vd(d,h,1,a,null):d.data[h],w=u[h]=function sh(s,a){return s.createText(a)}(u[En],a);cd(d,u,w,m),Vi(m,!1)}function Zh(s){return Dg("",s,""),Zh}function Dg(s,a,u){const d=Oe(),h=Fh(d,s,a,u);return h!==On&&ru(d,di(),h),Dg}function S_(s,a,u,d,h){const m=Oe(),w=iu(m,s,a,u,d,h);return w!==On&&ru(m,di(),w),S_}function t0(s,a,u){const d=Oe();if(Fo(d,Qo(),a)){const m=hn(),w=Hn();Da(m,w,d,s,a,function gg(s,a,u){return(null===s||Xi(s))&&(u=function Va(s){for(;Array.isArray(s);){if("object"==typeof s[Ho])return s;s=s[gi]}return null}(u[a.index])),u[En]}(So(m.data),w,d),u,!0)}return t0}const $h=void 0;var XI=["en",[["a","p"],["AM","PM"],$h],[["AM","PM"],$h,$h],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],$h,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],$h,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",$h,"{1} 'at' {0}",$h],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function JI(s){const u=Math.floor(Math.abs(s)),d=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===d?1:5}];let Rd={};function yp(s){const a=function Mg(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=r0(a);if(u)return u;const d=a.split("-")[0];if(u=r0(d),u)return u;if("en"===d)return XI;throw new Ue(701,!1)}function Sb(s){return yp(s)[dn.PluralCase]}function r0(s){return s in Rd||(Rd[s]=nn.ng&&nn.ng.common&&nn.ng.common.locales&&nn.ng.common.locales[s]),Rd[s]}var dn=(()=>((dn=dn||{})[dn.LocaleId=0]="LocaleId",dn[dn.DayPeriodsFormat=1]="DayPeriodsFormat",dn[dn.DayPeriodsStandalone=2]="DayPeriodsStandalone",dn[dn.DaysFormat=3]="DaysFormat",dn[dn.DaysStandalone=4]="DaysStandalone",dn[dn.MonthsFormat=5]="MonthsFormat",dn[dn.MonthsStandalone=6]="MonthsStandalone",dn[dn.Eras=7]="Eras",dn[dn.FirstDayOfWeek=8]="FirstDayOfWeek",dn[dn.WeekendRange=9]="WeekendRange",dn[dn.DateFormat=10]="DateFormat",dn[dn.TimeFormat=11]="TimeFormat",dn[dn.DateTimeFormat=12]="DateTimeFormat",dn[dn.NumberSymbols=13]="NumberSymbols",dn[dn.NumberFormats=14]="NumberFormats",dn[dn.CurrencyCode=15]="CurrencyCode",dn[dn.CurrencySymbol=16]="CurrencySymbol",dn[dn.CurrencyName=17]="CurrencyName",dn[dn.Currencies=18]="Currencies",dn[dn.Directionality=19]="Directionality",dn[dn.PluralCase=20]="PluralCase",dn[dn.ExtraData=21]="ExtraData",dn))();const Nd="en-US";let Mb=Nd;function Ug(s,a,u,d,h){if(s=de(s),Array.isArray(s))for(let m=0;m<s.length;m++)Ug(s[m],a,u,d,h);else{const m=hn(),w=Oe();let D=st(s)?s:de(s.provide),P=dC(s);const U=ri(),z=1048575&U.providerIndexes,Q=U.directiveStart,fe=U.providerIndexes>>20;if(st(s)||!s.multi){const Ee=new X(P,h,Uu),Ge=Vg(D,a,h?z:z+fe,Q);-1===Ge?(ur(Po(U,w),m,D),Ld(m,s,a.length),a.push(D),U.directiveStart++,U.directiveEnd++,h&&(U.providerIndexes+=1048576),u.push(Ee),w.push(Ee)):(u[Ge]=Ee,w[Ge]=Ee)}else{const Ee=Vg(D,a,z+fe,Q),Ge=Vg(D,a,z,z+fe),Rt=Ge>=0&&u[Ge];if(h&&!Rt||!h&&!(Ee>=0&&u[Ee])){ur(Po(U,w),m,D);const Gt=function Ep(s,a,u,d,h){const m=new X(s,u,Uu);return m.multi=[],m.index=a,m.componentProviders=0,Zc(m,h,d&&!u),m}(h?bp:Cp,u.length,h,d,P);!h&&Rt&&(u[Ge].providerFactory=Gt),Ld(m,s,a.length,0),a.push(D),U.directiveStart++,U.directiveEnd++,h&&(U.providerIndexes+=1048576),u.push(Gt),w.push(Gt)}else Ld(m,s,Ee>-1?Ee:Ge,Zc(u[h?Ge:Ee],P,!h&&d));!h&&d&&Rt&&u[Ge].componentProviders++}}}function Ld(s,a,u,d){const h=st(a),m=function ls(s){return!!s.useClass}(a);if(h||m){const P=(m?de(a.useClass):a).prototype.ngOnDestroy;if(P){const U=s.destroyHooks||(s.destroyHooks=[]);if(!h&&a.multi){const z=U.indexOf(u);-1===z?U.push(u,[d,P]):U[z+1].push(d,P)}else U.push(u,P)}}}function Zc(s,a,u){return u&&s.componentProviders++,s.multi.push(a)-1}function Vg(s,a,u,d){for(let h=u;h<d;h++)if(a[h]===s)return h;return-1}function Cp(s,a,u,d){return H_(this.multi,[])}function bp(s,a,u,d){const h=this.multi;let m;if(this.providerFactory){const w=this.providerFactory.componentProviders,D=Fr(u,u[wt],this.providerFactory.index,d);m=D.slice(0,w),H_(h,m);for(let P=w;P<D.length;P++)m.push(D[P])}else m=[],H_(h,m);return m}function H_(s,a){for(let u=0;u<s.length;u++)a.push((0,s[u])());return a}function zb(s,a=[]){return u=>{u.providersResolver=(d,h)=>function A0(s,a,u){const d=hn();if(d.firstCreatePass){const h=Xi(s);Ug(u,d.data,d.blueprint,h,!0),Ug(a,d.data,d.blueprint,h,!1)}}(d,h?h(s):s,a)}}class Tp{}class $_{}function x0(s,a){return new q_(s,a??null)}class q_ extends Tp{constructor(a,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Zu(this);const d=_r(a);this._bootstrapComponents=Nl(d.bootstrap),this._r3Injector=ov(a,u,[{provide:Tp,useValue:this},{provide:jf,useValue:this.componentFactoryResolver}],Se(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class M0 extends $_{constructor(a){super(),this.moduleType=a}create(a){return new q_(this.moduleType,a)}}class fS extends Tp{constructor(a,u,d){super(),this.componentFactoryResolver=new Zu(this),this.instance=null;const h=new Pe([...a,{provide:Tp,useValue:this},{provide:jf,useValue:this.componentFactoryResolver}],u||Vm(),d,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function Bg(s,a,u=null){return new fS(s,a,u).injector}let P0=(()=>{class s{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const d=aC(0,u.type),h=d.length>0?Bg([d],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,h)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=Jt({token:s,providedIn:"environment",factory:()=>new s(Rn(St))}),s})();function Wb(s){s.getStandaloneInjector=a=>a.get(P0).getOrCreateStandaloneInjector(s)}function W_(s,a,u,d){return K_(Oe(),Or(),s,a,u,d)}function L0(s,a,u,d,h){return Y_(Oe(),Or(),s,a,u,d,h)}function Wh(s,a){const u=s[a];return u===On?void 0:u}function K_(s,a,u,d,h,m){const w=a+u;return Fo(s,w,h)?ju(s,w+1,m?d.call(m,h):d(h)):Wh(s,w+1)}function Y_(s,a,u,d,h,m,w){const D=a+u;return bd(s,D,h,m)?ju(s,D+2,w?d.call(w,h,m):d(h,m)):Wh(s,D+2)}function tE(s,a){const u=hn();let d;const h=s+sr;u.firstCreatePass?(d=function j0(s,a){if(a)for(let u=a.length-1;u>=0;u--){const d=a[u];if(s===d.name)return d}}(a,u.pipeRegistry),u.data[h]=d,d.onDestroy&&(u.destroyHooks??(u.destroyHooks=[])).push(h,d.onDestroy)):d=u.data[h];const m=d.factory||(d.factory=js(d.type)),w=oi(Uu);try{const D=so(!1),P=m();return so(D),function vg(s,a,u,d){u>=s.data.length&&(s.data[u]=null,s.blueprint[u]=null),a[u]=d}(u,Oe(),h,P),P}finally{oi(w)}}function J_(s,a,u){const d=s+sr,h=Oe(),m=$r(h,d);return Yh(h,d)?K_(h,Or(),a,m.transform,u,m):m.transform(u)}function nE(s,a,u,d){const h=s+sr,m=Oe(),w=$r(m,h);return Yh(m,h)?Y_(m,Or(),a,w.transform,u,d,w):w.transform(u,d)}function Yh(s,a){return s[wt].data[a].pure}function Zg(s){return a=>{setTimeout(s,void 0,a)}}const $u=class IS extends S.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,u,d){let h=a,m=u||(()=>null),w=d;if(a&&"object"==typeof a){const P=a;h=P.next?.bind(P),m=P.error?.bind(P),w=P.complete?.bind(P)}this.__isAsync&&(m=Zg(m),h&&(h=Zg(h)),w&&(w=Zg(w)));const D=super.subscribe({next:h,error:m,complete:w});return a instanceof o.w0&&a.add(D),D}};function $0(){return this._results[Symbol.iterator]()}class q0{get changes(){return this._changes||(this._changes=new $u)}constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=q0.prototype;u[Symbol.iterator]||(u[Symbol.iterator]=$0)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,u){return this._results.reduce(a,u)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,u){const d=this;d.dirty=!1;const h=function Oi(s){return s.flat(Number.POSITIVE_INFINITY)}(a);(this._changesDetected=!function Cu(s,a,u){if(s.length!==a.length)return!1;for(let d=0;d<s.length;d++){let h=s[d],m=a[d];if(u&&(h=u(h),m=u(m)),m!==h)return!1}return!0}(d._results,h,u))&&(d._results=h,d.length=h.length,d.last=h[this.length-1],d.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Qh=(()=>{class s{}return s.__NG_ELEMENT_ID__=iE,s})();const rE=Qh,z0=class extends rE{constructor(a,u,d){super(),this._declarationLView=a,this._declarationTContainer=u,this.elementRef=d}createEmbeddedView(a,u){const d=this._declarationTContainer.tView,h=Vu(this._declarationLView,d,a,16,null,d.declTNode,null,null,null,null,u||null);h[Yi]=this._declarationLView[this._declarationTContainer.index];const w=this._declarationLView[mi];return null!==w&&(h[mi]=w.createEmbeddedView(d)),Wm(d,h,a),new tp(h)}};function iE(){return X_(ri(),Oe())}function X_(s,a){return 4&s.type?new z0(a,s,Kt(s,a)):null}let ey=(()=>{class s{}return s.__NG_ELEMENT_ID__=G0,s})();function G0(){return sE(ri(),Oe())}const SS=ey,ty=class extends SS{constructor(a,u,d){super(),this._lContainer=a,this._hostTNode=u,this._hostLView=d}get element(){return Kt(this._hostTNode,this._hostLView)}get injector(){return new ii(this._hostTNode,this._hostLView)}get parentInjector(){const a=Jo(this._hostTNode,this._hostLView);if(kr(a)){const u=wi(a,this._hostLView),d=zr(a);return new ii(u[wt].data[d+8],u)}return new ii(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const u=ny(this._lContainer);return null!==u&&u[a]||null}get length(){return this._lContainer.length-ni}createEmbeddedView(a,u,d){let h,m;"number"==typeof d?h=d:null!=d&&(h=d.index,m=d.injector);const w=a.createEmbeddedView(u||{},m);return this.insert(w,h),w}createComponent(a,u,d,h,m){const w=a&&!function wu(s){return"function"==typeof s}(a);let D;if(w)D=u;else{const Q=u||{};D=Q.index,d=Q.injector,h=Q.projectableNodes,m=Q.environmentInjector||Q.ngModuleRef}const P=w?a:new Nc(zt(a)),U=d||this.parentInjector;if(!m&&null==P.ngModule){const fe=(w?U:this.parentInjector).get(St,null);fe&&(m=fe)}const z=P.create(U,h,void 0,m);return this.insert(z.hostView,D),z}insert(a,u){const d=a._lView,h=d[wt];if(function va(s){return Sr(s[gr])}(d)){const z=this.indexOf(a);if(-1!==z)this.detach(z);else{const Q=d[gr],fe=new ty(Q,Q[jn],Q[gr]);fe.detach(fe.indexOf(a))}}const m=this._adjustIndex(u),w=this._lContainer;!function Al(s,a,u,d){const h=ni+d,m=u.length;d>0&&(u[h-1][ps]=a),d<m-ni?(a[ps]=u[h],bu(u,ni+d,a)):(u.push(a),a[ps]=null),a[gr]=u;const w=a[Yi];null!==w&&u!==w&&function Ef(s,a){const u=s[Co];a[wr]!==a[gr][gr][wr]&&(s[ol]=!0),null===u?s[Co]=[a]:u.push(a)}(w,a);const D=a[mi];null!==D&&D.insertView(s),a[rn]|=64}(h,d,w,m);const D=Mu(m,w),P=d[En],U=ch(P,w[da]);return null!==U&&function Tm(s,a,u,d,h,m){d[gi]=h,d[jn]=a,dd(s,d,u,1,h,m)}(h,w[jn],P,d,U,D),a.attachToViewContainerRef(),bu(jg(w),m,a),a}move(a,u){return this.insert(a,u)}indexOf(a){const u=ny(this._lContainer);return null!==u?u.indexOf(a):-1}remove(a){const u=this._adjustIndex(a,-1),d=yr(this._lContainer,u);d&&(ea(jg(this._lContainer),u),oh(d[wt],d))}detach(a){const u=this._adjustIndex(a,-1),d=yr(this._lContainer,u);return d&&null!=ea(jg(this._lContainer),u)?new tp(d):null}_adjustIndex(a,u=0){return a??this.length+u}};function ny(s){return s[wo]}function jg(s){return s[wo]||(s[wo]=[])}function sE(s,a){let u;const d=a[s.index];if(Sr(d))u=d;else{let h;if(8&s.type)h=yi(d);else{const m=a[En];h=m.createComment("");const w=vi(s,a);wc(m,ch(m,w),h,function Dm(s,a){return s.nextSibling(a)}(m,w),!1)}a[s.index]=u=Qf(d,a,h,s),Rc(a,u)}return new ty(u,s,a)}class Jh{constructor(a){this.queryList=a,this.matches=null}clone(){return new Jh(this.queryList)}setDirty(){this.queryList.setDirty()}}class W0{constructor(a=[]){this.queries=a}createEmbeddedView(a){const u=a.queries;if(null!==u){const d=null!==a.contentQueries?a.contentQueries[0]:u.length,h=[];for(let m=0;m<d;m++){const w=u.getByIndex(m);h.push(this.queries[w.indexInDeclarationView].clone())}return new W0(h)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let u=0;u<this.queries.length;u++)null!==hy(a,u).matches&&this.queries[u].setDirty()}}class ry{constructor(a,u,d=null){this.predicate=a,this.flags=u,this.read=d}}class iy{constructor(a=[]){this.queries=a}elementStart(a,u){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(a,u)}elementEnd(a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(a)}embeddedTView(a){let u=null;for(let d=0;d<this.length;d++){const h=null!==u?u.length:0,m=this.getByIndex(d).embeddedTView(a,h);m&&(m.indexInDeclarationView=d,null!==u?u.push(m):u=[m])}return null!==u?new iy(u):null}template(a,u){for(let d=0;d<this.queries.length;d++)this.queries[d].template(a,u)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class Vd{constructor(a,u=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(a,u){this.isApplyingToNode(u)&&this.matchTNode(a,u)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,u){this.elementStart(a,u)}embeddedTView(a,u){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,u),new Vd(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let d=a.parent;for(;null!==d&&8&d.type&&d.index!==u;)d=d.parent;return u===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(a,u){const d=this.metadata.predicate;if(Array.isArray(d))for(let h=0;h<d.length;h++){const m=d[h];this.matchTNodeWithReadOption(a,u,oE(u,m)),this.matchTNodeWithReadOption(a,u,Ni(u,a,m,!1,!1))}else d===Qh?4&u.type&&this.matchTNodeWithReadOption(a,u,-1):this.matchTNodeWithReadOption(a,u,Ni(u,a,d,!1,!1))}matchTNodeWithReadOption(a,u,d){if(null!==d){const h=this.metadata.read;if(null!==h)if(h===Dc||h===ey||h===Qh&&4&u.type)this.addMatch(u.index,-2);else{const m=Ni(u,a,h,!1,!1);null!==m&&this.addMatch(u.index,m)}else this.addMatch(u.index,d)}}addMatch(a,u){null===this.matches?this.matches=[a,u]:this.matches.push(a,u)}}function oE(s,a){const u=s.localNames;if(null!==u)for(let d=0;d<u.length;d+=2)if(u[d]===a)return u[d+1];return null}function DS(s,a,u,d){return-1===u?function sy(s,a){return 11&s.type?Kt(s,a):4&s.type?X_(s,a):null}(a,s):-2===u?function AS(s,a,u){return u===Dc?Kt(a,s):u===Qh?X_(a,s):u===ey?sE(a,s):void 0}(s,a,d):Fr(s,s[wt],u,a)}function aE(s,a,u,d){const h=a[mi].queries[d];if(null===h.matches){const m=s.data,w=u.matches,D=[];for(let P=0;P<w.length;P+=2){const U=w[P];D.push(U<0?null:DS(a,m[U],w[P+1],u.metadata.read))}h.matches=D}return h.matches}function K0(s,a,u,d){const h=s.queries.getByIndex(u),m=h.matches;if(null!==m){const w=aE(s,a,h,u);for(let D=0;D<m.length;D+=2){const P=m[D];if(P>0)d.push(w[D/2]);else{const U=m[D+1],z=a[-P];for(let Q=ni;Q<z.length;Q++){const fe=z[Q];fe[Yi]===fe[gr]&&K0(fe[wt],fe,U,d)}if(null!==z[Co]){const Q=z[Co];for(let fe=0;fe<Q.length;fe++){const Ee=Q[fe];K0(Ee[wt],Ee,U,d)}}}}}return d}function Hg(s){const a=Oe(),u=hn(),d=Ha();Do(d+1);const h=hy(u,d);if(s.dirty&&function ya(s){return 4==(4&s[rn])}(a)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const m=h.crossesNgTemplate?K0(u,a,d,[]):aE(u,a,h,d);s.reset(m,ar),s.notifyOnChanges()}return!0}return!1}function oy(s,a,u){const d=hn();d.firstCreatePass&&(cy(d,new ry(s,a,u),-1),2==(2&a)&&(d.staticViewQueries=!0)),uy(d,Oe(),a)}function ay(s,a,u,d){const h=hn();if(h.firstCreatePass){const m=ri();cy(h,new ry(a,u,d),m.index),function dy(s,a){const u=s.contentQueries||(s.contentQueries=[]);a!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,a)}(h,s),2==(2&u)&&(h.staticContentQueries=!0)}uy(h,Oe(),u)}function ly(){return function lE(s,a){return s[mi].queries[a].queryList}(Oe(),Ha())}function uy(s,a,u){const d=new q0(4==(4&u));si(s,a,d,d.destroy),null===a[mi]&&(a[mi]=new W0),a[mi].queries.push(new Jh(d))}function cy(s,a,u){null===s.queries&&(s.queries=new iy),s.queries.track(new Vd(a,u))}function hy(s,a){return s.queries.getByIndex(a)}function Y0(s,a){return X_(s,a)}function J0(s){return!!_r(s)}function ow(...s){}const Kg=new er("Application Initializer");let vy=(()=>{class s{constructor(u){this.appInits=u,this.resolve=ow,this.reject=ow,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,h)=>{this.resolve=d,this.reject=h})}runInitializers(){if(this.initialized)return;const u=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const m=this.appInits[h]();if(Cg(m))u.push(m);else if(Pv(m)){const w=new Promise((D,P)=>{m.subscribe({complete:D,error:P})});u.push(w)}}Promise.all(u).then(()=>{d()}).catch(h=>{this.reject(h)}),0===u.length&&d(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(Rn(Kg,8))},s.\u0275prov=Jt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const bE=new er("AppId",{providedIn:"root",factory:function aw(){return`${Sp()}${Sp()}${Sp()}`}});function Sp(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const EE=new er("Platform Initializer"),tf=new er("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Yg=new er("AnimationModuleType");let TE=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Jt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const wy=new er("LocaleId",{providedIn:"root",factory:()=>qn(wy,Vt.Optional|Vt.SkipSelf)||function uw(){return typeof $localize<"u"&&$localize.locale||Nd}()}),BS=new er("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class DE{constructor(a,u){this.ngModuleFactory=a,this.componentFactories=u}}let nf=(()=>{class s{compileModuleSync(u){return new M0(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const d=this.compileModuleSync(u),m=Nl(_r(u).declarations).reduce((w,D)=>{const P=zt(D);return P&&w.push(new Nc(P)),w},[]);return new DE(d,m)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Jt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const ME=(()=>Promise.resolve(0))();function rf(s){typeof Zone>"u"?ME.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class rl{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new $u(!1),this.onMicrotaskEmpty=new $u(!1),this.onStable=new $u(!1),this.onError=new $u(!1),typeof Zone>"u")throw new Ue(908,!1);Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!d&&u,h.shouldCoalesceRunChangeDetection=d,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function jS(){let s=nn.requestAnimationFrame,a=nn.cancelAnimationFrame;if(typeof Zone<"u"&&s&&a){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function Qg(s){const a=()=>{!function Zd(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(nn,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,pw(s),s.isCheckStableRunning=!0,sf(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),pw(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,d,h,m,w,D)=>{try{return af(s),u.invokeTask(h,m,w,D)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||s.shouldCoalesceRunChangeDetection)&&a(),HS(s)}},onInvoke:(u,d,h,m,w,D,P)=>{try{return af(s),u.invoke(h,m,w,D,P)}finally{s.shouldCoalesceRunChangeDetection&&a(),HS(s)}},onHasTask:(u,d,h,m)=>{u.hasTask(h,m),d===h&&("microTask"==m.change?(s._hasPendingMicrotasks=m.microTask,pw(s),sf(s)):"macroTask"==m.change&&(s.hasPendingMacrotasks=m.macroTask))},onHandleError:(u,d,h,m)=>(u.handleError(h,m),s.runOutsideAngular(()=>s.onError.emit(m)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!rl.isInAngularZone())throw new Ue(909,!1)}static assertNotInAngularZone(){if(rl.isInAngularZone())throw new Ue(909,!1)}run(a,u,d){return this._inner.run(a,u,d)}runTask(a,u,d,h){const m=this._inner,w=m.scheduleEventTask("NgZoneEvent: "+h,a,fw,ow,ow);try{return m.runTask(w,u,d)}finally{m.cancelTask(w)}}runGuarded(a,u,d){return this._inner.runGuarded(a,u,d)}runOutsideAngular(a){return this._outer.run(a)}}const fw={};function sf(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function pw(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function af(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function HS(s){s._nesting--,sf(s)}class V1{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new $u,this.onMicrotaskEmpty=new $u,this.onStable=new $u,this.onError=new $u}run(a,u,d){return a.apply(u,d)}runGuarded(a,u,d){return a.apply(u,d)}runOutsideAngular(a){return a()}runTask(a,u,d,h){return a.apply(u,d)}}const Cy=new er(""),PE=new er("");let Ap,by=(()=>{class s{constructor(u,d,h){this._ngZone=u,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Ap||(function $S(s){Ap=s}(h),h.addToWindow(d)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{rl.assertNotInAngularZone(),rf(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())rf(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(u)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,d,h){let m=-1;d&&d>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(w=>w.timeoutId!==m),u(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:u,timeoutId:m,updateCb:h})}whenStable(u,d,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,d,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,d,h){return[]}}return s.\u0275fac=function(u){return new(u||s)(Rn(rl),Rn(RE),Rn(PE))},s.\u0275prov=Jt({token:s,factory:s.\u0275fac}),s})(),RE=(()=>{class s{constructor(){this._applications=new Map}registerApplication(u,d){this._applications.set(u,d)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,d=!0){return Ap?.findTestabilityInTree(this,u,d)??null}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Jt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const Hc=!1;let jd=null;const Jg=new er("AllowMultipleToken"),gw=new er("PlatformDestroyListeners"),NE=new er("appBootstrapListener");class FE{constructor(a,u){this.name=a,this.token=u}}function VE(s,a,u=[]){const d=`Platform: ${a}`,h=new er(d);return(m=[])=>{let w=BE();if(!w||w.injector.get(Jg,!1)){const D=[...u,...m,{provide:h,useValue:!0}];s?s(D):function LE(s){if(jd&&!jd.get(Jg,!1))throw new Ue(400,!1);jd=s;const a=s.get(GS);(function Ey(s){const a=s.get(EE,null);a&&a.forEach(u=>u())})(s)}(function zS(s=[],a){return Th.create({name:a,providers:[{provide:Sa,useValue:"platform"},{provide:gw,useValue:new Set([()=>jd=null])},...s]})}(D,d))}return function B1(s){const a=BE();if(!a)throw new Ue(401,!1);return a}()}}function BE(){return jd?.get(GS)??null}let GS=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,d){const h=function zu(s,a){let u;return u="noop"===s?new V1:("zone.js"===s?void 0:s)||new rl(a),u}(d?.ngZone,function Hd(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(d)),m=[{provide:rl,useValue:h}];return h.run(()=>{const w=Th.create({providers:m,parent:this.injector,name:u.moduleType.name}),D=u.create(w),P=D.injector.get($f,null);if(!P)throw new Ue(402,!1);return h.runOutsideAngular(()=>{const U=h.onError.subscribe({next:z=>{P.handleError(z)}});D.onDestroy(()=>{Xg(this._modules,D),U.unsubscribe()})}),function xp(s,a,u){try{const d=u();return Cg(d)?d.catch(h=>{throw a.runOutsideAngular(()=>s.handleError(h)),h}):d}catch(d){throw a.runOutsideAngular(()=>s.handleError(d)),d}}(P,h,()=>{const U=D.injector.get(vy);return U.runInitializers(),U.donePromise.then(()=>(function o0(s){Ct(s,"Expected localeId to be defined"),"string"==typeof s&&(Mb=s.toLowerCase().replace(/_/g,"-"))}(D.injector.get(wy,Nd)||Nd),this._moduleDoBootstrap(D),D))})})}bootstrapModule(u,d=[]){const h=$c({},d);return function OE(s,a,u){const d=new M0(u);return Promise.resolve(d)}(0,0,u).then(m=>this.bootstrapModuleFactory(m,h))}_moduleDoBootstrap(u){const d=u.injector.get(Ty);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(h=>d.bootstrap(h));else{if(!u.instance.ngDoBootstrap)throw new Ue(-403,!1);u.instance.ngDoBootstrap(d)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ue(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const u=this._injector.get(gw,null);u&&(u.forEach(d=>d()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(Rn(Th))},s.\u0275prov=Jt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function $c(s,a){return Array.isArray(a)?a.reduce($c,s):{...s,...a}}let Ty=(()=>{class s{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(u,d,h){this._zone=u,this._injector=d,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const m=new q.y(D=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{D.next(this._stable),D.complete()})}),w=new q.y(D=>{let P;this._zone.runOutsideAngular(()=>{P=this._zone.onStable.subscribe(()=>{rl.assertNotInAngularZone(),rf(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,D.next(!0))})})});const U=this._zone.onUnstable.subscribe(()=>{rl.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{D.next(!1)}))});return()=>{P.unsubscribe(),U.unsubscribe()}});this.isStable=(0,he.T)(m,w.pipe((0,ce.B)()))}bootstrap(u,d){const h=u instanceof dI;if(!this._injector.get(vy).done){!h&&Ir(u);throw new Ue(405,Hc)}let w;w=h?u:this._injector.get(jf).resolveComponentFactory(u),this.componentTypes.push(w.componentType);const D=function kE(s){return s.isBoundToModule}(w)?void 0:this._injector.get(Tp),U=w.create(Th.NULL,[],d||w.selector,D),z=U.location.nativeElement,Q=U.injector.get(Cy,null);return Q?.registerApplication(z),U.onDestroy(()=>{this.detachView(U.hostView),Xg(this.components,U),Q?.unregisterApplication(z)}),this._loadComponent(U),U}tick(){if(this._runningTick)throw new Ue(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const d=u;this._views.push(d),d.attachToAppRef(this)}detachView(u){const d=u;Xg(this._views,d),d.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u);const d=this._injector.get(NE,[]);d.push(...this._bootstrapListeners),d.forEach(h=>h(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>Xg(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new Ue(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(u){return new(u||s)(Rn(rl),Rn(St),Rn($f))},s.\u0275prov=Jt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Xg(s,a){const u=s.indexOf(a);u>-1&&s.splice(u,1)}function WS(){return!1}let HE=(()=>{class s{}return s.__NG_ELEMENT_ID__=$E,s})();function $E(s){return function KS(s,a,u){if(bo(s)&&!u){const d=Pr(s.index,a);return new tp(d,d)}return 47&s.type?new tp(a[wr],a):null}(ri(),Oe(),16==(16&s))}class KE{constructor(){}supports(a){return i_(a)}create(a){return new nD(a)}}const tD=(s,a)=>a;class nD{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||tD}forEachItem(a){let u;for(u=this._itHead;null!==u;u=u._next)a(u)}forEachOperation(a){let u=this._itHead,d=this._removalsHead,h=0,m=null;for(;u||d;){const w=!d||u&&u.currentIndex<QE(d,h,m)?u:d,D=QE(w,h,m),P=w.currentIndex;if(w===d)h--,d=d._nextRemoved;else if(u=u._next,null==w.previousIndex)h++;else{m||(m=[]);const U=D-h,z=P-h;if(U!=z){for(let fe=0;fe<U;fe++){const Ee=fe<m.length?m[fe]:m[fe]=0,Ge=Ee+fe;z<=Ge&&Ge<U&&(m[fe]=Ee+1)}m[w.previousIndex]=z-U}}D!==P&&a(w,D,P)}}forEachPreviousItem(a){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachMovedItem(a){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}forEachIdentityChange(a){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)a(u)}diff(a){if(null==a&&(a=[]),!i_(a))throw new Ue(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let h,m,w,u=this._itHead,d=!1;if(Array.isArray(a)){this.length=a.length;for(let D=0;D<this.length;D++)m=a[D],w=this._trackByFn(D,m),null!==u&&Object.is(u.trackById,w)?(d&&(u=this._verifyReinsertion(u,m,w,D)),Object.is(u.item,m)||this._addIdentityChange(u,m)):(u=this._mismatch(u,m,w,D),d=!0),u=u._next}else h=0,function s_(s,a){if(Array.isArray(s))for(let u=0;u<s.length;u++)a(s[u]);else{const u=s[Symbol.iterator]();let d;for(;!(d=u.next()).done;)a(d.value)}}(a,D=>{w=this._trackByFn(h,D),null!==u&&Object.is(u.trackById,w)?(d&&(u=this._verifyReinsertion(u,D,w,h)),Object.is(u.item,D)||this._addIdentityChange(u,D)):(u=this._mismatch(u,D,w,h),d=!0),u=u._next,h++}),this.length=h;return this._truncate(u),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,u,d,h){let m;return null===a?m=this._itTail:(m=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._reinsertAfter(a,m,h)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(d,h))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._moveAfter(a,m,h)):a=this._addAfter(new rD(u,d),m,h),a}_verifyReinsertion(a,u,d,h){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==m?a=this._reinsertAfter(m,a._prev,h):a.currentIndex!=h&&(a.currentIndex=h,this._addToMoves(a,h)),a}_truncate(a){for(;null!==a;){const u=a._next;this._addToRemovals(this._unlink(a)),a=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,u,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const h=a._prevRemoved,m=a._nextRemoved;return null===h?this._removalsHead=m:h._nextRemoved=m,null===m?this._removalsTail=h:m._prevRemoved=h,this._insertAfter(a,u,d),this._addToMoves(a,d),a}_moveAfter(a,u,d){return this._unlink(a),this._insertAfter(a,u,d),this._addToMoves(a,d),a}_addAfter(a,u,d){return this._insertAfter(a,u,d),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,u,d){const h=null===u?this._itHead:u._next;return a._next=h,a._prev=u,null===h?this._itTail=a:h._prev=a,null===u?this._itHead=a:u._next=a,null===this._linkedRecords&&(this._linkedRecords=new YE),this._linkedRecords.put(a),a.currentIndex=d,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const u=a._prev,d=a._next;return null===u?this._itHead=d:u._next=d,null===d?this._itTail=u:d._prev=u,a}_addToMoves(a,u){return a.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new YE),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,u){return a.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class rD{constructor(a,u){this.item=a,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class iD{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,u){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===u||u<=d.currentIndex)&&Object.is(d.trackById,a))return d;return null}remove(a){const u=a._prevDup,d=a._nextDup;return null===u?this._head=d:u._nextDup=d,null===d?this._tail=u:d._prevDup=u,null===this._head}}class YE{constructor(){this.map=new Map}put(a){const u=a.trackById;let d=this.map.get(u);d||(d=new iD,this.map.set(u,d)),d.add(a)}get(a,u){const h=this.map.get(a);return h?h.get(a,u):null}remove(a){const u=a.trackById;return this.map.get(u).remove(a)&&this.map.delete(u),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function QE(s,a,u){const d=s.previousIndex;if(null===d)return d;let h=0;return u&&d<u.length&&(h=u[d]),d+a+h}class sD{constructor(){}supports(a){return a instanceof Map||sp(a)}create(){return new Y1}}class Y1{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let u;for(u=this._mapHead;null!==u;u=u._next)a(u)}forEachPreviousItem(a){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)a(u)}forEachChangedItem(a){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}diff(a){if(a){if(!(a instanceof Map||sp(a)))throw new Ue(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(a,(d,h)=>{if(u&&u.key===h)this._maybeAddToChanges(u,d),this._appendAfter=u,u=u._next;else{const m=this._getOrCreateRecordForKey(h,d);u=this._insertBeforeOrAppend(u,m)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let d=u;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,u){if(a){const d=a._prev;return u._next=a,u._prev=d,a._prev=u,d&&(d._next=u),a===this._mapHead&&(this._mapHead=u),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(a,u){if(this._records.has(a)){const h=this._records.get(a);this._maybeAddToChanges(h,u);const m=h._prev,w=h._next;return m&&(m._next=w),w&&(w._prev=m),h._next=null,h._prev=null,h}const d=new JE(a);return this._records.set(a,d),d.currentValue=u,this._addToAdditions(d),d}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,u){Object.is(u,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=u,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,u){a instanceof Map?a.forEach(u):Object.keys(a).forEach(d=>u(a[d],d))}}class JE{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function XE(){return new vw([new KE])}let vw=(()=>{class s{constructor(u){this.factories=u}static create(u,d){if(null!=d){const h=d.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:d=>s.create(u,d||XE()),deps:[[s,new Ts,new Ar]]}}find(u){const d=this.factories.find(h=>h.supports(u));if(null!=d)return d;throw new Ue(901,!1)}}return s.\u0275prov=Jt({token:s,providedIn:"root",factory:XE}),s})();function ww(){return new Dy([new sD])}let Dy=(()=>{class s{constructor(u){this.factories=u}static create(u,d){if(d){const h=d.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:d=>s.create(u,d||ww()),deps:[[s,new Ts,new Ar]]}}find(u){const d=this.factories.find(h=>h.supports(u));if(d)return d;throw new Ue(901,!1)}}return s.\u0275prov=Jt({token:s,providedIn:"root",factory:ww}),s})();const tT=VE(null,"core",[]);let Ay=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(Rn(Ty))},s.\u0275mod=Ce({type:s}),s.\u0275inj=Jn({}),s})();function oD(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},1481:(Pt,Re,B)=>{B.d(Re,{Dx:()=>mn,H7:()=>ue,b2:()=>ua,q6:()=>Ui,se:()=>Et});var S=B(6895),o=B(4650);class q extends S.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class he extends q{static makeCurrent(){(0,S.HT)(new he)}onAndCancel(se,K,pe){return se.addEventListener(K,pe,!1),()=>{se.removeEventListener(K,pe,!1)}}dispatchEvent(se,K){se.dispatchEvent(K)}remove(se){se.parentNode&&se.parentNode.removeChild(se)}createElement(se,K){return(K=K||this.getDefaultDocument()).createElement(se)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(se){return se.nodeType===Node.ELEMENT_NODE}isShadowRoot(se){return se instanceof DocumentFragment}getGlobalEventTarget(se,K){return"window"===K?window:"document"===K?se:"body"===K?se.body:null}getBaseHref(se){const K=function me(){return ce=ce||document.querySelector("base"),ce?ce.getAttribute("href"):null}();return null==K?null:function Se(le){be=be||document.createElement("a"),be.setAttribute("href",le);const se=be.pathname;return"/"===se.charAt(0)?se:`/${se}`}(K)}resetBaseElement(){ce=null}getUserAgent(){return window.navigator.userAgent}getCookie(se){return(0,S.Mx)(document.cookie,se)}}let be,ce=null;const Ie=new o.OlP("TRANSITION_ID"),ne=[{provide:o.ip1,useFactory:function te(le,se,K){return()=>{K.get(o.CZH).donePromise.then(()=>{const pe=(0,S.q)(),Le=se.querySelectorAll(`style[ng-transition="${le}"]`);for(let Ye=0;Ye<Le.length;Ye++)pe.remove(Le[Ye])})}},deps:[Ie,S.K0,o.zs3],multi:!0}];let at=(()=>{class le{build(){return new XMLHttpRequest}}return le.\u0275fac=function(K){return new(K||le)},le.\u0275prov=o.Yz7({token:le,factory:le.\u0275fac}),le})();const We=new o.OlP("EventManagerPlugins");let ht=(()=>{class le{constructor(K,pe){this._zone=pe,this._eventNameToPlugin=new Map,K.forEach(Le=>{Le.manager=this}),this._plugins=K.slice().reverse()}addEventListener(K,pe,Le){return this._findPluginFor(pe).addEventListener(K,pe,Le)}addGlobalEventListener(K,pe,Le){return this._findPluginFor(pe).addGlobalEventListener(K,pe,Le)}getZone(){return this._zone}_findPluginFor(K){const pe=this._eventNameToPlugin.get(K);if(pe)return pe;const Le=this._plugins;for(let Ye=0;Ye<Le.length;Ye++){const Bt=Le[Ye];if(Bt.supports(K))return this._eventNameToPlugin.set(K,Bt),Bt}throw new Error(`No event manager plugin found for event ${K}`)}}return le.\u0275fac=function(K){return new(K||le)(o.LFG(We),o.LFG(o.R0b))},le.\u0275prov=o.Yz7({token:le,factory:le.\u0275fac}),le})();class Nt{constructor(se){this._doc=se}addGlobalEventListener(se,K,pe){const Le=(0,S.q)().getGlobalEventTarget(this._doc,se);if(!Le)throw new Error(`Unsupported event target ${Le} for event ${K}`);return this.addEventListener(Le,K,pe)}}let Ue=(()=>{class le{constructor(){this.usageCount=new Map}addStyles(K){for(const pe of K)1===this.changeUsageCount(pe,1)&&this.onStyleAdded(pe)}removeStyles(K){for(const pe of K)0===this.changeUsageCount(pe,-1)&&this.onStyleRemoved(pe)}onStyleRemoved(K){}onStyleAdded(K){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(K,pe){const Le=this.usageCount;let Ye=Le.get(K)??0;return Ye+=pe,Ye>0?Le.set(K,Ye):Le.delete(K),Ye}ngOnDestroy(){for(const K of this.getAllStyles())this.onStyleRemoved(K);this.usageCount.clear()}}return le.\u0275fac=function(K){return new(K||le)},le.\u0275prov=o.Yz7({token:le,factory:le.\u0275fac}),le})(),Je=(()=>{class le extends Ue{constructor(K){super(),this.doc=K,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(K){for(const pe of this.hostNodes)this.addStyleToHost(pe,K)}onStyleRemoved(K){const pe=this.styleRef;pe.get(K)?.forEach(Ye=>Ye.remove()),pe.delete(K)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(K){this.hostNodes.add(K);for(const pe of this.getAllStyles())this.addStyleToHost(K,pe)}removeHost(K){this.hostNodes.delete(K)}addStyleToHost(K,pe){const Le=this.doc.createElement("style");Le.textContent=pe,K.appendChild(Le);const Ye=this.styleRef.get(pe);Ye?Ye.push(Le):this.styleRef.set(pe,[Le])}resetHostNodes(){const K=this.hostNodes;K.clear(),K.add(this.doc.head)}}return le.\u0275fac=function(K){return new(K||le)(o.LFG(S.K0))},le.\u0275prov=o.Yz7({token:le,factory:le.\u0275fac}),le})();const Xe={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ct=/%COMP%/g,At=new o.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function _t(le,se){return se.flat(100).map(K=>K.replace(ct,le))}function Dt(le){return se=>{if("__ngUnwrap__"===se)return le;!1===le(se)&&(se.preventDefault(),se.returnValue=!1)}}let Et=(()=>{class le{constructor(K,pe,Le,Ye){this.eventManager=K,this.sharedStylesHost=pe,this.appId=Le,this.removeStylesOnCompDestory=Ye,this.rendererByCompId=new Map,this.defaultRenderer=new Ne(K)}createRenderer(K,pe){if(!K||!pe)return this.defaultRenderer;const Le=this.getOrCreateRenderer(K,pe);return Le instanceof Ct?Le.applyToHost(K):Le instanceof ut&&Le.applyStyles(),Le}getOrCreateRenderer(K,pe){const Le=this.rendererByCompId;let Ye=Le.get(pe.id);if(!Ye){const Bt=this.eventManager,Ln=this.sharedStylesHost,zn=this.removeStylesOnCompDestory;switch(pe.encapsulation){case o.ifc.Emulated:Ye=new Ct(Bt,Ln,pe,this.appId,zn);break;case o.ifc.ShadowDom:return new dt(Bt,Ln,K,pe);default:Ye=new ut(Bt,Ln,pe,zn)}Ye.onDestroy=()=>Le.delete(pe.id),Le.set(pe.id,Ye)}return Ye}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return le.\u0275fac=function(K){return new(K||le)(o.LFG(ht),o.LFG(Je),o.LFG(o.AFp),o.LFG(At))},le.\u0275prov=o.Yz7({token:le,factory:le.\u0275fac}),le})();class Ne{constructor(se){this.eventManager=se,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(se,K){return K?document.createElementNS(Xe[K]||K,se):document.createElement(se)}createComment(se){return document.createComment(se)}createText(se){return document.createTextNode(se)}appendChild(se,K){($e(se)?se.content:se).appendChild(K)}insertBefore(se,K,pe){se&&($e(se)?se.content:se).insertBefore(K,pe)}removeChild(se,K){se&&se.removeChild(K)}selectRootElement(se,K){let pe="string"==typeof se?document.querySelector(se):se;if(!pe)throw new Error(`The selector "${se}" did not match any elements`);return K||(pe.textContent=""),pe}parentNode(se){return se.parentNode}nextSibling(se){return se.nextSibling}setAttribute(se,K,pe,Le){if(Le){K=Le+":"+K;const Ye=Xe[Le];Ye?se.setAttributeNS(Ye,K,pe):se.setAttribute(K,pe)}else se.setAttribute(K,pe)}removeAttribute(se,K,pe){if(pe){const Le=Xe[pe];Le?se.removeAttributeNS(Le,K):se.removeAttribute(`${pe}:${K}`)}else se.removeAttribute(K)}addClass(se,K){se.classList.add(K)}removeClass(se,K){se.classList.remove(K)}setStyle(se,K,pe,Le){Le&(o.JOm.DashCase|o.JOm.Important)?se.style.setProperty(K,pe,Le&o.JOm.Important?"important":""):se.style[K]=pe}removeStyle(se,K,pe){pe&o.JOm.DashCase?se.style.removeProperty(K):se.style[K]=""}setProperty(se,K,pe){se[K]=pe}setValue(se,K){se.nodeValue=K}listen(se,K,pe){return"string"==typeof se?this.eventManager.addGlobalEventListener(se,K,Dt(pe)):this.eventManager.addEventListener(se,K,Dt(pe))}}function $e(le){return"TEMPLATE"===le.tagName&&void 0!==le.content}class dt extends Ne{constructor(se,K,pe,Le){super(se),this.sharedStylesHost=K,this.hostEl=pe,this.shadowRoot=pe.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Ye=_t(Le.id,Le.styles);for(const Bt of Ye){const Ln=document.createElement("style");Ln.textContent=Bt,this.shadowRoot.appendChild(Ln)}}nodeOrShadowRoot(se){return se===this.hostEl?this.shadowRoot:se}appendChild(se,K){return super.appendChild(this.nodeOrShadowRoot(se),K)}insertBefore(se,K,pe){return super.insertBefore(this.nodeOrShadowRoot(se),K,pe)}removeChild(se,K){return super.removeChild(this.nodeOrShadowRoot(se),K)}parentNode(se){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(se)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class ut extends Ne{constructor(se,K,pe,Le,Ye=pe.id){super(se),this.sharedStylesHost=K,this.removeStylesOnCompDestory=Le,this.rendererUsageCount=0,this.styles=_t(Ye,pe.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Ct extends ut{constructor(se,K,pe,Le,Ye){const Bt=Le+"-"+pe.id;super(se,K,pe,Ye,Bt),this.contentAttr=function De(le){return"_ngcontent-%COMP%".replace(ct,le)}(Bt),this.hostAttr=function Yt(le){return"_nghost-%COMP%".replace(ct,le)}(Bt)}applyToHost(se){this.applyStyles(),this.setAttribute(se,this.hostAttr,"")}createElement(se,K){const pe=super.createElement(se,K);return super.setAttribute(pe,this.contentAttr,""),pe}}let xt=(()=>{class le extends Nt{constructor(K){super(K)}supports(K){return!0}addEventListener(K,pe,Le){return K.addEventListener(pe,Le,!1),()=>this.removeEventListener(K,pe,Le)}removeEventListener(K,pe,Le){return K.removeEventListener(pe,Le)}}return le.\u0275fac=function(K){return new(K||le)(o.LFG(S.K0))},le.\u0275prov=o.Yz7({token:le,factory:le.\u0275fac}),le})();const sn=["alt","control","meta","shift"],Tt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Cn={alt:le=>le.altKey,control:le=>le.ctrlKey,meta:le=>le.metaKey,shift:le=>le.shiftKey};let Jt=(()=>{class le extends Nt{constructor(K){super(K)}supports(K){return null!=le.parseEventName(K)}addEventListener(K,pe,Le){const Ye=le.parseEventName(pe),Bt=le.eventCallback(Ye.fullKey,Le,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,S.q)().onAndCancel(K,Ye.domEventName,Bt))}static parseEventName(K){const pe=K.toLowerCase().split("."),Le=pe.shift();if(0===pe.length||"keydown"!==Le&&"keyup"!==Le)return null;const Ye=le._normalizeKey(pe.pop());let Bt="",Ln=pe.indexOf("code");if(Ln>-1&&(pe.splice(Ln,1),Bt="code."),sn.forEach(yo=>{const Me=pe.indexOf(yo);Me>-1&&(pe.splice(Me,1),Bt+=yo+".")}),Bt+=Ye,0!=pe.length||0===Ye.length)return null;const zn={};return zn.domEventName=Le,zn.fullKey=Bt,zn}static matchEventFullKeyCode(K,pe){let Le=Tt[K.key]||K.key,Ye="";return pe.indexOf("code.")>-1&&(Le=K.code,Ye="code."),!(null==Le||!Le)&&(Le=Le.toLowerCase()," "===Le?Le="space":"."===Le&&(Le="dot"),sn.forEach(Bt=>{Bt!==Le&&(0,Cn[Bt])(K)&&(Ye+=Bt+".")}),Ye+=Le,Ye===pe)}static eventCallback(K,pe,Le){return Ye=>{le.matchEventFullKeyCode(Ye,K)&&Le.runGuarded(()=>pe(Ye))}}static _normalizeKey(K){return"esc"===K?"escape":K}}return le.\u0275fac=function(K){return new(K||le)(o.LFG(S.K0))},le.\u0275prov=o.Yz7({token:le,factory:le.\u0275fac}),le})();const Ui=(0,o.eFA)(o._c5,"browser",[{provide:o.Lbi,useValue:S.bD},{provide:o.g9A,useValue:function Jr(){he.makeCurrent()},multi:!0},{provide:S.K0,useFactory:function Xr(){return(0,o.RDi)(document),document},deps:[]}]),Vr=new o.OlP(""),Vt=[{provide:o.rWj,useClass:class de{addToWindow(se){o.dqk.getAngularTestability=(pe,Le=!0)=>{const Ye=se.findTestabilityInTree(pe,Le);if(null==Ye)throw new Error("Could not find testability for element.");return Ye},o.dqk.getAllAngularTestabilities=()=>se.getAllTestabilities(),o.dqk.getAllAngularRootElements=()=>se.getAllRootElements(),o.dqk.frameworkStabilizers||(o.dqk.frameworkStabilizers=[]),o.dqk.frameworkStabilizers.push(pe=>{const Le=o.dqk.getAllAngularTestabilities();let Ye=Le.length,Bt=!1;const Ln=function(zn){Bt=Bt||zn,Ye--,0==Ye&&pe(Bt)};Le.forEach(function(zn){zn.whenStable(Ln)})})}findTestabilityInTree(se,K,pe){return null==K?null:se.getTestability(K)??(pe?(0,S.q)().isShadowRoot(K)?this.findTestabilityInTree(se,K.host,!0):this.findTestabilityInTree(se,K.parentElement,!0):null)}},deps:[]},{provide:o.lri,useClass:o.dDg,deps:[o.R0b,o.eoX,o.rWj]},{provide:o.dDg,useClass:o.dDg,deps:[o.R0b,o.eoX,o.rWj]}],lr=[{provide:o.zSh,useValue:"root"},{provide:o.qLn,useFactory:function en(){return new o.qLn},deps:[]},{provide:We,useClass:xt,multi:!0,deps:[S.K0,o.R0b,o.Lbi]},{provide:We,useClass:Jt,multi:!0,deps:[S.K0]},{provide:Et,useClass:Et,deps:[ht,Je,o.AFp,At]},{provide:o.FYo,useExisting:Et},{provide:Ue,useExisting:Je},{provide:Je,useClass:Je,deps:[S.K0]},{provide:ht,useClass:ht,deps:[We,o.R0b]},{provide:S.JF,useClass:at,deps:[]},[]];let ua=(()=>{class le{constructor(K){}static withServerTransition(K){return{ngModule:le,providers:[{provide:o.AFp,useValue:K.appId},{provide:Ie,useExisting:o.AFp},ne]}}}return le.\u0275fac=function(K){return new(K||le)(o.LFG(Vr,12))},le.\u0275mod=o.oAB({type:le}),le.\u0275inj=o.cJS({providers:[...lr,...Vt],imports:[S.ez,o.hGG]}),le})(),mn=(()=>{class le{constructor(K){this._doc=K}getTitle(){return this._doc.title}setTitle(K){this._doc.title=K||""}}return le.\u0275fac=function(K){return new(K||le)(o.LFG(S.K0))},le.\u0275prov=o.Yz7({token:le,factory:function(K){let pe=null;return pe=K?new K:function nn(){return new mn((0,o.LFG)(S.K0))}(),pe},providedIn:"root"}),le})();typeof window<"u"&&window;let ue=(()=>{class le{}return le.\u0275fac=function(K){return new(K||le)},le.\u0275prov=o.Yz7({token:le,factory:function(K){let pe=null;return pe=K?new(K||le):o.LFG(ve),pe},providedIn:"root"}),le})(),ve=(()=>{class le extends ue{constructor(K){super(),this._doc=K}sanitize(K,pe){if(null==pe)return null;switch(K){case o.q3G.NONE:return pe;case o.q3G.HTML:return(0,o.qzn)(pe,"HTML")?(0,o.z3N)(pe):(0,o.EiD)(this._doc,String(pe)).toString();case o.q3G.STYLE:return(0,o.qzn)(pe,"Style")?(0,o.z3N)(pe):pe;case o.q3G.SCRIPT:if((0,o.qzn)(pe,"Script"))return(0,o.z3N)(pe);throw new Error("unsafe value used in a script context");case o.q3G.URL:return(0,o.qzn)(pe,"URL")?(0,o.z3N)(pe):(0,o.mCW)(String(pe));case o.q3G.RESOURCE_URL:if((0,o.qzn)(pe,"ResourceURL"))return(0,o.z3N)(pe);throw new Error(`unsafe value used in a resource URL context (see ${o.JZr})`);default:throw new Error(`Unexpected SecurityContext ${K} (see ${o.JZr})`)}}bypassSecurityTrustHtml(K){return(0,o.JVY)(K)}bypassSecurityTrustStyle(K){return(0,o.L6k)(K)}bypassSecurityTrustScript(K){return(0,o.eBb)(K)}bypassSecurityTrustUrl(K){return(0,o.LAX)(K)}bypassSecurityTrustResourceUrl(K){return(0,o.pB0)(K)}}return le.\u0275fac=function(K){return new(K||le)(o.LFG(S.K0))},le.\u0275prov=o.Yz7({token:le,factory:function(K){let pe=null;return pe=K?new K:function Ze(le){return new ve(le.get(S.K0))}(o.LFG(o.zs3)),pe},providedIn:"root"}),le})()},2435:(Pt,Re,B)=>{B.d(Re,{gz:()=>fa,m2:()=>Yi,wN:()=>ws,F0:()=>Ni,rH:()=>ke,Bz:()=>bu,lC:()=>Ko});var S=B(4650),o=B(8996),q=B(9646),he=B(1135),ce=B(6805),me=B(9751),be=B(4742),Se=B(4671),Ie=B(3268),te=B(7669),ne=B(1810),de=B(5403),at=B(9672);function We(...b){const T=(0,te.yG)(b),y=(0,te.jO)(b),{args:A,keys:O}=(0,be.D)(b);if(0===A.length)return(0,o.D)([],T);const Z=new me.y(function ht(b,T,y=Se.y){return A=>{Nt(T,()=>{const{length:O}=b,Z=new Array(O);let G=O,ge=O;for(let je=0;je<O;je++)Nt(T,()=>{const gt=(0,o.D)(b[je],T);let It=!1;gt.subscribe((0,de.x)(A,Nn=>{Z[je]=Nn,It||(It=!0,ge--),ge||A.next(y(Z.slice()))},()=>{--G||A.complete()}))},A)},A)}}(A,T,O?G=>(0,ne.n)(O,G):Se.y));return y?Z.pipe((0,Ie.Z)(y)):Z}function Nt(b,T,y){b?(0,at.f)(y,b,T):T()}var Ue=B(7272),Je=B(8421);function Xe(b){return new me.y(T=>{(0,Je.Xf)(b()).subscribe(T)})}var ct=B(9635),tt=B(576);function Be(b,T){const y=(0,tt.m)(b)?b:()=>b,A=O=>O.error(y());return new me.y(T?O=>T.schedule(A,0,O):A)}var He=B(515),ft=B(727),et=B(4482);function At(){return(0,et.e)((b,T)=>{let y=null;b._refCount++;const A=(0,de.x)(T,void 0,void 0,void 0,()=>{if(!b||b._refCount<=0||0<--b._refCount)return void(y=null);const O=b._connection,Z=y;y=null,O&&(!Z||O===Z)&&O.unsubscribe(),T.unsubscribe()});b.subscribe(A),A.closed||(y=b.connect())})}class De extends me.y{constructor(T,y){super(),this.source=T,this.subjectFactory=y,this._subject=null,this._refCount=0,this._connection=null,(0,et.A)(T)&&(this.lift=T.lift)}_subscribe(T){return this.getSubject().subscribe(T)}getSubject(){const T=this._subject;return(!T||T.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:T}=this;this._subject=this._connection=null,T?.unsubscribe()}connect(){let T=this._connection;if(!T){T=this._connection=new ft.w0;const y=this.getSubject();T.add(this.source.subscribe((0,de.x)(y,void 0,()=>{this._teardown(),y.complete()},A=>{this._teardown(),y.error(A)},()=>this._teardown()))),T.closed&&(this._connection=null,T=ft.w0.EMPTY)}return T}refCount(){return At()(this)}}var Yt=B(7579),_t=B(6895),Dt=B(4004),Et=B(3900),Ne=B(5698),Ve=B(8675),ze=B(9300),$e=B(5577),dt=B(590);function ut(b,T){return(0,tt.m)(T)?(0,$e.z)(b,T,1):(0,$e.z)(b,1)}var Ct=B(8505);function xt(b){return(0,et.e)((T,y)=>{let Z,A=null,O=!1;A=T.subscribe((0,de.x)(y,void 0,void 0,G=>{Z=(0,Je.Xf)(b(G,xt(b)(T))),A?(A.unsubscribe(),A=null,Z.subscribe(y)):O=!0})),O&&(A.unsubscribe(),A=null,Z.subscribe(y))})}var sn=B(5026);function Tt(b){return b<=0?()=>He.E:(0,et.e)((T,y)=>{let A=[];T.subscribe((0,de.x)(y,O=>{A.push(O),b<A.length&&A.shift()},()=>{for(const O of A)y.next(O);y.complete()},void 0,()=>{A=null}))})}var Cn=B(8068),Jt=B(6590);function xn(b,T){const y=arguments.length>=2;return A=>A.pipe(b?(0,ze.h)((O,Z)=>b(O,Z,A)):Se.y,Tt(1),y?(0,Jt.d)(T):(0,Cn.T)(()=>new ce.K))}function Mr(b){return(0,et.e)((T,y)=>{try{T.subscribe(y)}finally{y.add(b)}})}var Qr=B(8189),Jr=B(1481);const en="primary",Xr=Symbol("RouteTitle");class Us{constructor(T){this.params=T||{}}has(T){return Object.prototype.hasOwnProperty.call(this.params,T)}get(T){if(this.has(T)){const y=this.params[T];return Array.isArray(y)?y[0]:y}return null}getAll(T){if(this.has(T)){const y=this.params[T];return Array.isArray(y)?y:[y]}return[]}get keys(){return Object.keys(this.params)}}function Ui(b){return new Us(b)}function Vr(b,T,y){const A=y.path.split("/");if(A.length>b.length||"full"===y.pathMatch&&(T.hasChildren()||A.length<b.length))return null;const O={};for(let Z=0;Z<A.length;Z++){const G=A[Z],ge=b[Z];if(G.startsWith(":"))O[G.substring(1)]=ge;else if(G!==ge.path)return null}return{consumed:b.slice(0,A.length),posParams:O}}function lr(b,T){const y=b?Object.keys(b):void 0,A=T?Object.keys(T):void 0;if(!y||!A||y.length!=A.length)return!1;let O;for(let Z=0;Z<y.length;Z++)if(O=y[Z],!ua(b[O],T[O]))return!1;return!0}function ua(b,T){if(Array.isArray(b)&&Array.isArray(T)){if(b.length!==T.length)return!1;const y=[...b].sort(),A=[...T].sort();return y.every((O,Z)=>A[Z]===O)}return b===T}function oi(b){return Array.prototype.concat.apply([],b)}function ai(b){return b.length>0?b[b.length-1]:null}function nn(b,T){for(const y in b)b.hasOwnProperty(y)&&T(b[y],y)}function mn(b){return(0,S.CqO)(b)?b:(0,S.QGY)(b)?(0,o.D)(Promise.resolve(b)):(0,q.of)(b)}const vt=!1,Wt={exact:function Bn(b,T,y){if(!qn(b.segments,T.segments)||!Di(b.segments,T.segments,y)||b.numberOfChildren!==T.numberOfChildren)return!1;for(const A in T.children)if(!b.children[A]||!Bn(b.children[A],T.children[A],y))return!1;return!0},subset:ti},li={exact:function fr(b,T){return lr(b,T)},subset:function pr(b,T){return Object.keys(T).length<=Object.keys(b).length&&Object.keys(T).every(y=>ua(b[y],T[y]))},ignored:()=>!0};function ei(b,T,y){return Wt[y.paths](b.root,T.root,y.matrixParams)&&li[y.queryParams](b.queryParams,T.queryParams)&&!("exact"===y.fragment&&b.fragment!==T.fragment)}function ti(b,T,y){return Zn(b,T,T.segments,y)}function Zn(b,T,y,A){if(b.segments.length>y.length){const O=b.segments.slice(0,y.length);return!(!qn(O,y)||T.hasChildren()||!Di(O,y,A))}if(b.segments.length===y.length){if(!qn(b.segments,y)||!Di(b.segments,y,A))return!1;for(const O in T.children)if(!b.children[O]||!ti(b.children[O],T.children[O],A))return!1;return!0}{const O=y.slice(0,b.segments.length),Z=y.slice(b.segments.length);return!!(qn(b.segments,O)&&Di(b.segments,O,A)&&b.children[en])&&Zn(b.children[en],T,Z,A)}}function Di(b,T,y){return T.every((A,O)=>li[y](b[O].parameters,A.parameters))}class cn{constructor(T=new an([],{}),y={},A=null){this.root=T,this.queryParams=y,this.fragment=A}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ui(this.queryParams)),this._queryParamMap}toString(){return Ki.serialize(this)}}class an{constructor(T,y){this.segments=T,this.children=y,this.parent=null,nn(y,(A,O)=>A.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Zr(this)}}class Rn{constructor(T,y){this.path=T,this.parameters=y}get parameterMap(){return this._parameterMap||(this._parameterMap=Ui(this.parameters)),this._parameterMap}toString(){return se(this)}}function qn(b,T){return b.length===T.length&&b.every((y,A)=>y.path===T[A].path)}let Ai=(()=>{class b{}return b.\u0275fac=function(y){return new(y||b)},b.\u0275prov=S.Yz7({token:b,factory:function(){return new ir},providedIn:"root"}),b})();class ir{parse(T){const y=new Me(T);return new cn(y.parseRootSegment(),y.parseQueryParams(),y.parseFragment())}serialize(T){const y=`/${re(T.root,!0)}`,A=function pe(b){const T=Object.keys(b).map(y=>{const A=b[y];return Array.isArray(A)?A.map(O=>`${ue(y)}=${ue(O)}`).join("&"):`${ue(y)}=${ue(A)}`}).filter(y=>!!y);return T.length?`?${T.join("&")}`:""}(T.queryParams);return`${y}${A}${"string"==typeof T.fragment?`#${function Ze(b){return encodeURI(b)}(T.fragment)}`:""}`}}const Ki=new ir;function Zr(b){return b.segments.map(T=>se(T)).join("/")}function re(b,T){if(!b.hasChildren())return Zr(b);if(T){const y=b.children[en]?re(b.children[en],!1):"",A=[];return nn(b.children,(O,Z)=>{Z!==en&&A.push(`${Z}:${re(O,!1)}`)}),A.length>0?`${y}(${A.join("//")})`:y}{const y=function Tr(b,T){let y=[];return nn(b.children,(A,O)=>{O===en&&(y=y.concat(T(A,O)))}),nn(b.children,(A,O)=>{O!==en&&(y=y.concat(T(A,O)))}),y}(b,(A,O)=>O===en?[re(b.children[en],!1)]:[`${O}:${re(A,!1)}`]);return 1===Object.keys(b.children).length&&null!=b.children[en]?`${Zr(b)}/${y[0]}`:`${Zr(b)}/(${y.join("//")})`}}function ee(b){return encodeURIComponent(b).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ue(b){return ee(b).replace(/%3B/gi,";")}function ve(b){return ee(b).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function it(b){return decodeURIComponent(b)}function le(b){return it(b.replace(/\+/g,"%20"))}function se(b){return`${ve(b.path)}${function K(b){return Object.keys(b).map(T=>`;${ve(T)}=${ve(b[T])}`).join("")}(b.parameters)}`}const Le=/^[^\/()?;=#]+/;function Ye(b){const T=b.match(Le);return T?T[0]:""}const Bt=/^[^=?&#]+/,zn=/^[^&#]+/;class Me{constructor(T){this.url=T,this.remaining=T}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new an([],{}):new an([],this.parseChildren())}parseQueryParams(){const T={};if(this.consumeOptional("?"))do{this.parseQueryParam(T)}while(this.consumeOptional("&"));return T}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const T=[];for(this.peekStartsWith("(")||T.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),T.push(this.parseSegment());let y={};this.peekStartsWith("/(")&&(this.capture("/"),y=this.parseParens(!0));let A={};return this.peekStartsWith("(")&&(A=this.parseParens(!1)),(T.length>0||Object.keys(y).length>0)&&(A[en]=new an(T,y)),A}parseSegment(){const T=Ye(this.remaining);if(""===T&&this.peekStartsWith(";"))throw new S.vHH(4009,vt);return this.capture(T),new Rn(it(T),this.parseMatrixParams())}parseMatrixParams(){const T={};for(;this.consumeOptional(";");)this.parseParam(T);return T}parseParam(T){const y=Ye(this.remaining);if(!y)return;this.capture(y);let A="";if(this.consumeOptional("=")){const O=Ye(this.remaining);O&&(A=O,this.capture(A))}T[it(y)]=it(A)}parseQueryParam(T){const y=function Ln(b){const T=b.match(Bt);return T?T[0]:""}(this.remaining);if(!y)return;this.capture(y);let A="";if(this.consumeOptional("=")){const G=function yo(b){const T=b.match(zn);return T?T[0]:""}(this.remaining);G&&(A=G,this.capture(A))}const O=le(y),Z=le(A);if(T.hasOwnProperty(O)){let G=T[O];Array.isArray(G)||(G=[G],T[O]=G),G.push(Z)}else T[O]=Z}parseParens(T){const y={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const A=Ye(this.remaining),O=this.remaining[A.length];if("/"!==O&&")"!==O&&";"!==O)throw new S.vHH(4010,vt);let Z;A.indexOf(":")>-1?(Z=A.slice(0,A.indexOf(":")),this.capture(Z),this.capture(":")):T&&(Z=en);const G=this.parseChildren();y[Z]=1===Object.keys(G).length?G[en]:new an([],G),this.consumeOptional("//")}return y}peekStartsWith(T){return this.remaining.startsWith(T)}consumeOptional(T){return!!this.peekStartsWith(T)&&(this.remaining=this.remaining.substring(T.length),!0)}capture(T){if(!this.consumeOptional(T))throw new S.vHH(4011,vt)}}function Ce(b){return b.segments.length>0?new an([],{[en]:b}):b}function nt(b){const T={};for(const A of Object.keys(b.children)){const Z=nt(b.children[A]);(Z.segments.length>0||Z.hasChildren())&&(T[A]=Z)}return function Ht(b){if(1===b.numberOfChildren&&b.children[en]){const T=b.children[en];return new an(b.segments.concat(T.segments),T.children)}return b}(new an(b.segments,T))}function Ft(b){return b instanceof cn}const _n=!1;function Ir(b,T,y,A,O){if(0===y.length)return Zo(T.root,T.root,T.root,A,O);const Z=function wt(b){if("string"==typeof b[0]&&1===b.length&&"/"===b[0])return new gi(!0,0,b);let T=0,y=!1;const A=b.reduce((O,Z,G)=>{if("object"==typeof Z&&null!=Z){if(Z.outlets){const ge={};return nn(Z.outlets,(je,gt)=>{ge[gt]="string"==typeof je?je.split("/"):je}),[...O,{outlets:ge}]}if(Z.segmentPath)return[...O,Z.segmentPath]}return"string"!=typeof Z?[...O,Z]:0===G?(Z.split("/").forEach((ge,je)=>{0==je&&"."===ge||(0==je&&""===ge?y=!0:".."===ge?T++:""!=ge&&O.push(ge))}),O):[...O,Z]},[]);return new gi(y,T,A)}(y);return Z.toRoot()?Zo(T.root,T.root,new an([],{}),A,O):function G(je){const gt=function ps(b,T,y,A){if(b.isAbsolute)return new rn(T.root,!0,0);if(-1===A)return new rn(y,y===T.root,0);return function Gn(b,T,y){let A=b,O=T,Z=y;for(;Z>O;){if(Z-=O,A=A.parent,!A)throw new S.vHH(4005,_n&&"Invalid number of '../'");O=A.segments.length}return new rn(A,!1,O-Z)}(y,A+(_r(b.commands[0])?0:1),b.numberOfDoubleDots)}(Z,T,b.snapshot?._urlSegment,je),It=gt.processChildren?Wn(gt.segmentGroup,gt.index,Z.commands):Qs(gt.segmentGroup,gt.index,Z.commands);return Zo(T.root,gt.segmentGroup,It,A,O)}(b.snapshot?._lastPathIndex)}function _r(b){return"object"==typeof b&&null!=b&&!b.outlets&&!b.segmentPath}function Bs(b){return"object"==typeof b&&null!=b&&b.outlets}function Zo(b,T,y,A,O){let G,Z={};A&&nn(A,(je,gt)=>{Z[gt]=Array.isArray(je)?je.map(It=>`${It}`):`${je}`}),G=b===T?y:As(b,T,y);const ge=Ce(nt(G));return new cn(ge,Z,O)}function As(b,T,y){const A={};return nn(b.children,(O,Z)=>{A[Z]=O===T?y:As(O,T,y)}),new an(b.segments,A)}class gi{constructor(T,y,A){if(this.isAbsolute=T,this.numberOfDoubleDots=y,this.commands=A,T&&A.length>0&&_r(A[0]))throw new S.vHH(4003,_n&&"Root segment cannot have matrix parameters");const O=A.find(Bs);if(O&&O!==ai(A))throw new S.vHH(4004,_n&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class rn{constructor(T,y,A){this.segmentGroup=T,this.processChildren=y,this.index=A}}function Qs(b,T,y){if(b||(b=new an([],{})),0===b.segments.length&&b.hasChildren())return Wn(b,T,y);const A=function vo(b,T,y){let A=0,O=T;const Z={match:!1,pathIndex:0,commandIndex:0};for(;O<b.segments.length;){if(A>=y.length)return Z;const G=b.segments[O],ge=y[A];if(Bs(ge))break;const je=`${ge}`,gt=A<y.length-1?y[A+1]:null;if(O>0&&void 0===je)break;if(je&&gt&&"object"==typeof gt&&void 0===gt.outlets){if(!jo(je,gt,G))return Z;A+=2}else{if(!jo(je,{},G))return Z;A++}O++}return{match:!0,pathIndex:O,commandIndex:A}}(b,T,y),O=y.slice(A.commandIndex);if(A.match&&A.pathIndex<b.segments.length){const Z=new an(b.segments.slice(0,A.pathIndex),{});return Z.children[en]=new an(b.segments.slice(A.pathIndex),b.children),Wn(Z,0,O)}return A.match&&0===O.length?new an(b.segments,{}):A.match&&!b.hasChildren()?Zs(b,T,y):A.match?Wn(b,0,O):Zs(b,T,y)}function Wn(b,T,y){if(0===y.length)return new an(b.segments,{});{const A=function jn(b){return Bs(b[0])?b[0].outlets:{[en]:b}}(y),O={};if(!A[en]&&b.children[en]&&1===b.numberOfChildren&&0===b.children[en].segments.length){const Z=Wn(b.children[en],T,y);return new an(b.segments,Z.children)}return nn(A,(Z,G)=>{"string"==typeof Z&&(Z=[Z]),null!==Z&&(O[G]=Qs(b.children[G],T,Z))}),nn(b.children,(Z,G)=>{void 0===A[G]&&(O[G]=Z)}),new an(b.segments,O)}}function Zs(b,T,y){const A=b.segments.slice(0,T);let O=0;for(;O<y.length;){const Z=y[O];if(Bs(Z)){const je=En(Z.outlets);return new an(A,je)}if(0===O&&_r(y[0])){A.push(new Rn(b.segments[T].path,ca(y[0]))),O++;continue}const G=Bs(Z)?Z.outlets[en]:`${Z}`,ge=O<y.length-1?y[O+1]:null;G&&ge&&_r(ge)?(A.push(new Rn(G,ca(ge))),O+=2):(A.push(new Rn(G,{})),O++)}return new an(A,{})}function En(b){const T={};return nn(b,(y,A)=>{"string"==typeof y&&(y=[y]),null!==y&&(T[A]=Zs(new an([],{}),0,y))}),T}function ca(b){const T={};return nn(b,(y,A)=>T[A]=`${y}`),T}function jo(b,T,y){return b==y.path&&lr(T,y.parameters)}const gs="imperative";class jr{constructor(T,y){this.id=T,this.url=y}}class wr extends jr{constructor(T,y,A="imperative",O=null){super(T,y),this.type=0,this.navigationTrigger=A,this.restoredState=O}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Yi extends jr{constructor(T,y,A){super(T,y),this.urlAfterRedirects=A,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ms extends jr{constructor(T,y,A,O){super(T,y),this.reason=A,this.code=O,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class mi extends jr{constructor(T,y,A,O){super(T,y),this.reason=A,this.code=O,this.type=16}}class xs extends jr{constructor(T,y,A,O){super(T,y),this.error=A,this.target=O,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ui extends jr{constructor(T,y,A,O){super(T,y),this.urlAfterRedirects=A,this.state=O,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sr extends jr{constructor(T,y,A,O){super(T,y),this.urlAfterRedirects=A,this.state=O,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qi extends jr{constructor(T,y,A,O,Z){super(T,y),this.urlAfterRedirects=A,this.state=O,this.shouldActivate=Z,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ho extends jr{constructor(T,y,A,O){super(T,y),this.urlAfterRedirects=A,this.state=O,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ol extends jr{constructor(T,y,A,O){super(T,y),this.urlAfterRedirects=A,this.state=O,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class da{constructor(T){this.route=T,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class wo{constructor(T){this.route=T,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Co{constructor(T){this.snapshot=T,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ni{constructor(T){this.snapshot=T,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class al{constructor(T){this.snapshot=T,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ji{constructor(T){this.snapshot=T,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Sr{constructor(T,y,A){this.routerEvent=T,this.position=y,this.anchor=A,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let ha=(()=>{class b{createUrlTree(y,A,O,Z,G,ge){return Ir(y||A.root,O,Z,G,ge)}}return b.\u0275fac=function(y){return new(y||b)},b.\u0275prov=S.Yz7({token:b,factory:b.\u0275fac}),b})(),ll=(()=>{class b{}return b.\u0275fac=function(y){return new(y||b)},b.\u0275prov=S.Yz7({token:b,factory:function(T){return ha.\u0275fac(T)},providedIn:"root"}),b})();class _s{constructor(T){this._root=T}get root(){return this._root.value}parent(T){const y=this.pathFromRoot(T);return y.length>1?y[y.length-2]:null}children(T){const y=ul(T,this._root);return y?y.children.map(A=>A.value):[]}firstChild(T){const y=ul(T,this._root);return y&&y.children.length>0?y.children[0].value:null}siblings(T){const y=Fl(T,this._root);return y.length<2?[]:y[y.length-2].children.map(O=>O.value).filter(O=>O!==T)}pathFromRoot(T){return Fl(T,this._root).map(y=>y.value)}}function ul(b,T){if(b===T.value)return T;for(const y of T.children){const A=ul(b,y);if(A)return A}return null}function Fl(b,T){if(b===T.value)return[T];for(const y of T.children){const A=Fl(b,y);if(A.length)return A.unshift(T),A}return[]}class Hr{constructor(T,y){this.value=T,this.children=y}toString(){return`TreeNode(${this.value})`}}function Fa(b){const T={};return b&&b.children.forEach(y=>T[y.value.outlet]=y),T}class qo extends _s{constructor(T,y){super(T),this.snapshot=y,es(this,T)}toString(){return this.snapshot.toString()}}function cl(b,T){const y=function La(b,T){const G=new ec([],{},{},"",{},en,T,null,b.root,-1,{});return new zo("",new Hr(G,[]))}(b,T),A=new he.X([new Rn("",{})]),O=new he.X({}),Z=new he.X({}),G=new he.X({}),ge=new he.X(""),je=new fa(A,O,G,ge,Z,en,T,y.root);return je.snapshot=y.root,new qo(new Hr(je,[]),y)}class fa{constructor(T,y,A,O,Z,G,ge,je){this.url=T,this.params=y,this.queryParams=A,this.fragment=O,this.data=Z,this.outlet=G,this.component=ge,this.title=this.data?.pipe((0,Dt.U)(gt=>gt[Xr]))??(0,q.of)(void 0),this._futureSnapshot=je}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Dt.U)(T=>Ui(T)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Dt.U)(T=>Ui(T)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function pa(b,T="emptyOnly"){const y=b.pathFromRoot;let A=0;if("always"!==T)for(A=y.length-1;A>=1;){const O=y[A],Z=y[A-1];if(O.routeConfig&&""===O.routeConfig.path)A--;else{if(Z.component)break;A--}}return function cu(b){return b.reduce((T,y)=>({params:{...T.params,...y.params},data:{...T.data,...y.data},resolve:{...y.data,...T.resolve,...y.routeConfig?.data,...y._resolvedData}}),{params:{},data:{},resolve:{}})}(y.slice(A))}class ec{get title(){return this.data?.[Xr]}constructor(T,y,A,O,Z,G,ge,je,gt,It,Nn){this.url=T,this.params=y,this.queryParams=A,this.fragment=O,this.data=Z,this.outlet=G,this.component=ge,this.routeConfig=je,this._urlSegment=gt,this._lastPathIndex=It,this._resolve=Nn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ui(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ui(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(A=>A.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class zo extends _s{constructor(T,y){super(y),this.url=T,es(this,y)}toString(){return du(this._root)}}function es(b,T){T.value._routerState=b,T.children.forEach(y=>es(b,y))}function du(b){const T=b.children.length>0?` { ${b.children.map(du).join(", ")} } `:"";return`${b.value}${T}`}function dl(b){if(b.snapshot){const T=b.snapshot,y=b._futureSnapshot;b.snapshot=y,lr(T.queryParams,y.queryParams)||b.queryParams.next(y.queryParams),T.fragment!==y.fragment&&b.fragment.next(y.fragment),lr(T.params,y.params)||b.params.next(y.params),function Vt(b,T){if(b.length!==T.length)return!1;for(let y=0;y<b.length;++y)if(!lr(b[y],T[y]))return!1;return!0}(T.url,y.url)||b.url.next(y.url),lr(T.data,y.data)||b.data.next(y.data)}else b.snapshot=b._futureSnapshot,b.data.next(b._futureSnapshot.data)}function Js(b,T){const y=lr(b.params,T.params)&&function Br(b,T){return qn(b,T)&&b.every((y,A)=>lr(y.parameters,T[A].parameters))}(b.url,T.url);return y&&!(!b.parent!=!T.parent)&&(!b.parent||Js(b.parent,T.parent))}function ga(b,T,y){if(y&&b.shouldReuseRoute(T.value,y.value.snapshot)){const A=y.value;A._futureSnapshot=T.value;const O=function Go(b,T,y){return T.children.map(A=>{for(const O of y.children)if(b.shouldReuseRoute(A.value,O.value.snapshot))return ga(b,A,O);return ga(b,A)})}(b,T,y);return new Hr(A,O)}{if(b.shouldAttach(T.value)){const Z=b.retrieve(T.value);if(null!==Z){const G=Z.route;return G.value._futureSnapshot=T.value,G.children=T.children.map(ge=>ga(b,ge)),G}}const A=function js(b){return new fa(new he.X(b.url),new he.X(b.params),new he.X(b.queryParams),new he.X(b.fragment),new he.X(b.data),b.outlet,b.component,b)}(T.value),O=T.children.map(Z=>ga(b,Z));return new Hr(A,O)}}const Xs="ngNavigationCancelingError";function hl(b,T){const{redirectTo:y,navigationBehaviorOptions:A}=Ft(T)?{redirectTo:T,navigationBehaviorOptions:void 0}:T,O=ma(!1,0,T);return O.url=y,O.navigationBehaviorOptions=A,O}function ma(b,T,y){const A=new Error("NavigationCancelingError: "+(b||""));return A[Xs]=!0,A.cancellationCode=T,y&&(A.url=y),A}function Ll(b){return fl(b)&&Ft(b.url)}function fl(b){return b&&b[Xs]}class eo{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Ua,this.attachRef=null}}let Ua=(()=>{class b{constructor(){this.contexts=new Map}onChildOutletCreated(y,A){const O=this.getOrCreateContext(y);O.outlet=A,this.contexts.set(y,O)}onChildOutletDestroyed(y){const A=this.getContext(y);A&&(A.outlet=null,A.attachRef=null)}onOutletDeactivated(){const y=this.contexts;return this.contexts=new Map,y}onOutletReAttached(y){this.contexts=y}getOrCreateContext(y){let A=this.getContext(y);return A||(A=new eo,this.contexts.set(y,A)),A}getContext(y){return this.contexts.get(y)||null}}return b.\u0275fac=function(y){return new(y||b)},b.\u0275prov=S.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();const Wo=!1;let Ko=(()=>{class b{constructor(){this.activated=null,this._activatedRoute=null,this.name=en,this.activateEvents=new S.vpe,this.deactivateEvents=new S.vpe,this.attachEvents=new S.vpe,this.detachEvents=new S.vpe,this.parentContexts=(0,S.f3M)(Ua),this.location=(0,S.f3M)(S.s_b),this.changeDetector=(0,S.f3M)(S.sBO),this.environmentInjector=(0,S.f3M)(S.lqb)}ngOnChanges(y){if(y.name){const{firstChange:A,previousValue:O}=y.name;if(A)return;this.isTrackedInParentContexts(O)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(O)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(y){return this.parentContexts.getContext(y)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const y=this.parentContexts.getContext(this.name);y?.route&&(y.attachRef?this.attach(y.attachRef,y.route):this.activateWith(y.route,y.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new S.vHH(4012,Wo);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new S.vHH(4012,Wo);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new S.vHH(4012,Wo);this.location.detach();const y=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(y.instance),y}attach(y,A){this.activated=y,this._activatedRoute=A,this.location.insert(y.hostView),this.attachEvents.emit(y.instance)}deactivate(){if(this.activated){const y=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(y)}}activateWith(y,A){if(this.isActivated)throw new S.vHH(4013,Wo);this._activatedRoute=y;const O=this.location,G=y.snapshot.component,ge=this.parentContexts.getOrCreateContext(this.name).children,je=new Eo(y,ge,O.injector);if(A&&function _i(b){return!!b.resolveComponentFactory}(A)){const gt=A.resolveComponentFactory(G);this.activated=O.createComponent(gt,O.length,je)}else this.activated=O.createComponent(G,{index:O.length,injector:je,environmentInjector:A??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return b.\u0275fac=function(y){return new(y||b)},b.\u0275dir=S.lG2({type:b,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[S.TTD]}),b})();class Eo{constructor(T,y,A){this.route=T,this.childContexts=y,this.parent=A}get(T,y){return T===fa?this.route:T===Ua?this.childContexts:this.parent.get(T,y)}}let ci=(()=>{class b{}return b.\u0275fac=function(y){return new(y||b)},b.\u0275cmp=S.Xpm({type:b,selectors:[["ng-component"]],standalone:!0,features:[S.jDz],decls:1,vars:0,template:function(y,A){1&y&&S._UZ(0,"router-outlet")},dependencies:[Ko],encapsulation:2}),b})();function _a(b,T){return b.providers&&!b._injector&&(b._injector=(0,S.MMx)(b.providers,T,`Route: ${b.path}`)),b._injector??T}function ya(b){const T=b.children&&b.children.map(ya),y=T?{...b,children:T}:{...b};return!y.component&&!y.loadComponent&&(T||y.loadChildren)&&y.outlet&&y.outlet!==en&&(y.component=ci),y}function Rr(b){return b.outlet||en}function va(b,T){const y=b.filter(A=>Rr(A)===T);return y.push(...b.filter(A=>Rr(A)!==T)),y}function ys(b){if(!b)return null;if(b.routeConfig?._injector)return b.routeConfig._injector;for(let T=b.parent;T;T=T.parent){const y=T.routeConfig;if(y?._loadedInjector)return y._loadedInjector;if(y?._injector)return y._injector}return null}class To{constructor(T,y,A,O){this.routeReuseStrategy=T,this.futureState=y,this.currState=A,this.forwardEvent=O}activate(T){const y=this.futureState._root,A=this.currState?this.currState._root:null;this.deactivateChildRoutes(y,A,T),dl(this.futureState.root),this.activateChildRoutes(y,A,T)}deactivateChildRoutes(T,y,A){const O=Fa(y);T.children.forEach(Z=>{const G=Z.value.outlet;this.deactivateRoutes(Z,O[G],A),delete O[G]}),nn(O,(Z,G)=>{this.deactivateRouteAndItsChildren(Z,A)})}deactivateRoutes(T,y,A){const O=T.value,Z=y?y.value:null;if(O===Z)if(O.component){const G=A.getContext(O.outlet);G&&this.deactivateChildRoutes(T,y,G.children)}else this.deactivateChildRoutes(T,y,A);else Z&&this.deactivateRouteAndItsChildren(y,A)}deactivateRouteAndItsChildren(T,y){T.value.component&&this.routeReuseStrategy.shouldDetach(T.value.snapshot)?this.detachAndStoreRouteSubtree(T,y):this.deactivateRouteAndOutlet(T,y)}detachAndStoreRouteSubtree(T,y){const A=y.getContext(T.value.outlet),O=A&&T.value.component?A.children:y,Z=Fa(T);for(const G of Object.keys(Z))this.deactivateRouteAndItsChildren(Z[G],O);if(A&&A.outlet){const G=A.outlet.detach(),ge=A.children.onOutletDeactivated();this.routeReuseStrategy.store(T.value.snapshot,{componentRef:G,route:T,contexts:ge})}}deactivateRouteAndOutlet(T,y){const A=y.getContext(T.value.outlet),O=A&&T.value.component?A.children:y,Z=Fa(T);for(const G of Object.keys(Z))this.deactivateRouteAndItsChildren(Z[G],O);A&&(A.outlet&&(A.outlet.deactivate(),A.children.onOutletDeactivated()),A.attachRef=null,A.resolver=null,A.route=null)}activateChildRoutes(T,y,A){const O=Fa(y);T.children.forEach(Z=>{this.activateRoutes(Z,O[Z.value.outlet],A),this.forwardEvent(new Ji(Z.value.snapshot))}),T.children.length&&this.forwardEvent(new ni(T.value.snapshot))}activateRoutes(T,y,A){const O=T.value,Z=y?y.value:null;if(dl(O),O===Z)if(O.component){const G=A.getOrCreateContext(O.outlet);this.activateChildRoutes(T,y,G.children)}else this.activateChildRoutes(T,y,A);else if(O.component){const G=A.getOrCreateContext(O.outlet);if(this.routeReuseStrategy.shouldAttach(O.snapshot)){const ge=this.routeReuseStrategy.retrieve(O.snapshot);this.routeReuseStrategy.store(O.snapshot,null),G.children.onOutletReAttached(ge.contexts),G.attachRef=ge.componentRef,G.route=ge.route.value,G.outlet&&G.outlet.attach(ge.componentRef,ge.route.value),dl(ge.route.value),this.activateChildRoutes(T,null,G.children)}else{const ge=ys(O.snapshot),je=ge?.get(S._Vd)??null;G.attachRef=null,G.route=O,G.resolver=je,G.injector=ge,G.outlet&&G.outlet.activateWith(O,G.injector),this.activateChildRoutes(T,null,G.children)}}else this.activateChildRoutes(T,null,A)}}class ln{constructor(T){this.path=T,this.route=this.path[this.path.length-1]}}class no{constructor(T,y){this.component=T,this.route=y}}function Ul(b,T,y){const A=b._root;return Ms(A,T?T._root:null,y,[A.value])}function Nr(b,T){const y=Symbol(),A=T.get(b,y);return A===y?"function"!=typeof b||(0,S.Z0I)(b)?T.get(b):b:A}function Ms(b,T,y,A,O={canDeactivateChecks:[],canActivateChecks:[]}){const Z=Fa(T);return b.children.forEach(G=>{(function gl(b,T,y,A,O={canDeactivateChecks:[],canActivateChecks:[]}){const Z=b.value,G=T?T.value:null,ge=y?y.getContext(b.value.outlet):null;if(G&&Z.routeConfig===G.routeConfig){const je=function Qc(b,T,y){if("function"==typeof y)return y(b,T);switch(y){case"pathParamsChange":return!qn(b.url,T.url);case"pathParamsOrQueryParamsChange":return!qn(b.url,T.url)||!lr(b.queryParams,T.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Js(b,T)||!lr(b.queryParams,T.queryParams);default:return!Js(b,T)}}(G,Z,Z.routeConfig.runGuardsAndResolvers);je?O.canActivateChecks.push(new ln(A)):(Z.data=G.data,Z._resolvedData=G._resolvedData),Ms(b,T,Z.component?ge?ge.children:null:y,A,O),je&&ge&&ge.outlet&&ge.outlet.isActivated&&O.canDeactivateChecks.push(new no(ge.outlet.component,G))}else G&&Yo(T,ge,O),O.canActivateChecks.push(new ln(A)),Ms(b,null,Z.component?ge?ge.children:null:y,A,O)})(G,Z[G.value.outlet],y,A.concat([G.value]),O),delete Z[G.value.outlet]}),nn(Z,(G,ge)=>Yo(G,y.getContext(ge),O)),O}function Yo(b,T,y){const A=Fa(b),O=b.value;nn(A,(Z,G)=>{Yo(Z,O.component?T?T.children.getContext(G):null:T,y)}),y.canDeactivateChecks.push(new no(O.component&&T&&T.outlet&&T.outlet.isActivated?T.outlet.component:null,O))}function Oe(b){return"function"==typeof b}function on(b){return b instanceof ce.K||"EmptyError"===b?.name}const Bl=Symbol("INITIAL_VALUE");function Bi(){return(0,Et.w)(b=>We(b.map(T=>T.pipe((0,Ne.q)(1),(0,Ve.O)(Bl)))).pipe((0,Dt.U)(T=>{for(const y of T)if(!0!==y){if(y===Bl)return Bl;if(!1===y||y instanceof cn)return y}return!0}),(0,ze.h)(T=>T!==Bl),(0,Ne.q)(1)))}function nc(b){return(0,ct.z)((0,Ct.b)(T=>{if(Ft(T))throw hl(0,T)}),(0,Dt.U)(T=>!0===T))}const So={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ha(b,T,y,A,O){const Z=Do(b,T,y);return Z.matched?function qr(b,T,y,A){const O=T.canMatch;if(!O||0===O.length)return(0,q.of)(!0);const Z=O.map(G=>{const ge=Nr(G,b);return mn(function ml(b){return b&&Oe(b.canMatch)}(ge)?ge.canMatch(T,y):b.runInContext(()=>ge(T,y)))});return(0,q.of)(Z).pipe(Bi(),nc())}(A=_a(T,A),T,y).pipe((0,Dt.U)(G=>!0===G?Z:{...So})):(0,q.of)(Z)}function Do(b,T,y){if(""===T.path)return"full"===T.pathMatch&&(b.hasChildren()||y.length>0)?{...So}:{matched:!0,consumedSegments:[],remainingSegments:y,parameters:{},positionalParamSegments:{}};const O=(T.matcher||Vr)(y,b,T);if(!O)return{...So};const Z={};nn(O.posParams,(ge,je)=>{Z[je]=ge.path});const G=O.consumed.length>0?{...Z,...O.consumed[O.consumed.length-1].parameters}:Z;return{matched:!0,consumedSegments:O.consumed,remainingSegments:y.slice(O.consumed.length),parameters:G,positionalParamSegments:O.posParams??{}}}function Ca(b,T,y,A){if(y.length>0&&function vl(b,T,y){return y.some(A=>wn(b,T,A)&&Rr(A)!==en)}(b,y,A)){const Z=new an(T,function Zl(b,T,y,A){const O={};O[en]=A,A._sourceSegment=b,A._segmentIndexShift=T.length;for(const Z of y)if(""===Z.path&&Rr(Z)!==en){const G=new an([],{});G._sourceSegment=b,G._segmentIndexShift=T.length,O[Rr(Z)]=G}return O}(b,T,A,new an(y,b.children)));return Z._sourceSegment=b,Z._segmentIndexShift=T.length,{segmentGroup:Z,slicedSegments:[]}}if(0===y.length&&function pu(b,T,y){return y.some(A=>wn(b,T,A))}(b,y,A)){const Z=new an(b.segments,function yl(b,T,y,A,O){const Z={};for(const G of A)if(wn(b,y,G)&&!O[Rr(G)]){const ge=new an([],{});ge._sourceSegment=b,ge._segmentIndexShift=T.length,Z[Rr(G)]=ge}return{...O,...Z}}(b,T,y,A,b.children));return Z._sourceSegment=b,Z._segmentIndexShift=T.length,{segmentGroup:Z,slicedSegments:y}}const O=new an(b.segments,b.children);return O._sourceSegment=b,O._segmentIndexShift=T.length,{segmentGroup:O,slicedSegments:y}}function wn(b,T,y){return(!(b.hasChildren()||T.length>0)||"full"!==y.pathMatch)&&""===y.path}function ba(b,T,y,A){return!!(Rr(b)===A||A!==en&&wn(T,y,b))&&("**"===b.path||Do(T,b,y).matched)}function $a(b,T,y){return 0===T.length&&!b.children[y]}const vs=!1;class Ao{constructor(T){this.segmentGroup=T||null}}class di{constructor(T){this.urlTree=T}}function Pi(b){return Be(new Ao(b))}function Hn(b){return Be(new di(b))}class rc{constructor(T,y,A,O,Z){this.injector=T,this.configLoader=y,this.urlSerializer=A,this.urlTree=O,this.config=Z,this.allowRedirects=!0}apply(){const T=Ca(this.urlTree.root,[],[],this.config).segmentGroup,y=new an(T.segments,T.children);return this.expandSegmentGroup(this.injector,this.config,y,en).pipe((0,Dt.U)(Z=>this.createUrlTree(nt(Z),this.urlTree.queryParams,this.urlTree.fragment))).pipe(xt(Z=>{if(Z instanceof di)return this.allowRedirects=!1,this.match(Z.urlTree);throw Z instanceof Ao?this.noMatchError(Z):Z}))}match(T){return this.expandSegmentGroup(this.injector,this.config,T.root,en).pipe((0,Dt.U)(O=>this.createUrlTree(nt(O),T.queryParams,T.fragment))).pipe(xt(O=>{throw O instanceof Ao?this.noMatchError(O):O}))}noMatchError(T){return new S.vHH(4002,vs)}createUrlTree(T,y,A){const O=Ce(T);return new cn(O,y,A)}expandSegmentGroup(T,y,A,O){return 0===A.segments.length&&A.hasChildren()?this.expandChildren(T,y,A).pipe((0,Dt.U)(Z=>new an([],Z))):this.expandSegment(T,A,y,A.segments,O,!0)}expandChildren(T,y,A){const O=[];for(const Z of Object.keys(A.children))"primary"===Z?O.unshift(Z):O.push(Z);return(0,o.D)(O).pipe(ut(Z=>{const G=A.children[Z],ge=va(y,Z);return this.expandSegmentGroup(T,ge,G,Z).pipe((0,Dt.U)(je=>({segment:je,outlet:Z})))}),(0,sn.R)((Z,G)=>(Z[G.outlet]=G.segment,Z),{}),xn())}expandSegment(T,y,A,O,Z,G){return(0,o.D)(A).pipe(ut(ge=>this.expandSegmentAgainstRoute(T,y,A,ge,O,Z,G).pipe(xt(gt=>{if(gt instanceof Ao)return(0,q.of)(null);throw gt}))),(0,dt.P)(ge=>!!ge),xt((ge,je)=>{if(on(ge))return $a(y,O,Z)?(0,q.of)(new an([],{})):Pi(y);throw ge}))}expandSegmentAgainstRoute(T,y,A,O,Z,G,ge){return ba(O,y,Z,G)?void 0===O.redirectTo?this.matchSegmentAgainstRoute(T,y,O,Z,G):ge&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(T,y,A,O,Z,G):Pi(y):Pi(y)}expandSegmentAgainstRouteUsingRedirect(T,y,A,O,Z,G){return"**"===O.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(T,A,O,G):this.expandRegularSegmentAgainstRouteUsingRedirect(T,y,A,O,Z,G)}expandWildCardWithParamsAgainstRouteUsingRedirect(T,y,A,O){const Z=this.applyRedirectCommands([],A.redirectTo,{});return A.redirectTo.startsWith("/")?Hn(Z):this.lineralizeSegments(A,Z).pipe((0,$e.z)(G=>{const ge=new an(G,{});return this.expandSegment(T,ge,y,G,O,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(T,y,A,O,Z,G){const{matched:ge,consumedSegments:je,remainingSegments:gt,positionalParamSegments:It}=Do(y,O,Z);if(!ge)return Pi(y);const Nn=this.applyRedirectCommands(je,O.redirectTo,It);return O.redirectTo.startsWith("/")?Hn(Nn):this.lineralizeSegments(O,Nn).pipe((0,$e.z)(Ar=>this.expandSegment(T,y,A,Ar.concat(gt),G,!1)))}matchSegmentAgainstRoute(T,y,A,O,Z){return"**"===A.path?(T=_a(A,T),A.loadChildren?(A._loadedRoutes?(0,q.of)({routes:A._loadedRoutes,injector:A._loadedInjector}):this.configLoader.loadChildren(T,A)).pipe((0,Dt.U)(ge=>(A._loadedRoutes=ge.routes,A._loadedInjector=ge.injector,new an(O,{})))):(0,q.of)(new an(O,{}))):Ha(y,A,O,T).pipe((0,Et.w)(({matched:G,consumedSegments:ge,remainingSegments:je})=>G?this.getChildConfig(T=A._injector??T,A,O).pipe((0,$e.z)(It=>{const Nn=It.injector??T,Ar=It.routes,{segmentGroup:Es,slicedSegments:Ts}=Ca(y,ge,je,Ar),oo=new an(Es.segments,Es.children);if(0===Ts.length&&oo.hasChildren())return this.expandChildren(Nn,Ar,oo).pipe((0,Dt.U)(Xc=>new an(ge,Xc)));if(0===Ar.length&&0===Ts.length)return(0,q.of)(new an(ge,{}));const Hi=Rr(A)===Z;return this.expandSegment(Nn,oo,Ar,Ts,Hi?en:Z,!0).pipe((0,Dt.U)(No=>new an(ge.concat(No.segments),No.children)))})):Pi(y)))}getChildConfig(T,y,A){return y.children?(0,q.of)({routes:y.children,injector:T}):y.loadChildren?void 0!==y._loadedRoutes?(0,q.of)({routes:y._loadedRoutes,injector:y._loadedInjector}):function _l(b,T,y,A){const O=T.canLoad;if(void 0===O||0===O.length)return(0,q.of)(!0);const Z=O.map(G=>{const ge=Nr(G,b);return mn(function Io(b){return b&&Oe(b.canLoad)}(ge)?ge.canLoad(T,y):b.runInContext(()=>ge(T,y)))});return(0,q.of)(Z).pipe(Bi(),nc())}(T,y,A).pipe((0,$e.z)(O=>O?this.configLoader.loadChildren(T,y).pipe((0,Ct.b)(Z=>{y._loadedRoutes=Z.routes,y._loadedInjector=Z.injector})):function qa(b){return Be(ma(vs,3))}())):(0,q.of)({routes:[],injector:T})}lineralizeSegments(T,y){let A=[],O=y.root;for(;;){if(A=A.concat(O.segments),0===O.numberOfChildren)return(0,q.of)(A);if(O.numberOfChildren>1||!O.children[en])return T.redirectTo,Be(new S.vHH(4e3,vs));O=O.children[en]}}applyRedirectCommands(T,y,A){return this.applyRedirectCreateUrlTree(y,this.urlSerializer.parse(y),T,A)}applyRedirectCreateUrlTree(T,y,A,O){const Z=this.createSegmentGroup(T,y.root,A,O);return new cn(Z,this.createQueryParams(y.queryParams,this.urlTree.queryParams),y.fragment)}createQueryParams(T,y){const A={};return nn(T,(O,Z)=>{if("string"==typeof O&&O.startsWith(":")){const ge=O.substring(1);A[Z]=y[ge]}else A[Z]=O}),A}createSegmentGroup(T,y,A,O){const Z=this.createSegments(T,y.segments,A,O);let G={};return nn(y.children,(ge,je)=>{G[je]=this.createSegmentGroup(T,ge,A,O)}),new an(Z,G)}createSegments(T,y,A,O){return y.map(Z=>Z.path.startsWith(":")?this.findPosParam(T,Z,O):this.findOrReturn(Z,A))}findPosParam(T,y,A){const O=A[y.path.substring(1)];if(!O)throw new S.vHH(4001,vs);return O}findOrReturn(T,y){let A=0;for(const O of y){if(O.path===T.path)return y.splice(A),O;A++}return T}}class Cl{}class x{constructor(T,y,A,O,Z,G,ge){this.injector=T,this.rootComponentType=y,this.config=A,this.urlTree=O,this.url=Z,this.paramsInheritanceStrategy=G,this.urlSerializer=ge}recognize(){const T=Ca(this.urlTree.root,[],[],this.config.filter(y=>void 0===y.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,T,en).pipe((0,Dt.U)(y=>{if(null===y)return null;const A=new ec([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},en,this.rootComponentType,null,this.urlTree.root,-1,{}),O=new Hr(A,y),Z=new zo(this.url,O);return this.inheritParamsAndData(Z._root),Z}))}inheritParamsAndData(T){const y=T.value,A=pa(y,this.paramsInheritanceStrategy);y.params=Object.freeze(A.params),y.data=Object.freeze(A.data),T.children.forEach(O=>this.inheritParamsAndData(O))}processSegmentGroup(T,y,A,O){return 0===A.segments.length&&A.hasChildren()?this.processChildren(T,y,A):this.processSegment(T,y,A,A.segments,O)}processChildren(T,y,A){return(0,o.D)(Object.keys(A.children)).pipe(ut(O=>{const Z=A.children[O],G=va(y,O);return this.processSegmentGroup(T,G,Z,O)}),(0,sn.R)((O,Z)=>O&&Z?(O.push(...Z),O):null),function Jn(b,T=!1){return(0,et.e)((y,A)=>{let O=0;y.subscribe((0,de.x)(A,Z=>{const G=b(Z,O++);(G||T)&&A.next(Z),!G&&A.complete()}))})}(O=>null!==O),(0,Jt.d)(null),xn(),(0,Dt.U)(O=>{if(null===O)return null;const Z=X(O);return function V(b){b.sort((T,y)=>T.value.outlet===en?-1:y.value.outlet===en?1:T.value.outlet.localeCompare(y.value.outlet))}(Z),Z}))}processSegment(T,y,A,O,Z){return(0,o.D)(y).pipe(ut(G=>this.processSegmentAgainstRoute(G._injector??T,G,A,O,Z)),(0,dt.P)(G=>!!G),xt(G=>{if(on(G))return $a(A,O,Z)?(0,q.of)([]):(0,q.of)(null);throw G}))}processSegmentAgainstRoute(T,y,A,O,Z){if(y.redirectTo||!ba(y,A,O,Z))return(0,q.of)(null);let G;if("**"===y.path){const ge=O.length>0?ai(O).parameters:{},je=Ot(A)+O.length,gt=new ec(O,ge,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Un(y),Rr(y),y.component??y._loadedComponent??null,y,qe(A),je,Mn(y));G=(0,q.of)({snapshot:gt,consumedSegments:[],remainingSegments:[]})}else G=Ha(A,y,O,T).pipe((0,Dt.U)(({matched:ge,consumedSegments:je,remainingSegments:gt,parameters:It})=>{if(!ge)return null;const Nn=Ot(A)+je.length;return{snapshot:new ec(je,It,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Un(y),Rr(y),y.component??y._loadedComponent??null,y,qe(A),Nn,Mn(y)),consumedSegments:je,remainingSegments:gt}}));return G.pipe((0,Et.w)(ge=>{if(null===ge)return(0,q.of)(null);const{snapshot:je,consumedSegments:gt,remainingSegments:It}=ge;T=y._injector??T;const Nn=y._loadedInjector??T,Ar=function N(b){return b.children?b.children:b.loadChildren?b._loadedRoutes:[]}(y),{segmentGroup:Es,slicedSegments:Ts}=Ca(A,gt,It,Ar.filter(Hi=>void 0===Hi.redirectTo));if(0===Ts.length&&Es.hasChildren())return this.processChildren(Nn,Ar,Es).pipe((0,Dt.U)(Hi=>null===Hi?null:[new Hr(je,Hi)]));if(0===Ar.length&&0===Ts.length)return(0,q.of)([new Hr(je,[])]);const oo=Rr(y)===Z;return this.processSegment(Nn,Ar,Es,Ts,oo?en:Z).pipe((0,Dt.U)(Hi=>null===Hi?null:[new Hr(je,Hi)]))}))}}function $(b){const T=b.value.routeConfig;return T&&""===T.path&&void 0===T.redirectTo}function X(b){const T=[],y=new Set;for(const A of b){if(!$(A)){T.push(A);continue}const O=T.find(Z=>A.value.routeConfig===Z.value.routeConfig);void 0!==O?(O.children.push(...A.children),y.add(O)):T.push(A)}for(const A of y){const O=X(A.children);T.push(new Hr(A.value,O))}return T.filter(A=>!y.has(A))}function qe(b){let T=b;for(;T._sourceSegment;)T=T._sourceSegment;return T}function Ot(b){let T=b,y=T._segmentIndexShift??0;for(;T._sourceSegment;)T=T._sourceSegment,y+=T._segmentIndexShift??0;return y-1}function Un(b){return b.data||{}}function Mn(b){return b.resolve||{}}function xo(b){return"string"==typeof b.title||null===b.title}function kr(b){return(0,Et.w)(T=>{const y=b(T);return y?(0,o.D)(y).pipe((0,Dt.U)(()=>T)):(0,q.of)(T)})}const rs=new S.OlP("ROUTES");let wi=(()=>{class b{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,S.f3M)(S.Sil)}loadComponent(y){if(this.componentLoaders.get(y))return this.componentLoaders.get(y);if(y._loadedComponent)return(0,q.of)(y._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(y);const A=mn(y.loadComponent()).pipe((0,Dt.U)(so),(0,Ct.b)(Z=>{this.onLoadEndListener&&this.onLoadEndListener(y),y._loadedComponent=Z}),Mr(()=>{this.componentLoaders.delete(y)})),O=new De(A,()=>new Yt.x).pipe(At());return this.componentLoaders.set(y,O),O}loadChildren(y,A){if(this.childrenLoaders.get(A))return this.childrenLoaders.get(A);if(A._loadedRoutes)return(0,q.of)({routes:A._loadedRoutes,injector:A._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(A);const Z=this.loadModuleFactoryOrRoutes(A.loadChildren).pipe((0,Dt.U)(ge=>{this.onLoadEndListener&&this.onLoadEndListener(A);let je,gt,It=!1;Array.isArray(ge)?gt=ge:(je=ge.create(y).injector,gt=oi(je.get(rs,[],S.XFs.Self|S.XFs.Optional)));return{routes:gt.map(ya),injector:je}}),Mr(()=>{this.childrenLoaders.delete(A)})),G=new De(Z,()=>new Yt.x).pipe(At());return this.childrenLoaders.set(A,G),G}loadModuleFactoryOrRoutes(y){return mn(y()).pipe((0,Dt.U)(so),(0,$e.z)(A=>A instanceof S.YKP||Array.isArray(A)?(0,q.of)(A):(0,o.D)(this.compiler.compileModuleAsync(A))))}}return b.\u0275fac=function(y){return new(y||b)},b.\u0275prov=S.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function so(b){return function Hl(b){return b&&"object"==typeof b&&"default"in b}(b)?b.default:b}let Ga=(()=>{class b{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Yt.x,this.configLoader=(0,S.f3M)(wi),this.environmentInjector=(0,S.f3M)(S.lqb),this.urlSerializer=(0,S.f3M)(Ai),this.rootContexts=(0,S.f3M)(Ua),this.navigationId=0,this.afterPreactivation=()=>(0,q.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=O=>this.events.next(new wo(O)),this.configLoader.onLoadStartListener=O=>this.events.next(new da(O))}complete(){this.transitions?.complete()}handleNavigationRequest(y){const A=++this.navigationId;this.transitions?.next({...this.transitions.value,...y,id:A})}setupNavigations(y){return this.transitions=new he.X({id:0,targetPageId:0,currentUrlTree:y.currentUrlTree,currentRawUrl:y.currentUrlTree,extractedUrl:y.urlHandlingStrategy.extract(y.currentUrlTree),urlAfterRedirects:y.urlHandlingStrategy.extract(y.currentUrlTree),rawUrl:y.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:gs,restoredState:null,currentSnapshot:y.routerState.snapshot,targetSnapshot:null,currentRouterState:y.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,ze.h)(A=>0!==A.id),(0,Dt.U)(A=>({...A,extractedUrl:y.urlHandlingStrategy.extract(A.rawUrl)})),(0,Et.w)(A=>{let O=!1,Z=!1;return(0,q.of)(A).pipe((0,Ct.b)(G=>{this.currentNavigation={id:G.id,initialUrl:G.rawUrl,extractedUrl:G.extractedUrl,trigger:G.source,extras:G.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Et.w)(G=>{const ge=y.browserUrlTree.toString(),je=!y.navigated||G.extractedUrl.toString()!==ge||ge!==y.currentUrlTree.toString();if(!je&&"reload"!==(G.extras.onSameUrlNavigation??y.onSameUrlNavigation)){const It="";return this.events.next(new mi(G.id,y.serializeUrl(A.rawUrl),It,0)),y.rawUrlTree=G.rawUrl,G.resolve(null),He.E}if(y.urlHandlingStrategy.shouldProcessUrl(G.rawUrl))return sc(G.source)&&(y.browserUrlTree=G.extractedUrl),(0,q.of)(G).pipe((0,Et.w)(It=>{const Nn=this.transitions?.getValue();return this.events.next(new wr(It.id,this.urlSerializer.serialize(It.extractedUrl),It.source,It.restoredState)),Nn!==this.transitions?.getValue()?He.E:Promise.resolve(It)}),function gu(b,T,y,A){return(0,Et.w)(O=>function io(b,T,y,A,O){return new rc(b,T,y,A,O).apply()}(b,T,y,O.extractedUrl,A).pipe((0,Dt.U)(Z=>({...O,urlAfterRedirects:Z}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,y.config),(0,Ct.b)(It=>{this.currentNavigation={...this.currentNavigation,finalUrl:It.urlAfterRedirects},A.urlAfterRedirects=It.urlAfterRedirects}),function Tn(b,T,y,A,O){return(0,$e.z)(Z=>function za(b,T,y,A,O,Z,G="emptyOnly"){return new x(b,T,y,A,O,G,Z).recognize().pipe((0,Et.w)(ge=>null===ge?function jl(b){return new me.y(T=>T.error(b))}(new Cl):(0,q.of)(ge)))}(b,T,y,Z.urlAfterRedirects,A.serialize(Z.urlAfterRedirects),A,O).pipe((0,Dt.U)(G=>({...Z,targetSnapshot:G}))))}(this.environmentInjector,this.rootComponentType,y.config,this.urlSerializer,y.paramsInheritanceStrategy),(0,Ct.b)(It=>{if(A.targetSnapshot=It.targetSnapshot,"eager"===y.urlUpdateStrategy){if(!It.extras.skipLocationChange){const Ar=y.urlHandlingStrategy.merge(It.urlAfterRedirects,It.rawUrl);y.setBrowserUrl(Ar,It)}y.browserUrlTree=It.urlAfterRedirects}const Nn=new ui(It.id,this.urlSerializer.serialize(It.extractedUrl),this.urlSerializer.serialize(It.urlAfterRedirects),It.targetSnapshot);this.events.next(Nn)}));if(je&&y.urlHandlingStrategy.shouldProcessUrl(y.rawUrlTree)){const{id:It,extractedUrl:Nn,source:Ar,restoredState:Es,extras:Ts}=G,oo=new wr(It,this.urlSerializer.serialize(Nn),Ar,Es);this.events.next(oo);const Hi=cl(Nn,this.rootComponentType).snapshot;return A={...G,targetSnapshot:Hi,urlAfterRedirects:Nn,extras:{...Ts,skipLocationChange:!1,replaceUrl:!1}},(0,q.of)(A)}{const It="";return this.events.next(new mi(G.id,y.serializeUrl(A.extractedUrl),It,1)),y.rawUrlTree=G.rawUrl,G.resolve(null),He.E}}),(0,Ct.b)(G=>{const ge=new sr(G.id,this.urlSerializer.serialize(G.extractedUrl),this.urlSerializer.serialize(G.urlAfterRedirects),G.targetSnapshot);this.events.next(ge)}),(0,Dt.U)(G=>A={...G,guards:Ul(G.targetSnapshot,G.currentSnapshot,this.rootContexts)}),function Za(b,T){return(0,$e.z)(y=>{const{targetSnapshot:A,currentSnapshot:O,guards:{canActivateChecks:Z,canDeactivateChecks:G}}=y;return 0===G.length&&0===Z.length?(0,q.of)({...y,guardsResult:!0}):function Or(b,T,y,A){return(0,o.D)(b).pipe((0,$e.z)(O=>function ja(b,T,y,A,O){const Z=T&&T.routeConfig?T.routeConfig.canDeactivate:null;if(!Z||0===Z.length)return(0,q.of)(!0);const G=Z.map(ge=>{const je=ys(T)??O,gt=Nr(ge,je);return mn(function ro(b){return b&&Oe(b.canDeactivate)}(gt)?gt.canDeactivate(b,T,y,A):je.runInContext(()=>gt(b,T,y,A))).pipe((0,dt.P)())});return(0,q.of)(G).pipe(Bi())}(O.component,O.route,y,T,A)),(0,dt.P)(O=>!0!==O,!0))}(G,A,O,b).pipe((0,$e.z)(ge=>ge&&function hn(b){return"boolean"==typeof b}(ge)?function Mi(b,T,y,A){return(0,o.D)(T).pipe(ut(O=>(0,Ue.z)(function Qo(b,T){return null!==b&&T&&T(new Co(b)),(0,q.of)(!0)}(O.route.parent,A),function Ps(b,T){return null!==b&&T&&T(new al(b)),(0,q.of)(!0)}(O.route,A),function fu(b,T,y){const A=T[T.length-1],Z=T.slice(0,T.length-1).reverse().map(G=>function Vl(b){const T=b.routeConfig?b.routeConfig.canActivateChild:null;return T&&0!==T.length?{node:b,guards:T}:null}(G)).filter(G=>null!==G).map(G=>Xe(()=>{const ge=G.guards.map(je=>{const gt=ys(G.node)??y,It=Nr(je,gt);return mn(function ri(b){return b&&Oe(b.canActivateChild)}(It)?It.canActivateChild(A,b):gt.runInContext(()=>It(A,b))).pipe((0,dt.P)())});return(0,q.of)(ge).pipe(Bi())}));return(0,q.of)(Z).pipe(Bi())}(b,O.path,y),function ts(b,T,y){const A=T.routeConfig?T.routeConfig.canActivate:null;if(!A||0===A.length)return(0,q.of)(!0);const O=A.map(Z=>Xe(()=>{const G=ys(T)??y,ge=Nr(Z,G);return mn(function Ba(b){return b&&Oe(b.canActivate)}(ge)?ge.canActivate(T,b):G.runInContext(()=>ge(T,b))).pipe((0,dt.P)())}));return(0,q.of)(O).pipe(Bi())}(b,O.route,y))),(0,dt.P)(O=>!0!==O,!0))}(A,Z,b,T):(0,q.of)(ge)),(0,Dt.U)(ge=>({...y,guardsResult:ge})))})}(this.environmentInjector,G=>this.events.next(G)),(0,Ct.b)(G=>{if(A.guardsResult=G.guardsResult,Ft(G.guardsResult))throw hl(0,G.guardsResult);const ge=new Qi(G.id,this.urlSerializer.serialize(G.extractedUrl),this.urlSerializer.serialize(G.urlAfterRedirects),G.targetSnapshot,!!G.guardsResult);this.events.next(ge)}),(0,ze.h)(G=>!!G.guardsResult||(y.restoreHistory(G),this.cancelNavigationTransition(G,"",3),!1)),kr(G=>{if(G.guards.canActivateChecks.length)return(0,q.of)(G).pipe((0,Ct.b)(ge=>{const je=new Ho(ge.id,this.urlSerializer.serialize(ge.extractedUrl),this.urlSerializer.serialize(ge.urlAfterRedirects),ge.targetSnapshot);this.events.next(je)}),(0,Et.w)(ge=>{let je=!1;return(0,q.of)(ge).pipe(function Dr(b,T){return(0,$e.z)(y=>{const{targetSnapshot:A,guards:{canActivateChecks:O}}=y;if(!O.length)return(0,q.of)(y);let Z=0;return(0,o.D)(O).pipe(ut(G=>function Vn(b,T,y,A){const O=b.routeConfig,Z=b._resolve;return void 0!==O?.title&&!xo(O)&&(Z[Xr]=O.title),function Cr(b,T,y,A){const O=function Ri(b){return[...Object.keys(b),...Object.getOwnPropertySymbols(b)]}(b);if(0===O.length)return(0,q.of)({});const Z={};return(0,o.D)(O).pipe((0,$e.z)(G=>function ns(b,T,y,A){const O=ys(T)??A,Z=Nr(b,O);return mn(Z.resolve?Z.resolve(T,y):O.runInContext(()=>Z(T,y)))}(b[G],T,y,A).pipe((0,dt.P)(),(0,Ct.b)(ge=>{Z[G]=ge}))),Tt(1),function hr(b){return(0,Dt.U)(()=>b)}(Z),xt(G=>on(G)?He.E:Be(G)))}(Z,b,T,A).pipe((0,Dt.U)(G=>(b._resolvedData=G,b.data=pa(b,y).resolve,O&&xo(O)&&(b.data[Xr]=O.title),null)))}(G.route,A,b,T)),(0,Ct.b)(()=>Z++),Tt(1),(0,$e.z)(G=>Z===O.length?(0,q.of)(y):He.E))})}(y.paramsInheritanceStrategy,this.environmentInjector),(0,Ct.b)({next:()=>je=!0,complete:()=>{je||(y.restoreHistory(ge),this.cancelNavigationTransition(ge,"",2))}}))}),(0,Ct.b)(ge=>{const je=new ol(ge.id,this.urlSerializer.serialize(ge.extractedUrl),this.urlSerializer.serialize(ge.urlAfterRedirects),ge.targetSnapshot);this.events.next(je)}))}),kr(G=>{const ge=je=>{const gt=[];je.routeConfig?.loadComponent&&!je.routeConfig._loadedComponent&&gt.push(this.configLoader.loadComponent(je.routeConfig).pipe((0,Ct.b)(It=>{je.component=It}),(0,Dt.U)(()=>{})));for(const It of je.children)gt.push(...ge(It));return gt};return We(ge(G.targetSnapshot.root)).pipe((0,Jt.d)(),(0,Ne.q)(1))}),kr(()=>this.afterPreactivation()),(0,Dt.U)(G=>{const ge=function tc(b,T,y){const A=ga(b,T._root,y?y._root:void 0);return new qo(A,T)}(y.routeReuseStrategy,G.targetSnapshot,G.currentRouterState);return A={...G,targetRouterState:ge}}),(0,Ct.b)(G=>{y.currentUrlTree=G.urlAfterRedirects,y.rawUrlTree=y.urlHandlingStrategy.merge(G.urlAfterRedirects,G.rawUrl),y.routerState=G.targetRouterState,"deferred"===y.urlUpdateStrategy&&(G.extras.skipLocationChange||y.setBrowserUrl(y.rawUrlTree,G),y.browserUrlTree=G.urlAfterRedirects)}),((b,T,y)=>(0,Dt.U)(A=>(new To(T,A.targetRouterState,A.currentRouterState,y).activate(b),A)))(this.rootContexts,y.routeReuseStrategy,G=>this.events.next(G)),(0,Ne.q)(1),(0,Ct.b)({next:G=>{O=!0,this.lastSuccessfulNavigation=this.currentNavigation,y.navigated=!0,this.events.next(new Yi(G.id,this.urlSerializer.serialize(G.extractedUrl),this.urlSerializer.serialize(y.currentUrlTree))),y.titleStrategy?.updateTitle(G.targetRouterState.snapshot),G.resolve(!0)},complete:()=>{O=!0}}),Mr(()=>{O||Z||this.cancelNavigationTransition(A,"",1),this.currentNavigation?.id===A.id&&(this.currentNavigation=null)}),xt(G=>{if(Z=!0,fl(G)){Ll(G)||(y.navigated=!0,y.restoreHistory(A,!0));const ge=new ms(A.id,this.urlSerializer.serialize(A.extractedUrl),G.message,G.cancellationCode);if(this.events.next(ge),Ll(G)){const je=y.urlHandlingStrategy.merge(G.url,y.rawUrlTree),gt={skipLocationChange:A.extras.skipLocationChange,replaceUrl:"eager"===y.urlUpdateStrategy||sc(A.source)};y.scheduleNavigation(je,gs,null,gt,{resolve:A.resolve,reject:A.reject,promise:A.promise})}else A.resolve(!1)}else{y.restoreHistory(A,!0);const ge=new xs(A.id,this.urlSerializer.serialize(A.extractedUrl),G,A.targetSnapshot??void 0);this.events.next(ge);try{A.resolve(y.errorHandler(G))}catch(je){A.reject(je)}}return He.E}))}))}cancelNavigationTransition(y,A,O){const Z=new ms(y.id,this.urlSerializer.serialize(y.extractedUrl),A,O);this.events.next(Z),y.resolve(!1)}}return b.\u0275fac=function(y){return new(y||b)},b.\u0275prov=S.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function sc(b){return b!==gs}let un=(()=>{class b{buildTitle(y){let A,O=y.root;for(;void 0!==O;)A=this.getResolvedTitleForRoute(O)??A,O=O.children.find(Z=>Z.outlet===en);return A}getResolvedTitleForRoute(y){return y.data[Xr]}}return b.\u0275fac=function(y){return new(y||b)},b.\u0275prov=S.Yz7({token:b,factory:function(){return(0,S.f3M)(Mo)},providedIn:"root"}),b})(),Mo=(()=>{class b extends un{constructor(y){super(),this.title=y}updateTitle(y){const A=this.buildTitle(y);void 0!==A&&this.title.setTitle(A)}}return b.\u0275fac=function(y){return new(y||b)(S.LFG(Jr.Dx))},b.\u0275prov=S.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})(),ws=(()=>{class b{}return b.\u0275fac=function(y){return new(y||b)},b.\u0275prov=S.Yz7({token:b,factory:function(){return(0,S.f3M)(Xn)},providedIn:"root"}),b})();class Po{shouldDetach(T){return!1}store(T,y){}shouldAttach(T){return!1}retrieve(T){return null}shouldReuseRoute(T,y){return T.routeConfig===y.routeConfig}}let Xn=(()=>{class b extends Po{}return b.\u0275fac=function(){let T;return function(A){return(T||(T=S.n5z(b)))(A||b)}}(),b.\u0275prov=S.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();const Jo=new S.OlP("",{providedIn:"root",factory:()=>({})});let ur=(()=>{class b{}return b.\u0275fac=function(y){return new(y||b)},b.\u0275prov=S.Yz7({token:b,factory:function(){return(0,S.f3M)($l)},providedIn:"root"}),b})(),$l=(()=>{class b{shouldProcessUrl(y){return!0}extract(y){return y}merge(y,A){return y}}return b.\u0275fac=function(y){return new(y||b)},b.\u0275prov=S.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function oc(b){throw b}function _u(b,T,y){return T.parse("/")}const bl={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},$n={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ni=(()=>{class b{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,S.f3M)(S.c2e),this.isNgZoneEnabled=!1,this.options=(0,S.f3M)(Jo,{optional:!0})||{},this.errorHandler=this.options.errorHandler||oc,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||_u,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,S.f3M)(ur),this.routeReuseStrategy=(0,S.f3M)(ws),this.urlCreationStrategy=(0,S.f3M)(ll),this.titleStrategy=(0,S.f3M)(un),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=oi((0,S.f3M)(rs,{optional:!0})??[]),this.navigationTransitions=(0,S.f3M)(Ga),this.urlSerializer=(0,S.f3M)(Ai),this.location=(0,S.f3M)(_t.Ye),this.isNgZoneEnabled=(0,S.f3M)(S.R0b)instanceof S.R0b&&S.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new cn,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=cl(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(y=>{this.lastSuccessfulId=y.id,this.currentPageId=this.browserPageId??0},y=>{this.console.warn(`Unhandled Navigation Error: ${y}`)})}resetRootComponentType(y){this.routerState.root.component=y,this.navigationTransitions.rootComponentType=y}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const y=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),gs,y)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(y=>{const A="popstate"===y.type?"popstate":"hashchange";"popstate"===A&&setTimeout(()=>{this.navigateToSyncWithBrowser(y.url,A,y.state)},0)}))}navigateToSyncWithBrowser(y,A,O){const Z={replaceUrl:!0},G=O?.navigationId?O:null;if(O){const je={...O};delete je.navigationId,delete je.\u0275routerPageId,0!==Object.keys(je).length&&(Z.state=je)}const ge=this.parseUrl(y);this.scheduleNavigation(ge,A,G,Z)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(y){this.config=y.map(ya),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(y,A={}){const{relativeTo:O,queryParams:Z,fragment:G,queryParamsHandling:ge,preserveFragment:je}=A,gt=je?this.currentUrlTree.fragment:G;let It=null;switch(ge){case"merge":It={...this.currentUrlTree.queryParams,...Z};break;case"preserve":It=this.currentUrlTree.queryParams;break;default:It=Z||null}return null!==It&&(It=this.removeEmptyProps(It)),this.urlCreationStrategy.createUrlTree(O,this.routerState,this.currentUrlTree,y,It,gt??null)}navigateByUrl(y,A={skipLocationChange:!1}){const O=Ft(y)?y:this.parseUrl(y),Z=this.urlHandlingStrategy.merge(O,this.rawUrlTree);return this.scheduleNavigation(Z,gs,null,A)}navigate(y,A={skipLocationChange:!1}){return function Fr(b){for(let T=0;T<b.length;T++){const y=b[T];if(null==y)throw new S.vHH(4008,false)}}(y),this.navigateByUrl(this.createUrlTree(y,A),A)}serializeUrl(y){return this.urlSerializer.serialize(y)}parseUrl(y){let A;try{A=this.urlSerializer.parse(y)}catch(O){A=this.malformedUriErrorHandler(O,this.urlSerializer,y)}return A}isActive(y,A){let O;if(O=!0===A?{...bl}:!1===A?{...$n}:A,Ft(y))return ei(this.currentUrlTree,y,O);const Z=this.parseUrl(y);return ei(this.currentUrlTree,Z,O)}removeEmptyProps(y){return Object.keys(y).reduce((A,O)=>{const Z=y[O];return null!=Z&&(A[O]=Z),A},{})}scheduleNavigation(y,A,O,Z,G){if(this.disposed)return Promise.resolve(!1);let ge,je,gt,It;return G?(ge=G.resolve,je=G.reject,gt=G.promise):gt=new Promise((Nn,Ar)=>{ge=Nn,je=Ar}),It="computed"===this.canceledNavigationResolution?O&&O.\u0275routerPageId?O.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:It,source:A,restoredState:O,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:y,extras:Z,resolve:ge,reject:je,promise:gt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),gt.catch(Nn=>Promise.reject(Nn))}setBrowserUrl(y,A){const O=this.urlSerializer.serialize(y);if(this.location.isCurrentPathEqualTo(O)||A.extras.replaceUrl){const G={...A.extras.state,...this.generateNgRouterState(A.id,this.browserPageId)};this.location.replaceState(O,"",G)}else{const Z={...A.extras.state,...this.generateNgRouterState(A.id,A.targetPageId)};this.location.go(O,"",Z)}}restoreHistory(y,A=!1){if("computed"===this.canceledNavigationResolution){const Z=this.currentPageId-(this.browserPageId??this.currentPageId);0!==Z?this.location.historyGo(Z):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===Z&&(this.resetState(y),this.browserUrlTree=y.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(A&&this.resetState(y),this.resetUrlToCurrentUrlTree())}resetState(y){this.routerState=y.currentRouterState,this.currentUrlTree=y.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,y.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(y,A){return"computed"===this.canceledNavigationResolution?{navigationId:y,\u0275routerPageId:A}:{navigationId:y}}}return b.\u0275fac=function(y){return new(y||b)},b.\u0275prov=S.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})(),ke=(()=>{class b{constructor(y,A,O,Z,G,ge){this.router=y,this.route=A,this.tabIndexAttribute=O,this.renderer=Z,this.el=G,this.locationStrategy=ge,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new Yt.x;const je=G.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===je||"area"===je,this.isAnchorElement?this.subscription=y.events.subscribe(gt=>{gt instanceof Yi&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(y){this._preserveFragment=(0,S.D6c)(y)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(y){this._skipLocationChange=(0,S.D6c)(y)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(y){this._replaceUrl=(0,S.D6c)(y)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(y){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",y)}ngOnChanges(y){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(y){null!=y?(this.commands=Array.isArray(y)?y:[y],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(y,A,O,Z,G){return!!(null===this.urlTree||this.isAnchorElement&&(0!==y||A||O||Z||G||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const y=null===this.href?null:(0,S.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",y)}applyAttributeValue(y,A){const O=this.renderer,Z=this.el.nativeElement;null!==A?O.setAttribute(Z,y,A):O.removeAttribute(Z,y)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return b.\u0275fac=function(y){return new(y||b)(S.Y36(Ni),S.Y36(fa),S.$8M("tabindex"),S.Y36(S.Qsj),S.Y36(S.SBq),S.Y36(_t.S$))},b.\u0275dir=S.lG2({type:b,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(y,A){1&y&&S.NdJ("click",function(Z){return A.onClick(Z.button,Z.ctrlKey,Z.shiftKey,Z.altKey,Z.metaKey)}),2&y&&S.uIk("target",A.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[S.TTD]}),b})();class ii{}let Zi=(()=>{class b{constructor(y,A,O,Z,G){this.router=y,this.injector=O,this.preloadingStrategy=Z,this.loader=G}setUpPreloading(){this.subscription=this.router.events.pipe((0,ze.h)(y=>y instanceof Yi),ut(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(y,A){const O=[];for(const Z of A){Z.providers&&!Z._injector&&(Z._injector=(0,S.MMx)(Z.providers,y,`Route: ${Z.path}`));const G=Z._injector??y,ge=Z._loadedInjector??G;(Z.loadChildren&&!Z._loadedRoutes&&void 0===Z.canLoad||Z.loadComponent&&!Z._loadedComponent)&&O.push(this.preloadConfig(G,Z)),(Z.children||Z._loadedRoutes)&&O.push(this.processRoutes(ge,Z.children??Z._loadedRoutes))}return(0,o.D)(O).pipe((0,Qr.J)())}preloadConfig(y,A){return this.preloadingStrategy.preload(A,()=>{let O;O=A.loadChildren&&void 0===A.canLoad?this.loader.loadChildren(y,A):(0,q.of)(null);const Z=O.pipe((0,$e.z)(G=>null===G?(0,q.of)(void 0):(A._loadedRoutes=G.routes,A._loadedInjector=G.injector,this.processRoutes(G.injector??y,G.routes))));if(A.loadComponent&&!A._loadedComponent){const G=this.loader.loadComponent(A);return(0,o.D)([Z,G]).pipe((0,Qr.J)())}return Z})}}return b.\u0275fac=function(y){return new(y||b)(S.LFG(Ni),S.LFG(S.Sil),S.LFG(S.lqb),S.LFG(ii),S.LFG(wi))},b.\u0275prov=S.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();const bt=new S.OlP("");let Ya=(()=>{class b{constructor(y,A,O,Z,G={}){this.urlSerializer=y,this.transitions=A,this.viewportScroller=O,this.zone=Z,this.options=G,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},G.scrollPositionRestoration=G.scrollPositionRestoration||"disabled",G.anchorScrolling=G.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(y=>{y instanceof wr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=y.navigationTrigger,this.restoredId=y.restoredState?y.restoredState.navigationId:0):y instanceof Yi&&(this.lastId=y.id,this.scheduleScrollEvent(y,this.urlSerializer.parse(y.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(y=>{y instanceof Sr&&(y.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(y.position):y.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(y.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(y,A){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Sr(y,"popstate"===this.lastSource?this.store[this.restoredId]:null,A))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return b.\u0275fac=function(y){S.$Z()},b.\u0275prov=S.Yz7({token:b,factory:b.\u0275fac}),b})();var qt=(()=>((qt=qt||{})[qt.COMPLETE=0]="COMPLETE",qt[qt.FAILED=1]="FAILED",qt[qt.REDIRECTING=2]="REDIRECTING",qt))();const is=!1;function ss(b,T){return{\u0275kind:b,\u0275providers:T}}const Xo=new S.OlP("",{providedIn:"root",factory:()=>!1});function Ci(){const b=(0,S.f3M)(S.zs3);return T=>{const y=b.get(S.z2F);if(T!==y.components[0])return;const A=b.get(Ni),O=b.get(Rs);1===b.get(lc)&&A.initialNavigation(),b.get(ji,null,S.XFs.Optional)?.setUpPreloading(),b.get(bt,null,S.XFs.Optional)?.init(),A.resetRootComponentType(y.componentTypes[0]),O.closed||(O.next(),O.complete(),O.unsubscribe())}}const Rs=new S.OlP(is?"bootstrap done indicator":"",{factory:()=>new Yt.x}),lc=new S.OlP(is?"initial navigation":"",{providedIn:"root",factory:()=>1});function cc(){let b=[];return b=is?[{provide:S.Xts,multi:!0,useFactory:()=>{const T=(0,S.f3M)(Ni);return()=>T.events.subscribe(y=>{console.group?.(`Router Event: ${y.constructor.name}`),console.log(function $o(b){if(!("type"in b))return`Unknown Router Event: ${b.constructor.name}`;switch(b.type){case 14:return`ActivationEnd(path: '${b.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${b.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${b.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${b.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${b.id}, url: '${b.url}', urlAfterRedirects: '${b.urlAfterRedirects}', state: ${b.state}, shouldActivate: ${b.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${b.id}, url: '${b.url}', urlAfterRedirects: '${b.urlAfterRedirects}', state: ${b.state})`;case 2:return`NavigationCancel(id: ${b.id}, url: '${b.url}')`;case 16:return`NavigationSkipped(id: ${b.id}, url: '${b.url}')`;case 1:return`NavigationEnd(id: ${b.id}, url: '${b.url}', urlAfterRedirects: '${b.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${b.id}, url: '${b.url}', error: ${b.error})`;case 0:return`NavigationStart(id: ${b.id}, url: '${b.url}')`;case 6:return`ResolveEnd(id: ${b.id}, url: '${b.url}', urlAfterRedirects: '${b.urlAfterRedirects}', state: ${b.state})`;case 5:return`ResolveStart(id: ${b.id}, url: '${b.url}', urlAfterRedirects: '${b.urlAfterRedirects}', state: ${b.state})`;case 10:return`RouteConfigLoadEnd(path: ${b.route.path})`;case 9:return`RouteConfigLoadStart(path: ${b.route.path})`;case 4:return`RoutesRecognized(id: ${b.id}, url: '${b.url}', urlAfterRedirects: '${b.urlAfterRedirects}', state: ${b.state})`;case 15:return`Scroll(anchor: '${b.anchor}', position: '${b.position?`${b.position[0]}, ${b.position[1]}`:null}')`}}(y)),console.log(y),console.groupEnd?.()})}}]:[],ss(1,b)}const ji=new S.OlP(is?"router preloader":"");function Qa(b){return ss(0,[{provide:ji,useExisting:Zi},{provide:ii,useExisting:b}])}const Hs=!1,Cu=new S.OlP(Hs?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),Oi=[_t.Ye,{provide:Ai,useClass:ir},Ni,Ua,{provide:fa,useFactory:function yu(b){return b.routerState.root},deps:[Ni]},wi,Hs?{provide:Xo,useValue:!0}:[]];function $s(){return new S.PXZ("Router",Ni)}let bu=(()=>{class b{constructor(y){}static forRoot(y,A){return{ngModule:b,providers:[Oi,Hs&&A?.enableTracing?cc().\u0275providers:[],{provide:rs,multi:!0,useValue:y},{provide:Cu,useFactory:Eu,deps:[[Ni,new S.FiY,new S.tp0]]},{provide:Jo,useValue:A||{}},A?.useHash?{provide:_t.S$,useClass:_t.Do}:{provide:_t.S$,useClass:_t.b0},{provide:bt,useFactory:()=>{const b=(0,S.f3M)(_t.EM),T=(0,S.f3M)(S.R0b),y=(0,S.f3M)(Jo),A=(0,S.f3M)(Ga),O=(0,S.f3M)(Ai);return y.scrollOffset&&b.setOffset(y.scrollOffset),new Ya(O,A,b,T,y)}},A?.preloadingStrategy?Qa(A.preloadingStrategy).\u0275providers:[],{provide:S.PXZ,multi:!0,useFactory:$s},A?.initialNavigation?Tl(A):[],[{provide:Ja,useFactory:Ci},{provide:S.tb,multi:!0,useExisting:Ja}]]}}static forChild(y){return{ngModule:b,providers:[{provide:rs,multi:!0,useValue:y}]}}}return b.\u0275fac=function(y){return new(y||b)(S.LFG(Cu,8))},b.\u0275mod=S.oAB({type:b}),b.\u0275inj=S.cJS({imports:[ci]}),b})();function Eu(b){if(Hs&&b)throw new S.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Tl(b){return["disabled"===b.initialNavigation?ss(3,[{provide:S.ip1,multi:!0,useFactory:()=>{const T=(0,S.f3M)(Ni);return()=>{T.setUpLocationChangeListener()}}},{provide:lc,useValue:2}]).\u0275providers:[],"enabledBlocking"===b.initialNavigation?ss(2,[{provide:lc,useValue:0},{provide:S.ip1,multi:!0,deps:[S.zs3],useFactory:T=>{const y=T.get(_t.V_,Promise.resolve());return()=>y.then(()=>new Promise(A=>{const O=T.get(Ni),Z=T.get(Rs);(function Ro(b,T){b.events.pipe((0,ze.h)(y=>y instanceof Yi||y instanceof ms||y instanceof xs||y instanceof mi),(0,Dt.U)(y=>y instanceof Yi||y instanceof mi?qt.COMPLETE:y instanceof ms&&(0===y.code||1===y.code)?qt.REDIRECTING:qt.FAILED),(0,ze.h)(y=>y!==qt.REDIRECTING),(0,Ne.q)(1)).subscribe(()=>{T()})})(O,()=>{A(!0)}),T.get(Ga).afterPreactivation=()=>(A(!0),Z.closed?(0,q.of)(void 0):Z),O.initialNavigation()}))}}]).\u0275providers:[]]}const Ja=new S.OlP(Hs?"Router Initializer":"")},3942:(Pt,Re,B)=>{B.d(Re,{Z:()=>ht});var S=B(2090),o=B(4859),q=B(6881),he=B(1877);class ce{constructor(Ue,Je){this._delegate=Ue,this.firebase=Je,(0,q._addComponent)(Ue,new o.wA("app-compat",()=>this,"PUBLIC")),this.container=Ue.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ue){this._delegate.automaticDataCollectionEnabled=Ue}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ue=>{this._delegate.checkDestroyed(),Ue()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,q.deleteApp)(this._delegate)))}_getService(Ue,Je=q._DEFAULT_ENTRY_NAME){var Xe;this._delegate.checkDestroyed();const ct=this._delegate.container.getProvider(Ue);return!ct.isInitialized()&&"EXPLICIT"===(null===(Xe=ct.getComponent())||void 0===Xe?void 0:Xe.instantiationMode)&&ct.initialize(),ct.getImmediate({identifier:Je})}_removeServiceInstance(Ue,Je=q._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ue).clearInstance(Je)}_addComponent(Ue){(0,q._addComponent)(this._delegate,Ue)}_addOrOverwriteComponent(Ue){(0,q._addOrOverwriteComponent)(this._delegate,Ue)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const be=new S.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),te=function Ie(){const Nt=function Se(Nt){const Ue={},Je={__esModule:!0,initializeApp:function tt(et,At={}){const De=q.initializeApp(et,At);if((0,S.r3)(Ue,De.name))return Ue[De.name];const Yt=new Nt(De,Je);return Ue[De.name]=Yt,Yt},app:ct,registerVersion:q.registerVersion,setLogLevel:q.setLogLevel,onLog:q.onLog,apps:null,SDK_VERSION:q.SDK_VERSION,INTERNAL:{registerComponent:function He(et){const At=et.name,De=At.replace("-compat","");if(q._registerComponent(et)&&"PUBLIC"===et.type){const Yt=(_t=ct())=>{if("function"!=typeof _t[De])throw be.create("invalid-app-argument",{appName:At});return _t[De]()};void 0!==et.serviceProps&&(0,S.ZB)(Yt,et.serviceProps),Je[De]=Yt,Nt.prototype[De]=function(..._t){return this._getService.bind(this,At).apply(this,et.multipleInstances?_t:[])}}return"PUBLIC"===et.type?Je[De]:null},removeApp:function Xe(et){delete Ue[et]},useAsService:function ft(et,At){return"serverAuth"===At?null:At},modularAPIs:q}};function ct(et){if(!(0,S.r3)(Ue,et=et||q._DEFAULT_ENTRY_NAME))throw be.create("no-app",{appName:et});return Ue[et]}return Je.default=Je,Object.defineProperty(Je,"apps",{get:function Be(){return Object.keys(Ue).map(et=>Ue[et])}}),ct.App=Nt,Je}(ce);return Nt.INTERNAL=Object.assign(Object.assign({},Nt.INTERNAL),{createFirebaseNamespace:Ie,extendNamespace:function Ue(Je){(0,S.ZB)(Nt,Je)},createSubscribe:S.ne,ErrorFactory:S.LL,deepExtend:S.ZB}),Nt}(),ne=new he.Yd("@firebase/app-compat");if((0,S.jU)()&&void 0!==self.firebase){ne.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Nt=self.firebase.SDK_VERSION;Nt&&Nt.indexOf("LITE")>=0&&ne.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ht=te;!function We(Nt){(0,q.registerVersion)("@firebase/app-compat","0.2.13",Nt)}()},6881:(Pt,Re,B)=>{B.r(Re),B.d(Re,{FirebaseError:()=>he.ZR,SDK_VERSION:()=>Di,_DEFAULT_ENTRY_NAME:()=>ai,_addComponent:()=>vt,_addOrOverwriteComponent:()=>Wt,_apps:()=>nn,_clearComponents:()=>Bn,_components:()=>mn,_getProvider:()=>ei,_registerComponent:()=>li,_removeServiceInstance:()=>fr,deleteApp:()=>Br,getApp:()=>an,getApps:()=>Rn,initializeApp:()=>cn,onLog:()=>Ai,registerVersion:()=>Tr,setLogLevel:()=>ir});var S=B(5861),o=B(4859),q=B(1877),he=B(2090);const ce=(Me,Ce)=>Ce.some(nt=>Me instanceof nt);let me,be;const te=new WeakMap,ne=new WeakMap,de=new WeakMap,at=new WeakMap,We=new WeakMap;let Ue={get(Me,Ce,nt){if(Me instanceof IDBTransaction){if("done"===Ce)return ne.get(Me);if("objectStoreNames"===Ce)return Me.objectStoreNames||de.get(Me);if("store"===Ce)return nt.objectStoreNames[1]?void 0:nt.objectStore(nt.objectStoreNames[0])}return tt(Me[Ce])},set:(Me,Ce,nt)=>(Me[Ce]=nt,!0),has:(Me,Ce)=>Me instanceof IDBTransaction&&("done"===Ce||"store"===Ce)||Ce in Me};function ct(Me){return"function"==typeof Me?function Xe(Me){return Me!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ie(){return be||(be=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Me)?function(...Ce){return Me.apply(Be(this),Ce),tt(te.get(this))}:function(...Ce){return tt(Me.apply(Be(this),Ce))}:function(Ce,...nt){const Ht=Me.call(Be(this),Ce,...nt);return de.set(Ht,Ce.sort?Ce.sort():[Ce]),tt(Ht)}}(Me):(Me instanceof IDBTransaction&&function Nt(Me){if(ne.has(Me))return;const Ce=new Promise((nt,Ht)=>{const Ft=()=>{Me.removeEventListener("complete",_n),Me.removeEventListener("error",zt),Me.removeEventListener("abort",zt)},_n=()=>{nt(),Ft()},zt=()=>{Ht(Me.error||new DOMException("AbortError","AbortError")),Ft()};Me.addEventListener("complete",_n),Me.addEventListener("error",zt),Me.addEventListener("abort",zt)});ne.set(Me,Ce)}(Me),ce(Me,function Se(){return me||(me=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Me,Ue):Me)}function tt(Me){if(Me instanceof IDBRequest)return function ht(Me){const Ce=new Promise((nt,Ht)=>{const Ft=()=>{Me.removeEventListener("success",_n),Me.removeEventListener("error",zt)},_n=()=>{nt(tt(Me.result)),Ft()},zt=()=>{Ht(Me.error),Ft()};Me.addEventListener("success",_n),Me.addEventListener("error",zt)});return Ce.then(nt=>{nt instanceof IDBCursor&&te.set(nt,Me)}).catch(()=>{}),We.set(Ce,Me),Ce}(Me);if(at.has(Me))return at.get(Me);const Ce=ct(Me);return Ce!==Me&&(at.set(Me,Ce),We.set(Ce,Me)),Ce}const Be=Me=>We.get(Me),et=["get","getKey","getAll","getAllKeys","count"],At=["put","add","delete","clear"],De=new Map;function Yt(Me,Ce){if(!(Me instanceof IDBDatabase)||Ce in Me||"string"!=typeof Ce)return;if(De.get(Ce))return De.get(Ce);const nt=Ce.replace(/FromIndex$/,""),Ht=Ce!==nt,Ft=At.includes(nt);if(!(nt in(Ht?IDBIndex:IDBObjectStore).prototype)||!Ft&&!et.includes(nt))return;const _n=function(){var zt=(0,S.Z)(function*(vn,...bn){const Ir=this.transaction(vn,Ft?"readwrite":"readonly");let _r=Ir.store;return Ht&&(_r=_r.index(bn.shift())),(yield Promise.all([_r[nt](...bn),Ft&&Ir.done]))[0]});return function(bn){return zt.apply(this,arguments)}}();return De.set(Ce,_n),_n}!function Je(Me){Ue=Me(Ue)}(Me=>({...Me,get:(Ce,nt,Ht)=>Yt(Ce,nt)||Me.get(Ce,nt,Ht),has:(Ce,nt)=>!!Yt(Ce,nt)||Me.has(Ce,nt)}));class _t{constructor(Ce){this.container=Ce}getPlatformInfoString(){return this.container.getProviders().map(nt=>{if(function Dt(Me){return"VERSION"===Me.getComponent()?.type}(nt)){const Ht=nt.getImmediate();return`${Ht.library}/${Ht.version}`}return null}).filter(nt=>nt).join(" ")}}const Et="@firebase/app",Ve=new q.Yd("@firebase/app"),ai="[DEFAULT]",Vs={[Et]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},nn=new Map,mn=new Map;function vt(Me,Ce){try{Me.container.addComponent(Ce)}catch(nt){Ve.debug(`Component ${Ce.name} failed to register with FirebaseApp ${Me.name}`,nt)}}function Wt(Me,Ce){Me.container.addOrOverwriteComponent(Ce)}function li(Me){const Ce=Me.name;if(mn.has(Ce))return Ve.debug(`There were multiple attempts to register component ${Ce}.`),!1;mn.set(Ce,Me);for(const nt of nn.values())vt(nt,Me);return!0}function ei(Me,Ce){const nt=Me.container.getProvider("heartbeat").getImmediate({optional:!0});return nt&&nt.triggerHeartbeat(),Me.container.getProvider(Ce)}function fr(Me,Ce,nt=ai){ei(Me,Ce).clearInstance(nt)}function Bn(){mn.clear()}const ti=new he.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Zn{constructor(Ce,nt,Ht){this._isDeleted=!1,this._options=Object.assign({},Ce),this._config=Object.assign({},nt),this._name=nt.name,this._automaticDataCollectionEnabled=nt.automaticDataCollectionEnabled,this._container=Ht,this.container.addComponent(new o.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ce){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ce}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ce){this._isDeleted=Ce}checkDestroyed(){if(this.isDeleted)throw ti.create("app-deleted",{appName:this._name})}}const Di="9.23.0";function cn(Me,Ce={}){let nt=Me;"object"!=typeof Ce&&(Ce={name:Ce});const Ht=Object.assign({name:ai,automaticDataCollectionEnabled:!1},Ce),Ft=Ht.name;if("string"!=typeof Ft||!Ft)throw ti.create("bad-app-name",{appName:String(Ft)});if(nt||(nt=(0,he.aH)()),!nt)throw ti.create("no-options");const _n=nn.get(Ft);if(_n){if((0,he.vZ)(nt,_n.options)&&(0,he.vZ)(Ht,_n.config))return _n;throw ti.create("duplicate-app",{appName:Ft})}const zt=new o.H0(Ft);for(const bn of mn.values())zt.addComponent(bn);const vn=new Zn(nt,Ht,zt);return nn.set(Ft,vn),vn}function an(Me=ai){const Ce=nn.get(Me);if(!Ce&&Me===ai&&(0,he.aH)())return cn();if(!Ce)throw ti.create("no-app",{appName:Me});return Ce}function Rn(){return Array.from(nn.values())}function Br(Me){return qn.apply(this,arguments)}function qn(){return(qn=(0,S.Z)(function*(Me){const Ce=Me.name;nn.has(Ce)&&(nn.delete(Ce),yield Promise.all(Me.container.getProviders().map(nt=>nt.delete())),Me.isDeleted=!0)})).apply(this,arguments)}function Tr(Me,Ce,nt){var Ht;let Ft=null!==(Ht=Vs[Me])&&void 0!==Ht?Ht:Me;nt&&(Ft+=`-${nt}`);const _n=Ft.match(/\s|\//),zt=Ce.match(/\s|\//);if(_n||zt){const vn=[`Unable to register library "${Ft}" with version "${Ce}":`];return _n&&vn.push(`library name "${Ft}" contains illegal characters (whitespace or "/")`),_n&&zt&&vn.push("and"),zt&&vn.push(`version name "${Ce}" contains illegal characters (whitespace or "/")`),void Ve.warn(vn.join(" "))}li(new o.wA(`${Ft}-version`,()=>({library:Ft,version:Ce}),"VERSION"))}function Ai(Me,Ce){if(null!==Me&&"function"!=typeof Me)throw ti.create("invalid-log-argument");(0,q.Am)(Me,Ce)}function ir(Me){(0,q.Ub)(Me)}const Ki="firebase-heartbeat-database",Zr=1,re="firebase-heartbeat-store";let ee=null;function ue(){return ee||(ee=function He(Me,Ce,{blocked:nt,upgrade:Ht,blocking:Ft,terminated:_n}={}){const zt=indexedDB.open(Me,Ce),vn=tt(zt);return Ht&&zt.addEventListener("upgradeneeded",bn=>{Ht(tt(zt.result),bn.oldVersion,bn.newVersion,tt(zt.transaction),bn)}),nt&&zt.addEventListener("blocked",bn=>nt(bn.oldVersion,bn.newVersion,bn)),vn.then(bn=>{_n&&bn.addEventListener("close",()=>_n()),Ft&&bn.addEventListener("versionchange",Ir=>Ft(Ir.oldVersion,Ir.newVersion,Ir))}).catch(()=>{}),vn}(Ki,Zr,{upgrade:(Me,Ce)=>{0===Ce&&Me.createObjectStore(re)}}).catch(Me=>{throw ti.create("idb-open",{originalErrorMessage:Me.message})})),ee}function ve(){return(ve=(0,S.Z)(function*(Me){try{return yield(yield ue()).transaction(re).objectStore(re).get(se(Me))}catch(Ce){if(Ce instanceof he.ZR)Ve.warn(Ce.message);else{const nt=ti.create("idb-get",{originalErrorMessage:Ce?.message});Ve.warn(nt.message)}}})).apply(this,arguments)}function it(Me,Ce){return le.apply(this,arguments)}function le(){return(le=(0,S.Z)(function*(Me,Ce){try{const Ht=(yield ue()).transaction(re,"readwrite");yield Ht.objectStore(re).put(Ce,se(Me)),yield Ht.done}catch(nt){if(nt instanceof he.ZR)Ve.warn(nt.message);else{const Ht=ti.create("idb-set",{originalErrorMessage:nt?.message});Ve.warn(Ht.message)}}})).apply(this,arguments)}function se(Me){return`${Me.name}!${Me.options.appId}`}class Le{constructor(Ce){this.container=Ce,this._heartbeatsCache=null;const nt=this.container.getProvider("app").getImmediate();this._storage=new Ln(nt),this._heartbeatsCachePromise=this._storage.read().then(Ht=>(this._heartbeatsCache=Ht,Ht))}triggerHeartbeat(){var Ce=this;return(0,S.Z)(function*(){const Ht=Ce.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ft=Ye();if(null===Ce._heartbeatsCache&&(Ce._heartbeatsCache=yield Ce._heartbeatsCachePromise),Ce._heartbeatsCache.lastSentHeartbeatDate!==Ft&&!Ce._heartbeatsCache.heartbeats.some(_n=>_n.date===Ft))return Ce._heartbeatsCache.heartbeats.push({date:Ft,agent:Ht}),Ce._heartbeatsCache.heartbeats=Ce._heartbeatsCache.heartbeats.filter(_n=>{const zt=new Date(_n.date).valueOf();return Date.now()-zt<=2592e6}),Ce._storage.overwrite(Ce._heartbeatsCache)})()}getHeartbeatsHeader(){var Ce=this;return(0,S.Z)(function*(){if(null===Ce._heartbeatsCache&&(yield Ce._heartbeatsCachePromise),null===Ce._heartbeatsCache||0===Ce._heartbeatsCache.heartbeats.length)return"";const nt=Ye(),{heartbeatsToSend:Ht,unsentEntries:Ft}=function Bt(Me,Ce=1024){const nt=[];let Ht=Me.slice();for(const Ft of Me){const _n=nt.find(zt=>zt.agent===Ft.agent);if(_n){if(_n.dates.push(Ft.date),zn(nt)>Ce){_n.dates.pop();break}}else if(nt.push({agent:Ft.agent,dates:[Ft.date]}),zn(nt)>Ce){nt.pop();break}Ht=Ht.slice(1)}return{heartbeatsToSend:nt,unsentEntries:Ht}}(Ce._heartbeatsCache.heartbeats),_n=(0,he.L)(JSON.stringify({version:2,heartbeats:Ht}));return Ce._heartbeatsCache.lastSentHeartbeatDate=nt,Ft.length>0?(Ce._heartbeatsCache.heartbeats=Ft,yield Ce._storage.overwrite(Ce._heartbeatsCache)):(Ce._heartbeatsCache.heartbeats=[],Ce._storage.overwrite(Ce._heartbeatsCache)),_n})()}}function Ye(){return(new Date).toISOString().substring(0,10)}class Ln{constructor(Ce){this.app=Ce,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,S.Z)(function*(){return!!(0,he.hl)()&&(0,he.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ce=this;return(0,S.Z)(function*(){return(yield Ce._canUseIndexedDBPromise)&&(yield function Ze(Me){return ve.apply(this,arguments)}(Ce.app))||{heartbeats:[]}})()}overwrite(Ce){var nt=this;return(0,S.Z)(function*(){var Ht;if(yield nt._canUseIndexedDBPromise){const _n=yield nt.read();return it(nt.app,{lastSentHeartbeatDate:null!==(Ht=Ce.lastSentHeartbeatDate)&&void 0!==Ht?Ht:_n.lastSentHeartbeatDate,heartbeats:Ce.heartbeats})}})()}add(Ce){var nt=this;return(0,S.Z)(function*(){var Ht;if(yield nt._canUseIndexedDBPromise){const _n=yield nt.read();return it(nt.app,{lastSentHeartbeatDate:null!==(Ht=Ce.lastSentHeartbeatDate)&&void 0!==Ht?Ht:_n.lastSentHeartbeatDate,heartbeats:[..._n.heartbeats,...Ce.heartbeats]})}})()}}function zn(Me){return(0,he.L)(JSON.stringify({version:2,heartbeats:Me})).length}!function yo(Me){li(new o.wA("platform-logger",Ce=>new _t(Ce),"PRIVATE")),li(new o.wA("heartbeat",Ce=>new Le(Ce),"PRIVATE")),Tr(Et,"0.9.13",Me),Tr(Et,"0.9.13","esm2017"),Tr("fire-js","")}("")},4859:(Pt,Re,B)=>{B.d(Re,{H0:()=>Se,wA:()=>q,zt:()=>ce});var S=B(5861),o=B(2090);class q{constructor(te,ne,de){this.name=te,this.instanceFactory=ne,this.type=de,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(te){return this.instantiationMode=te,this}setMultipleInstances(te){return this.multipleInstances=te,this}setServiceProps(te){return this.serviceProps=te,this}setInstanceCreatedCallback(te){return this.onInstanceCreated=te,this}}const he="[DEFAULT]";class ce{constructor(te,ne){this.name=te,this.container=ne,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(te){const ne=this.normalizeInstanceIdentifier(te);if(!this.instancesDeferred.has(ne)){const de=new o.BH;if(this.instancesDeferred.set(ne,de),this.isInitialized(ne)||this.shouldAutoInitialize())try{const at=this.getOrInitializeService({instanceIdentifier:ne});at&&de.resolve(at)}catch{}}return this.instancesDeferred.get(ne).promise}getImmediate(te){var ne;const de=this.normalizeInstanceIdentifier(te?.identifier),at=null!==(ne=te?.optional)&&void 0!==ne&&ne;if(!this.isInitialized(de)&&!this.shouldAutoInitialize()){if(at)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:de})}catch(We){if(at)return null;throw We}}getComponent(){return this.component}setComponent(te){if(te.name!==this.name)throw Error(`Mismatching Component ${te.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=te,this.shouldAutoInitialize()){if(function be(Ie){return"EAGER"===Ie.instantiationMode}(te))try{this.getOrInitializeService({instanceIdentifier:he})}catch{}for(const[ne,de]of this.instancesDeferred.entries()){const at=this.normalizeInstanceIdentifier(ne);try{const We=this.getOrInitializeService({instanceIdentifier:at});de.resolve(We)}catch{}}}}clearInstance(te=he){this.instancesDeferred.delete(te),this.instancesOptions.delete(te),this.instances.delete(te)}delete(){var te=this;return(0,S.Z)(function*(){const ne=Array.from(te.instances.values());yield Promise.all([...ne.filter(de=>"INTERNAL"in de).map(de=>de.INTERNAL.delete()),...ne.filter(de=>"_delete"in de).map(de=>de._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(te=he){return this.instances.has(te)}getOptions(te=he){return this.instancesOptions.get(te)||{}}initialize(te={}){const{options:ne={}}=te,de=this.normalizeInstanceIdentifier(te.instanceIdentifier);if(this.isInitialized(de))throw Error(`${this.name}(${de}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const at=this.getOrInitializeService({instanceIdentifier:de,options:ne});for(const[We,ht]of this.instancesDeferred.entries())de===this.normalizeInstanceIdentifier(We)&&ht.resolve(at);return at}onInit(te,ne){var de;const at=this.normalizeInstanceIdentifier(ne),We=null!==(de=this.onInitCallbacks.get(at))&&void 0!==de?de:new Set;We.add(te),this.onInitCallbacks.set(at,We);const ht=this.instances.get(at);return ht&&te(ht,at),()=>{We.delete(te)}}invokeOnInitCallbacks(te,ne){const de=this.onInitCallbacks.get(ne);if(de)for(const at of de)try{at(te,ne)}catch{}}getOrInitializeService({instanceIdentifier:te,options:ne={}}){let de=this.instances.get(te);if(!de&&this.component&&(de=this.component.instanceFactory(this.container,{instanceIdentifier:(Ie=te,Ie===he?void 0:Ie),options:ne}),this.instances.set(te,de),this.instancesOptions.set(te,ne),this.invokeOnInitCallbacks(de,te),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,te,de)}catch{}var Ie;return de||null}normalizeInstanceIdentifier(te=he){return this.component?this.component.multipleInstances?te:he:te}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Se{constructor(te){this.name=te,this.providers=new Map}addComponent(te){const ne=this.getProvider(te.name);if(ne.isComponentSet())throw new Error(`Component ${te.name} has already been registered with ${this.name}`);ne.setComponent(te)}addOrOverwriteComponent(te){this.getProvider(te.name).isComponentSet()&&this.providers.delete(te.name),this.addComponent(te)}getProvider(te){if(this.providers.has(te))return this.providers.get(te);const ne=new ce(te,this);return this.providers.set(te,ne),ne}getProviders(){return Array.from(this.providers.values())}}},1877:(Pt,Re,B)=>{B.d(Re,{Am:()=>Ie,Ub:()=>Se,Yd:()=>be,in:()=>o});const S=[];var o=(()=>{return(te=o||(o={}))[te.DEBUG=0]="DEBUG",te[te.VERBOSE=1]="VERBOSE",te[te.INFO=2]="INFO",te[te.WARN=3]="WARN",te[te.ERROR=4]="ERROR",te[te.SILENT=5]="SILENT",o;var te})();const q={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},he=o.INFO,ce={[o.DEBUG]:"log",[o.VERBOSE]:"log",[o.INFO]:"info",[o.WARN]:"warn",[o.ERROR]:"error"},me=(te,ne,...de)=>{if(ne<te.logLevel)return;const at=(new Date).toISOString(),We=ce[ne];if(!We)throw new Error(`Attempted to log a message with an invalid logType (value: ${ne})`);console[We](`[${at}]  ${te.name}:`,...de)};class be{constructor(ne){this.name=ne,this._logLevel=he,this._logHandler=me,this._userLogHandler=null,S.push(this)}get logLevel(){return this._logLevel}set logLevel(ne){if(!(ne in o))throw new TypeError(`Invalid value "${ne}" assigned to \`logLevel\``);this._logLevel=ne}setLogLevel(ne){this._logLevel="string"==typeof ne?q[ne]:ne}get logHandler(){return this._logHandler}set logHandler(ne){if("function"!=typeof ne)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ne}get userLogHandler(){return this._userLogHandler}set userLogHandler(ne){this._userLogHandler=ne}debug(...ne){this._userLogHandler&&this._userLogHandler(this,o.DEBUG,...ne),this._logHandler(this,o.DEBUG,...ne)}log(...ne){this._userLogHandler&&this._userLogHandler(this,o.VERBOSE,...ne),this._logHandler(this,o.VERBOSE,...ne)}info(...ne){this._userLogHandler&&this._userLogHandler(this,o.INFO,...ne),this._logHandler(this,o.INFO,...ne)}warn(...ne){this._userLogHandler&&this._userLogHandler(this,o.WARN,...ne),this._logHandler(this,o.WARN,...ne)}error(...ne){this._userLogHandler&&this._userLogHandler(this,o.ERROR,...ne),this._logHandler(this,o.ERROR,...ne)}}function Se(te){S.forEach(ne=>{ne.setLogLevel(te)})}function Ie(te,ne){for(const de of S){let at=null;ne&&ne.level&&(at=q[ne.level]),de.userLogHandler=null===te?null:(We,ht,...Nt)=>{const Ue=Nt.map(Je=>{if(null==Je)return null;if("string"==typeof Je)return Je;if("number"==typeof Je||"boolean"==typeof Je)return Je.toString();if(Je instanceof Error)return Je.message;try{return JSON.stringify(Je)}catch{return null}}).filter(Je=>Je).join(" ");ht>=(at??We.logLevel)&&te({level:o[ht].toLowerCase(),message:Ue,args:Nt,type:We.name})}}}},259:(Pt,Re,B)=>{B.d(Re,{C6:()=>S.getApps,Mq:()=>S.getApp});var S=B(6881);(0,S.registerVersion)("firebase","9.23.0","app")},9260:(Pt,Re,B)=>{B.d(Re,{Z:()=>S.Z});var S=B(3942);S.Z.registerVersion("firebase","9.23.0","app-compat")},2644:(Pt,Re,B)=>{B.r(Re);var S=B(5861),o=B(3942),q=B(2090),he=B(6881),ce=B(655),me=B(1877),be=B(4859);const Ie={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},de_EMAIL_SIGNIN="EMAIL_SIGNIN",de_PASSWORD_RESET="PASSWORD_RESET",de_RECOVER_EMAIL="RECOVER_EMAIL",de_REVERT_SECOND_FACTOR_ADDITION="REVERT_SECOND_FACTOR_ADDITION",de_VERIFY_AND_CHANGE_EMAIL="VERIFY_AND_CHANGE_EMAIL",de_VERIFY_EMAIL="VERIFY_EMAIL";const ht=function at(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Nt=function We(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ue=new q.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Xe=new me.Yd("@firebase/auth");function tt(v,...p){Xe.logLevel<=me.in.ERROR&&Xe.error(`Auth (${he.SDK_VERSION}): ${v}`,...p)}function Be(v,...p){throw At(v,...p)}function He(v,...p){return At(v,...p)}function ft(v,p,g){const E=Object.assign(Object.assign({},Nt()),{[p]:g});return new q.LL("auth","Firebase",E).create(p,{appName:v.name})}function et(v,p,g){if(!(p instanceof g))throw g.name!==p.constructor.name&&Be(v,"argument-error"),ft(v,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function At(v,...p){if("string"!=typeof v){const g=p[0],E=[...p.slice(1)];return E[0]&&(E[0].appName=v.name),v._errorFactory.create(g,...E)}return Ue.create(v,...p)}function De(v,p,...g){if(!v)throw At(p,...g)}function Yt(v){const p="INTERNAL ASSERTION FAILED: "+v;throw tt(p),new Error(p)}function _t(v,p){v||Yt(p)}function Dt(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function Et(){return"http:"===Ne()||"https:"===Ne()}function Ne(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class $e{constructor(p,g){this.shortDelay=p,this.longDelay=g,_t(g>p,"Short delay should be less than long delay!"),this.isMobile=(0,q.uI)()||(0,q.b$)()}get(){return function Ve(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Et()||(0,q.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function dt(v,p){_t(v.emulator,"Emulator should always be set here");const{url:g}=v.emulator;return p?`${g}${p.startsWith("/")?p.slice(1):p}`:g}class ut{static initialize(p,g,E){this.fetchImpl=p,g&&(this.headersImpl=g),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Yt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Yt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Yt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ct={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},xt=new $e(3e4,6e4);function sn(v,p){return v.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:v.tenantId}):p}function Tt(v,p,g,E){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,S.Z)(function*(v,p,g,E,k={}){return Jt(v,k,(0,S.Z)(function*(){let j={},oe={};E&&("GET"===p?oe=E:j={body:JSON.stringify(E)});const ye=(0,q.xO)(Object.assign({key:v.config.apiKey},oe)).slice(1),rt=yield v._getAdditionalHeaders();return rt["Content-Type"]="application/json",v.languageCode&&(rt["X-Firebase-Locale"]=v.languageCode),ut.fetch()(Mr(v,v.config.apiHost,g,ye),Object.assign({method:p,headers:rt,referrerPolicy:"no-referrer"},j))}))})).apply(this,arguments)}function Jt(v,p,g){return xn.apply(this,arguments)}function xn(){return(xn=(0,S.Z)(function*(v,p,g){v._canInitEmulator=!1;const E=Object.assign(Object.assign({},Ct),p);try{const k=new Qr(v),j=yield Promise.race([g(),k.promise]);k.clearNetworkTimeout();const oe=yield j.json();if("needConfirmation"in oe)throw Jr(v,"account-exists-with-different-credential",oe);if(j.ok&&!("errorMessage"in oe))return oe;{const ye=j.ok?oe.errorMessage:oe.error.message,[rt,Ke]=ye.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===rt)throw Jr(v,"credential-already-in-use",oe);if("EMAIL_EXISTS"===rt)throw Jr(v,"email-already-in-use",oe);if("USER_DISABLED"===rt)throw Jr(v,"user-disabled",oe);const Lt=E[rt]||rt.toLowerCase().replace(/[_\s]+/g,"-");if(Ke)throw ft(v,Lt,Ke);Be(v,Lt)}}catch(k){if(k instanceof q.ZR)throw k;Be(v,"network-request-failed",{message:String(k)})}})).apply(this,arguments)}function Jn(v,p,g,E){return hr.apply(this,arguments)}function hr(){return(hr=(0,S.Z)(function*(v,p,g,E,k={}){const j=yield Tt(v,p,g,E,k);return"mfaPendingCredential"in j&&Be(v,"multi-factor-auth-required",{_serverResponse:j}),j})).apply(this,arguments)}function Mr(v,p,g,E){const k=`${p}${g}?${E}`;return v.config.emulator?dt(v.config,k):`${v.config.apiScheme}://${k}`}class Qr{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((g,E)=>{this.timer=setTimeout(()=>E(He(this.auth,"network-request-failed")),xt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Jr(v,p,g){const E={appName:v.name};g.email&&(E.email=g.email),g.phoneNumber&&(E.phoneNumber=g.phoneNumber);const k=He(v,p,E);return k.customData._tokenResponse=g,k}function Xr(){return(Xr=(0,S.Z)(function*(v,p){return Tt(v,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Ui(){return(Ui=(0,S.Z)(function*(v,p){return Tt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Vt(){return(Vt=(0,S.Z)(function*(v,p){return Tt(v,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function lr(v){if(v)try{const p=new Date(Number(v));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function ai(){return(ai=(0,S.Z)(function*(v,p=!1){const g=(0,q.m9)(v),E=yield g.getIdToken(p),k=nn(E);De(k&&k.exp&&k.auth_time&&k.iat,g.auth,"internal-error");const j="object"==typeof k.firebase?k.firebase:void 0,oe=j?.sign_in_provider;return{claims:k,token:E,authTime:lr(Vs(k.auth_time)),issuedAtTime:lr(Vs(k.iat)),expirationTime:lr(Vs(k.exp)),signInProvider:oe||null,signInSecondFactor:j?.sign_in_second_factor||null}})).apply(this,arguments)}function Vs(v){return 1e3*Number(v)}function nn(v){const[p,g,E]=v.split(".");if(void 0===p||void 0===g||void 0===E)return tt("JWT malformed, contained fewer than 3 sections"),null;try{const k=(0,q.tV)(g);return k?JSON.parse(k):(tt("Failed to decode base64 JWT payload"),null)}catch(k){return tt("Caught error parsing JWT payload as JSON",k?.toString()),null}}function vt(v,p){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,S.Z)(function*(v,p,g=!1){if(g)return p;try{return yield p}catch(E){throw E instanceof q.ZR&&function li({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}(E)&&v.auth.currentUser===v&&(yield v.auth.signOut()),E}})).apply(this,arguments)}class ei{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var g;if(p){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const k=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,k)}}schedule(p=!1){var g=this;if(!this.isRunning)return;const E=this.getInterval(p);this.timerId=setTimeout((0,S.Z)(function*(){yield g.iteration()}),E)}iteration(){var p=this;return(0,S.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g?.code&&p.schedule(!0))}p.schedule()})()}}class fr{constructor(p,g){this.createdAt=p,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=lr(this.lastLoginAt),this.creationTime=lr(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Bn(v){return pr.apply(this,arguments)}function pr(){return pr=(0,S.Z)(function*(v){var p;const g=v.auth,E=yield v.getIdToken(),k=yield vt(v,function Vr(v,p){return Vt.apply(this,arguments)}(g,{idToken:E}));De(k?.users.length,g,"internal-error");const j=k.users[0];v._notifyReloadListener(j);const oe=null!==(p=j.providerUserInfo)&&void 0!==p&&p.length?function cn(v){return v.map(p=>{var{providerId:g}=p,E=(0,ce._T)(p,["providerId"]);return{providerId:g,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}(j.providerUserInfo):[],ye=function Di(v,p){return[...v.filter(E=>!p.some(k=>k.providerId===E.providerId)),...p]}(v.providerData,oe),Lt=!!v.isAnonymous&&!(v.email&&j.passwordHash||ye?.length),kt={uid:j.localId,displayName:j.displayName||null,photoURL:j.photoUrl||null,email:j.email||null,emailVerified:j.emailVerified||!1,phoneNumber:j.phoneNumber||null,tenantId:j.tenantId||null,providerData:ye,metadata:new fr(j.createdAt,j.lastLoginAt),isAnonymous:Lt};Object.assign(v,kt)}),pr.apply(this,arguments)}function Zn(){return(Zn=(0,S.Z)(function*(v){const p=(0,q.m9)(v);yield Bn(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function Rn(){return(Rn=(0,S.Z)(function*(v,p){const g=yield Jt(v,{},(0,S.Z)(function*(){const E=(0,q.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:k,apiKey:j}=v.config,oe=Mr(v,k,"/v1/token",`key=${j}`),ye=yield v._getAdditionalHeaders();return ye["Content-Type"]="application/x-www-form-urlencoded",ut.fetch()(oe,{method:"POST",headers:ye,body:E})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Br{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){De(p.idToken,"internal-error"),De(typeof p.idToken<"u","internal-error"),De(typeof p.refreshToken<"u","internal-error");const g="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function mn(v){const p=nn(v);return De(p,"internal-error"),De(typeof p.exp<"u","internal-error"),De(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,g)}getToken(p,g=!1){var E=this;return(0,S.Z)(function*(){return De(!E.accessToken||E.refreshToken,p,"user-token-expired"),g||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(p,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,g){var E=this;return(0,S.Z)(function*(){const{accessToken:k,refreshToken:j,expiresIn:oe}=yield function an(v,p){return Rn.apply(this,arguments)}(p,g);E.updateTokensAndExpiration(k,j,Number(oe))})()}updateTokensAndExpiration(p,g,E){this.refreshToken=g||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(p,g){const{refreshToken:E,accessToken:k,expirationTime:j}=g,oe=new Br;return E&&(De("string"==typeof E,"internal-error",{appName:p}),oe.refreshToken=E),k&&(De("string"==typeof k,"internal-error",{appName:p}),oe.accessToken=k),j&&(De("number"==typeof j,"internal-error",{appName:p}),oe.expirationTime=j),oe}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Br,this.toJSON())}_performRefresh(){return Yt("not implemented")}}function qn(v,p){De("string"==typeof v||typeof v>"u","internal-error",{appName:p})}class Tr{constructor(p){var{uid:g,auth:E,stsTokenManager:k}=p,j=(0,ce._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ei(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=E,this.stsTokenManager=k,this.accessToken=k.accessToken,this.displayName=j.displayName||null,this.email=j.email||null,this.emailVerified=j.emailVerified||!1,this.phoneNumber=j.phoneNumber||null,this.photoURL=j.photoURL||null,this.isAnonymous=j.isAnonymous||!1,this.tenantId=j.tenantId||null,this.providerData=j.providerData?[...j.providerData]:[],this.metadata=new fr(j.createdAt||void 0,j.lastLoginAt||void 0)}getIdToken(p){var g=this;return(0,S.Z)(function*(){const E=yield vt(g,g.stsTokenManager.getToken(g.auth,p));return De(E,g.auth,"internal-error"),g.accessToken!==E&&(g.accessToken=E,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),E})()}getIdTokenResult(p){return function oi(v){return ai.apply(this,arguments)}(this,p)}reload(){return function ti(v){return Zn.apply(this,arguments)}(this)}_assign(p){this!==p&&(De(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(g=>Object.assign({},g)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){const g=new Tr(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}));return g.metadata._copy(this.metadata),g}_onReload(p){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,g=!1){var E=this;return(0,S.Z)(function*(){let k=!1;p.idToken&&p.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(p),k=!0),g&&(yield Bn(E)),yield E.auth._persistUserIfCurrent(E),k&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var p=this;return(0,S.Z)(function*(){const g=yield p.getIdToken();return yield vt(p,function en(v,p){return Xr.apply(this,arguments)}(p.auth,{idToken:g})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,g){var E,k,j,oe,ye,rt,Ke,Lt;const kt=null!==(E=g.displayName)&&void 0!==E?E:void 0,Kn=null!==(k=g.email)&&void 0!==k?k:void 0,ra=null!==(j=g.phoneNumber)&&void 0!==j?j:void 0,Ou=null!==(oe=g.photoURL)&&void 0!==oe?oe:void 0,Sc=null!==(ye=g.tenantId)&&void 0!==ye?ye:void 0,Gr=null!==(rt=g._redirectEventId)&&void 0!==rt?rt:void 0,Ff=null!==(Ke=g.createdAt)&&void 0!==Ke?Ke:void 0,Rl=null!==(Lt=g.lastLoginAt)&&void 0!==Lt?Lt:void 0,{uid:Gs,emailVerified:as,isAnonymous:vh,providerData:hd,stsTokenManager:fd}=g;De(Gs&&fd,p,"internal-error");const Lf=Br.fromJSON(this.name,fd);De("string"==typeof Gs,p,"internal-error"),qn(kt,p.name),qn(Kn,p.name),De("boolean"==typeof as,p,"internal-error"),De("boolean"==typeof vh,p,"internal-error"),qn(ra,p.name),qn(Ou,p.name),qn(Sc,p.name),qn(Gr,p.name),qn(Ff,p.name),qn(Rl,p.name);const wh=new Tr({uid:Gs,auth:p,email:Kn,emailVerified:as,displayName:kt,isAnonymous:vh,photoURL:Ou,phoneNumber:ra,tenantId:Sc,stsTokenManager:Lf,createdAt:Ff,lastLoginAt:Rl});return hd&&Array.isArray(hd)&&(wh.providerData=hd.map(Ch=>Object.assign({},Ch))),Gr&&(wh._redirectEventId=Gr),wh}static _fromIdTokenResponse(p,g,E=!1){return(0,S.Z)(function*(){const k=new Br;k.updateFromServerResponse(g);const j=new Tr({uid:g.localId,auth:p,stsTokenManager:k,isAnonymous:E});return yield Bn(j),j})()}}const Ai=new Map;function ir(v){_t(v instanceof Function,"Expected a class definition");let p=Ai.get(v);return p?(_t(p instanceof v,"Instance stored in cache mismatched with class"),p):(p=new v,Ai.set(v,p),p)}const Zr=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,S.Z)(function*(){return!0})()}_set(g,E){var k=this;return(0,S.Z)(function*(){k.storage[g]=E})()}_get(g){var E=this;return(0,S.Z)(function*(){const k=E.storage[g];return void 0===k?null:k})()}_remove(g){var E=this;return(0,S.Z)(function*(){delete E.storage[g]})()}_addListener(g,E){}_removeListener(g,E){}}return v.type="NONE",v})();function re(v,p,g){return`firebase:${v}:${p}:${g}`}class ee{constructor(p,g,E){this.persistence=p,this.auth=g,this.userKey=E;const{config:k,name:j}=this.auth;this.fullUserKey=re(this.userKey,k.apiKey,j),this.fullPersistenceKey=re("persistence",k.apiKey,j),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,S.Z)(function*(){const g=yield p.persistence._get(p.fullUserKey);return g?Tr._fromJSON(p.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var g=this;return(0,S.Z)(function*(){if(g.persistence===p)return;const E=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=p,E?g.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,g,E="authUser"){return(0,S.Z)(function*(){if(!g.length)return new ee(ir(Zr),p,E);const k=(yield Promise.all(g.map(function(){var Ke=(0,S.Z)(function*(Lt){if(yield Lt._isAvailable())return Lt});return function(Lt){return Ke.apply(this,arguments)}}()))).filter(Ke=>Ke);let j=k[0]||ir(Zr);const oe=re(E,p.config.apiKey,p.name);let ye=null;for(const Ke of g)try{const Lt=yield Ke._get(oe);if(Lt){const kt=Tr._fromJSON(p,Lt);Ke!==j&&(ye=kt),j=Ke;break}}catch{}const rt=k.filter(Ke=>Ke._shouldAllowMigration);return j._shouldAllowMigration&&rt.length?(j=rt[0],ye&&(yield j._set(oe,ye.toJSON())),yield Promise.all(g.map(function(){var Ke=(0,S.Z)(function*(Lt){if(Lt!==j)try{yield Lt._remove(oe)}catch{}});return function(Lt){return Ke.apply(this,arguments)}}())),new ee(j,p,E)):new ee(j,p,E)})()}}function ue(v){const p=v.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(le(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(Ze(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(K(p))return"Blackberry";if(pe(p))return"Webos";if(ve(p))return"Safari";if((p.includes("chrome/")||it(p))&&!p.includes("edge/"))return"Chrome";if(se(p))return"Android";{const E=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function Ze(v=(0,q.z$)()){return/firefox\//i.test(v)}function ve(v=(0,q.z$)()){const p=v.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function it(v=(0,q.z$)()){return/crios\//i.test(v)}function le(v=(0,q.z$)()){return/iemobile/i.test(v)}function se(v=(0,q.z$)()){return/android/i.test(v)}function K(v=(0,q.z$)()){return/blackberry/i.test(v)}function pe(v=(0,q.z$)()){return/webos/i.test(v)}function Le(v=(0,q.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function zn(v=(0,q.z$)()){return Le(v)||se(v)||pe(v)||K(v)||/windows phone/i.test(v)||le(v)}function Me(v,p=[]){let g;switch(v){case"Browser":g=ue((0,q.z$)());break;case"Worker":g=`${ue((0,q.z$)())}-${v}`;break;default:g=v}const E=p.length?p.join(","):"FirebaseCore-web";return`${g}/JsCore/${he.SDK_VERSION}/${E}`}function nt(){return(nt=(0,S.Z)(function*(v){return(yield Tt(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ht(v,p){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,S.Z)(function*(v,p){return Tt(v,"GET","/v2/recaptchaConfig",sn(v,p))})).apply(this,arguments)}function _n(v){return void 0!==v&&void 0!==v.getResponse}function zt(v){return void 0!==v&&void 0!==v.enterprise}class vn{constructor(p){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===p.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=p.recaptchaKey.split("/")[3],this.emailPasswordEnabled=p.recaptchaEnforcementState.some(g=>"EMAIL_PASSWORD_PROVIDER"===g.provider&&"OFF"!==g.enforcementState)}}function Ir(v){return new Promise((p,g)=>{const E=document.createElement("script");E.setAttribute("src",v),E.onload=p,E.onerror=k=>{const j=He("internal-error");j.customData=k,g(j)},E.type="text/javascript",E.charset="UTF-8",function bn(){var v,p;return null!==(p=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==p?p:document}().appendChild(E)})}function _r(v){return`__${v}${Math.floor(1e6*Math.random())}`}const As="NO_RECAPTCHA";class gi{constructor(p){this.type="recaptcha-enterprise",this.auth=Gn(p)}verify(p="verify",g=!1){var E=this;return(0,S.Z)(function*(){function j(){return j=(0,S.Z)(function*(ye){if(!g){if(null==ye.tenantId&&null!=ye._agentRecaptchaConfig)return ye._agentRecaptchaConfig.siteKey;if(null!=ye.tenantId&&void 0!==ye._tenantRecaptchaConfigs[ye.tenantId])return ye._tenantRecaptchaConfigs[ye.tenantId].siteKey}return new Promise(function(){var rt=(0,S.Z)(function*(Ke,Lt){Ht(ye,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(kt=>{if(void 0!==kt.recaptchaKey){const Kn=new vn(kt);return null==ye.tenantId?ye._agentRecaptchaConfig=Kn:ye._tenantRecaptchaConfigs[ye.tenantId]=Kn,Ke(Kn.siteKey)}Lt(new Error("recaptcha Enterprise site key undefined"))}).catch(kt=>{Lt(kt)})});return function(Ke,Lt){return rt.apply(this,arguments)}}())}),j.apply(this,arguments)}function oe(ye,rt,Ke){const Lt=window.grecaptcha;zt(Lt)?Lt.enterprise.ready(()=>{Lt.enterprise.execute(ye,{action:p}).then(kt=>{rt(kt)}).catch(()=>{rt(As)})}):Ke(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((ye,rt)=>{(function k(ye){return j.apply(this,arguments)})(E.auth).then(Ke=>{if(!g&&zt(window.grecaptcha))oe(Ke,ye,rt);else{if(typeof window>"u")return void rt(new Error("RecaptchaVerifier is only supported in browser"));Ir("https://www.google.com/recaptcha/enterprise.js?render="+Ke).then(()=>{oe(Ke,ye,rt)}).catch(Lt=>{rt(Lt)})}}).catch(Ke=>{rt(Ke)})})})()}}function wt(v,p,g){return rn.apply(this,arguments)}function rn(){return(rn=(0,S.Z)(function*(v,p,g,E=!1){const k=new gi(v);let j;try{j=yield k.verify(g)}catch{j=yield k.verify(g,!0)}const oe=Object.assign({},p);return Object.assign(oe,E?{captchaResp:j}:{captchaResponse:j}),Object.assign(oe,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(oe,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),oe})).apply(this,arguments)}class gr{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,g){const E=j=>new Promise((oe,ye)=>{try{oe(p(j))}catch(rt){ye(rt)}});E.onAbort=g,this.queue.push(E);const k=this.queue.length-1;return()=>{this.queue[k]=()=>Promise.resolve()}}runMiddleware(p){var g=this;return(0,S.Z)(function*(){if(g.auth.currentUser===p)return;const E=[];try{for(const k of g.queue)yield k(p),k.onAbort&&E.push(k.onAbort)}catch(k){E.reverse();for(const j of E)try{j()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:k?.message})}})()}}class ps{constructor(p,g,E,k){this.app=p,this.heartbeatServiceProvider=g,this.appCheckServiceProvider=E,this.config=k,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jn(this),this.idTokenSubscription=new jn(this),this.beforeStateQueue=new gr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ue,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=k.sdkClientVersion}_initializeWithPersistence(p,g){var E=this;return g&&(this._popupRedirectResolver=ir(g)),this._initializationPromise=this.queue((0,S.Z)(function*(){var k,j;if(!E._deleted&&(E.persistenceManager=yield ee.create(E,p),!E._deleted)){if(null!==(k=E._popupRedirectResolver)&&void 0!==k&&k._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(g),E.lastNotifiedUid=(null===(j=E.currentUser)||void 0===j?void 0:j.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,S.Z)(function*(){if(p._deleted)return;const g=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||g){if(p.currentUser&&g&&p.currentUser.uid===g.uid)return p._currentUser._assign(g),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(g,!0)}})()}initializeCurrentUser(p){var g=this;return(0,S.Z)(function*(){var E;const k=yield g.assertedPersistence.getCurrentUser();let j=k,oe=!1;if(p&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const ye=null===(E=g.redirectUser)||void 0===E?void 0:E._redirectEventId,rt=j?._redirectEventId,Ke=yield g.tryRedirectSignIn(p);(!ye||ye===rt)&&Ke?.user&&(j=Ke.user,oe=!0)}if(!j)return g.directlySetCurrentUser(null);if(!j._redirectEventId){if(oe)try{yield g.beforeStateQueue.runMiddleware(j)}catch(ye){j=k,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(ye))}return j?g.reloadAndSetCurrentUserOrClear(j):g.directlySetCurrentUser(null)}return De(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===j._redirectEventId?g.directlySetCurrentUser(j):g.reloadAndSetCurrentUserOrClear(j)})()}tryRedirectSignIn(p){var g=this;return(0,S.Z)(function*(){let E=null;try{E=yield g._popupRedirectResolver._completeRedirectFn(g,p,!0)}catch{yield g._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(p){var g=this;return(0,S.Z)(function*(){try{yield Bn(p)}catch(E){if("auth/network-request-failed"!==E?.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function ze(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var p=this;return(0,S.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var g=this;return(0,S.Z)(function*(){const E=p?(0,q.m9)(p):null;return E&&De(E.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(E&&E._clone(g))})()}_updateCurrentUser(p,g=!1){var E=this;return(0,S.Z)(function*(){if(!E._deleted)return p&&De(E.tenantId===p.tenantId,E,"tenant-id-mismatch"),g||(yield E.beforeStateQueue.runMiddleware(p)),E.queue((0,S.Z)(function*(){yield E.directlySetCurrentUser(p),E.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,S.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var g=this;return this.queue((0,S.Z)(function*(){yield g.assertedPersistence.setPersistence(ir(p))}))}initializeRecaptchaConfig(){var p=this;return(0,S.Z)(function*(){const g=yield Ht(p,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),E=new vn(g);null==p.tenantId?p._agentRecaptchaConfig=E:p._tenantRecaptchaConfigs[p.tenantId]=E,E.emailPasswordEnabled&&new gi(p).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new q.LL("auth","Firebase",p())}onAuthStateChanged(p,g,E){return this.registerStateListener(this.authStateSubscription,p,g,E)}beforeAuthStateChanged(p,g){return this.beforeStateQueue.pushCallback(p,g)}onIdTokenChanged(p,g,E){return this.registerStateListener(this.idTokenSubscription,p,g,E)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,g){var E=this;return(0,S.Z)(function*(){const k=yield E.getOrInitRedirectPersistenceManager(g);return null===p?k.removeCurrentUser():k.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var g=this;return(0,S.Z)(function*(){if(!g.redirectPersistenceManager){const E=p&&ir(p)||g._popupRedirectResolver;De(E,g,"argument-error"),g.redirectPersistenceManager=yield ee.create(g,[ir(E._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(p){var g=this;return(0,S.Z)(function*(){var E,k;return g._isInitialized&&(yield g.queue((0,S.Z)(function*(){}))),(null===(E=g._currentUser)||void 0===E?void 0:E._redirectEventId)===p?g._currentUser:(null===(k=g.redirectUser)||void 0===k?void 0:k._redirectEventId)===p?g.redirectUser:null})()}_persistUserIfCurrent(p){var g=this;return(0,S.Z)(function*(){if(p===g.currentUser)return g.queue((0,S.Z)(function*(){return g.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(g=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,g,E,k){if(this._deleted)return()=>{};const j="function"==typeof g?g:g.next.bind(g),oe=this._isInitialized?Promise.resolve():this._initializationPromise;return De(oe,this,"internal-error"),oe.then(()=>j(this.currentUser)),"function"==typeof g?p.addObserver(g,E,k):p.addObserver(g)}directlySetCurrentUser(p){var g=this;return(0,S.Z)(function*(){g.currentUser&&g.currentUser!==p&&g._currentUser._stopProactiveRefresh(),p&&g.isProactiveRefreshEnabled&&p._startProactiveRefresh(),g.currentUser=p,p?yield g.assertedPersistence.setCurrentUser(p):yield g.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=Me(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,S.Z)(function*(){var g;const E={"X-Client-Version":p.clientVersion};p.app.options.appId&&(E["X-Firebase-gmpid"]=p.app.options.appId);const k=yield null===(g=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();k&&(E["X-Firebase-Client"]=k);const j=yield p._getAppCheckToken();return j&&(E["X-Firebase-AppCheck"]=j),E})()}_getAppCheckToken(){var p=this;return(0,S.Z)(function*(){var g;const E=yield null===(g=p.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getToken();return E?.error&&function ct(v,...p){Xe.logLevel<=me.in.WARN&&Xe.warn(`Auth (${he.SDK_VERSION}): ${v}`,...p)}(`Error while retrieving App Check token: ${E.error}`),E?.token})()}}function Gn(v){return(0,q.m9)(v)}class jn{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,q.ne)(g=>this.observer=g)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Zs(v){const p=v.indexOf(":");return p<0?"":v.substr(0,p+1)}function ca(v){if(!v)return null;const p=Number(v);return isNaN(p)?null:p}class gs{constructor(p,g){this.providerId=p,this.signInMethod=g}toJSON(){return Yt("not implemented")}_getIdTokenResponse(p){return Yt("not implemented")}_linkToIdToken(p,g){return Yt("not implemented")}_getReauthenticationResolver(p){return Yt("not implemented")}}function jr(v,p){return wr.apply(this,arguments)}function wr(){return(wr=(0,S.Z)(function*(v,p){return Tt(v,"POST","/v1/accounts:resetPassword",sn(v,p))})).apply(this,arguments)}function Yi(v,p){return ms.apply(this,arguments)}function ms(){return(ms=(0,S.Z)(function*(v,p){return Tt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function xs(){return(xs=(0,S.Z)(function*(v,p){return Tt(v,"POST","/v1/accounts:update",sn(v,p))})).apply(this,arguments)}function ui(v,p){return sr.apply(this,arguments)}function sr(){return(sr=(0,S.Z)(function*(v,p){return Jn(v,"POST","/v1/accounts:signInWithPassword",sn(v,p))})).apply(this,arguments)}function Qi(v,p){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,S.Z)(function*(v,p){return Tt(v,"POST","/v1/accounts:sendOobCode",sn(v,p))})).apply(this,arguments)}function da(){return(da=(0,S.Z)(function*(v,p){return Qi(v,p)})).apply(this,arguments)}function wo(v,p){return Co.apply(this,arguments)}function Co(){return(Co=(0,S.Z)(function*(v,p){return Qi(v,p)})).apply(this,arguments)}function ni(v,p){return al.apply(this,arguments)}function al(){return(al=(0,S.Z)(function*(v,p){return Qi(v,p)})).apply(this,arguments)}function Sr(){return(Sr=(0,S.Z)(function*(v,p){return Qi(v,p)})).apply(this,arguments)}function bo(){return(bo=(0,S.Z)(function*(v,p){return Jn(v,"POST","/v1/accounts:signInWithEmailLink",sn(v,p))})).apply(this,arguments)}function Xi(){return(Xi=(0,S.Z)(function*(v,p){return Jn(v,"POST","/v1/accounts:signInWithEmailLink",sn(v,p))})).apply(this,arguments)}class ll extends gs{constructor(p,g,E,k=null){super("password",E),this._email=p,this._password=g,this._tenantId=k}static _fromEmailAndPassword(p,g){return new ll(p,g,"password")}static _fromEmailAndCode(p,g,E=null){return new ll(p,g,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(p){var g=this;return(0,S.Z)(function*(){var E;switch(g.signInMethod){case"password":const k={returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(E=p._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const j=yield wt(p,k,"signInWithPassword");return ui(p,j)}return ui(p,k).catch(function(){var j=(0,S.Z)(function*(oe){if("auth/missing-recaptcha-token"===oe.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const ye=yield wt(p,k,"signInWithPassword");return ui(p,ye)}return Promise.reject(oe)});return function(oe){return j.apply(this,arguments)}}());case"emailLink":return function $o(v,p){return bo.apply(this,arguments)}(p,{email:g._email,oobCode:g._password});default:Be(p,"internal-error")}})()}_linkToIdToken(p,g){var E=this;return(0,S.Z)(function*(){switch(E.signInMethod){case"password":return Yi(p,{idToken:g,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function ha(v,p){return Xi.apply(this,arguments)}(p,{idToken:g,email:E._email,oobCode:E._password});default:Be(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function _s(v,p){return ul.apply(this,arguments)}function ul(){return(ul=(0,S.Z)(function*(v,p){return Jn(v,"POST","/v1/accounts:signInWithIdp",sn(v,p))})).apply(this,arguments)}class Hr extends gs{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const g=new Hr(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(g.idToken=p.idToken),p.accessToken&&(g.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(g.nonce=p.nonce),p.pendingToken&&(g.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(g.accessToken=p.oauthToken,g.secret=p.oauthTokenSecret):Be("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:k}=g,j=(0,ce._T)(g,["providerId","signInMethod"]);if(!E||!k)return null;const oe=new Hr(E,k);return oe.idToken=j.idToken||void 0,oe.accessToken=j.accessToken||void 0,oe.secret=j.secret,oe.nonce=j.nonce,oe.pendingToken=j.pendingToken||null,oe}_getIdTokenResponse(p){return _s(p,this.buildRequest())}_linkToIdToken(p,g){const E=this.buildRequest();return E.idToken=g,_s(p,E)}_getReauthenticationResolver(p){const g=this.buildRequest();return g.autoCreate=!1,_s(p,g)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),p.postBody=(0,q.xO)(g)}return p}}function qo(){return(qo=(0,S.Z)(function*(v,p){return Tt(v,"POST","/v1/accounts:sendVerificationCode",sn(v,p))})).apply(this,arguments)}function La(){return(La=(0,S.Z)(function*(v,p){return Jn(v,"POST","/v1/accounts:signInWithPhoneNumber",sn(v,p))})).apply(this,arguments)}function pa(){return(pa=(0,S.Z)(function*(v,p){const g=yield Jn(v,"POST","/v1/accounts:signInWithPhoneNumber",sn(v,p));if(g.temporaryProof)throw Jr(v,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const cu={USER_NOT_FOUND:"user-not-found"};function zo(){return(zo=(0,S.Z)(function*(v,p){return Jn(v,"POST","/v1/accounts:signInWithPhoneNumber",sn(v,Object.assign(Object.assign({},p),{operation:"REAUTH"})),cu)})).apply(this,arguments)}class es extends gs{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,g){return new es({verificationId:p,verificationCode:g})}static _fromTokenResponse(p,g){return new es({phoneNumber:p,temporaryProof:g})}_getIdTokenResponse(p){return function cl(v,p){return La.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,g){return function fa(v,p){return pa.apply(this,arguments)}(p,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function ec(v,p){return zo.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:g,verificationId:E,verificationCode:k}=this.params;return p&&g?{temporaryProof:p,phoneNumber:g}:{sessionInfo:E,code:k}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:g,verificationCode:E,phoneNumber:k,temporaryProof:j}=p;return E||g||k||j?new es({verificationId:g,verificationCode:E,phoneNumber:k,temporaryProof:j}):null}}class Js{constructor(p){var g,E,k,j,oe,ye;const rt=(0,q.zd)((0,q.pd)(p)),Ke=null!==(g=rt.apiKey)&&void 0!==g?g:null,Lt=null!==(E=rt.oobCode)&&void 0!==E?E:null,kt=function du(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(k=rt.mode)&&void 0!==k?k:null);De(Ke&&Lt&&kt,"argument-error"),this.apiKey=Ke,this.operation=kt,this.code=Lt,this.continueUrl=null!==(j=rt.continueUrl)&&void 0!==j?j:null,this.languageCode=null!==(oe=rt.languageCode)&&void 0!==oe?oe:null,this.tenantId=null!==(ye=rt.tenantId)&&void 0!==ye?ye:null}static parseLink(p){const g=function dl(v){const p=(0,q.zd)((0,q.pd)(v)).link,g=p?(0,q.zd)((0,q.pd)(p)).deep_link_id:null,E=(0,q.zd)((0,q.pd)(v)).deep_link_id;return(E?(0,q.zd)((0,q.pd)(E)).link:null)||E||g||p||v}(p);try{return new Js(g)}catch{return null}}}let ga=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(g,E){return ll._fromEmailAndPassword(g,E)}static credentialWithLink(g,E){const k=Js.parseLink(E);return De(k,"argument-error"),ll._fromEmailAndCode(g,k.code,k.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Go{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class js extends Go{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class Xs extends js{static credentialFromJSON(p){const g="string"==typeof p?JSON.parse(p):p;return De("providerId"in g&&"signInMethod"in g,"argument-error"),Hr._fromParams(g)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return De(p.idToken||p.accessToken,"argument-error"),Hr._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return Xs.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return Xs.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:g,oauthAccessToken:E,oauthTokenSecret:k,pendingToken:j,nonce:oe,providerId:ye}=p;if(!E&&!k&&!g&&!j||!ye)return null;try{return new Xs(ye)._credential({idToken:g,accessToken:E,nonce:oe,pendingToken:j})}catch{return null}}}let hl=(()=>{class v extends js{constructor(){super("facebook.com")}static credential(g){return Hr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),ma=(()=>{class v extends js{constructor(){super("google.com"),this.addScope("profile")}static credential(g,E){return Hr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:E})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:E,oauthAccessToken:k}=g;if(!E&&!k)return null;try{return v.credential(E,k)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),Ll=(()=>{class v extends js{constructor(){super("github.com")}static credential(g){return Hr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class eo extends gs{constructor(p,g){super(p,p),this.pendingToken=g}_getIdTokenResponse(p){return _s(p,this.buildRequest())}_linkToIdToken(p,g){const E=this.buildRequest();return E.idToken=g,_s(p,E)}_getReauthenticationResolver(p){const g=this.buildRequest();return g.autoCreate=!1,_s(p,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:k,pendingToken:j}=g;return E&&k&&j&&E===k?new eo(E,j):null}static _create(p,g){return new eo(p,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Wo extends Go{constructor(p){De(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return Wo.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return Wo.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const g=eo.fromJSON(p);return De(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:g,providerId:E}=p;if(!g||!E)return null;try{return eo._create(E,g)}catch{return null}}}let Ko=(()=>{class v extends js{constructor(){super("twitter.com")}static credential(g,E){return Hr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:E})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:E,oauthTokenSecret:k}=g;if(!E||!k)return null;try{return v.credential(E,k)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Eo(v,p){return _i.apply(this,arguments)}function _i(){return(_i=(0,S.Z)(function*(v,p){return Jn(v,"POST","/v1/accounts:signUp",sn(v,p))})).apply(this,arguments)}class ci{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,g,E,k=!1){return(0,S.Z)(function*(){const j=yield Tr._fromIdTokenResponse(p,E,k),oe=_a(E);return new ci({user:j,providerId:oe,_tokenResponse:E,operationType:g})})()}static _forOperation(p,g,E){return(0,S.Z)(function*(){yield p._updateTokensIfNecessary(E,!0);const k=_a(E);return new ci({user:p,providerId:k,_tokenResponse:E,operationType:g})})()}}function _a(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Va(){return(Va=(0,S.Z)(function*(v){var p;const g=Gn(v);if(yield g._initializationPromise,null!==(p=g.currentUser)&&void 0!==p&&p.isAnonymous)return new ci({user:g.currentUser,providerId:null,operationType:"signIn"});const E=yield Eo(g,{returnSecureToken:!0}),k=yield ci._fromIdTokenResponse(g,"signIn",E,!0);return yield g._updateCurrentUser(k.user),k})).apply(this,arguments)}class to extends q.ZR{constructor(p,g,E,k){var j;super(g.code,g.message),this.operationType=E,this.user=k,Object.setPrototypeOf(this,to.prototype),this.customData={appName:p.name,tenantId:null!==(j=p.tenantId)&&void 0!==j?j:void 0,_serverResponse:g.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(p,g,E,k){return new to(p,g,E,k)}}function vi(v,p,g,E){return("reauthenticate"===p?g._getReauthenticationResolver(v):g._getIdTokenResponse(v)).catch(j=>{throw"auth/multi-factor-auth-required"===j.code?to._fromErrorAndOperation(v,j,p,E):j})}function xi(v){return new Set(v.map(({providerId:p})=>p).filter(p=>!!p))}function $r(){return $r=(0,S.Z)(function*(v,p){const g=(0,q.m9)(v);yield Rr(!0,g,p);const{providerUserInfo:E}=yield function Us(v,p){return Ui.apply(this,arguments)}(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[p]}),k=xi(E||[]);return g.providerData=g.providerData.filter(j=>k.has(j.providerId)),k.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g}),$r.apply(this,arguments)}function Pr(v,p){return ya.apply(this,arguments)}function ya(){return(ya=(0,S.Z)(function*(v,p,g=!1){const E=yield vt(v,p._linkToIdToken(v.auth,yield v.getIdToken()),g);return ci._forOperation(v,"link",E)})).apply(this,arguments)}function Rr(v,p,g){return va.apply(this,arguments)}function va(){return(va=(0,S.Z)(function*(v,p,g){yield Bn(p);const k=!1===v?"provider-already-linked":"no-such-provider";De(xi(p.providerData).has(g)===v,p.auth,k)})).apply(this,arguments)}function ys(v,p){return wa.apply(this,arguments)}function wa(){return(wa=(0,S.Z)(function*(v,p,g=!1){const{auth:E}=v,k="reauthenticate";try{const j=yield vt(v,vi(E,k,p,v),g);De(j.idToken,E,"internal-error");const oe=nn(j.idToken);De(oe,E,"internal-error");const{sub:ye}=oe;return De(v.uid===ye,E,"user-mismatch"),ci._forOperation(v,k,j)}catch(j){throw"auth/user-not-found"===j?.code&&Be(E,"user-mismatch"),j}})).apply(this,arguments)}function To(v,p){return ln.apply(this,arguments)}function ln(){return(ln=(0,S.Z)(function*(v,p,g=!1){const E="signIn",k=yield vi(v,E,p),j=yield ci._fromIdTokenResponse(v,E,k);return g||(yield v._updateCurrentUser(j.user)),j})).apply(this,arguments)}function no(v,p){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,S.Z)(function*(v,p){return To(Gn(v),p)})).apply(this,arguments)}function Vl(v,p){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,S.Z)(function*(v,p){const g=(0,q.m9)(v);return yield Rr(!1,g,p.providerId),Pr(g,p)})).apply(this,arguments)}function Ms(v,p){return gl.apply(this,arguments)}function gl(){return(gl=(0,S.Z)(function*(v,p){return ys((0,q.m9)(v),p)})).apply(this,arguments)}function Yo(){return(Yo=(0,S.Z)(function*(v,p){return Jn(v,"POST","/v1/accounts:signInWithCustomToken",sn(v,p))})).apply(this,arguments)}function hn(){return hn=(0,S.Z)(function*(v,p){const g=Gn(v),E=yield function Qc(v,p){return Yo.apply(this,arguments)}(g,{token:p,returnSecureToken:!0}),k=yield ci._fromIdTokenResponse(g,"signIn",E);return yield g._updateCurrentUser(k.user),k}),hn.apply(this,arguments)}class Io{constructor(p,g){this.factorId=p,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(p,g){return"phoneInfo"in g?Ba._fromServerResponse(p,g):"totpInfo"in g?ri._fromServerResponse(p,g):Be(p,"internal-error")}}class Ba extends Io{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,g){return new Ba(g)}}class ri extends Io{constructor(p){super("totp",p)}static _fromServerResponse(p,g){return new ri(g)}}function ro(v,p,g){var E;De((null===(E=g.url)||void 0===E?void 0:E.length)>0,v,"invalid-continue-uri"),De(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),p.continueUrl=g.url,p.dynamicLinkDomain=g.dynamicLinkDomain,p.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(De(g.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),p.iOSBundleId=g.iOS.bundleId),g.android&&(De(g.android.packageName.length>0,v,"missing-android-pkg-name"),p.androidInstallApp=g.android.installApp,p.androidMinimumVersionCode=g.android.minimumVersion,p.androidPackageName=g.android.packageName)}function Vi(){return Vi=(0,S.Z)(function*(v,p,g){var E;const k=Gn(v),j={requestType:"PASSWORD_RESET",email:p,clientType:"CLIENT_TYPE_WEB"};if(null!==(E=k._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const oe=yield wt(k,j,"getOobCode",!0);g&&ro(k,oe,g),yield wo(k,oe)}else g&&ro(k,j,g),yield wo(k,j).catch(function(){var oe=(0,S.Z)(function*(ye){if("auth/missing-recaptcha-token"!==ye.code)return Promise.reject(ye);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const rt=yield wt(k,j,"getOobCode",!0);g&&ro(k,rt,g),yield wo(k,rt)}});return function(ye){return oe.apply(this,arguments)}}())}),Vi.apply(this,arguments)}function on(){return(on=(0,S.Z)(function*(v,p,g){yield jr((0,q.m9)(v),{oobCode:p,newPassword:g})})).apply(this,arguments)}function Bi(){return Bi=(0,S.Z)(function*(v,p){yield function mi(v,p){return xs.apply(this,arguments)}((0,q.m9)(v),{oobCode:p})}),Bi.apply(this,arguments)}function Za(v,p){return Or.apply(this,arguments)}function Or(){return(Or=(0,S.Z)(function*(v,p){const g=(0,q.m9)(v),E=yield jr(g,{oobCode:p}),k=E.requestType;switch(De(k,g,"internal-error"),k){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":De(E.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":De(E.mfaInfo,g,"internal-error");default:De(E.email,g,"internal-error")}let j=null;return E.mfaInfo&&(j=Io._fromServerResponse(Gn(g),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:j},operation:k}})).apply(this,arguments)}function Ps(){return(Ps=(0,S.Z)(function*(v,p){const{data:g}=yield Za((0,q.m9)(v),p);return g.email})).apply(this,arguments)}function ts(){return ts=(0,S.Z)(function*(v,p,g){var E;const k=Gn(v),j={returnSecureToken:!0,email:p,password:g,clientType:"CLIENT_TYPE_WEB"};let oe;if(null!==(E=k._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const Ke=yield wt(k,j,"signUpPassword");oe=Eo(k,Ke)}else oe=Eo(k,j).catch(function(){var Ke=(0,S.Z)(function*(Lt){if("auth/missing-recaptcha-token"===Lt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const kt=yield wt(k,j,"signUpPassword");return Eo(k,kt)}return Promise.reject(Lt)});return function(Lt){return Ke.apply(this,arguments)}}());const ye=yield oe.catch(Ke=>Promise.reject(Ke)),rt=yield ci._fromIdTokenResponse(k,"signIn",ye);return yield k._updateCurrentUser(rt.user),rt}),ts.apply(this,arguments)}function _l(){return _l=(0,S.Z)(function*(v,p,g){var E;const k=Gn(v),j={requestType:"EMAIL_SIGNIN",email:p,clientType:"CLIENT_TYPE_WEB"};function oe(ye,rt){De(rt.handleCodeInApp,k,"argument-error"),rt&&ro(k,ye,rt)}if(null!==(E=k._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const ye=yield wt(k,j,"getOobCode",!0);oe(ye,g),yield ni(k,ye)}else oe(j,g),yield ni(k,j).catch(function(){var ye=(0,S.Z)(function*(rt){if("auth/missing-recaptcha-token"!==rt.code)return Promise.reject(rt);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Ke=yield wt(k,j,"getOobCode",!0);oe(Ke,g),yield ni(k,Ke)}});return function(rt){return ye.apply(this,arguments)}}())}),_l.apply(this,arguments)}function So(){return(So=(0,S.Z)(function*(v,p,g){const E=(0,q.m9)(v),k=ga.credentialWithLink(p,g||Dt());return De(k._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),no(E,k)})).apply(this,arguments)}function Do(){return(Do=(0,S.Z)(function*(v,p){return Tt(v,"POST","/v1/accounts:createAuthUri",sn(v,p))})).apply(this,arguments)}function yl(){return yl=(0,S.Z)(function*(v,p){const E={identifier:p,continueUri:Et()?Dt():"http://localhost"},{signinMethods:k}=yield function Ha(v,p){return Do.apply(this,arguments)}((0,q.m9)(v),E);return k||[]}),yl.apply(this,arguments)}function vl(){return vl=(0,S.Z)(function*(v,p){const g=(0,q.m9)(v),k={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};p&&ro(g.auth,k,p);const{email:j}=yield function ol(v,p){return da.apply(this,arguments)}(g.auth,k);j!==v.email&&(yield v.reload())}),vl.apply(this,arguments)}function wn(){return wn=(0,S.Z)(function*(v,p,g){const E=(0,q.m9)(v),j={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:p};g&&ro(E.auth,j,g);const{email:oe}=yield function Ji(v,p){return Sr.apply(this,arguments)}(E.auth,j);oe!==v.email&&(yield v.reload())}),wn.apply(this,arguments)}function $a(){return($a=(0,S.Z)(function*(v,p){return Tt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Ao(){return Ao=(0,S.Z)(function*(v,{displayName:p,photoURL:g}){if(void 0===p&&void 0===g)return;const E=(0,q.m9)(v),j={idToken:yield E.getIdToken(),displayName:p,photoUrl:g,returnSecureToken:!0},oe=yield vt(E,function ba(v,p){return $a.apply(this,arguments)}(E.auth,j));E.displayName=oe.displayName||null,E.photoURL=oe.photoUrl||null;const ye=E.providerData.find(({providerId:rt})=>"password"===rt);ye&&(ye.displayName=E.displayName,ye.photoURL=E.photoURL),yield E._updateTokensIfNecessary(oe)}),Ao.apply(this,arguments)}function Hn(v,p,g){return wl.apply(this,arguments)}function wl(){return(wl=(0,S.Z)(function*(v,p,g){const{auth:E}=v,j={idToken:yield v.getIdToken(),returnSecureToken:!0};p&&(j.email=p),g&&(j.password=g);const oe=yield vt(v,Yi(E,j));yield v._updateTokensIfNecessary(oe,!0)})).apply(this,arguments)}class io{constructor(p,g,E={}){this.isNewUser=p,this.providerId=g,this.profile=E}}class rc extends io{constructor(p,g,E,k){super(p,g,E),this.username=k}}class gu extends io{constructor(p,g){super(p,"facebook.com",g)}}class ic extends rc{constructor(p,g){super(p,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class Cl extends io{constructor(p,g){super(p,"google.com",g)}}class jl extends rc{constructor(p,g,E){super(p,"twitter.com",g,E)}}function za(v){const{user:p,_tokenResponse:g}=v;return p.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function qa(v){var p,g;if(!v)return null;const{providerId:E}=v,k=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},j=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!E&&v?.idToken){const oe=null===(g=null===(p=nn(v.idToken))||void 0===p?void 0:p.firebase)||void 0===g?void 0:g.sign_in_provider;if(oe)return new io(j,"anonymous"!==oe&&"custom"!==oe?oe:null)}if(!E)return null;switch(E){case"facebook.com":return new gu(j,k);case"github.com":return new ic(j,k);case"google.com":return new Cl(j,k);case"twitter.com":return new jl(j,k,v.screenName||null);case"custom":case"anonymous":return new io(j,null);default:return new io(j,E,k)}}(g)}class Mn{constructor(p,g,E){this.type=p,this.credential=g,this.auth=E}static _fromIdtoken(p,g){return new Mn("enroll",p,g)}static _fromMfaPendingCredential(p){return new Mn("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var g,E;if(p?.multiFactorSession){if(null!==(g=p.multiFactorSession)&&void 0!==g&&g.pendingCredential)return Mn._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(E=p.multiFactorSession)&&void 0!==E&&E.idToken)return Mn._fromIdtoken(p.multiFactorSession.idToken)}return null}}class Tn{constructor(p,g,E){this.session=p,this.hints=g,this.signInResolver=E}static _fromError(p,g){const E=Gn(p),k=g.customData._serverResponse,j=(k.mfaInfo||[]).map(ye=>Io._fromServerResponse(E,ye));De(k.mfaPendingCredential,E,"internal-error");const oe=Mn._fromMfaPendingCredential(k.mfaPendingCredential);return new Tn(oe,j,function(){var ye=(0,S.Z)(function*(rt){const Ke=yield rt._process(E,oe);delete k.mfaInfo,delete k.mfaPendingCredential;const Lt=Object.assign(Object.assign({},k),{idToken:Ke.idToken,refreshToken:Ke.refreshToken});switch(g.operationType){case"signIn":const kt=yield ci._fromIdTokenResponse(E,g.operationType,Lt);return yield E._updateCurrentUser(kt.user),kt;case"reauthenticate":return De(g.user,E,"internal-error"),ci._forOperation(g.user,g.operationType,Lt);default:Be(E,"internal-error")}});return function(rt){return ye.apply(this,arguments)}}())}resolveSignIn(p){var g=this;return(0,S.Z)(function*(){return g.signInResolver(p)})()}}class kr{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(E=>Io._fromServerResponse(p.auth,E)))})}static _fromUser(p){return new kr(p)}getSession(){var p=this;return(0,S.Z)(function*(){return Mn._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,g){var E=this;return(0,S.Z)(function*(){const k=p,j=yield E.getSession(),oe=yield vt(E.user,k._process(E.user.auth,j,g));return yield E.user._updateTokensIfNecessary(oe),E.user.reload()})()}unenroll(p){var g=this;return(0,S.Z)(function*(){const E="string"==typeof p?p:p.uid,k=yield g.user.getIdToken();try{const j=yield vt(g.user,function xo(v,p){return Tt(v,"POST","/v2/accounts/mfaEnrollment:withdraw",sn(v,p))}(g.user.auth,{idToken:k,mfaEnrollmentId:E}));g.enrolledFactors=g.enrolledFactors.filter(({uid:oe})=>oe!==E),yield g.user._updateTokensIfNecessary(j),yield g.user.reload()}catch(j){throw j}})()}}const zr=new WeakMap,wi="__sak";class Hl{constructor(p,g){this.storageRetriever=p,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(wi,"1"),this.storage.removeItem(wi),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,g){return this.storage.setItem(p,JSON.stringify(g)),Promise.resolve()}_get(p){const g=this.storage.getItem(p);return Promise.resolve(g?JSON.parse(g):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const un=(()=>{class v extends Hl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,E)=>this.onStorageEvent(g,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function so(){const v=(0,q.z$)();return ve(v)||Le(v)}()&&function yo(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=zn(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const E of Object.keys(this.listeners)){const k=this.storage.getItem(E),j=this.localCache[E];k!==j&&g(E,j,k)}}onStorageEvent(g,E=!1){if(!g.key)return void this.forAllChangedKeys((ye,rt,Ke)=>{this.notifyListeners(ye,Ke)});const k=g.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ye=this.storage.getItem(k);if(g.newValue!==ye)null!==g.newValue?this.storage.setItem(k,g.newValue):this.storage.removeItem(k);else if(this.localCache[k]===g.newValue&&!E)return}const j=()=>{const ye=this.storage.getItem(k);!E&&this.localCache[k]===ye||this.notifyListeners(k,ye)},oe=this.storage.getItem(k);!function Ln(){return(0,q.w1)()&&10===document.documentMode}()||oe===g.newValue||g.newValue===g.oldValue?j():setTimeout(j,10)}notifyListeners(g,E){this.localCache[g]=E;const k=this.listeners[g];if(k)for(const j of Array.from(k))j(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,E,k)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:E,newValue:k}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(E)}_removeListener(g,E){this.listeners[g]&&(this.listeners[g].delete(E),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,E){var k=()=>super._set,j=this;return(0,S.Z)(function*(){yield k().call(j,g,E),j.localCache[g]=JSON.stringify(E)})()}_get(g){var E=()=>super._get,k=this;return(0,S.Z)(function*(){const j=yield E().call(k,g);return k.localCache[g]=JSON.stringify(j),j})()}_remove(g){var E=()=>super._remove,k=this;return(0,S.Z)(function*(){yield E().call(k,g),delete k.localCache[g]})()}}return v.type="LOCAL",v})(),ws=(()=>{class v extends Hl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,E){}_removeListener(g,E){}}return v.type="SESSION",v})();let Xn=(()=>{class v{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const E=this.receivers.find(j=>j.isListeningto(g));if(E)return E;const k=new v(g);return this.receivers.push(k),k}isListeningto(g){return this.eventTarget===g}handleEvent(g){var E=this;return(0,S.Z)(function*(){const k=g,{eventId:j,eventType:oe,data:ye}=k.data,rt=E.handlersMap[oe];if(!rt?.size)return;k.ports[0].postMessage({status:"ack",eventId:j,eventType:oe});const Ke=Array.from(rt).map(function(){var kt=(0,S.Z)(function*(Kn){return Kn(k.origin,ye)});return function(Kn){return kt.apply(this,arguments)}}()),Lt=yield function Po(v){return Promise.all(v.map(function(){var p=(0,S.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(E){return{fulfilled:!1,reason:E}}});return function(g){return p.apply(this,arguments)}}()))}(Ke);k.ports[0].postMessage({status:"done",eventId:j,eventType:oe,response:Lt})})()}_subscribe(g,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(E)}_unsubscribe(g,E){this.handlersMap[g]&&E&&this.handlersMap[g].delete(E),(!E||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Wa(v="",p=10){let g="";for(let E=0;E<p;E++)g+=Math.floor(10*Math.random());return v+g}class Jo{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,g,E=50){var k=this;return(0,S.Z)(function*(){const j=typeof MessageChannel<"u"?new MessageChannel:null;if(!j)throw new Error("connection_unavailable");let oe,ye;return new Promise((rt,Ke)=>{const Lt=Wa("",20);j.port1.start();const kt=setTimeout(()=>{Ke(new Error("unsupported_event"))},E);ye={messageChannel:j,onMessage(Kn){const ra=Kn;if(ra.data.eventId===Lt)switch(ra.data.status){case"ack":clearTimeout(kt),oe=setTimeout(()=>{Ke(new Error("timeout"))},3e3);break;case"done":clearTimeout(oe),rt(ra.data.response);break;default:clearTimeout(kt),clearTimeout(oe),Ke(new Error("invalid_response"))}}},k.handlers.add(ye),j.port1.addEventListener("message",ye.onMessage),k.target.postMessage({eventType:p,eventId:Lt,data:g},[j.port2])}).finally(()=>{ye&&k.removeMessageHandler(ye)})})()}}function ur(){return window}function Ka(){return typeof ur().WorkerGlobalScope<"u"&&"function"==typeof ur().importScripts}function _u(){return(_u=(0,S.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ni="firebaseLocalStorageDb",Fr=1,ke="firebaseLocalStorage",Cs="fbase_key";class bs{constructor(p){this.request=p}toPromise(){return new Promise((p,g)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function ii(v,p){return v.transaction([ke],p?"readwrite":"readonly").objectStore(ke)}function ac(){const v=indexedDB.open(Ni,Fr);return new Promise((p,g)=>{v.addEventListener("error",()=>{g(v.error)}),v.addEventListener("upgradeneeded",()=>{const E=v.result;try{E.createObjectStore(ke,{keyPath:Cs})}catch(k){g(k)}}),v.addEventListener("success",(0,S.Z)(function*(){const E=v.result;E.objectStoreNames.contains(ke)?p(E):(E.close(),yield function W(){const v=indexedDB.deleteDatabase(Ni);return new bs(v).toPromise()}(),p(yield ac()))}))})}function Zi(v,p,g){return bt.apply(this,arguments)}function bt(){return(bt=(0,S.Z)(function*(v,p,g){const E=ii(v,!0).put({[Cs]:p,value:g});return new bs(E).toPromise()})).apply(this,arguments)}function qt(){return(qt=(0,S.Z)(function*(v,p){const g=ii(v,!1).get(p),E=yield new bs(g).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Ro(v,p){const g=ii(v,!0).delete(p);return new bs(g).toPromise()}const ss=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,S.Z)(function*(){return g.db||(g.db=yield ac()),g.db})()}_withRetries(g){var E=this;return(0,S.Z)(function*(){let k=0;for(;;)try{const j=yield E._openDb();return yield g(j)}catch(j){if(k++>3)throw j;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,S.Z)(function*(){return Ka()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,S.Z)(function*(){g.receiver=Xn._getInstance(function $n(){return Ka()?self:null}()),g.receiver._subscribe("keyChanged",function(){var E=(0,S.Z)(function*(k,j){return{keyProcessed:(yield g._poll()).includes(j.key)}});return function(k,j){return E.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var E=(0,S.Z)(function*(k,j){return["keyChanged"]});return function(k,j){return E.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,S.Z)(function*(){var E,k;if(g.activeServiceWorker=yield function oc(){return _u.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Jo(g.activeServiceWorker);const j=yield g.sender._send("ping",{},800);j&&null!==(E=j[0])&&void 0!==E&&E.fulfilled&&null!==(k=j[0])&&void 0!==k&&k.value.includes("keyChanged")&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var E=this;return(0,S.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function bl(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:g},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,S.Z)(function*(){try{if(!indexedDB)return!1;const g=yield ac();return yield Zi(g,wi,"1"),yield Ro(g,wi),!0}catch{}return!1})()}_withPendingWrite(g){var E=this;return(0,S.Z)(function*(){E.pendingWrites++;try{yield g()}finally{E.pendingWrites--}})()}_set(g,E){var k=this;return(0,S.Z)(function*(){return k._withPendingWrite((0,S.Z)(function*(){return yield k._withRetries(j=>Zi(j,g,E)),k.localCache[g]=E,k.notifyServiceWorker(g)}))})()}_get(g){var E=this;return(0,S.Z)(function*(){const k=yield E._withRetries(j=>function Ya(v,p){return qt.apply(this,arguments)}(j,g));return E.localCache[g]=k,k})()}_remove(g){var E=this;return(0,S.Z)(function*(){return E._withPendingWrite((0,S.Z)(function*(){return yield E._withRetries(k=>Ro(k,g)),delete E.localCache[g],E.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,S.Z)(function*(){const E=yield g._withRetries(oe=>{const ye=ii(oe,!1).getAll();return new bs(ye).toPromise()});if(!E)return[];if(0!==g.pendingWrites)return[];const k=[],j=new Set;for(const{fbase_key:oe,value:ye}of E)j.add(oe),JSON.stringify(g.localCache[oe])!==JSON.stringify(ye)&&(g.notifyListeners(oe,ye),k.push(oe));for(const oe of Object.keys(g.localCache))g.localCache[oe]&&!j.has(oe)&&(g.notifyListeners(oe,null),k.push(oe));return k})()}notifyListeners(g,E){this.localCache[g]=E;const k=this.listeners[g];if(k)for(const j of Array.from(k))j(E)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,S.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(E)}_removeListener(g,E){this.listeners[g]&&(this.listeners[g].delete(E),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})(),Rs=1e12;class lc{constructor(p){this.auth=p,this.counter=Rs,this._widgets=new Map}render(p,g){const E=this.counter;return this._widgets.set(E,new uc(p,this.auth.name,g||{})),this.counter++,E}reset(p){var g;const E=p||Rs;null===(g=this._widgets.get(E))||void 0===g||g.delete(),this._widgets.delete(E)}getResponse(p){var g;return(null===(g=this._widgets.get(p||Rs))||void 0===g?void 0:g.getResponse())||""}execute(p){var g=this;return(0,S.Z)(function*(){var E;return null===(E=g._widgets.get(p||Rs))||void 0===E||E.execute(),""})()}}class uc{constructor(p,g,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const k="string"==typeof p?document.getElementById(p):p;De(k,"argument-error",{appName:g}),this.container=k,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Jc(v){const p=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<v;E++)p.push(g.charAt(Math.floor(Math.random()*g.length)));return p.join("")}(50);const{callback:p,"expired-callback":g}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const cc=_r("rcb"),ji=new $e(3e4,6e4);class dc{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=ur().grecaptcha)||void 0===p||!p.render)}load(p,g=""){return De(function vu(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(g),p,"argument-error"),this.shouldResolveImmediately(g)&&_n(ur().grecaptcha)?Promise.resolve(ur().grecaptcha):new Promise((E,k)=>{const j=ur().setTimeout(()=>{k(He(p,"network-request-failed"))},ji.get());ur()[cc]=()=>{ur().clearTimeout(j),delete ur()[cc];const ye=ur().grecaptcha;if(!ye||!_n(ye))return void k(He(p,"internal-error"));const rt=ye.render;ye.render=(Ke,Lt)=>{const kt=rt(Ke,Lt);return this.counter++,kt},this.hostLanguage=g,E(ye)},Ir(`https://www.google.com/recaptcha/api.js??${(0,q.xO)({onload:cc,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(j),k(He(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var g;return!(null===(g=ur().grecaptcha)||void 0===g||!g.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class cr{load(p){return(0,S.Z)(function*(){return new lc(p)})()}clearedOneInstance(){}}const Hs="recaptcha",wu={theme:"light",type:"image"};class Cu{constructor(p,g=Object.assign({},wu),E){this.parameters=g,this.type=Hs,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Gn(E),this.isInvisible="invisible"===this.parameters.size,De(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const k="string"==typeof p?document.getElementById(p):p;De(k,this.auth,"argument-error"),this.container=k,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new cr:new dc,this.validateStartingState()}verify(){var p=this;return(0,S.Z)(function*(){p.assertNotDestroyed();const g=yield p.render(),E=p.getAssertedRecaptcha();return E.getResponse(g)||new Promise(j=>{const oe=ye=>{ye&&(p.tokenChangeListeners.delete(oe),j(ye))};p.tokenChangeListeners.add(oe),p.isInvisible&&E.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){De(!this.parameters.sitekey,this.auth,"argument-error"),De(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),De(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return g=>{if(this.tokenChangeListeners.forEach(E=>E(g)),"function"==typeof p)p(g);else if("string"==typeof p){const E=ur()[p];"function"==typeof E&&E(g)}}}assertNotDestroyed(){De(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,S.Z)(function*(){if(yield p.init(),!p.widgetId){let g=p.container;if(!p.isInvisible){const E=document.createElement("div");g.appendChild(E),g=E}p.widgetId=p.getAssertedRecaptcha().render(g,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,S.Z)(function*(){De(Et()&&!Ka(),p.auth,"internal-error"),yield function Oi(){let v=null;return new Promise(p=>{"complete"!==document.readyState?(v=()=>p(),window.addEventListener("load",v)):p()}).catch(p=>{throw v&&window.removeEventListener("load",v),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const g=yield function Ce(v){return nt.apply(this,arguments)}(p.auth);De(g,p.auth,"internal-error"),p.parameters.sitekey=g})()}getAssertedRecaptcha(){return De(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class $s{constructor(p,g){this.verificationId=p,this.onConfirmation=g}confirm(p){const g=es._fromVerification(this.verificationId,p);return this.onConfirmation(g)}}function ea(){return(ea=(0,S.Z)(function*(v,p,g){const E=Gn(v),k=yield Ja(E,p,(0,q.m9)(g));return new $s(k,j=>no(E,j))})).apply(this,arguments)}function El(){return(El=(0,S.Z)(function*(v,p,g){const E=(0,q.m9)(v);yield Rr(!1,E,"phone");const k=yield Ja(E.auth,p,(0,q.m9)(g));return new $s(k,j=>Vl(E,j))})).apply(this,arguments)}function Tl(){return(Tl=(0,S.Z)(function*(v,p,g){const E=(0,q.m9)(v),k=yield Ja(E.auth,p,(0,q.m9)(g));return new $s(k,j=>Ms(E,j))})).apply(this,arguments)}function Ja(v,p,g){return ki.apply(this,arguments)}function ki(){return ki=(0,S.Z)(function*(v,p,g){var E;const k=yield g.verify();try{let j;if(De("string"==typeof k,v,"argument-error"),De(g.type===Hs,v,"argument-error"),j="string"==typeof p?{phoneNumber:p}:p,"session"in j){const oe=j.session;if("phoneNumber"in j)return De("enroll"===oe.type,v,"internal-error"),(yield function Vn(v,p){return Tt(v,"POST","/v2/accounts/mfaEnrollment:start",sn(v,p))}(v,{idToken:oe.credential,phoneEnrollmentInfo:{phoneNumber:j.phoneNumber,recaptchaToken:k}})).phoneSessionInfo.sessionInfo;{De("signin"===oe.type,v,"internal-error");const ye=(null===(E=j.multiFactorHint)||void 0===E?void 0:E.uid)||j.multiFactorUid;return De(ye,v,"missing-multi-factor-info"),(yield function Xo(v,p){return Tt(v,"POST","/v2/accounts/mfaSignIn:start",sn(v,p))}(v,{mfaPendingCredential:oe.credential,mfaEnrollmentId:ye,phoneSignInInfo:{recaptchaToken:k}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:oe}=yield function Fa(v,p){return qo.apply(this,arguments)}(v,{phoneNumber:j.phoneNumber,recaptchaToken:k});return oe}}finally{g._reset()}}),ki.apply(this,arguments)}function b(){return(b=(0,S.Z)(function*(v,p){yield Pr((0,q.m9)(v),p)})).apply(this,arguments)}let T=(()=>{class v{constructor(g){this.providerId=v.PROVIDER_ID,this.auth=Gn(g)}verifyPhoneNumber(g,E){return Ja(this.auth,g,(0,q.m9)(E))}static credential(g,E){return es._fromVerification(g,E)}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:E,temporaryProof:k}=g;return E&&k?es._fromTokenResponse(E,k):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function y(v,p){return p?ir(p):(De(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class A extends gs{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return _s(p,this._buildIdpRequest())}_linkToIdToken(p,g){return _s(p,this._buildIdpRequest(g))}_getReauthenticationResolver(p){return _s(p,this._buildIdpRequest())}_buildIdpRequest(p){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(g.idToken=p),g}}function O(v){return To(v.auth,new A(v),v.bypassAuthState)}function Z(v){const{auth:p,user:g}=v;return De(g,p,"internal-error"),ys(g,new A(v),v.bypassAuthState)}function G(v){return ge.apply(this,arguments)}function ge(){return(ge=(0,S.Z)(function*(v){const{auth:p,user:g}=v;return De(g,p,"internal-error"),Pr(g,new A(v),v.bypassAuthState)})).apply(this,arguments)}class je{constructor(p,g,E,k,j=!1){this.auth=p,this.resolver=E,this.user=k,this.bypassAuthState=j,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var p=this;return new Promise(function(){var g=(0,S.Z)(function*(E,k){p.pendingPromise={resolve:E,reject:k};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(j){p.reject(j)}});return function(E,k){return g.apply(this,arguments)}}())}onAuthEvent(p){var g=this;return(0,S.Z)(function*(){const{urlResponse:E,sessionId:k,postBody:j,tenantId:oe,error:ye,type:rt}=p;if(ye)return void g.reject(ye);const Ke={auth:g.auth,requestUri:E,sessionId:k,tenantId:oe||void 0,postBody:j||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(rt)(Ke))}catch(Lt){g.reject(Lt)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return O;case"linkViaPopup":case"linkViaRedirect":return G;case"reauthViaPopup":case"reauthViaRedirect":return Z;default:Be(this.auth,"internal-error")}}resolve(p){_t(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){_t(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const gt=new $e(2e3,1e4);function Nn(){return(Nn=(0,S.Z)(function*(v,p,g){const E=Gn(v);et(v,p,Go);const k=y(E,g);return new Hi(E,"signInViaPopup",p,k).executeNotNull()})).apply(this,arguments)}function Es(){return(Es=(0,S.Z)(function*(v,p,g){const E=(0,q.m9)(v);et(E.auth,p,Go);const k=y(E.auth,g);return new Hi(E.auth,"reauthViaPopup",p,k,E).executeNotNull()})).apply(this,arguments)}function oo(){return(oo=(0,S.Z)(function*(v,p,g){const E=(0,q.m9)(v);et(E.auth,p,Go);const k=y(E.auth,g);return new Hi(E.auth,"linkViaPopup",p,k,E).executeNotNull()})).apply(this,arguments)}let Hi=(()=>{class v extends je{constructor(g,E,k,j,oe){super(g,E,j,oe),this.provider=k,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var g=this;return(0,S.Z)(function*(){const E=yield g.execute();return De(E,g.auth,"internal-error"),E})()}onExecution(){var g=this;return(0,S.Z)(function*(){_t(1===g.filter.length,"Popup operations only handle one event");const E=Wa();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],E),g.authWindow.associatedEvent=E,g.resolver._originValidation(g.auth).catch(k=>{g.reject(k)}),g.resolver._isIframeWebStorageSupported(g.auth,k=>{k||g.reject(He(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(He(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const g=()=>{var E,k;this.pollId=null!==(k=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==k&&k.closed?window.setTimeout(()=>{this.pollId=null,this.reject(He(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(g,gt.get())};g()}}return v.currentPopupAction=null,v})();const Ea="pendingRedirect",No=new Map;class Xc extends je{constructor(p,g,E=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,E),this.eventId=null}execute(){var p=()=>super.execute,g=this;return(0,S.Z)(function*(){let E=No.get(g.auth._key());if(!E){try{const j=(yield function Qd(v,p){return Jd.apply(this,arguments)}(g.resolver,g.auth))?yield p().call(g):null;E=()=>Promise.resolve(j)}catch(k){E=()=>Promise.reject(k)}No.set(g.auth._key(),E)}return g.bypassAuthState||No.set(g.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(p){var g=()=>super.onAuthEvent,E=this;return(0,S.Z)(function*(){if("signInViaRedirect"===p.type)return g().call(E,p);if("unknown"!==p.type){if(p.eventId){const k=yield E.auth._redirectUserForId(p.eventId);if(k)return E.user=k,g().call(E,p);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,S.Z)(function*(){})()}cleanUp(){}}function Jd(){return(Jd=(0,S.Z)(function*(v,p){const g=hc(p),E=ed(v);if(!(yield E._isAvailable()))return!1;const k="true"===(yield E._get(g));return yield E._remove(g),k})).apply(this,arguments)}function Sl(v,p){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,S.Z)(function*(v,p){return ed(v)._set(hc(p),"true")})).apply(this,arguments)}function gf(v,p){No.set(v._key(),p)}function ed(v){return ir(v._redirectPersistence)}function hc(v){return re(Ea,v.config.apiKey,v.name)}function Xd(v,p,g){return function $i(v,p,g){return Fi.apply(this,arguments)}(v,p,g)}function Fi(){return(Fi=(0,S.Z)(function*(v,p,g){const E=Gn(v);et(v,p,Go),yield E._initializationPromise;const k=y(E,g);return yield Sl(k,E),k._openRedirect(E,p,"signInViaRedirect")})).apply(this,arguments)}function td(v,p,g){return function Tu(v,p,g){return nd.apply(this,arguments)}(v,p,g)}function nd(){return(nd=(0,S.Z)(function*(v,p,g){const E=(0,q.m9)(v);et(E.auth,p,Go),yield E.auth._initializationPromise;const k=y(E.auth,g);yield Sl(k,E.auth);const j=yield Ta(E);return k._openRedirect(E.auth,p,"reauthViaRedirect",j)})).apply(this,arguments)}function Kp(v,p,g){return function Yp(v,p,g){return eh.apply(this,arguments)}(v,p,g)}function eh(){return(eh=(0,S.Z)(function*(v,p,g){const E=(0,q.m9)(v);et(E.auth,p,Go),yield E.auth._initializationPromise;const k=y(E.auth,g);yield Rr(!1,E,p.providerId),yield Sl(k,E.auth);const j=yield Ta(E);return k._openRedirect(E.auth,p,"linkViaRedirect",j)})).apply(this,arguments)}function _f(){return(_f=(0,S.Z)(function*(v,p){return yield Gn(v)._initializationPromise,rd(v,p,!1)})).apply(this,arguments)}function rd(v,p){return Gl.apply(this,arguments)}function Gl(){return(Gl=(0,S.Z)(function*(v,p,g=!1){const E=Gn(v),k=y(E,p),oe=yield new Xc(E,k,g).execute();return oe&&!g&&(delete oe.user._redirectEventId,yield E._persistUserIfCurrent(oe.user),yield E._setRedirectUser(null,p)),oe})).apply(this,arguments)}function Ta(v){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,S.Z)(function*(v){const p=Wa(`${v.uid}:::`);return v._redirectEventId=p,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),p})).apply(this,arguments)}class Su{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let g=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(p,E)&&(g=!0,this.sendToConsumer(p,E),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function id(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fc(v);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=p,g=!0)),g}sendToConsumer(p,g){var E;if(p.error&&!fc(p)){const k=(null===(E=p.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";g.onError(He(this.auth,k))}else g.onAuthEvent(p)}isEventForConsumer(p,g){const E=null===g.eventId||!!p.eventId&&p.eventId===g.eventId;return g.filter.includes(p.type)&&E}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Du(p))}saveEventToCache(p){this.cachedEventUids.add(Du(p)),this.lastProcessedEventTime=Date.now()}}function Du(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(p=>p).join("-")}function fc({type:v,error:p}){return"unknown"===v&&"auth/no-auth-event"===p?.code}function Qp(v){return Jp.apply(this,arguments)}function Jp(){return(Jp=(0,S.Z)(function*(v,p={}){return Tt(v,"GET","/v1/projects",p)})).apply(this,arguments)}const sd=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nh=/^https?/;function Ia(){return(Ia=(0,S.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:p}=yield Qp(v);for(const g of p)try{if(Au(g))return}catch{}Be(v,"unauthorized-domain")})).apply(this,arguments)}function Au(v){const p=Dt(),{protocol:g,hostname:E}=new URL(p);if(v.startsWith("chrome-extension://")){const oe=new URL(v);return""===oe.hostname&&""===E?"chrome-extension:"===g&&v.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===g&&oe.hostname===E}if(!nh.test(g))return!1;if(sd.test(v))return E===v;const k=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+k+"|"+k+")$","i").test(E)}const yf=new $e(3e4,6e4);function ta(){const v=ur().___jsl;if(v?.H)for(const p of Object.keys(v.H))if(v.H[p].r=v.H[p].r||[],v.H[p].L=v.H[p].L||[],v.H[p].r=[...v.H[p].L],v.CP)for(let g=0;g<v.CP.length;g++)v.CP[g]=null}let ad=null;const Kl=new $e(5e3,15e3),rh="__/auth/iframe",pc="emulator/auth/iframe",vf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wf(v){const p=v.config;De(p.authDomain,v,"auth-domain-config-required");const g=p.emulator?dt(p,pc):`https://${v.config.authDomain}/${rh}`,E={apiKey:p.apiKey,appName:v.name,v:he.SDK_VERSION},k=gc.get(v.config.apiHost);k&&(E.eid=k);const j=v._getFrameworks();return j.length&&(E.fw=j.join(",")),`${g}?${(0,q.xO)(E).slice(1)}`}function M(){return M=(0,S.Z)(function*(v){const p=yield function Wl(v){return ad=ad||function Oo(v){return new Promise((p,g)=>{var E,k,j;function oe(){ta(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{ta(),g(He(v,"network-request-failed"))},timeout:yf.get()})}if(null!==(k=null===(E=ur().gapi)||void 0===E?void 0:E.iframes)&&void 0!==k&&k.Iframe)p(gapi.iframes.getContext());else{if(null===(j=ur().gapi)||void 0===j||!j.load){const ye=_r("iframefcb");return ur()[ye]=()=>{gapi.load?oe():g(He(v,"network-request-failed"))},Ir(`https://apis.google.com/js/api.js?onload=${ye}`).catch(rt=>g(rt))}oe()}}).catch(p=>{throw ad=null,p})}(v),ad}(v),g=ur().gapi;return De(g,v,"internal-error"),p.open({where:document.body,url:wf(v),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vf,dontclear:!0},E=>new Promise(function(){var k=(0,S.Z)(function*(j,oe){yield E.restyle({setHideOnLeave:!1});const ye=He(v,"network-request-failed"),rt=ur().setTimeout(()=>{oe(ye)},Kl.get());function Ke(){ur().clearTimeout(rt),j(E)}E.ping(Ke).then(Ke,()=>{oe(ye)})});return function(j,oe){return k.apply(this,arguments)}}()))}),M.apply(this,arguments)}const L={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Y=500,ae=600,_e="_blank",Ae="http://localhost";class yt{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const fn="__/auth/handler",pn="emulator/auth/handler",Ns=encodeURIComponent("fac");function Lr(v,p,g,E,k,j){return Yl.apply(this,arguments)}function Yl(){return(Yl=(0,S.Z)(function*(v,p,g,E,k,j){De(v.config.authDomain,v,"auth-domain-config-required"),De(v.config.apiKey,v,"invalid-api-key");const oe={apiKey:v.config.apiKey,appName:v.name,authType:g,redirectUrl:E,v:he.SDK_VERSION,eventId:k};if(p instanceof Go){p.setDefaultLanguage(v.languageCode),oe.providerId=p.providerId||"",(0,q.xb)(p.getCustomParameters())||(oe.customParameters=JSON.stringify(p.getCustomParameters()));for(const[Lt,kt]of Object.entries(j||{}))oe[Lt]=kt}if(p instanceof js){const Lt=p.getScopes().filter(kt=>""!==kt);Lt.length>0&&(oe.scopes=Lt.join(","))}v.tenantId&&(oe.tid=v.tenantId);const ye=oe;for(const Lt of Object.keys(ye))void 0===ye[Lt]&&delete ye[Lt];const rt=yield v._getAppCheckToken(),Ke=rt?`#${Ns}=${encodeURIComponent(rt)}`:"";return`${function ld({config:v}){return v.emulator?dt(v,pn):`https://${v.authDomain}/${fn}`}(v)}?${(0,q.xO)(ye).slice(1)}${Ke}`})).apply(this,arguments)}const Xa="webStorageSupport",ao=class qs{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ws,this._completeRedirectFn=rd,this._overrideRedirectResult=gf}_openPopup(p,g,E,k){var j=this;return(0,S.Z)(function*(){var oe;_t(null===(oe=j.eventManagers[p._key()])||void 0===oe?void 0:oe.manager,"_initialize() not called before _openPopup()");const ye=yield Lr(p,g,E,Dt(),k);return function mt(v,p,g,E=Y,k=ae){const j=Math.max((window.screen.availHeight-k)/2,0).toString(),oe=Math.max((window.screen.availWidth-E)/2,0).toString();let ye="";const rt=Object.assign(Object.assign({},L),{width:E.toString(),height:k.toString(),top:j,left:oe}),Ke=(0,q.z$)().toLowerCase();g&&(ye=it(Ke)?_e:g),Ze(Ke)&&(p=p||Ae,rt.scrollbars="yes");const Lt=Object.entries(rt).reduce((Kn,[ra,Ou])=>`${Kn}${ra}=${Ou},`,"");if(function Bt(v=(0,q.z$)()){var p;return Le(v)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(Ke)&&"_self"!==ye)return function Zt(v,p){const g=document.createElement("a");g.href=v,g.target=p;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(E)}(p||"",ye),new yt(null);const kt=window.open(p||"",ye,Lt);De(kt,v,"popup-blocked");try{kt.focus()}catch{}return new yt(kt)}(p,ye,Wa())})()}_openRedirect(p,g,E,k){var j=this;return(0,S.Z)(function*(){return yield j._originValidation(p),function $l(v){ur().location.href=v}(yield Lr(p,g,E,Dt(),k)),new Promise(()=>{})})()}_initialize(p){const g=p._key();if(this.eventManagers[g]){const{manager:k,promise:j}=this.eventManagers[g];return k?Promise.resolve(k):(_t(j,"If manager is not set, promise should be"),j)}const E=this.initAndGetManager(p);return this.eventManagers[g]={promise:E},E.catch(()=>{delete this.eventManagers[g]}),E}initAndGetManager(p){var g=this;return(0,S.Z)(function*(){const E=yield function I(v){return M.apply(this,arguments)}(p),k=new Su(p);return E.register("authEvent",j=>(De(j?.authEvent,p,"invalid-auth-event"),{status:k.onEvent(j.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[p._key()]={manager:k},g.iframes[p._key()]=E,k})()}_isIframeWebStorageSupported(p,g){this.iframes[p._key()].send(Xa,{type:Xa},k=>{var j;const oe=null===(j=k?.[0])||void 0===j?void 0:j[Xa];void 0!==oe&&g(!!oe),Be(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const g=p._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function od(v){return Ia.apply(this,arguments)}(p)),this.originValidationPromises[g]}get _shouldInitProactively(){return zn()||ve()||Le()}};class mc{constructor(p){this.factorId=p}_process(p,g,E){switch(g.type){case"enroll":return this._finalizeEnroll(p,g.credential,E);case"signin":return this._finalizeSignIn(p,g.credential);default:return Yt("unexpected MultiFactorSessionType")}}}class Cf extends mc{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Cf(p)}_finalizeEnroll(p,g,E){return function Cr(v,p){return Tt(v,"POST","/v2/accounts/mfaEnrollment:finalize",sn(v,p))}(p,{idToken:g,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,g){return function pf(v,p){return Tt(v,"POST","/v2/accounts/mfaSignIn:finalize",sn(v,p))}(p,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ud=(()=>{class v{constructor(){}static assertion(g){return Cf._fromCredential(g)}}return v.FACTOR_ID="phone",v})();var yc="@firebase/auth";class sh{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var g=this;return(0,S.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const g=this.auth.onIdTokenChanged(E=>{p(E?.stsTokenManager.accessToken||null)});this.internalListeners.set(p,g),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const g=this.internalListeners.get(p);g&&(this.internalListeners.delete(p),g(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Al(){return window}(0,q.Pz)("authIdTokenMaxAge"),function Wy(v){(0,he._registerComponent)(new be.wA("auth",(p,{options:g})=>{const E=p.getProvider("app").getImmediate(),k=p.getProvider("heartbeat"),j=p.getProvider("app-check-internal"),{apiKey:oe,authDomain:ye}=E.options;De(oe&&!oe.includes(":"),"invalid-api-key",{appName:E.name});const rt={apiKey:oe,authDomain:ye,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Me(v)},Ke=new ps(E,k,j,rt);return function Wn(v,p){const g=p?.persistence||[],E=(Array.isArray(g)?g:[g]).map(ir);p?.errorMap&&v._updateErrorMap(p.errorMap),v._initializeWithPersistence(E,p?.popupRedirectResolver)}(Ke,g),Ke},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,g,E)=>{p.getProvider("auth-internal").initialize()})),(0,he._registerComponent)(new be.wA("auth-internal",p=>{const g=Gn(p.getProvider("auth").getImmediate());return new sh(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,he.registerVersion)(yc,"0.23.2",function bm(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,he.registerVersion)(yc,"0.23.2","esm2017")}("Browser");const Ef=2e3;function yr(){return yr=(0,S.Z)(function*(v,p,g){var E;const{BuildInfo:k}=Al();_t(p.sessionId,"AuthEvent did not contain a session ID");const j=yield function wc(v){return Tf.apply(this,arguments)}(p.sessionId),oe={};return Le()?oe.ibi=k.packageName:se()?oe.apn=k.packageName:Be(v,"operation-not-supported-in-this-environment"),k.displayName&&(oe.appDisplayName=k.displayName),oe.sessionId=j,Lr(v,g,p.type,void 0,null!==(E=p.eventId)&&void 0!==E?E:void 0,oe)}),yr.apply(this,arguments)}function Jl(){return(Jl=(0,S.Z)(function*(v){const{BuildInfo:p}=Al(),g={};Le()?g.iosBundleId=p.packageName:se()?g.androidPackageName=p.packageName:Be(v,"operation-not-supported-in-this-environment"),yield Qp(v,g)})).apply(this,arguments)}function lh(){return(lh=(0,S.Z)(function*(v,p,g){const{cordova:E}=Al();let k=()=>{};try{yield new Promise((j,oe)=>{let ye=null;function rt(){var kt;j();const Kn=null===(kt=E.plugins.browsertab)||void 0===kt?void 0:kt.close;"function"==typeof Kn&&Kn(),"function"==typeof g?.close&&g.close()}function Ke(){ye||(ye=window.setTimeout(()=>{oe(He(v,"redirect-cancelled-by-user"))},Ef))}function Lt(){"visible"===document?.visibilityState&&Ke()}p.addPassiveListener(rt),document.addEventListener("resume",Ke,!1),se()&&document.addEventListener("visibilitychange",Lt,!1),k=()=>{p.removePassiveListener(rt),document.removeEventListener("resume",Ke,!1),document.removeEventListener("visibilitychange",Lt,!1),ye&&window.clearTimeout(ye)}})}finally{k()}})).apply(this,arguments)}function Tf(){return(Tf=(0,S.Z)(function*(v){const p=function Sm(v){if(_t(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(v);const p=new ArrayBuffer(v.length),g=new Uint8Array(p);for(let E=0;E<v.length;E++)g[E]=v.charCodeAt(E);return g}(v),g=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(g)).map(k=>k.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const uh=20;class Cc extends Su{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(p)),super.onEvent(p)}initialized(){var p=this;return(0,S.Z)(function*(){yield p.initPromise})()}}function If(v){return Xl.apply(this,arguments)}function Xl(){return(Xl=(0,S.Z)(function*(v){const p=yield dh()._get(cd(v));return p&&(yield dh()._remove(cd(v))),p})).apply(this,arguments)}function eg(){const v=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<uh;g++){const E=Math.floor(Math.random()*p.length);v.push(p.charAt(E))}return v.join("")}function dh(){return ir(un)}function cd(v){return re("authEvent",v.config.apiKey,v.name)}function Mu(v){if(!v?.includes("?"))return{};const[p,...g]=v.split("?");return(0,q.zd)(g.join("?"))}const dd=class Sf{constructor(){this._redirectPersistence=ws,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=rd,this._overrideRedirectResult=gf}_initialize(p){var g=this;return(0,S.Z)(function*(){const E=p._key();let k=g.eventManagers.get(E);return k||(k=new Cc(p),g.eventManagers.set(E,k),g.attachCallbackListeners(p,k)),k})()}_openPopup(p){Be(p,"operation-not-supported-in-this-environment")}_openRedirect(p,g,E,k){var j=this;return(0,S.Z)(function*(){!function Im(v){var p,g,E,k,j,oe,ye,rt,Ke,Lt;const kt=Al();De("function"==typeof(null===(p=kt?.universalLinks)||void 0===p?void 0:p.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),De(typeof(null===(g=kt?.BuildInfo)||void 0===g?void 0:g.packageName)<"u",v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),De("function"==typeof(null===(j=null===(k=null===(E=kt?.cordova)||void 0===E?void 0:E.plugins)||void 0===k?void 0:k.browsertab)||void 0===j?void 0:j.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),De("function"==typeof(null===(rt=null===(ye=null===(oe=kt?.cordova)||void 0===oe?void 0:oe.plugins)||void 0===ye?void 0:ye.browsertab)||void 0===rt?void 0:rt.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),De("function"==typeof(null===(Lt=null===(Ke=kt?.cordova)||void 0===Ke?void 0:Ke.InAppBrowser)||void 0===Lt?void 0:Lt.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const oe=yield j._initialize(p);yield oe.initialized(),oe.resetRedirect(),function Wp(){No.clear()}(),yield j._originValidation(p);const ye=function ch(v,p,g=null){return{type:p,eventId:g,urlResponse:null,sessionId:eg(),postBody:null,tenantId:v.tenantId,error:He(v,"no-auth-event")}}(p,E,k);yield function Dm(v,p){return dh()._set(cd(v),p)}(p,ye);const rt=yield function Xp(v,p,g){return yr.apply(this,arguments)}(p,ye,g),Ke=yield function ah(v){const{cordova:p}=Al();return new Promise(g=>{p.plugins.browsertab.isAvailable(E=>{let k=null;E?p.plugins.browsertab.openUrl(v):k=p.InAppBrowser.open(v,function Ye(v=(0,q.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),g(k)})})}(rt);return function Ky(v,p,g){return lh.apply(this,arguments)}(p,oe,Ke)})()}_isIframeWebStorageSupported(p,g){throw new Error("Method not implemented.")}_originValidation(p){const g=p._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function oh(v){return Jl.apply(this,arguments)}(p)),this.originValidationPromises[g]}attachCallbackListeners(p,g){const{universalLinks:E,handleOpenURL:k,BuildInfo:j}=Al(),oe=setTimeout((0,S.Z)(function*(){yield If(p),g.onEvent(xm())}),500),ye=function(){var Lt=(0,S.Z)(function*(kt){clearTimeout(oe);const Kn=yield If(p);let ra=null;Kn&&kt?.url&&(ra=function Am(v,p){var g,E;const k=function tg(v){const p=Mu(v),g=p.link?decodeURIComponent(p.link):void 0,E=Mu(g).link,k=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return Mu(k).link||k||E||g||v}(p);if(k.includes("/__/auth/callback")){const j=Mu(k),oe=j.firebaseError?function hh(v){try{return JSON.parse(v)}catch{return null}}(decodeURIComponent(j.firebaseError)):null,ye=null===(E=null===(g=oe?.code)||void 0===g?void 0:g.split("auth/"))||void 0===E?void 0:E[1],rt=ye?He(ye):null;return rt?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:rt,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:k,postBody:null}}return null}(Kn,kt.url)),g.onEvent(ra||xm())});return function(Kn){return Lt.apply(this,arguments)}}();typeof E<"u"&&"function"==typeof E.subscribe&&E.subscribe(null,ye);const rt=k,Ke=`${j.packageName.toLowerCase()}://`;Al().handleOpenURL=function(){var Lt=(0,S.Z)(function*(kt){if(kt.toLowerCase().startsWith(Ke)&&ye({url:kt}),"function"==typeof rt)try{rt(kt)}catch(Kn){console.error(Kn)}});return function(kt){return Lt.apply(this,arguments)}}()}};function xm(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:He("no-auth-event")}}const Df=1e3;function xl(){var v;return(null===(v=self?.location)||void 0===v?void 0:v.protocol)||null}function bc(v=(0,q.z$)()){return!("file:"!==xl()&&"ionic:"!==xl()&&"capacitor:"!==xl()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function bi(){try{const v=self.localStorage,p=Wa();if(v)return v.setItem(p,"1"),v.removeItem(p),!function Jy(v=(0,q.z$)()){return function Ml(){return(0,q.w1)()&&11===document?.documentMode}()||function gh(v=(0,q.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,q.hl)()}catch{return xf()&&(0,q.hl)()}return!1}function xf(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function mh(){return(function ph(){return"http:"===xl()||"https:"===xl()}()||(0,q.ru)()||bc())&&!function Af(){return(0,q.b$)()||(0,q.UG)()}()&&bi()&&!xf()}function Pm(){return bc()&&typeof document<"u"}function Ec(){return(Ec=(0,S.Z)(function*(){return!!Pm()&&new Promise(v=>{const p=setTimeout(()=>{v(!1)},Df);document.addEventListener("deviceready",()=>{clearTimeout(p),v(!0)})})})).apply(this,arguments)}const lo={LOCAL:"local",NONE:"none",SESSION:"session"},eu=De,Pf="persistence";function Rf(v){return ng.apply(this,arguments)}function ng(){return(ng=(0,S.Z)(function*(v){yield v._initializationPromise;const p=Nf(),g=re(Pf,v.config.apiKey,v.name);p&&p.setItem(g,v._getPersistence())})).apply(this,arguments)}function Nf(){var v;try{return(null===(v=function Mf(){return typeof window<"u"?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch{return null}}const _h=De;class Os{constructor(){this.browserResolver=ir(ao),this.cordovaResolver=ir(dd),this.underlyingResolver=null,this._redirectPersistence=ws,this._completeRedirectFn=rd,this._overrideRedirectResult=gf}_initialize(p){var g=this;return(0,S.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,g,E,k){var j=this;return(0,S.Z)(function*(){return yield j.selectUnderlyingResolver(),j.assertedUnderlyingResolver._openPopup(p,g,E,k)})()}_openRedirect(p,g,E,k){var j=this;return(0,S.Z)(function*(){return yield j.selectUnderlyingResolver(),j.assertedUnderlyingResolver._openRedirect(p,g,E,k)})()}_isIframeWebStorageSupported(p,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,g)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return Pm()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return _h(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,S.Z)(function*(){if(p.underlyingResolver)return;const g=yield function Rm(){return Ec.apply(this,arguments)}();p.underlyingResolver=g?p.cordovaResolver:p.browserResolver})()}}function tu(v){return v.unwrap()}function Om(v){return km(v)}function km(v){const{_tokenResponse:p}=v instanceof q.ZR?v.customData:v;if(!p)return null;if(!(v instanceof q.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return T.credentialFromResult(v);const g=p.providerId;if(!g||g===Ie.PASSWORD)return null;let E;switch(g){case Ie.GOOGLE:E=ma;break;case Ie.FACEBOOK:E=hl;break;case Ie.GITHUB:E=Ll;break;case Ie.TWITTER:E=Ko;break;default:const{oauthIdToken:k,oauthAccessToken:j,oauthTokenSecret:oe,pendingToken:ye,nonce:rt}=p;return j||oe||k||ye?ye?g.startsWith("saml.")?eo._create(g,ye):Hr._fromParams({providerId:g,signInMethod:g,pendingToken:ye,idToken:k,accessToken:j}):new Xs(g).credential({idToken:k,accessToken:j,rawNonce:rt}):null}return v instanceof q.ZR?E.credentialFromError(v):E.credentialFromResult(v)}function uo(v,p){return p.catch(g=>{throw g instanceof q.ZR&&function kf(v,p){var g;const E=null===(g=p.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===p?.code)p.resolver=new Fm(v,function Dr(v,p){var g;const E=(0,q.m9)(v),k=p;return De(p.customData.operationType,E,"argument-error"),De(null===(g=k.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,E,"argument-error"),Tn._fromError(E,k)}(v,p));else if(E){const k=km(p),j=p;k&&(j.credential=k,j.tenantId=E.tenantId||void 0,j.email=E.email||void 0,j.phoneNumber=E.phoneNumber||void 0)}}(v,g),g}).then(g=>{const k=g.user;return{operationType:g.operationType,credential:Om(g),additionalUserInfo:za(g),user:el.getOrCreate(k)}})}function Tc(v,p){return yh.apply(this,arguments)}function yh(){return(yh=(0,S.Z)(function*(v,p){const g=yield p;return{verificationId:g.verificationId,confirm:E=>uo(v,g.confirm(E))}})).apply(this,arguments)}class Fm{constructor(p,g){this.resolver=g,this.auth=function Of(v){return v.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return uo(tu(this.auth),this.resolver.resolveSignIn(p))}}class el{constructor(p){this._delegate=p,this.multiFactor=function rs(v){const p=(0,q.m9)(v);return zr.has(p)||zr.set(p,kr._fromUser(p)),zr.get(p)}(p)}static getOrCreate(p){return el.USER_MAP.has(p)||el.USER_MAP.set(p,new el(p)),el.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var g=this;return(0,S.Z)(function*(){return uo(g.auth,Vl(g._delegate,p))})()}linkWithPhoneNumber(p,g){var E=this;return(0,S.Z)(function*(){return Tc(E.auth,function zl(v,p,g){return El.apply(this,arguments)}(E._delegate,p,g))})()}linkWithPopup(p){var g=this;return(0,S.Z)(function*(){return uo(g.auth,function Ts(v,p,g){return oo.apply(this,arguments)}(g._delegate,p,Os))})()}linkWithRedirect(p){var g=this;return(0,S.Z)(function*(){return yield Rf(Gn(g.auth)),Kp(g._delegate,p,Os)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var g=this;return(0,S.Z)(function*(){return uo(g.auth,Ms(g._delegate,p))})()}reauthenticateWithPhoneNumber(p,g){return Tc(this.auth,function Eu(v,p,g){return Tl.apply(this,arguments)}(this._delegate,p,g))}reauthenticateWithPopup(p){return uo(this.auth,function Ar(v,p,g){return Es.apply(this,arguments)}(this._delegate,p,Os))}reauthenticateWithRedirect(p){var g=this;return(0,S.Z)(function*(){return yield Rf(Gn(g.auth)),td(g._delegate,p,Os)})()}sendEmailVerification(p){return function Zl(v,p){return vl.apply(this,arguments)}(this._delegate,p)}unlink(p){var g=this;return(0,S.Z)(function*(){return yield function pl(v,p){return $r.apply(this,arguments)}(g._delegate,p),g})()}updateEmail(p){return function di(v,p){return Hn((0,q.m9)(v),p,null)}(this._delegate,p)}updatePassword(p){return function Pi(v,p){return Hn((0,q.m9)(v),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function Il(v,p){return b.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function vs(v,p){return Ao.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,g){return function pu(v,p,g){return wn.apply(this,arguments)}(this._delegate,p,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}el.USER_MAP=new WeakMap;const Ic=De;let rg=(()=>{class v{constructor(g,E){if(this.app=g,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:k}=g.options;Ic(k,"invalid-api-key",{appName:g.name}),Ic(k,"invalid-api-key",{appName:g.name});const j=typeof window<"u"?Os:void 0;this._delegate=E.initialize({options:{persistence:Pl(k,g.name),popupRedirectResolver:j}}),this._delegate._updateErrorMap(ht),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?el.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,E){!function vo(v,p,g){const E=Gn(v);De(E._canInitEmulator,E,"emulator-config-failed"),De(/^https?:\/\//.test(p),E,"invalid-emulator-scheme");const k=!!g?.disableWarnings,j=Zs(p),{host:oe,port:ye}=function En(v){const p=Zs(v),g=/(\/\/)?([^?#/]+)/.exec(v.substr(p.length));if(!g)return{host:"",port:null};const E=g[2].split("@").pop()||"",k=/^(\[[^\]]+\])(:|$)/.exec(E);if(k){const j=k[1];return{host:j,port:ca(E.substr(j.length+1))}}{const[j,oe]=E.split(":");return{host:j,port:ca(oe)}}}(p);E.config.emulator={url:`${j}//${oe}${null===ye?"":`:${ye}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:oe,port:ye,protocol:j.replace(":",""),options:Object.freeze({disableWarnings:k})}),k||function jo(){function v(){const p=document.createElement("p"),g=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,g,E)}applyActionCode(g){return function Bl(v,p){return Bi.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return Za(this._delegate,g)}confirmPasswordReset(g,E){return function hu(v,p,g){return on.apply(this,arguments)}(this._delegate,g,E)}createUserWithEmailAndPassword(g,E){var k=this;return(0,S.Z)(function*(){return uo(k._delegate,function Qo(v,p,g){return ts.apply(this,arguments)}(k._delegate,g,E))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function Ca(v,p){return yl.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function nc(v,p){return"EMAIL_SIGNIN"===Js.parseLink(p)?.operation}(0,g)}getRedirectResult(){var g=this;return(0,S.Z)(function*(){Ic(mh(),g._delegate,"operation-not-supported-in-this-environment");const E=yield function mf(v,p){return _f.apply(this,arguments)}(g._delegate,Os);return E?uo(g._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function Mm(v,p){Gn(v)._logFramework(p)}(this._delegate,g)}onAuthStateChanged(g,E,k){const{next:j,error:oe,complete:ye}=Pu(g,E,k);return this._delegate.onAuthStateChanged(j,oe,ye)}onIdTokenChanged(g,E,k){const{next:j,error:oe,complete:ye}=Pu(g,E,k);return this._delegate.onIdTokenChanged(j,oe,ye)}sendSignInLinkToEmail(g,E){return function ja(v,p,g){return _l.apply(this,arguments)}(this._delegate,g,E)}sendPasswordResetEmail(g,E){return function ml(v,p,g){return Vi.apply(this,arguments)}(this._delegate,g,E||void 0)}setPersistence(g){var E=this;return(0,S.Z)(function*(){let k;switch(function zs(v,p){eu(Object.values(lo).includes(p),v,"invalid-persistence-type"),(0,q.b$)()?eu(p!==lo.SESSION,v,"unsupported-persistence-type"):(0,q.UG)()?eu(p===lo.NONE,v,"unsupported-persistence-type"):xf()?eu(p===lo.NONE||p===lo.LOCAL&&(0,q.hl)(),v,"unsupported-persistence-type"):eu(p===lo.NONE||bi(),v,"unsupported-persistence-type")}(E._delegate,g),g){case lo.SESSION:k=ws;break;case lo.LOCAL:k=(yield ir(ss)._isAvailable())?ss:un;break;case lo.NONE:k=Zr;break;default:return Be("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(k)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return uo(this._delegate,function yi(v){return Va.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return uo(this._delegate,no(this._delegate,g))}signInWithCustomToken(g){return uo(this._delegate,function Oe(v,p){return hn.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,E){return uo(this._delegate,function fu(v,p,g){return no((0,q.m9)(v),ga.credential(p,g))}(this._delegate,g,E))}signInWithEmailLink(g,E){return uo(this._delegate,function qr(v,p,g){return So.apply(this,arguments)}(this._delegate,g,E))}signInWithPhoneNumber(g,E){return Tc(this._delegate,function bu(v,p,g){return ea.apply(this,arguments)}(this._delegate,g,E))}signInWithPopup(g){var E=this;return(0,S.Z)(function*(){return Ic(mh(),E._delegate,"operation-not-supported-in-this-environment"),uo(E._delegate,function It(v,p,g){return Nn.apply(this,arguments)}(E._delegate,g,Os))})()}signInWithRedirect(g){var E=this;return(0,S.Z)(function*(){return Ic(mh(),E._delegate,"operation-not-supported-in-this-environment"),yield Rf(E._delegate),Xd(E._delegate,g,Os)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function Mi(v,p){return Ps.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=lo,v})();function Pu(v,p,g){let E=v;"function"!=typeof v&&({next:E,error:p,complete:g}=v);const k=E;return{next:oe=>k(oe&&el.getOrCreate(oe)),error:p,complete:g}}function Pl(v,p){const g=function Nm(v,p){const g=Nf();if(!g)return[];const E=re(Pf,v,p);switch(g.getItem(E)){case lo.NONE:return[Zr];case lo.LOCAL:return[ss,ws];case lo.SESSION:return[ws];default:return[]}}(v,p);if(typeof self<"u"&&!g.includes(ss)&&g.push(ss),typeof window<"u")for(const E of[un,ws])g.includes(E)||g.push(E);return g.includes(Zr)||g.push(Zr),g}class Ru{constructor(){this.providerId="phone",this._delegate=new T(tu(o.Z.auth()))}static credential(p,g){return T.credential(p,g)}verifyPhoneNumber(p,g){return this._delegate.verifyPhoneNumber(p,g)}unwrap(){return this._delegate}}Ru.PHONE_SIGN_IN_METHOD=T.PHONE_SIGN_IN_METHOD,Ru.PROVIDER_ID=T.PROVIDER_ID;const Nu=De;class ig{constructor(p,g,E=o.Z.app()){var k;Nu(null===(k=E.options)||void 0===k?void 0:k.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new Cu(p,g,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Xy(v){v.INTERNAL.registerComponent(new be.wA("auth-compat",p=>{const g=p.getProvider("app-compat").getImmediate(),E=p.getProvider("auth");return new rg(g,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:de_EMAIL_SIGNIN,PASSWORD_RESET:de_PASSWORD_RESET,RECOVER_EMAIL:de_RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:de_REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:de_VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:de_VERIFY_EMAIL}},EmailAuthProvider:ga,FacebookAuthProvider:hl,GithubAuthProvider:Ll,GoogleAuthProvider:ma,OAuthProvider:Xs,SAMLAuthProvider:Wo,PhoneAuthProvider:Ru,PhoneMultiFactorGenerator:ud,RecaptchaVerifier:ig,TwitterAuthProvider:Ko,Auth:rg,AuthCredential:gs,Error:q.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.4.2")}(o.Z)},5861:(Pt,Re,B)=>{function S(q,he,ce,me,be,Se,Ie){try{var te=q[Se](Ie),ne=te.value}catch(de){return void ce(de)}te.done?he(ne):Promise.resolve(ne).then(me,be)}function o(q){return function(){var he=this,ce=arguments;return new Promise(function(me,be){var Se=q.apply(he,ce);function Ie(ne){S(Se,me,be,Ie,te,"next",ne)}function te(ne){S(Se,me,be,Ie,te,"throw",ne)}Ie(void 0)})}}B.d(Re,{Z:()=>o})}},Pt=>{Pt(Pt.s=5645)}]);